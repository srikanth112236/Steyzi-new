const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TrialBedLimitModal-eI3cY87j.js","assets/vendor-BtV8Tt9P.js","assets/ui-Bo3XYz1Y.js","assets/redux-NMqeuZZ_.js","assets/router-jOJM27_b.js","assets/charts-BAHvd_uq.js","assets/allocationLetterGenerator-q1nh4Y7H.js"])))=>i.map(i=>d[i]);
import{r as h,a as Cl,b as Ke,g as s2,R as Mc,c as xg,d as pE}from"./vendor-BtV8Tt9P.js";import{c as zr,a as Iu,b as bE,d as yE,p as vE,e as jE,u as cr,f as He,_ as At,t as wE,g as pe,h as Gt,i as NE,j as de,P as SE}from"./redux-NMqeuZZ_.js";import{u as Ms,a as wo,L as ms,O as Ou,b as r2,c as Nx,N as T0,R as CE,d as Ve,B as kE}from"./router-jOJM27_b.js";import{A as vt,m as ae,S as is,C as ut,X as ct,a as Rt,R as wt,L as ea,b as vn,c as ra,d as Ua,H as Ia,B as Ie,U as Je,e as Cr,f as a2,P as Ur,M as Rs,g as Ks,F as n2,h as Jt,T as _t,i as ys,D as Ft,j as Es,k as zn,l as Ln,n as jt,o as Fs,p as Bc,Z as xi,G as Iv,q as oi,r as nc,s as Be,I as kl,t as sr,u as as,v as Pr,w as Ze,x as Za,y as Cs,z as EE,E as Pa,J as fb,K as ol,Q as kd,N as ic,O as ns,V as PE,W as Tr,Y as Er,_ as rr,$ as ot,a0 as vr,a1 as xr,a2 as _0,a3 as hg,a4 as xt,a5 as Os,a6 as aa,a7 as Jd,a8 as zh,a9 as hi,aa as no,ab as fa,ac as io,ad as fg,ae as Bi,af as Yt,ag as TE,ah as xs,ai as Ov,aj as _E,ak as gg,al as pg,am as Mv,an as fm,ao as AE,ap as Qd,aq as bg,ar as i2,as as l2,at as o2,au as RE,av as FE,aw as DE,ax as IE,ay as OE,az as ME,aA as BE,aB as LE,aC as gm,aD as Fa,aE as Io,aF as $E,aG as c2,aH as UE,aI as Sx,aJ as pm,aK as ga,aL as d2,aM as yg,aN as Cx,aO as u2,aP as HE,aQ as WE,aR as VE,aS as zE,aT as m2,aU as GE,aV as Bv,aW as qE,aX as Gh,aY as qh}from"./ui-Bo3XYz1Y.js";import{C as YE,a as KE,L as XE,P as JE,b as QE,B as ZE,A as eP,p as tP,c as sP,d as rP,i as aP,e as nP,D as iP,f as lP,g as oP}from"./charts-BAHvd_uq.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var x2={exports:{}},kx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cP=h,dP=Symbol.for("react.element"),uP=Symbol.for("react.fragment"),mP=Object.prototype.hasOwnProperty,xP=cP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hP={key:!0,ref:!0,__self:!0,__source:!0};function h2(t,s,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)mP.call(s,a)&&!hP.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:dP,type:t,key:i,ref:l,props:n,_owner:xP.current}}kx.Fragment=uP;kx.jsx=h2;kx.jsxs=h2;x2.exports=kx;var e=x2.exports,A0={},Lv=Cl;A0.createRoot=Lv.createRoot,A0.hydrateRoot=Lv.hydrateRoot;let fP={data:""},gP=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||fP},pP=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bP=/\/\*[^]*?\*\/|  +/g,$v=/\n+/g,ll=(t,s)=>{let r="",a="",n="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+l+";":a+=i[1]=="f"?ll(l,i):i+"{"+ll(l,i[1]=="k"?"":s)+"}":typeof l=="object"?a+=ll(l,s?s.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=ll.p?ll.p(i,l):i+":"+l+";")}return r+(s&&n?s+"{"+n+"}":n)+a},Pi={},f2=t=>{if(typeof t=="object"){let s="";for(let r in t)s+=r+f2(t[r]);return s}return t},yP=(t,s,r,a,n)=>{let i=f2(t),l=Pi[i]||(Pi[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Pi[l]){let c=i!==t?t:(u=>{let d,m,x=[{}];for(;d=pP.exec(u.replace(bP,""));)d[4]?x.shift():d[3]?(m=d[3].replace($v," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][d[1]]=d[2].replace($v," ").trim();return x[0]})(t);Pi[l]=ll(n?{["@keyframes "+l]:c}:c,r?"":"."+l)}let o=r&&Pi.g?Pi.g:null;return r&&(Pi.g=Pi[l]),((c,u,d,m)=>{m?u.data=u.data.replace(m,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Pi[l],s,a,o),l},vP=(t,s,r)=>t.reduce((a,n,i)=>{let l=s[i];if(l&&l.call){let o=l(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":ll(o,""):o===!1?"":o}return a+n+(l??"")},"");function Ex(t){let s=this||{},r=t.call?t(s.p):t;return yP(r.unshift?r.raw?vP(r,[].slice.call(arguments,1),s.p):r.reduce((a,n)=>Object.assign(a,n&&n.call?n(s.p):n),{}):r,gP(s.target),s.g,s.o,s.k)}let g2,vg,jg;Ex.bind({g:1});let Li=Ex.bind({k:1});function jP(t,s,r,a){ll.p=s,g2=t,vg=r,jg=a}function El(t,s){let r=this||{};return function(){let a=arguments;function n(i,l){let o=Object.assign({},i),c=o.className||n.className;r.p=Object.assign({theme:vg&&vg()},o),r.o=/ *go\d+/.test(c),o.className=Ex.apply(r,a)+(c?" "+c:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),jg&&u[0]&&jg(o),g2(u,o)}return n}}var wP=t=>typeof t=="function",R0=(t,s)=>wP(t)?t(s):t,NP=(()=>{let t=0;return()=>(++t).toString()})(),p2=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),SP=20,gb="default",b2=(t,s)=>{let{toastLimit:r}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===s.toast.id?{...l,...s.toast}:l)};case 2:let{toast:a}=s;return b2(t,{type:t.toasts.find(l=>l.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=s;return{...t,toasts:t.toasts.map(l=>l.id===n||n===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let i=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Jm=[],y2={toasts:[],pausedAt:void 0,settings:{toastLimit:SP}},ai={},v2=(t,s=gb)=>{ai[s]=b2(ai[s]||y2,t),Jm.forEach(([r,a])=>{r===s&&a(ai[s])})},j2=t=>Object.keys(ai).forEach(s=>v2(t,s)),CP=t=>Object.keys(ai).find(s=>ai[s].toasts.some(r=>r.id===t)),Px=(t=gb)=>s=>{v2(s,t)},kP={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EP=(t={},s=gb)=>{let[r,a]=h.useState(ai[s]||y2),n=h.useRef(ai[s]);h.useEffect(()=>(n.current!==ai[s]&&a(ai[s]),Jm.push([s,a]),()=>{let l=Jm.findIndex(([o])=>o===s);l>-1&&Jm.splice(l,1)}),[s]);let i=r.toasts.map(l=>{var o,c,u;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((o=t[l.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((c=t[l.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||kP[l.type],style:{...t.style,...(u=t[l.type])==null?void 0:u.style,...l.style}}});return{...r,toasts:i}},PP=(t,s="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||NP()}),Mu=t=>(s,r)=>{let a=PP(s,t,r);return Px(a.toasterId||CP(a.id))({type:2,toast:a}),a.id},rs=(t,s)=>Mu("blank")(t,s);rs.error=Mu("error");rs.success=Mu("success");rs.loading=Mu("loading");rs.custom=Mu("custom");rs.dismiss=(t,s)=>{let r={type:3,toastId:t};s?Px(s)(r):j2(r)};rs.dismissAll=t=>rs.dismiss(void 0,t);rs.remove=(t,s)=>{let r={type:4,toastId:t};s?Px(s)(r):j2(r)};rs.removeAll=t=>rs.remove(void 0,t);rs.promise=(t,s,r)=>{let a=rs.loading(s.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=s.success?R0(s.success,n):void 0;return i?rs.success(i,{id:a,...r,...r==null?void 0:r.success}):rs.dismiss(a),n}).catch(n=>{let i=s.error?R0(s.error,n):void 0;i?rs.error(i,{id:a,...r,...r==null?void 0:r.error}):rs.dismiss(a)}),t};var TP=1e3,_P=(t,s="default")=>{let{toasts:r,pausedAt:a}=EP(t,s),n=h.useRef(new Map).current,i=h.useCallback((m,x=TP)=>{if(n.has(m))return;let g=setTimeout(()=>{n.delete(m),l({type:4,toastId:m})},x);n.set(m,g)},[]);h.useEffect(()=>{if(a)return;let m=Date.now(),x=r.map(g=>{if(g.duration===1/0)return;let p=(g.duration||0)+g.pauseDuration-(m-g.createdAt);if(p<0){g.visible&&rs.dismiss(g.id);return}return setTimeout(()=>rs.dismiss(g.id,s),p)});return()=>{x.forEach(g=>g&&clearTimeout(g))}},[r,a,s]);let l=h.useCallback(Px(s),[s]),o=h.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=h.useCallback((m,x)=>{l({type:1,toast:{id:m,height:x}})},[l]),u=h.useCallback(()=>{a&&l({type:6,time:Date.now()})},[a,l]),d=h.useCallback((m,x)=>{let{reverseOrder:g=!1,gutter:p=8,defaultPosition:f}=x||{},b=r.filter(N=>(N.position||f)===(m.position||f)&&N.height),y=b.findIndex(N=>N.id===m.id),v=b.filter((N,S)=>S<y&&N.visible).length;return b.filter(N=>N.visible).slice(...g?[v+1]:[0,v]).reduce((N,S)=>N+(S.height||0)+p,0)},[r]);return h.useEffect(()=>{r.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let x=n.get(m.id);x&&(clearTimeout(x),n.delete(m.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:u,calculateOffset:d}}},AP=Li`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,RP=Li`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FP=Li`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,DP=El("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${RP} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FP} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,IP=Li`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,OP=El("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${IP} 1s linear infinite;
`,MP=Li`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BP=Li`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,LP=El("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BP} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$P=El("div")`
  position: absolute;
`,UP=El("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HP=Li`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WP=El("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HP} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,VP=({toast:t})=>{let{icon:s,type:r,iconTheme:a}=t;return s!==void 0?typeof s=="string"?h.createElement(WP,null,s):s:r==="blank"?null:h.createElement(UP,null,h.createElement(OP,{...a}),r!=="loading"&&h.createElement($P,null,r==="error"?h.createElement(DP,{...a}):h.createElement(LP,{...a})))},zP=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,GP=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,qP="0%{opacity:0;} 100%{opacity:1;}",YP="0%{opacity:1;} 100%{opacity:0;}",KP=El("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,XP=El("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JP=(t,s)=>{let r=t.includes("top")?1:-1,[a,n]=p2()?[qP,YP]:[zP(r),GP(r)];return{animation:s?`${Li(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Li(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},QP=h.memo(({toast:t,position:s,style:r,children:a})=>{let n=t.height?JP(t.position||s||"top-center",t.visible):{opacity:0},i=h.createElement(VP,{toast:t}),l=h.createElement(XP,{...t.ariaProps},R0(t.message,t));return h.createElement(KP,{className:t.className,style:{...n,...r,...t.style}},typeof a=="function"?a({icon:i,message:l}):h.createElement(h.Fragment,null,i,l))});jP(h.createElement);var ZP=({id:t,className:s,style:r,onHeightUpdate:a,children:n})=>{let i=h.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;a(t,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return h.createElement("div",{ref:i,className:s,style:r},n)},eT=(t,s)=>{let r=t.includes("top"),a=r?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:p2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(r?1:-1)}px)`,...a,...n}},tT=Ex`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bm=16,sT=({reverseOrder:t,position:s="top-center",toastOptions:r,gutter:a,children:n,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:u}=_P(r,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:bm,left:bm,right:bm,bottom:bm,pointerEvents:"none",...l},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let m=d.position||s,x=u.calculateOffset(d,{reverseOrder:t,gutter:a,defaultPosition:s}),g=eT(m,x);return h.createElement(ZP,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?tT:"",style:g},d.type==="custom"?R0(d.message,d):n?n(d):h.createElement(QP,{toast:d,position:m}))}))},M=rs,pb={},bb={};bb.__esModule=!0;bb.default=nT;function Qm(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qm=function(r){return typeof r}:Qm=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qm(t)}function Yh(){}var rT={getItem:Yh,setItem:Yh,removeItem:Yh};function aT(t){if((typeof self>"u"?"undefined":Qm(self))!=="object"||!(t in self))return!1;try{var s=self[t],r="redux-persist ".concat(t," test");s.setItem(r,"test"),s.getItem(r),s.removeItem(r)}catch{return!1}return!0}function nT(t){var s="".concat(t,"Storage");return aT(s)?self[s]:rT}pb.__esModule=!0;pb.default=oT;var iT=lT(bb);function lT(t){return t&&t.__esModule?t:{default:t}}function oT(t){var s=(0,iT.default)(t);return{getItem:function(a){return new Promise(function(n,i){n(s.getItem(a))})},setItem:function(a,n){return new Promise(function(i,l){i(s.setItem(a,n))})},removeItem:function(a){return new Promise(function(n,i){n(s.removeItem(a))})}}}var w2=void 0,cT=dT(pb);function dT(t){return t&&t.__esModule?t:{default:t}}var uT=(0,cT.default)("local");w2=uT;function N2(t,s){return function(){return t.apply(s,arguments)}}const{toString:mT}=Object.prototype,{getPrototypeOf:yb}=Object,{iterator:Tx,toStringTag:S2}=Symbol,_x=(t=>s=>{const r=mT.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=t=>(t=t.toLowerCase(),s=>_x(s)===t),Ax=t=>s=>typeof s===t,{isArray:Lc}=Array,yc=Ax("undefined");function Bu(t){return t!==null&&!yc(t)&&t.constructor!==null&&!yc(t.constructor)&&Oa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const C2=Gn("ArrayBuffer");function xT(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&C2(t.buffer),s}const hT=Ax("string"),Oa=Ax("function"),k2=Ax("number"),Lu=t=>t!==null&&typeof t=="object",fT=t=>t===!0||t===!1,Zm=t=>{if(_x(t)!=="object")return!1;const s=yb(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(S2 in t)&&!(Tx in t)},gT=t=>{if(!Lu(t)||Bu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},pT=Gn("Date"),bT=Gn("File"),yT=Gn("Blob"),vT=Gn("FileList"),jT=t=>Lu(t)&&Oa(t.pipe),wT=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Oa(t.append)&&((s=_x(t))==="formdata"||s==="object"&&Oa(t.toString)&&t.toString()==="[object FormData]"))},NT=Gn("URLSearchParams"),[ST,CT,kT,ET]=["ReadableStream","Request","Response","Headers"].map(Gn),PT=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $u(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),Lc(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(Bu(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(a=0;a<l;a++)o=i[a],s.call(null,t[o],o,t)}}function E2(t,s){if(Bu(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const Yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,P2=t=>!yc(t)&&t!==Yl;function wg(){const{caseless:t,skipUndefined:s}=P2(this)&&this||{},r={},a=(n,i)=>{const l=t&&E2(r,i)||i;Zm(r[l])&&Zm(n)?r[l]=wg(r[l],n):Zm(n)?r[l]=wg({},n):Lc(n)?r[l]=n.slice():(!s||!yc(n))&&(r[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&$u(arguments[n],a);return r}const TT=(t,s,r,{allOwnKeys:a}={})=>($u(s,(n,i)=>{r&&Oa(n)?t[i]=N2(n,r):t[i]=n},{allOwnKeys:a}),t),_T=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),AT=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},RT=(t,s,r,a)=>{let n,i,l;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!a||a(l,t,s))&&!o[l]&&(s[l]=t[l],o[l]=!0);t=r!==!1&&yb(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},FT=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},DT=t=>{if(!t)return null;if(Lc(t))return t;let s=t.length;if(!k2(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},IT=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&yb(Uint8Array)),OT=(t,s)=>{const a=(t&&t[Tx]).call(t);let n;for(;(n=a.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},MT=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},BT=Gn("HTMLFormElement"),LT=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),Uv=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),$T=Gn("RegExp"),T2=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};$u(r,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(a[i]=l||n)}),Object.defineProperties(t,a)},UT=t=>{T2(t,(s,r)=>{if(Oa(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(Oa(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},HT=(t,s)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return Lc(t)?a(t):a(String(t).split(s)),r},WT=()=>{},VT=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function zT(t){return!!(t&&Oa(t.append)&&t[S2]==="FormData"&&t[Tx])}const GT=t=>{const s=new Array(10),r=(a,n)=>{if(Lu(a)){if(s.indexOf(a)>=0)return;if(Bu(a))return a;if(!("toJSON"in a)){s[n]=a;const i=Lc(a)?[]:{};return $u(a,(l,o)=>{const c=r(l,n+1);!yc(c)&&(i[o]=c)}),s[n]=void 0,i}}return a};return r(t,0)},qT=Gn("AsyncFunction"),YT=t=>t&&(Lu(t)||Oa(t))&&Oa(t.then)&&Oa(t.catch),_2=((t,s)=>t?setImmediate:s?((r,a)=>(Yl.addEventListener("message",({source:n,data:i})=>{n===Yl&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),Yl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Oa(Yl.postMessage)),KT=typeof queueMicrotask<"u"?queueMicrotask.bind(Yl):typeof process<"u"&&process.nextTick||_2,XT=t=>t!=null&&Oa(t[Tx]),ve={isArray:Lc,isArrayBuffer:C2,isBuffer:Bu,isFormData:wT,isArrayBufferView:xT,isString:hT,isNumber:k2,isBoolean:fT,isObject:Lu,isPlainObject:Zm,isEmptyObject:gT,isReadableStream:ST,isRequest:CT,isResponse:kT,isHeaders:ET,isUndefined:yc,isDate:pT,isFile:bT,isBlob:yT,isRegExp:$T,isFunction:Oa,isStream:jT,isURLSearchParams:NT,isTypedArray:IT,isFileList:vT,forEach:$u,merge:wg,extend:TT,trim:PT,stripBOM:_T,inherits:AT,toFlatObject:RT,kindOf:_x,kindOfTest:Gn,endsWith:FT,toArray:DT,forEachEntry:OT,matchAll:MT,isHTMLForm:BT,hasOwnProperty:Uv,hasOwnProp:Uv,reduceDescriptors:T2,freezeMethods:UT,toObjectSet:HT,toCamelCase:LT,noop:WT,toFiniteNumber:VT,findKey:E2,global:Yl,isContextDefined:P2,isSpecCompliantForm:zT,toJSONObject:GT,isAsyncFn:qT,isThenable:YT,setImmediate:_2,asap:KT,isIterable:XT};function Dt(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}ve.inherits(Dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const A2=Dt.prototype,R2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{R2[t]={value:t}});Object.defineProperties(Dt,R2);Object.defineProperty(A2,"isAxiosError",{value:!0});Dt.from=(t,s,r,a,n,i)=>{const l=Object.create(A2);ve.toFlatObject(t,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=s==null&&t?t.code:s;return Dt.call(l,o,c,r,a,n),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const JT=null;function Ng(t){return ve.isPlainObject(t)||ve.isArray(t)}function F2(t){return ve.endsWith(t,"[]")?t.slice(0,-2):t}function Hv(t,s,r){return t?t.concat(s).map(function(n,i){return n=F2(n),!r&&i?"["+n+"]":n}).join(r?".":""):s}function QT(t){return ve.isArray(t)&&!t.some(Ng)}const ZT=ve.toFlatObject(ve,{},null,function(s){return/^is[A-Z]/.test(s)});function Rx(t,s,r){if(!ve.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=ve.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,b){return!ve.isUndefined(b[f])});const a=r.metaTokens,n=r.visitor||d,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(s);if(!ve.isFunction(n))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(ve.isDate(p))return p.toISOString();if(ve.isBoolean(p))return p.toString();if(!c&&ve.isBlob(p))throw new Dt("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(p)||ve.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,f,b){let y=p;if(p&&!b&&typeof p=="object"){if(ve.endsWith(f,"{}"))f=a?f:f.slice(0,-2),p=JSON.stringify(p);else if(ve.isArray(p)&&QT(p)||(ve.isFileList(p)||ve.endsWith(f,"[]"))&&(y=ve.toArray(p)))return f=F2(f),y.forEach(function(N,S){!(ve.isUndefined(N)||N===null)&&s.append(l===!0?Hv([f],S,i):l===null?f:f+"[]",u(N))}),!1}return Ng(p)?!0:(s.append(Hv(b,f,i),u(p)),!1)}const m=[],x=Object.assign(ZT,{defaultVisitor:d,convertValue:u,isVisitable:Ng});function g(p,f){if(!ve.isUndefined(p)){if(m.indexOf(p)!==-1)throw Error("Circular reference detected in "+f.join("."));m.push(p),ve.forEach(p,function(y,v){(!(ve.isUndefined(y)||y===null)&&n.call(s,y,ve.isString(v)?v.trim():v,f,x))===!0&&g(y,f?f.concat(v):[v])}),m.pop()}}if(!ve.isObject(t))throw new TypeError("data must be an object");return g(t),s}function Wv(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function vb(t,s){this._pairs=[],t&&Rx(t,this,s)}const D2=vb.prototype;D2.append=function(s,r){this._pairs.push([s,r])};D2.toString=function(s){const r=s?function(a){return s.call(this,a,Wv)}:Wv;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function e_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function I2(t,s,r){if(!s)return t;const a=r&&r.encode||e_;ve.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(s,r):i=ve.isURLSearchParams(s)?s.toString():new vb(s,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Vv{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ve.forEach(this.handlers,function(a){a!==null&&s(a)})}}const O2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},t_=typeof URLSearchParams<"u"?URLSearchParams:vb,s_=typeof FormData<"u"?FormData:null,r_=typeof Blob<"u"?Blob:null,a_={isBrowser:!0,classes:{URLSearchParams:t_,FormData:s_,Blob:r_},protocols:["http","https","file","blob","url","data"]},jb=typeof window<"u"&&typeof document<"u",Sg=typeof navigator=="object"&&navigator||void 0,n_=jb&&(!Sg||["ReactNative","NativeScript","NS"].indexOf(Sg.product)<0),i_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",l_=jb&&window.location.href||"http://localhost",o_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jb,hasStandardBrowserEnv:n_,hasStandardBrowserWebWorkerEnv:i_,navigator:Sg,origin:l_},Symbol.toStringTag,{value:"Module"})),ma={...o_,...a_};function c_(t,s){return Rx(t,new ma.classes.URLSearchParams,{visitor:function(r,a,n,i){return ma.isNode&&ve.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function d_(t){return ve.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function u_(t){const s={},r=Object.keys(t);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],s[i]=t[i];return s}function M2(t){function s(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&ve.isArray(n)?n.length:l,c?(ve.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!ve.isObject(n[l]))&&(n[l]=[]),s(r,a,n[l],i)&&ve.isArray(n[l])&&(n[l]=u_(n[l])),!o)}if(ve.isFormData(t)&&ve.isFunction(t.entries)){const r={};return ve.forEachEntry(t,(a,n)=>{s(d_(a),n,r,0)}),r}return null}function m_(t,s,r){if(ve.isString(t))try{return(s||JSON.parse)(t),ve.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Uu={transitional:O2,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=ve.isObject(s);if(i&&ve.isHTMLForm(s)&&(s=new FormData(s)),ve.isFormData(s))return n?JSON.stringify(M2(s)):s;if(ve.isArrayBuffer(s)||ve.isBuffer(s)||ve.isStream(s)||ve.isFile(s)||ve.isBlob(s)||ve.isReadableStream(s))return s;if(ve.isArrayBufferView(s))return s.buffer;if(ve.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return c_(s,this.formSerializer).toString();if((o=ve.isFileList(s))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Rx(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),m_(s)):s}],transformResponse:[function(s){const r=this.transitional||Uu.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ve.isResponse(s)||ve.isReadableStream(s))return s;if(s&&ve.isString(s)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?Dt.from(o,Dt.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],t=>{Uu.headers[t]={}});const x_=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h_=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||s[r]&&x_[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},zv=Symbol("internals");function dd(t){return t&&String(t).trim().toLowerCase()}function e0(t){return t===!1||t==null?t:ve.isArray(t)?t.map(e0):String(t)}function f_(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const g_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Kh(t,s,r,a,n){if(ve.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!ve.isString(s)){if(ve.isString(a))return s.indexOf(a)!==-1;if(ve.isRegExp(a))return a.test(s)}}function p_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function b_(t,s){const r=ve.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,i,l){return this[a].call(this,s,n,i,l)},configurable:!0})})}let Ma=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function i(o,c,u){const d=dd(c);if(!d)throw new Error("header name must be a non-empty string");const m=ve.findKey(n,d);(!m||n[m]===void 0||u===!0||u===void 0&&n[m]!==!1)&&(n[m||c]=e0(o))}const l=(o,c)=>ve.forEach(o,(u,d)=>i(u,d,c));if(ve.isPlainObject(s)||s instanceof this.constructor)l(s,r);else if(ve.isString(s)&&(s=s.trim())&&!g_(s))l(h_(s),r);else if(ve.isObject(s)&&ve.isIterable(s)){let o={},c,u;for(const d of s){if(!ve.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?ve.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}l(o,r)}else s!=null&&i(r,s,a);return this}get(s,r){if(s=dd(s),s){const a=ve.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return f_(n);if(ve.isFunction(r))return r.call(this,n,a);if(ve.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=dd(s),s){const a=ve.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||Kh(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function i(l){if(l=dd(l),l){const o=ve.findKey(a,l);o&&(!r||Kh(a,a[o],o,r))&&(delete a[o],n=!0)}}return ve.isArray(s)?s.forEach(i):i(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!s||Kh(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const r=this,a={};return ve.forEach(this,(n,i)=>{const l=ve.findKey(a,i);if(l){r[l]=e0(n),delete r[i];return}const o=s?p_(i):String(i).trim();o!==i&&delete r[i],r[o]=e0(n),a[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return ve.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&ve.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[zv]=this[zv]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=dd(l);a[o]||(b_(n,l),a[o]=!0)}return ve.isArray(s)?s.forEach(i):i(s),this}};Ma.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(Ma.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});ve.freezeMethods(Ma);function Xh(t,s){const r=this||Uu,a=s||r,n=Ma.from(a.headers);let i=a.data;return ve.forEach(t,function(o){i=o.call(r,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function B2(t){return!!(t&&t.__CANCEL__)}function $c(t,s,r){Dt.call(this,t??"canceled",Dt.ERR_CANCELED,s,r),this.name="CanceledError"}ve.inherits($c,Dt,{__CANCEL__:!0});function L2(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new Dt("Request failed with status code "+r.status,[Dt.ERR_BAD_REQUEST,Dt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function y_(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function v_(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(c){const u=Date.now(),d=a[i];l||(l=u),r[n]=c,a[n]=u;let m=i,x=0;for(;m!==n;)x+=r[m++],m=m%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),u-l<s)return;const g=d&&u-d;return g?Math.round(x*1e3/g):void 0}}function j_(t,s){let r=0,a=1e3/s,n,i;const l=(u,d=Date.now())=>{r=d,n=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),m=d-r;m>=a?l(u,d):(n=u,i||(i=setTimeout(()=>{i=null,l(n)},a-m)))},()=>n&&l(n)]}const F0=(t,s,r=3)=>{let a=0;const n=v_(50,250);return j_(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-a,u=n(c),d=l<=o;a=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-l)/u:void 0,event:i,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(m)},r)},Gv=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},qv=t=>(...s)=>ve.asap(()=>t(...s)),w_=ma.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,ma.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(ma.origin),ma.navigator&&/(msie|trident)/i.test(ma.navigator.userAgent)):()=>!0,N_=ma.hasStandardBrowserEnv?{write(t,s,r,a,n,i){const l=[t+"="+encodeURIComponent(s)];ve.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),ve.isString(a)&&l.push("path="+a),ve.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function S_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function C_(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function $2(t,s,r){let a=!S_(s);return t&&(a||r==!1)?C_(t,s):s}const Yv=t=>t instanceof Ma?{...t}:t;function lo(t,s){s=s||{};const r={};function a(u,d,m,x){return ve.isPlainObject(u)&&ve.isPlainObject(d)?ve.merge.call({caseless:x},u,d):ve.isPlainObject(d)?ve.merge({},d):ve.isArray(d)?d.slice():d}function n(u,d,m,x){if(ve.isUndefined(d)){if(!ve.isUndefined(u))return a(void 0,u,m,x)}else return a(u,d,m,x)}function i(u,d){if(!ve.isUndefined(d))return a(void 0,d)}function l(u,d){if(ve.isUndefined(d)){if(!ve.isUndefined(u))return a(void 0,u)}else return a(void 0,d)}function o(u,d,m){if(m in s)return a(u,d);if(m in t)return a(void 0,u)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(u,d,m)=>n(Yv(u),Yv(d),m,!0)};return ve.forEach(Object.keys({...t,...s}),function(d){const m=c[d]||n,x=m(t[d],s[d],d);ve.isUndefined(x)&&m!==o||(r[d]=x)}),r}const U2=t=>{const s=lo({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=s;if(s.headers=l=Ma.from(l),s.url=I2($2(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ve.isFormData(r)){if(ma.hasStandardBrowserEnv||ma.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ve.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,m])=>{u.includes(d.toLowerCase())&&l.set(d,m)})}}if(ma.hasStandardBrowserEnv&&(a&&ve.isFunction(a)&&(a=a(s)),a||a!==!1&&w_(s.url))){const c=n&&i&&N_.read(i);c&&l.set(n,c)}return s},k_=typeof XMLHttpRequest<"u",E_=k_&&function(t){return new Promise(function(r,a){const n=U2(t);let i=n.data;const l=Ma.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=n,d,m,x,g,p;function f(){g&&g(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(n.method.toUpperCase(),n.url,!0),b.timeout=n.timeout;function y(){if(!b)return;const N=Ma.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:N,config:t,request:b};L2(function(j){r(j),f()},function(j){a(j),f()},w),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(a(new Dt("Request aborted",Dt.ECONNABORTED,t,b)),b=null)},b.onerror=function(S){const w=S&&S.message?S.message:"Network Error",C=new Dt(w,Dt.ERR_NETWORK,t,b);C.event=S||null,a(C),b=null},b.ontimeout=function(){let S=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const w=n.transitional||O2;n.timeoutErrorMessage&&(S=n.timeoutErrorMessage),a(new Dt(S,w.clarifyTimeoutError?Dt.ETIMEDOUT:Dt.ECONNABORTED,t,b)),b=null},i===void 0&&l.setContentType(null),"setRequestHeader"in b&&ve.forEach(l.toJSON(),function(S,w){b.setRequestHeader(w,S)}),ve.isUndefined(n.withCredentials)||(b.withCredentials=!!n.withCredentials),o&&o!=="json"&&(b.responseType=n.responseType),u&&([x,p]=F0(u,!0),b.addEventListener("progress",x)),c&&b.upload&&([m,g]=F0(c),b.upload.addEventListener("progress",m),b.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(d=N=>{b&&(a(!N||N.type?new $c(null,t,b):N),b.abort(),b=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const v=y_(n.url);if(v&&ma.protocols.indexOf(v)===-1){a(new Dt("Unsupported protocol "+v+":",Dt.ERR_BAD_REQUEST,t));return}b.send(i||null)})},P_=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const i=function(u){if(!n){n=!0,o();const d=u instanceof Error?u:this.reason;a.abort(d instanceof Dt?d:new $c(d instanceof Error?d.message:d))}};let l=s&&setTimeout(()=>{l=null,i(new Dt(`timeout ${s} of ms exceeded`,Dt.ETIMEDOUT))},s);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>ve.asap(o),c}},T_=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},__=async function*(t,s){for await(const r of A_(t))yield*T_(r,s)},A_=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},Kv=(t,s,r,a)=>{const n=__(t,s);let i=0,l,o=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await n.next();if(u){o(),c.close();return}let m=d.byteLength;if(r){let x=i+=m;r(x)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},Xv=64*1024,{isFunction:ym}=ve,R_=(({Request:t,Response:s})=>({Request:t,Response:s}))(ve.global),{ReadableStream:Jv,TextEncoder:Qv}=ve.global,Zv=(t,...s)=>{try{return!!t(...s)}catch{return!1}},F_=t=>{t=ve.merge.call({skipUndefined:!0},R_,t);const{fetch:s,Request:r,Response:a}=t,n=s?ym(s):typeof fetch=="function",i=ym(r),l=ym(a);if(!n)return!1;const o=n&&ym(Jv),c=n&&(typeof Qv=="function"?(p=>f=>p.encode(f))(new Qv):async p=>new Uint8Array(await new r(p).arrayBuffer())),u=i&&o&&Zv(()=>{let p=!1;const f=new r(ma.origin,{body:new Jv,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!f}),d=l&&o&&Zv(()=>ve.isReadableStream(new a("").body)),m={stream:d&&(p=>p.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!m[p]&&(m[p]=(f,b)=>{let y=f&&f[p];if(y)return y.call(f);throw new Dt(`Response type '${p}' is not supported`,Dt.ERR_NOT_SUPPORT,b)})});const x=async p=>{if(p==null)return 0;if(ve.isBlob(p))return p.size;if(ve.isSpecCompliantForm(p))return(await new r(ma.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(p)||ve.isArrayBuffer(p))return p.byteLength;if(ve.isURLSearchParams(p)&&(p=p+""),ve.isString(p))return(await c(p)).byteLength},g=async(p,f)=>{const b=ve.toFiniteNumber(p.getContentLength());return b??x(f)};return async p=>{let{url:f,method:b,data:y,signal:v,cancelToken:N,timeout:S,onDownloadProgress:w,onUploadProgress:C,responseType:j,headers:k,withCredentials:E="same-origin",fetchOptions:R}=U2(p),D=s||fetch;j=j?(j+"").toLowerCase():"text";let P=P_([v,N&&N.toAbortSignal()],S),T=null;const B=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let F;try{if(C&&u&&b!=="get"&&b!=="head"&&(F=await g(k,y))!==0){let U=new r(f,{method:"POST",body:y,duplex:"half"}),A;if(ve.isFormData(y)&&(A=U.headers.get("content-type"))&&k.setContentType(A),U.body){const[q,Y]=Gv(F,F0(qv(C)));y=Kv(U.body,Xv,q,Y)}}ve.isString(E)||(E=E?"include":"omit");const L=i&&"credentials"in r.prototype,I={...R,signal:P,method:b.toUpperCase(),headers:k.normalize().toJSON(),body:y,duplex:"half",credentials:L?E:void 0};T=i&&new r(f,I);let V=await(i?D(T,R):D(f,I));const _=d&&(j==="stream"||j==="response");if(d&&(w||_&&B)){const U={};["status","statusText","headers"].forEach(O=>{U[O]=V[O]});const A=ve.toFiniteNumber(V.headers.get("content-length")),[q,Y]=w&&Gv(A,F0(qv(w),!0))||[];V=new a(Kv(V.body,Xv,q,()=>{Y&&Y(),B&&B()}),U)}j=j||"text";let G=await m[ve.findKey(m,j)||"text"](V,p);return!_&&B&&B(),await new Promise((U,A)=>{L2(U,A,{data:G,headers:Ma.from(V.headers),status:V.status,statusText:V.statusText,config:p,request:T})})}catch(L){throw B&&B(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Dt("Network Error",Dt.ERR_NETWORK,p,T),{cause:L.cause||L}):Dt.from(L,L&&L.code,p,T)}}},D_=new Map,H2=t=>{let s=t?t.env:{};const{fetch:r,Request:a,Response:n}=s,i=[a,n,r];let l=i.length,o=l,c,u,d=D_;for(;o--;)c=i[o],u=d.get(c),u===void 0&&d.set(c,u=o?new Map:F_(s)),d=u;return u};H2();const Cg={http:JT,xhr:E_,fetch:{get:H2}};ve.forEach(Cg,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const ej=t=>`- ${t}`,I_=t=>ve.isFunction(t)||t===null||t===!1,W2={getAdapter:(t,s)=>{t=ve.isArray(t)?t:[t];const{length:r}=t;let a,n;const i={};for(let l=0;l<r;l++){a=t[l];let o;if(n=a,!I_(a)&&(n=Cg[(o=String(a)).toLowerCase()],n===void 0))throw new Dt(`Unknown adapter '${o}'`);if(n&&(ve.isFunction(n)||(n=n.get(s))))break;i[o||"#"+l]=n}if(!n){const l=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map(ej).join(`
`):" "+ej(l[0]):"as no adapter specified";throw new Dt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Cg};function Jh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $c(null,t)}function tj(t){return Jh(t),t.headers=Ma.from(t.headers),t.data=Xh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),W2.getAdapter(t.adapter||Uu.adapter,t)(t).then(function(a){return Jh(t),a.data=Xh.call(t,t.transformResponse,a),a.headers=Ma.from(a.headers),a},function(a){return B2(a)||(Jh(t),a&&a.response&&(a.response.data=Xh.call(t,t.transformResponse,a.response),a.response.headers=Ma.from(a.response.headers))),Promise.reject(a)})}const V2="1.12.2",Fx={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Fx[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const sj={};Fx.transitional=function(s,r,a){function n(i,l){return"[Axios v"+V2+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,o)=>{if(s===!1)throw new Dt(n(l," has been removed"+(r?" in "+r:"")),Dt.ERR_DEPRECATED);return r&&!sj[l]&&(sj[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,l,o):!0}};Fx.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function O_(t,s,r){if(typeof t!="object")throw new Dt("options must be an object",Dt.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const i=a[n],l=s[i];if(l){const o=t[i],c=o===void 0||l(o,i,t);if(c!==!0)throw new Dt("option "+i+" must be "+c,Dt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Dt("Unknown option "+i,Dt.ERR_BAD_OPTION)}}const t0={assertOptions:O_,validators:Fx},Qn=t0.validators;let Jl=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Vv,response:new Vv}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=lo(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&t0.assertOptions(a,{silentJSONParsing:Qn.transitional(Qn.boolean),forcedJSONParsing:Qn.transitional(Qn.boolean),clarifyTimeoutError:Qn.transitional(Qn.boolean)},!1),n!=null&&(ve.isFunction(n)?r.paramsSerializer={serialize:n}:t0.assertOptions(n,{encode:Qn.function,serialize:Qn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),t0.assertOptions(r,{baseUrl:Qn.spelling("baseURL"),withXsrfToken:Qn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&ve.merge(i.common,i[r.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=Ma.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(c=c&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});const u=[];this.interceptors.response.forEach(function(f){u.push(f.fulfilled,f.rejected)});let d,m=0,x;if(!c){const p=[tj.bind(this),void 0];for(p.unshift(...o),p.push(...u),x=p.length,d=Promise.resolve(r);m<x;)d=d.then(p[m++],p[m++]);return d}x=o.length;let g=r;for(;m<x;){const p=o[m++],f=o[m++];try{g=p(g)}catch(b){f.call(this,b);break}}try{d=tj.call(this,g)}catch(p){return Promise.reject(p)}for(m=0,x=u.length;m<x;)d=d.then(u[m++],u[m++]);return d}getUri(s){s=lo(this.defaults,s);const r=$2(s.baseURL,s.url,s.allowAbsoluteUrls);return I2(r,s.params,s.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(s){Jl.prototype[s]=function(r,a){return this.request(lo(a||{},{method:s,url:r,data:(a||{}).data}))}});ve.forEach(["post","put","patch"],function(s){function r(a){return function(i,l,o){return this.request(lo(o||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Jl.prototype[s]=r(),Jl.prototype[s+"Form"]=r(!0)});let M_=class z2{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{a.subscribe(o),i=o}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},s(function(i,l,o){a.reason||(a.reason=new $c(i,l,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new z2(function(n){s=n}),cancel:s}}};function B_(t){return function(r){return t.apply(null,r)}}function L_(t){return ve.isObject(t)&&t.isAxiosError===!0}const kg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kg).forEach(([t,s])=>{kg[s]=t});function G2(t){const s=new Jl(t),r=N2(Jl.prototype.request,s);return ve.extend(r,Jl.prototype,s,{allOwnKeys:!0}),ve.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return G2(lo(t,n))},r}const Ps=G2(Uu);Ps.Axios=Jl;Ps.CanceledError=$c;Ps.CancelToken=M_;Ps.isCancel=B2;Ps.VERSION=V2;Ps.toFormData=Rx;Ps.AxiosError=Dt;Ps.Cancel=Ps.CanceledError;Ps.all=function(s){return Promise.all(s)};Ps.spread=B_;Ps.isAxiosError=L_;Ps.mergeConfig=lo;Ps.AxiosHeaders=Ma;Ps.formToJSON=t=>M2(ve.isHTMLForm(t)?new FormData(t):t);Ps.getAdapter=W2.getAdapter;Ps.HttpStatusCode=kg;Ps.default=Ps;const{Axios:tle,AxiosError:sle,CanceledError:rle,isCancel:ale,CancelToken:nle,VERSION:ile,all:lle,Cancel:ole,isAxiosError:cle,spread:dle,toFormData:ule,AxiosHeaders:mle,HttpStatusCode:xle,formToJSON:hle,getAdapter:fle,mergeConfig:gle}=Ps,Eg="http://localhost:5000/api",Tt=Ps.create({baseURL:Eg,headers:{"Content-Type":"application/json"}});let vm=!1,Pg=[];const rj=(t,s=null)=>{Pg.forEach(r=>{t?r.reject(t):r.resolve(s)}),Pg=[]};Tt.interceptors.request.use(t=>{const s=localStorage.getItem("accessToken");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));Tt.interceptors.response.use(t=>t,async t=>{var r,a,n,i,l,o,c,u,d,m,x,g,p,f,b;const s=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!s._retry){if(console.log("🔒 401 Unauthorized error detected"),console.log("📄 Error response:",(a=t.response)==null?void 0:a.data),((i=(n=t.response)==null?void 0:n.data)==null?void 0:i.message)==="Invalid token."||((o=(l=t.response)==null?void 0:l.data)==null?void 0:o.message)==="Invalid token"||((d=(u=(c=t.response)==null?void 0:c.data)==null?void 0:u.message)==null?void 0:d.includes("Invalid token"))){console.log("🚫 Invalid token detected, triggering token expiry modal");const v=new CustomEvent("tokenExpired",{detail:{message:"Your session has expired. Please log in again.",error:(m=t.response)==null?void 0:m.data,status:(x=t.response)==null?void 0:x.status,timestamp:new Date().toISOString()}});window.dispatchEvent(v);const N=new CustomEvent("apiError",{detail:{status:(g=t.response)==null?void 0:g.status,message:((f=(p=t.response)==null?void 0:p.data)==null?void 0:f.message)||"Session expired",error:(b=t.response)==null?void 0:b.data,timestamp:new Date().toISOString()}});return window.dispatchEvent(N),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),Promise.reject(t)}if(vm)return new Promise((v,N)=>{Pg.push({resolve:v,reject:N})}).then(()=>Tt(s)).catch(v=>Promise.reject(v));s._retry=!0,vm=!0;try{console.log("🔄 Attempting token refresh...");const v=localStorage.getItem("refreshToken");if(!v)throw new Error("No refresh token available");const N=await Tt.post("/auth/refresh",{refreshToken:v}),{accessToken:S}=N.data.data;return localStorage.setItem("accessToken",S),console.log("✅ Token refresh successful"),vm=!1,rj(null,N.data),s.headers.Authorization=`Bearer ${S}`,Tt(s)}catch(v){console.log("❌ Token refresh failed:",v),vm=!1,rj(v,null);const N=localStorage.getItem("user"),S=N?JSON.parse(N):null,w=(S==null?void 0:S.role)==="superadmin"?"/login":"/admin/login";return console.log("Token refresh failed, redirecting to:",w),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href=w,Promise.reject(v)}}return Promise.reject(t)});class $_{async healthCheck(){try{console.log("🏥 Testing backend health...");const s=await Ps.get("http://localhost:5000/health");return console.log("✅ Backend health check successful:",s.data),s.data}catch(s){throw console.log("❌ Backend health check failed:",s),this.handleError(s)}}async register(s){try{return(await Tt.post("/auth/register",s)).data}catch(r){throw this.handleError(r)}}async registerSupportStaff(s){try{return(await Tt.post("/auth/register-support",s)).data}catch(r){throw this.handleError(r)}}async login(s){var r,a,n;try{console.log("🔍 AuthService: Starting login..."),console.log("📧 Credentials:",{email:s.email,password:"***"}),console.log("🌐 API URL:",Eg);const i=await Tt.post("/auth/login",s);return console.log("📡 Login response:",{status:i.status,success:i.data.success,hasUser:!!((r=i.data.data)!=null&&r.user),hasTokens:!!((a=i.data.data)!=null&&a.tokens)}),i.data.success&&i.data.data.tokens?(console.log("✅ Login successful, storing tokens in localStorage"),localStorage.setItem("accessToken",i.data.data.tokens.accessToken),localStorage.setItem("refreshToken",i.data.data.tokens.refreshToken),localStorage.setItem("user",JSON.stringify(i.data.data.user)),console.log("💾 Tokens stored in localStorage"),console.log("🔑 Access token length:",i.data.data.tokens.accessToken.length),console.log("🔄 Refresh token length:",i.data.data.tokens.refreshToken.length)):console.log("❌ Login response missing tokens"),i.data}catch(i){throw console.error("❌ AuthService: Login error:",i),console.error("❌ Error response:",(n=i.response)==null?void 0:n.data),this.handleError(i)}}async loginSalesManager(s){var r,a,n;try{console.log("🔍 AuthService: Starting sales manager login..."),console.log("📧 Credentials:",{identifier:s.identifier,password:"***"});const i=await Tt.post("/auth/sales-login",s);return console.log("📡 Sales Manager Login response:",{status:i.status,success:i.data.success,hasUser:!!((r=i.data.data)!=null&&r.user),hasTokens:!!((a=i.data.data)!=null&&a.tokens)}),i.data.success&&i.data.data.tokens?(console.log("✅ Sales Manager login successful, storing tokens in localStorage"),localStorage.setItem("accessToken",i.data.data.tokens.accessToken),localStorage.setItem("refreshToken",i.data.data.tokens.refreshToken),localStorage.setItem("user",JSON.stringify(i.data.data.user)),console.log("💾 Sales Manager tokens stored in localStorage")):console.log("❌ Sales Manager login response missing tokens"),i.data}catch(i){throw console.error("❌ AuthService: Sales Manager Login error:",i),console.error("❌ Error response:",(n=i.response)==null?void 0:n.data),this.handleError(i)}}async supportLogin(s){var r,a,n;try{console.log("🔍 AuthService: Starting support login..."),console.log("📧 Credentials:",{email:s.email,password:"***"}),console.log("🌐 API URL:",Eg);const i=await Tt.post("/auth/support-login",s);return console.log("📡 Support login response:",{status:i.status,success:i.data.success,hasUser:!!((r=i.data.data)!=null&&r.user),hasTokens:!!((a=i.data.data)!=null&&a.tokens)}),i.data.success&&i.data.data.tokens?(console.log("✅ Support login successful, storing tokens in localStorage"),localStorage.setItem("accessToken",i.data.data.tokens.accessToken),localStorage.setItem("refreshToken",i.data.data.tokens.refreshToken),localStorage.setItem("user",JSON.stringify(i.data.data.user)),console.log("💾 Tokens stored in localStorage"),console.log("🔑 Access token length:",i.data.data.tokens.accessToken.length),console.log("🔄 Refresh token length:",i.data.data.tokens.refreshToken.length)):console.log("❌ Support login response missing tokens"),i.data}catch(i){throw console.error("❌ AuthService: Support login error:",i),console.error("❌ Error response:",(n=i.response)==null?void 0:n.data),this.handleError(i)}}async logout(){try{if(!this.getAccessToken())return this.clearAuth(),{success:!0,message:"Logged out successfully"};const r=await Tt.post("/auth/logout");return this.clearAuth(),r.data}catch(s){return console.log("Logout API call failed, clearing auth data:",s.message),this.clearAuth(),{success:!0,message:"Logged out successfully"}}}async forgotPassword(s){try{return(await Tt.post("/auth/forgot-password",{email:s})).data}catch(r){throw this.handleError(r)}}async resetPassword(s,r){try{return(await Tt.post("/auth/reset-password",{token:s,password:r,confirmPassword:r})).data}catch(a){throw this.handleError(a)}}async verifyEmail(s){try{return(await Tt.post("/auth/verify-email",s)).data}catch(r){throw this.handleError(r)}}async resendVerification(s){try{return(await Tt.post("/auth/resend-verification",{email:s})).data}catch(r){throw this.handleError(r)}}async getProfile(){try{return(await Tt.get("/auth/profile")).data}catch(s){throw this.handleError(s)}}async updateProfile(s){try{const r=await Tt.put("/auth/profile",s);return r.data.success&&r.data.data.user&&localStorage.setItem("user",JSON.stringify(r.data.data.user)),r.data}catch(r){throw this.handleError(r)}}async getCurrentUser(){try{console.log("🌐 Making API call to /auth/me...");const s=await Tt.get("/auth/me");return console.log("✅ API response:",s.data),s.data}catch(s){throw console.log("❌ API call failed:",s),this.handleError(s)}}isAuthenticated(){const s=localStorage.getItem("accessToken");if(!s)return!1;try{const r=JSON.parse(atob(s.split(".")[1])),a=Date.now()/1e3;if(r.exp<a-30){console.log("🔍 Token is expired, clearing auth data");const i=new CustomEvent("tokenExpired",{detail:{message:"Your session has expired. Please log in again.",reason:"token_expired",timestamp:new Date().toISOString()}});return window.dispatchEvent(i),this.clearAuth(),!1}return!0}catch(r){return console.error("Error checking token validity:",r),this.clearAuth(),!1}}getCurrentUserFromStorage(){const s=localStorage.getItem("user");return s?JSON.parse(s):null}getAccessToken(){return localStorage.getItem("accessToken")}getRefreshToken(){return localStorage.getItem("refreshToken")}clearAuth(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}handleError(s){if(s.response){const{data:r,status:a}=s.response;if(r&&r.message)return new Error(r.message);switch(a){case 400:return new Error("Bad request. Please check your input.");case 401:return new Error("Authentication failed. Please log in again.");case 403:return new Error("Access denied. You do not have permission.");case 404:return new Error("Resource not found.");case 429:return new Error("Too many requests. Please try again later.");case 500:return new Error("Server error. Please try again later.");default:return new Error("An unexpected error occurred.")}}else return s.request?new Error("Network error. Please check your connection."):new Error(s.message||"An unexpected error occurred.")}validatePassword(s){const a=/[A-Z]/.test(s),n=/[a-z]/.test(s),i=/\d/.test(s),l=/[@$!%*?&]/.test(s);return{isValid:s.length>=8&&a&&n&&i&&l,errors:{minLength:s.length<8,hasUpperCase:!a,hasLowerCase:!n,hasNumbers:!i,hasSpecialChar:!l}}}validateEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}validatePhone(s){return/^[0-9]{10}$/.test(s)}async getSupportStaff(){try{return(await Tt.get("/auth/support-staff")).data}catch(s){throw this.handleError(s)}}async deleteUser(s){try{return(await Tt.delete(`/auth/users/${s}`)).data}catch(r){throw this.handleError(r)}}async updateUserStatus(s,r){try{return(await Tt.patch(`/auth/users/${s}/status`,{isActive:r})).data}catch(a){throw this.handleError(a)}}}const Lt=new $_,Qh=zr("auth/register",async(t,{rejectWithValue:s})=>{try{return await Lt.register(t)}catch(r){return s(r.message)}}),lc=zr("auth/login",async(t,{rejectWithValue:s})=>{var r,a;try{console.log("🔍 Redux: Login action dispatched"),console.log("📧 Credentials:",{email:t.email,password:"***"});const n=await Lt.login(t);return console.log("✅ Redux: Login successful",{success:n.success,hasUser:!!((r=n.data)!=null&&r.user),hasTokens:!!((a=n.data)!=null&&a.tokens)}),n}catch(n){return console.error("❌ Redux: Login failed:",n),s(n.message)}}),s0=zr("auth/loginSalesManager",async(t,{rejectWithValue:s})=>{var r,a;try{console.log("🔍 Redux: Sales Manager Login action dispatched"),console.log("📧 Credentials:",{identifier:t.identifier,password:"***"});const n=await Lt.loginSalesManager(t);return console.log("✅ Redux: Sales Manager Login successful",{success:n.success,hasUser:!!((r=n.data)!=null&&r.user),hasTokens:!!((a=n.data)!=null&&a.tokens)}),n}catch(n){return console.error("❌ Redux: Sales Manager Login failed:",n),s(n.message)}}),ci=zr("auth/logout",async(t,{rejectWithValue:s})=>{try{return await Lt.logout()}catch(r){return console.log("Logout failed, but clearing auth state:",r.message),{success:!0,message:"Logged out successfully"}}}),Id=zr("auth/forgotPassword",async(t,{rejectWithValue:s})=>{try{return await Lt.forgotPassword(t)}catch(r){return s(r.message)}}),r0=zr("auth/resetPassword",async({token:t,password:s},{rejectWithValue:r})=>{try{return await Lt.resetPassword(t,s)}catch(a){return r(a.message)}}),Zh=zr("auth/verifyEmail",async(t,{rejectWithValue:s})=>{try{return await Lt.verifyEmail(t)}catch(r){return s(r.message)}}),ef=zr("auth/resendVerification",async(t,{rejectWithValue:s})=>{try{return await Lt.resendVerification(t)}catch(r){return s(r.message)}}),tf=zr("auth/getProfile",async(t,{rejectWithValue:s})=>{try{return await Lt.getProfile()}catch(r){return s(r.message)}}),sf=zr("auth/updateProfile",async(t,{rejectWithValue:s})=>{try{return await Lt.updateProfile(t)}catch(r){return s(r.message)}}),Ql=zr("auth/getCurrentUser",async(t,{rejectWithValue:s})=>{try{return await Lt.getCurrentUser()}catch(r){return s(r.message)}}),U_={user:Lt.getCurrentUserFromStorage(),isAuthenticated:Lt.isAuthenticated(),isLoading:!1,error:null,success:null,subscription:null,isRegistering:!1,isLoggingIn:!1,isLoggingOut:!1,isSendingForgotPassword:!1,isResettingPassword:!1,isVerifyingEmail:!1,isResendingVerification:!1,isUpdatingProfile:!1,registerSuccess:null,loginSuccess:null,logoutSuccess:null,forgotPasswordSuccess:null,resetPasswordSuccess:null,verifyEmailSuccess:null,resendVerificationSuccess:null,updateProfileSuccess:null,onboardingCompleted:!1,defaultBranch:!1,defaultBranchId:null,pgConfigured:!1},q2=Iu({name:"auth",initialState:U_,reducers:{clearError:t=>{t.error=null},clearSuccess:t=>{t.success=null,t.registerSuccess=null,t.loginSuccess=null,t.logoutSuccess=null,t.forgotPasswordSuccess=null,t.resetPasswordSuccess=null,t.verifyEmailSuccess=null,t.resendVerificationSuccess=null,t.updateProfileSuccess=null},updatePasswordChanged:t=>{t.user&&(t.user.passwordChanged=!0,t.user.forcePasswordChange=!1,localStorage.setItem("user",JSON.stringify(t.user)))},updateAuthState(t,s){Object.keys(s.payload).forEach(r=>{t[r]=s.payload[r]})},clearAuth:t=>{t.user=null,t.isAuthenticated=!1,t.error=null,t.success=null,t.registerSuccess=null,t.loginSuccess=null,t.logoutSuccess=null,t.forgotPasswordSuccess=null,t.resetPasswordSuccess=null,t.verifyEmailSuccess=null,t.resendVerificationSuccess=null,t.updateProfileSuccess=null},setUserFromStorage:t=>{const s=Lt.getCurrentUserFromStorage();t.user=s,t.isAuthenticated=!!s},updateUserTheme:(t,s)=>{t.user&&(t.user.theme=s.payload)},updateUserLanguage:(t,s)=>{t.user&&(t.user.language=s.payload)},updateSubscriptionFromManager:(t,s)=>{t.subscription=s.payload,t.user&&(t.user.subscription=s.payload,localStorage.setItem("user",JSON.stringify(t.user))),console.log("🔄 Subscription updated from manager:",s.payload)},clearAuth:t=>{t.user=null,t.isAuthenticated=!1,t.isLoggingIn=!1,t.isLoggingOut=!1,t.isRegistering=!1,t.isSendingForgotPassword=!1,t.isResettingPassword=!1,t.isVerifyingEmail=!1,t.isSendingVerification=!1,t.isGettingProfile=!1,t.isUpdatingProfile=!1,t.isGettingCurrentUser=!1,t.error=null,t.loginSuccess=null,t.logoutSuccess=null,t.registerSuccess=null,t.forgotPasswordSuccess=null,t.resetPasswordSuccess=null,t.verifyEmailSuccess=null,t.resendVerificationSuccess=null,t.updateProfileSuccess=null}},extraReducers:t=>{t.addCase(Qh.pending,s=>{s.isRegistering=!0,s.error=null,s.registerSuccess=null}).addCase(Qh.fulfilled,(s,r)=>{s.isRegistering=!1,s.registerSuccess=r.payload.message}).addCase(Qh.rejected,(s,r)=>{s.isRegistering=!1,s.error=r.payload}).addCase(lc.pending,s=>{s.isLoggingIn=!0,s.error=null,s.loginSuccess=null}).addCase(lc.fulfilled,(s,r)=>{var a,n,i,l;console.log("✅ Redux: Login fulfilled reducer called"),console.log("📊 Action payload:",{success:r.payload.success,hasUser:!!((a=r.payload.data)!=null&&a.user),hasTokens:!!((n=r.payload.data)!=null&&n.tokens),hasSubscription:!!((l=(i=r.payload.data)==null?void 0:i.user)!=null&&l.subscription)}),s.isLoggingIn=!1,s.user=r.payload.data.user,s.isAuthenticated=!0,s.loginSuccess=r.payload.message,s.subscription=r.payload.data.user.subscription,s.onboardingCompleted=r.payload.onboarding_completed||!1,s.defaultBranch=r.payload.default_branch||!1,s.defaultBranchId=r.payload.default_branch_id||null,s.pgConfigured=r.payload.pg_configured||!1,console.log("✅ Redux: State updated",{isAuthenticated:s.isAuthenticated,hasUser:!!s.user,loginSuccess:s.loginSuccess,subscription:s.subscription})}).addCase(lc.rejected,(s,r)=>{s.isLoggingIn=!1,s.error=r.payload}).addCase(ci.pending,s=>{s.isLoggingOut=!0,s.error=null,s.logoutSuccess=null}).addCase(ci.fulfilled,(s,r)=>{s.isLoggingOut=!1,s.user=null,s.isAuthenticated=!1,s.logoutSuccess=r.payload.message}).addCase(ci.rejected,(s,r)=>{s.isLoggingOut=!1,s.error=r.payload,s.user=null,s.isAuthenticated=!1}).addCase(Id.pending,s=>{s.isSendingForgotPassword=!0,s.error=null,s.forgotPasswordSuccess=null}).addCase(Id.fulfilled,(s,r)=>{s.isSendingForgotPassword=!1,s.forgotPasswordSuccess=r.payload.message}).addCase(Id.rejected,(s,r)=>{s.isSendingForgotPassword=!1,s.error=r.payload}).addCase(r0.pending,s=>{s.isResettingPassword=!0,s.error=null,s.resetPasswordSuccess=null}).addCase(r0.fulfilled,(s,r)=>{s.isResettingPassword=!1,s.resetPasswordSuccess=r.payload.message}).addCase(r0.rejected,(s,r)=>{s.isResettingPassword=!1,s.error=r.payload}).addCase(Zh.pending,s=>{s.isVerifyingEmail=!0,s.error=null,s.verifyEmailSuccess=null}).addCase(Zh.fulfilled,(s,r)=>{s.isVerifyingEmail=!1,s.verifyEmailSuccess=r.payload.message,s.user&&(s.user.isEmailVerified=!0)}).addCase(Zh.rejected,(s,r)=>{s.isVerifyingEmail=!1,s.error=r.payload}).addCase(ef.pending,s=>{s.isResendingVerification=!0,s.error=null,s.resendVerificationSuccess=null}).addCase(ef.fulfilled,(s,r)=>{s.isResendingVerification=!1,s.resendVerificationSuccess=r.payload.message}).addCase(ef.rejected,(s,r)=>{s.isResendingVerification=!1,s.error=r.payload}).addCase(tf.pending,s=>{s.isLoading=!0,s.error=null}).addCase(tf.fulfilled,(s,r)=>{s.isLoading=!1,s.user=r.payload.data.user}).addCase(tf.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload}).addCase(sf.pending,s=>{s.isUpdatingProfile=!0,s.error=null,s.updateProfileSuccess=null}).addCase(sf.fulfilled,(s,r)=>{s.isUpdatingProfile=!1,s.user=r.payload.data.user,s.updateProfileSuccess=r.payload.message}).addCase(sf.rejected,(s,r)=>{s.isUpdatingProfile=!1,s.error=r.payload}).addCase(Ql.pending,s=>{s.isLoading=!0,s.error=null}).addCase(Ql.fulfilled,(s,r)=>{s.isLoading=!1,s.user=r.payload.data.user,s.isAuthenticated=!0}).addCase(Ql.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload,s.user=null,s.isAuthenticated=!1}).addCase(s0.pending,s=>{s.isLoading=!0,s.error=null}).addCase(s0.fulfilled,(s,r)=>{s.isLoading=!1,s.user=r.payload.data.user,s.isAuthenticated=!0,s.error=null}).addCase(s0.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload,s.user=null,s.isAuthenticated=!1})}}),{clearError:Dx,clearSuccess:Ix,clearAuth:D0,updatePasswordChanged:H_,updateSubscriptionFromManager:aj,updateAuthState:Tg}=q2.actions,Pl=t=>t.auth.user,W_=t=>t.auth.isAuthenticated,V_=t=>t.auth.isLoading,z_=t=>t.auth.error,Y2=t=>t.auth.subscription,G_=t=>t.auth.defaultBranch||!1,q_=t=>t.auth.pgConfigured||!1,Y_=q2.reducer,K_={theme:"light",sidebarOpen:!1,language:"en",notifications:[],loading:!1,error:null},X_=Iu({name:"ui",initialState:K_,reducers:{setTheme:(t,s)=>{t.theme=s.payload},toggleTheme:t=>{t.theme=t.theme==="light"?"dark":"light"},setSidebarOpen:(t,s)=>{t.sidebarOpen=s.payload},toggleSidebar:t=>{t.sidebarOpen=!t.sidebarOpen},setLanguage:(t,s)=>{t.language=s.payload},addNotification:(t,s)=>{t.notifications.push(s.payload)},removeNotification:(t,s)=>{t.notifications=t.notifications.filter(r=>r.id!==s.payload)},clearNotifications:t=>{t.notifications=[]},setLoading:(t,s)=>{t.loading=s.payload},setError:(t,s)=>{t.error=s.payload},clearError:t=>{t.error=null}}}),J_=X_.reducer;class Q_{constructor(){this.checkInterval=null,this.checkIntervalTime=5*60*1e3,this.isChecking=!1,this.lastCheckTime=null,this.eventListeners=new Map,this.webSocket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5}initialize(){console.log("🚀 Initializing Subscription Manager"),this.startPeriodicChecks(),this.setupWebSocketConnection(),this.setupAuthListeners(),this.checkSubscriptionStatus()}startPeriodicChecks(){this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=setInterval(()=>{this.checkSubscriptionStatus()},this.checkIntervalTime),console.log(`⏰ Started periodic subscription checks every ${this.checkIntervalTime/1e3} seconds`)}stopPeriodicChecks(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null,console.log("⏸️ Stopped periodic subscription checks"))}getCurrentUserFromStorage(){try{const s=localStorage.getItem("persist:root");if(s){const n=JSON.parse(s).auth;if(n){const i=JSON.parse(n);if(i.user)return i.user}}const r=localStorage.getItem("user");return r?JSON.parse(r):null}catch(s){return console.error("Error retrieving user from storage:",s),null}}setupWebSocketConnection(){const s=this.getCurrentUserFromStorage(),r=localStorage.getItem("accessToken");if(!s||!r)return console.warn("🚫 Cannot establish WebSocket: Missing user or token",{userExists:!!s,tokenExists:!!r}),null;try{const a=`ws://localhost:5000/subscription-updates?token=${r}&userId=${s._id}`,n=new WebSocket(a);return n.onopen=()=>{console.log("🔌 Subscription WebSocket connection established"),this.isUserConnected=!0,this.emitEvent("connectionEstablished",{userId:s._id})},n.onmessage=i=>{try{const l=JSON.parse(i.data);this.handleWebSocketMessage(l)}catch(l){console.error("❌ Error parsing WebSocket message:",l)}},n.onerror=i=>{console.error("❌ Subscription WebSocket error:",i),this.isUserConnected=!1,this.emitEvent("connectionError",{error:i})},n.onclose=i=>{console.log("🔌 Subscription WebSocket connection closed",{code:i.code,reason:i.reason,wasClean:i.wasClean}),this.isUserConnected=!1,i.wasClean||setTimeout(()=>{console.log("🔄 Attempting WebSocket reconnection..."),this.setupWebSocketConnection()},5e3)},n}catch(a){return console.error("❌ Failed to establish WebSocket connection:",a),this.emitEvent("connectionError",{error:a}),null}}handleWebSocketReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const s=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`🔄 Attempting WebSocket reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${s}ms`),setTimeout(()=>{this.setupWebSocketConnection()},s)}else console.error("❌ Max WebSocket reconnection attempts reached")}handleWebSocketMessage(s){switch(console.log("📡 Received subscription WebSocket message:",s),s.type){case"SUBSCRIPTION_UPDATED":this.handleSubscriptionUpdate(s.payload);break;case"TRIAL_EXPIRING":this.handleTrialExpiring(s.payload);break;case"TRIAL_EXPIRED":this.handleTrialExpired(s.payload);break;case"USAGE_LIMIT_WARNING":this.handleUsageLimitWarning(s.payload);break;case"SUBSCRIPTION_EXPIRED":this.handleSubscriptionExpired(s.payload);break;default:console.log("Unknown WebSocket message type:",s.type)}}setupAuthListeners(){let s=Qs.getState().auth.isAuthenticated;const r=Qs.subscribe(()=>{const a=Qs.getState().auth.isAuthenticated;s!==a&&(s=a,a?(this.startPeriodicChecks(),this.setupWebSocketConnection(),this.checkSubscriptionStatus()):(this.stopPeriodicChecks(),this.closeWebSocketConnection()))});this.authUnsubscribe=r}closeWebSocketConnection(){this.webSocket&&(this.webSocket.close(),this.webSocket=null,console.log("🔌 Closed subscription WebSocket connection"))}async checkSubscriptionStatus(s=!1){var n,i,l;if(this.isChecking&&!s){console.log("⏳ Subscription check already in progress");return}const r=Qs.getState();if(!r.auth.isAuthenticated||!r.auth.user){console.log("❌ User not authenticated, skipping subscription check");return}const a=this.lastCheckTime?Date.now()-this.lastCheckTime:1/0;if(!s&&a<6e4){console.log("⏰ Skipping subscription check - too soon since last check");return}this.isChecking=!0,this.lastCheckTime=Date.now();try{console.log("🔍 Checking subscription status...",{force:s,lastCheckTime:this.lastCheckTime,userId:r.auth.user._id,isAuthenticated:r.auth.isAuthenticated});const o=Date.now(),c=await we.get("/users/my-subscription"),u=Date.now()-o;if(console.log(`📡 Subscription API response (${u}ms):`,{success:c.data.success,status:c.status,hasData:!!c.data.data}),c.data.success){const d=c.data.data;console.log("📊 Subscription data received:",{status:d.status,isTrialActive:d.isTrialActive,trialDaysRemaining:d.trialDaysRemaining,usage:d.usage,restrictions:d.restrictions}),Qs.dispatch(aj(d)),this.checkSubscriptionHealth(d),console.log("✅ Subscription status updated successfully"),this.emitEvent("subscriptionChecked",{subscription:d})}else console.error("❌ Failed to fetch subscription:",c.data.message),this.emitEvent("subscriptionCheckFailed",{error:c.data.message})}catch(o){console.error("❌ Subscription check failed:",{message:o.message,status:(n=o.response)==null?void 0:n.status,url:(i=o.config)==null?void 0:i.url}),this.emitEvent("subscriptionCheckFailed",{error:o.message}),((l=o.response)==null?void 0:l.status)===401&&(console.log("🚫 Auth error detected, stopping periodic checks"),this.stopPeriodicChecks())}finally{this.isChecking=!1}}checkSubscriptionHealth(s){if(!s)return;const r=new Date,a=s.trialEndDate?new Date(s.trialEndDate):null,n=s.endDate?new Date(s.endDate):null;if(s.isTrialActive&&a){const i=Math.ceil((a-r)/864e5);i<=0?this.emitEvent("trialExpired",{subscription:s,daysRemaining:0}):i<=3&&this.emitEvent("trialExpiringSoon",{subscription:s,daysRemaining:i})}if(s.status==="active"&&n){const i=Math.ceil((n-r)/864e5);i<=0?this.emitEvent("subscriptionExpired",{subscription:s,daysRemaining:0}):i<=7&&this.emitEvent("subscriptionExpiringSoon",{subscription:s,daysRemaining:i})}if(s.restrictions){const{maxBeds:i,maxBranches:l}=s.restrictions,{bedsUsed:o,branchesUsed:c}=s.usage||{};i&&o>=i*.9&&this.emitEvent("bedLimitWarning",{current:o,limit:i,percentage:o/i*100}),l&&c>=l*.9&&this.emitEvent("branchLimitWarning",{current:c,limit:l,percentage:c/l*100})}}handleSubscriptionUpdate(s){console.log("🔄 Subscription updated via WebSocket:",s),Qs.dispatch(aj(s)),this.emitEvent("subscriptionUpdated",{subscription:s})}handleTrialExpiring(s){console.log("⚠️ Trial expiring soon:",s),this.emitEvent("trialExpiringSoon",s)}handleTrialExpired(s){console.log("❌ Trial expired:",s),this.emitEvent("trialExpired",s)}handleUsageLimitWarning(s){console.log("⚠️ Usage limit warning:",s),this.emitEvent("usageLimitWarning",s)}handleSubscriptionExpired(s){console.log("❌ Subscription expired:",s),this.emitEvent("subscriptionExpired",s)}canPerformAction(s,r={}){const n=Qs.getState().auth.subscription;if(!n||!["active","trial"].includes(n.status)||n.isTrialActive&&n.trialEndDate&&new Date(n.trialEndDate)<=new Date||n.endDate&&new Date(n.endDate)<=new Date)return!1;switch(s){case"addBed":return this.canAddBed(r);case"addBranch":return this.canAddBranch(r);case"accessModule":return this.canAccessModule(r.module,r.submodule,r.permission);case"accessFeature":return this.canAccessFeature(r.feature);default:return!0}}canAddBed(s={}){const r=Qs.getState().auth.subscription;if(!(r!=null&&r.restrictions))return!1;const{maxBeds:a}=r.restrictions,{bedsUsed:n}=r.usage||{},i=s.additionalBeds||1;return n+i<=a}canAddBranch(s={}){const r=Qs.getState().auth.subscription;if(!(r!=null&&r.restrictions))return!1;const{maxBranches:a}=r.restrictions,{branchesUsed:n}=r.usage||{},i=s.additionalBranches||1;return n+i<=a}canAccessModule(s,r=null,a=null){var l;const n=Qs.getState().auth.subscription;if(!((l=n==null?void 0:n.restrictions)!=null&&l.modules))return!1;const i=n.restrictions.modules.find(o=>o.moduleName===s);if(!i||!i.enabled)return!1;if(r&&a){const o=i.permissions[r];return o&&o[a]===!0}return!0}canAccessFeature(s){var a;const r=Qs.getState().auth.subscription;return(a=r==null?void 0:r.restrictions)!=null&&a.features?r.restrictions.features.some(n=>n.name===s&&n.enabled):!1}getRemainingResources(){const s=Qs.getState().auth.subscription;if(!(s!=null&&s.restrictions)||!(s!=null&&s.usage))return{};const{maxBeds:r,maxBranches:a}=s.restrictions,{bedsUsed:n,branchesUsed:i}=s.usage;return{beds:Math.max(0,r-n),branches:Math.max(0,a-i)}}getSubscriptionSummary(){var i,l,o,c,u;const s=Qs.getState().auth.subscription;if(!s)return null;const r=new Date,a=s.trialEndDate?new Date(s.trialEndDate):null,n=s.endDate?new Date(s.endDate):null;return{status:s.status,planName:((i=s.plan)==null?void 0:i.planName)||"Free",isTrialActive:s.isTrialActive,trialDaysRemaining:a?Math.max(0,Math.ceil((a-r)/(1e3*60*60*24))):0,daysRemaining:n?Math.max(0,Math.ceil((n-r)/(1e3*60*60*24))):0,usagePercentage:{beds:(l=s.restrictions)!=null&&l.maxBeds?(((o=s.usage)==null?void 0:o.bedsUsed)||0)/s.restrictions.maxBeds*100:0,branches:(c=s.restrictions)!=null&&c.maxBranches?(((u=s.usage)==null?void 0:u.branchesUsed)||0)/s.restrictions.maxBranches*100:0},restrictions:s.restrictions,usage:s.usage}}getSubscriptionHealth(){if(!Qs.getState().auth.subscription)return null;const r=this.getSubscriptionSummary();if(!r)return null;const a=[];return r.isTrialActive&&(r.trialDaysRemaining===0?a.push({type:"critical",message:"Trial expired"}):r.trialDaysRemaining<=3&&a.push({type:"warning",message:`Trial expires in ${r.trialDaysRemaining} days`})),r.status!=="active"&&r.status!=="trial"&&a.push({type:"critical",message:"Subscription not active"}),r.usagePercentage.beds>=90&&a.push({type:"warning",message:"Approaching bed limit"}),r.usagePercentage.branches>=90&&a.push({type:"warning",message:"Approaching branch limit"}),{isHealthy:a.length===0,issues:a,summary:r}}on(s,r){this.eventListeners.has(s)||this.eventListeners.set(s,[]),this.eventListeners.get(s).push(r)}off(s,r){if(this.eventListeners.has(s)){const a=this.eventListeners.get(s),n=a.indexOf(r);n>-1&&a.splice(n,1)}}emitEvent(s,r){this.eventListeners.has(s)&&this.eventListeners.get(s).forEach(a=>{try{a(r)}catch(n){console.error(`Error in ${s} event callback:`,n)}})}async forceRefresh(){console.log("🔄 Force refreshing subscription data"),await this.checkSubscriptionStatus(!0)}destroy(){this.stopPeriodicChecks(),this.closeWebSocketConnection(),this.authUnsubscribe&&this.authUnsubscribe(),this.eventListeners.clear(),console.log("🗑️ Subscription Manager destroyed")}}const As=new Q_,jm={"/api/residents":{POST:{module:"resident_management",submodule:"residents",permission:"create"},PUT:{module:"resident_management",submodule:"residents",permission:"update"},DELETE:{module:"resident_management",submodule:"residents",permission:"delete"}},"/api/offboarding":{POST:{module:"resident_management",submodule:"offboarding",permission:"create"}},"/api/room-switching":{POST:{module:"resident_management",submodule:"room_switching",permission:"create"}},"/api/payments":{POST:{module:"payment_tracking",submodule:"payments",permission:"create"},PUT:{module:"payment_tracking",submodule:"payments",permission:"update"}},"/api/rooms":{POST:{module:"room_allocation",submodule:"rooms",permission:"create"},PUT:{module:"room_allocation",submodule:"rooms",permission:"update"},DELETE:{module:"room_allocation",submodule:"rooms",permission:"delete"}},"/api/floors":{POST:{module:"room_allocation",submodule:"rooms",permission:"create"}},"/api/qr-codes":{POST:{module:"qr_code_payments",submodule:"qr_generation",permission:"create"}},"/api/tickets":{POST:{module:"ticket_system",submodule:"tickets",permission:"create"},PUT:{module:"ticket_system",submodule:"tickets",permission:"update"}},"/api/reports":{GET:{module:"analytics_reports",submodule:"reports",permission:"read"}},"/api/pg/bulk-upload":{POST:{module:"bulk_upload",submodule:"bulk_import",permission:"create"}},"/api/branches":{POST:{module:"multi_branch",submodule:"branch_management",permission:"create"},PUT:{module:"multi_branch",submodule:"branch_management",permission:"update"},DELETE:{module:"multi_branch",submodule:"branch_management",permission:"delete"}}},Z_={beds:(t,s,r)=>t==="POST"&&s.includes("/api/residents")?As.canPerformAction("addBed",{additionalBeds:1}):!0,branches:(t,s,r)=>t==="POST"&&s.includes("/api/branches")?As.canPerformAction("addBranch",{additionalBranches:1}):!0},eA=(t,s,r=null)=>{const n=Qs.getState().auth.subscription;if(console.log("🔍 Subscription middleware checking URL:",t),t.includes("/auth/")||t.includes("/activate-trial"))return console.log("✅ Allowing request:",t),{allowed:!0};if(!n)return console.log("🔍 No subscription found, checking allowed endpoints for URL:",t),["/auth/login","/auth/logout","/auth/refresh","/users/my-subscription"].some(o=>t.includes(o))?(console.log("✅ Allowing request - no subscription but in allowed endpoints"),{allowed:!0}):(console.log("❌ Blocking request - no subscription and not in allowed endpoints"),{allowed:!1,reason:"No active subscription found"});if(console.log("🔍 Checking subscription status:",n.status,"for URL:",t),!["active","trial"].includes(n.status))return console.log("❌ Blocking request - subscription status:",n.status),{allowed:!1,reason:`Subscription status: ${n.status}`};if(console.log("✅ Allowing request - valid subscription status"),n.isTrialActive&&n.trialEndDate&&new Date(n.trialEndDate)<=new Date)return{allowed:!1,reason:"Trial period has expired"};if(n.endDate&&new Date(n.endDate)<=new Date)return{allowed:!1,reason:"Subscription has expired"};const i=tA(t,s);if(i&&!As.canAccessModule(i.module,i.submodule,i.permission))return{allowed:!1,reason:`Insufficient permissions for ${i.module}`};for(const[l,o]of Object.entries(Z_))if(!o(s,t,r)){const u=As.getRemainingResources();return{allowed:!1,reason:`Would exceed ${l} limit. Remaining: ${u[l]||0}`}}return{allowed:!0}},tA=(t,s)=>{const r=t.split("?")[0].split("/").slice(0,4).join("/");if(jm[r]&&jm[r][s])return jm[r][s];for(const[a,n]of Object.entries(jm))if(r.includes(a)&&n[s])return n[s];return null},sA=t=>(t.interceptors.request.use(s=>{const r=eA(s.url,s.method,s.data);if(!r.allowed){const a=new Error(`Subscription restriction: ${r.reason}`);return M.error(`Access denied: ${r.reason}`,{duration:6e3,action:{label:"Upgrade Plan",onClick:()=>{console.log("Navigate to upgrade page")}}}),Promise.reject(a)}return s},s=>Promise.reject(s)),t.interceptors.response.use(s=>(Qs.getState().auth.isAuthenticated,s),s=>{var r,a,n,i;return((r=s.response)==null?void 0:r.status)===403&&((i=(n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)!=null&&i.includes("subscription"))&&M.error("Subscription access denied. Please check your plan limits.",{duration:6e3}),Promise.reject(s)}),t),rA=()=>{const t=window.location.hostname;return t.match(/^\d+\.\d+\.\d+\.\d+$/)?`http://${t}:5000/api`:"http://localhost:5000/api"},we=Ps.create({baseURL:rA(),timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});console.log("🌐 API Base URL:",we.defaults.baseURL);sA(we);we.interceptors.request.use(t=>{var n,i;const s=localStorage.getItem("accessToken");s&&(t.headers.Authorization=`Bearer ${s}`);const a=(n=Qs.getState().ui)==null?void 0:n.language;return a&&(t.headers["Accept-Language"]=a),t.method!=="get"&&console.log("📡 API Request:",{method:(i=t.method)==null?void 0:i.toUpperCase(),url:t.url,headers:{authorization:t.headers.Authorization?"Present":"Missing","content-type":t.headers["Content-Type"]},dataKeys:t.data?Object.keys(t.data):"No data",dataTypes:t.data?Object.keys(t.data).reduce((l,o)=>(l[o]=typeof t.data[o],l),{}):{}}),t},t=>Promise.reject(t));we.interceptors.response.use(t=>t,async t=>{var r,a,n,i;const s=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!s._retry){s._retry=!0;try{if(localStorage.getItem("refreshToken")){const o=await Ps.post("http://localhost:5000/api/auth/refresh",{},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(o.data.success)return localStorage.setItem("accessToken",o.data.data.token),localStorage.setItem("refreshToken",o.data.data.refreshToken),o.data.data.user&&localStorage.setItem("user",JSON.stringify(o.data.data.user)),s.headers.Authorization=`Bearer ${o.data.data.token}`,we(s)}}catch(l){return Qs.dispatch(D0()),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(l)}}return((a=t.response)==null?void 0:a.status)===403?console.error("Access forbidden:",t.response.data):((n=t.response)==null?void 0:n.status)===404?console.error("Resource not found:",t.response.data):((i=t.response)==null?void 0:i.status)===500&&console.error("Server error:",t.response.data),Promise.reject(t)});const a0=zr("branch/fetchBranches",async(t,{rejectWithValue:s})=>{var r,a;try{const i=(await we.get("/branches")).data;return i!=null&&i.success?i.data||[]:s((i==null?void 0:i.message)||"Failed to fetch branches")}catch(n){return s(((a=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:a.message)||n.message||"Failed to fetch branches")}}),aA={branches:[],selectedBranch:null,loading:!1,error:null,lastLoadedAt:null},K2=Iu({name:"branch",initialState:aA,reducers:{setSelectedBranch:(t,s)=>{t.selectedBranch=s.payload},clearSelectedBranch:t=>{t.selectedBranch=null},setBranches:(t,s)=>{t.branches=s.payload||[]},clearBranches:t=>{t.branches=[]}},extraReducers:t=>{t.addCase(a0.pending,s=>{s.loading=!0,s.error=null}).addCase(a0.fulfilled,(s,r)=>{if(s.loading=!1,s.branches=r.payload||[],s.lastLoadedAt=Date.now(),!s.selectedBranch&&s.branches.length>0){const a=s.branches.find(n=>n.isDefault);s.selectedBranch=a||s.branches[0]}else if(s.selectedBranch&&!s.branches.find(a=>a._id===s.selectedBranch._id)){const a=s.branches.find(n=>n.isDefault);s.selectedBranch=a||s.branches[0]||null}}).addCase(a0.rejected,(s,r)=>{s.loading=!1,s.error=r.payload||"Failed to fetch branches"})}}),{setSelectedBranch:nA}=K2.actions,Nr=t=>t.branch.selectedBranch,iA=t=>t.branch.branches,lA=K2.reducer;class oA{async list({page:s=1,limit:r=10,unreadOnly:a=!1,branchId:n}={}){const i=new URLSearchParams;return i.append("page",s),i.append("limit",r),a&&i.append("unreadOnly","true"),n&&i.append("branchId",n),(await we.get(`/notifications?${i.toString()}`)).data}async markRead(s){return(await we.put(`/notifications/${s}/read`)).data}async markAllRead({branchId:s}={}){const r=new URLSearchParams;return s&&r.append("branchId",s),(await we.put(`/notifications/mark-all/read?${r.toString()}`)).data}}const wb=new oA,Od=zr("notifications/fetch",async(t,s)=>(await wb.list(t)).data),Nb=zr("notifications/markRead",async(t,s)=>(await wb.markRead(t)).data),Sb=zr("notifications/markAllRead",async(t,s)=>(await wb.markAllRead(t)).data),X2=Iu({name:"notifications",initialState:{items:[],pagination:{page:1,limit:10,total:0,totalPages:0},loading:!1,error:null},reducers:{pushNotification(t,s){t.items=[s.payload,...t.items].slice(0,20)}},extraReducers:t=>{t.addCase(Od.pending,s=>{s.loading=!0,s.error=null}).addCase(Od.fulfilled,(s,r)=>{s.loading=!1,s.items=r.payload.items||[],s.pagination=r.payload.pagination||s.pagination}).addCase(Od.rejected,(s,r)=>{s.loading=!1,s.error=r.error.message}).addCase(Nb.fulfilled,(s,r)=>{const a=s.items.findIndex(n=>n._id===r.payload._id);a!==-1&&(s.items[a]=r.payload)}).addCase(Sb.fulfilled,s=>{s.items=s.items.map(r=>({...r,isRead:!0,readAt:new Date().toISOString()}))})}}),{pushNotification:cA}=X2.actions,dA=X2.reducer;class uA{async getAllSubscriptions(s={}){var r,a,n;try{const i=new URLSearchParams;s.status&&i.append("status",s.status),s.billingCycle&&i.append("billingCycle",s.billingCycle),s.isPopular!==void 0&&i.append("isPopular",s.isPopular),s.search&&i.append("search",s.search),s.pgId&&i.append("pgId",s.pgId),s.role&&i.append("role",s.role);const l=await we.get(`/subscriptions?${i.toString()}`);if(!l.data||!l.data.success)throw new Error(((r=l.data)==null?void 0:r.message)||"Failed to fetch subscriptions");return{success:!0,data:l.data.data,count:l.data.count||l.data.data.length}}catch(i){return console.error("Error fetching subscriptions:",i),{success:!1,message:((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch subscription plans"}}}async getSubscriptionById(s){try{return(await we.get(`/subscriptions/${s}`)).data}catch(r){throw console.error("Error fetching subscription:",r),this.handleError(r)}}async createSubscription(s){var r,a;try{if(s.isCustomPlan&&!s.assignedPG)throw new Error("Custom plans must be assigned to a specific PG");return{success:!0,data:(await we.post("/subscriptions",s)).data}}catch(n){return console.error("Error creating subscription:",n),{success:!1,message:((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create subscription"}}}async updateSubscription(s,r){try{return(await we.put(`/subscriptions/${s}`,r)).data}catch(a){throw console.error("Error updating subscription:",a),this.handleError(a)}}async deleteSubscription(s){try{return(await we.delete(`/subscriptions/${s}`)).data}catch(r){throw console.error("Error deleting subscription:",r),this.handleError(r)}}async calculateCost(s,r,a=1){try{return(await we.post(`/subscriptions/${s}/calculate`,{bedCount:r,branchCount:a})).data}catch(n){throw console.error("Error calculating cost:",n),this.handleError(n)}}async getActivePlans(s={}){var r,a,n;try{const i=new URLSearchParams;s.role&&i.append("role",s.role),s.email&&i.append("userEmail",s.email);const l=await we.get(`/subscriptions/active/plans?${i.toString()}`);if(!l.data||!l.data.success)throw new Error(((r=l.data)==null?void 0:r.message)||"Failed to fetch active plans");return{success:!0,data:l.data.data,count:l.data.count||l.data.data.length}}catch(i){return console.error("Error fetching active plans:",i),{success:!1,message:((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch active plans"}}}async getPopularPlans(){try{return(await we.get("/subscriptions/popular/plans")).data}catch(s){throw console.error("Error fetching popular plans:",s),this.handleError(s)}}async togglePopular(s){try{return(await we.patch(`/subscriptions/${s}/toggle-popular`)).data}catch(r){throw console.error("Error toggling popularity:",r),this.handleError(r)}}async toggleRecommended(s){try{return(await we.patch(`/subscriptions/${s}/toggle-recommended`)).data}catch(r){throw console.error("Error toggling recommended:",r),this.handleError(r)}}async getStatistics(){try{return(await we.get("/subscriptions/stats/overview")).data}catch(s){throw console.error("Error fetching statistics:",s),this.handleError(s)}}async duplicateSubscription(s){try{return(await we.post(`/subscriptions/${s}/duplicate`)).data}catch(r){throw console.error("Error duplicating subscription:",r),this.handleError(r)}}async getSubscriptionManagementStats(){try{return(await we.get("/subscription-management/stats")).data}catch(s){throw console.error("Error fetching subscription management stats:",s),this.handleError(s)}}async getUserSubscriptionHistory(s){try{return(await we.get(`/subscription-management/users/${s}/history`)).data}catch(r){throw console.error("Error fetching user subscription history:",r),this.handleError(r)}}async getAllSubscribers(s={}){try{const r=new URLSearchParams;return s.status&&r.append("status",s.status),s.billingCycle&&r.append("billingCycle",s.billingCycle),s.subscriptionPlanId&&r.append("subscriptionPlanId",s.subscriptionPlanId),s.userRole&&r.append("userRole",s.userRole),s.startDate&&r.append("startDate",s.startDate),s.endDate&&r.append("endDate",s.endDate),(await we.get(`/subscription-management/subscribers?${r.toString()}`)).data}catch(r){throw console.error("Error fetching subscribers:",r),this.handleError(r)}}async subscribeUser(s,r){try{return(await we.post(`/subscription-management/users/${s}/subscribe`,r)).data}catch(a){throw console.error("Error subscribing user:",a),this.handleError(a)}}async changeUserSubscription(s,r){try{return(await we.put(`/subscription-management/users/${s}/change-subscription`,r)).data}catch(a){throw console.error("Error changing subscription:",a),this.handleError(a)}}async cancelUserSubscription(s,r=""){try{return(await we.post(`/subscription-management/users/${s}/cancel-subscription`,{cancellationReason:r})).data}catch(a){throw console.error("Error cancelling subscription:",a),this.handleError(a)}}async getUserSubscriptionHistory(s){try{return(await we.get(`/subscription-management/users/${s}/history`)).data}catch(r){throw console.error("Error fetching user subscription history:",r),this.handleError(r)}}async getActiveSubscriptionsByPlan(){try{return(await we.get("/subscription-management/active-by-plan")).data}catch(s){throw console.error("Error fetching active subscriptions by plan:",s),this.handleError(s)}}async getPGsForCustomPlans(s="",r={}){var a,n,i;try{const l=new URLSearchParams;s&&l.append("search",s),r.role&&l.append("role",r.role),r.userPGId&&l.append("userPGId",r.userPGId);const o=await we.get(`/subscriptions/pgs-for-custom-plans?${l.toString()}`);if(!o.data||!o.data.success)throw new Error(((a=o.data)==null?void 0:a.message)||"Failed to fetch PGs");return{success:!0,data:o.data.data,count:o.data.count||o.data.data.length}}catch(l){return console.error("Error fetching PGs for custom plans:",l),{success:!1,message:((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch PGs for custom plans"}}}async addBranchesToSubscription(s,r){try{return(await we.post("/users/subscription/add-branches",{additionalBranches:s,newMaxBranches:r})).data}catch(a){throw console.error("Error adding branches to subscription:",a),this.handleError(a)}}async requestUpgrade(s,r){try{return(await we.post(`/subscriptions/${s}/request-upgrade`,r)).data}catch(a){throw console.error("Error requesting upgrade:",a),this.handleError(a)}}async getUpgradeRequests(s){try{return(await we.get(`/subscriptions/${s}/upgrade-requests`)).data}catch(r){throw console.error("Error fetching upgrade requests:",r),this.handleError(r)}}async respondToUpgradeRequest(s,r,a){try{return(await we.post(`/subscriptions/${s}/upgrade-requests/${r}/respond`,a)).data}catch(n){throw console.error("Error responding to upgrade request:",n),this.handleError(n)}}async updateSubscriptionUsage(s,r){try{return(await we.put(`/subscription-management/users/${s}/usage`,r)).data}catch(a){throw console.error("Error updating subscription usage:",a),this.handleError(a)}}async extendSubscription(s,r){try{return(await we.post(`/subscription-management/${s}/extend`,{extensionDays:r})).data}catch(a){throw console.error("Error extending subscription:",a),this.handleError(a)}}async getExpiringSoonSubscriptions(s=7){try{return(await we.get(`/subscription-management/expiring-soon?days=${s}`)).data}catch(r){throw console.error("Error fetching expiring subscriptions:",r),this.handleError(r)}}handleError(s){var r,a;return s.response?{success:!1,message:((r=s.response.data)==null?void 0:r.message)||"An error occurred",errors:((a=s.response.data)==null?void 0:a.errors)||[]}:{success:!1,message:s.message||"Network error occurred"}}formatCurrency(s){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(s)}getAvailableModules(){return[{value:"resident_management",label:"Resident Management",icon:"👥"},{value:"payment_tracking",label:"Payment Tracking",icon:"💰"},{value:"room_allocation",label:"Room Allocation",icon:"🏠"},{value:"qr_code_payments",label:"QR Code Payments",icon:"📱"},{value:"ticket_system",label:"Support Tickets",icon:"🎫"},{value:"analytics_reports",label:"Analytics & Reports",icon:"📊"},{value:"bulk_upload",label:"Bulk Upload",icon:"📤"},{value:"email_notifications",label:"Email Notifications",icon:"📧"},{value:"sms_notifications",label:"SMS Notifications",icon:"💬"},{value:"multi_branch",label:"Multi-Branch Support",icon:"🏢"},{value:"custom_reports",label:"Custom Reports",icon:"📝"},{value:"api_access",label:"API Access",icon:"🔌"},{value:"mobile_app",label:"Mobile App Access",icon:"📲"},{value:"advanced_analytics",label:"Advanced Analytics",icon:"📈"}]}getBillingCycles(){return[{value:"monthly",label:"Monthly",icon:"📅"},{value:"annual",label:"Annual",icon:"📆"}]}async activateFreeTrial(s){try{return(await we.post(`/subscription-management/users/${s}/activate-trial`)).data}catch(r){throw console.error("Error activating free trial:",r),this.handleError(r)}}getStatusOptions(){return[{value:"active",label:"Active",color:"green"},{value:"inactive",label:"Inactive",color:"gray"},{value:"archived",label:"Archived",color:"red"}]}async findCustomPlans(s){try{return{success:!0,data:(await we.get(`/subscriptions/custom/${s}`)).data}}catch(r){return console.error("Error fetching custom plans:",r),{success:!1,message:"Failed to fetch custom plans"}}}}const et=new uA,Md=zr("subscription/fetchUserSubscription",async(t,{rejectWithValue:s})=>{var r,a;try{return(await we.get("/users/my-subscription")).data.data}catch(n){return s(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch subscription")}}),n0=zr("subscription/selectPlan",async(t,{rejectWithValue:s})=>{var r,a;try{return(await we.post("/users/select-subscription",t)).data.data}catch(n){return s(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to select subscription")}}),i0=zr("subscription/fetchAvailablePlans",async(t={},{rejectWithValue:s,getState:r})=>{var a,n,i,l,o;try{const c=r(),u=c.subscription.plansCacheTime?Date.now()-c.subscription.plansCacheTime:1/0;if(c.subscription.availablePlans.length>0&&u<5*60*1e3)return c.subscription.availablePlans;const d={role:t.role||((a=c.auth.user)==null?void 0:a.role)||"admin",pgId:t.pgId||((n=c.auth.user)==null?void 0:n.pgId),email:t.email||((i=c.auth.user)==null?void 0:i.email)};return(await et.getActivePlans(d)).data}catch(c){return s(((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Failed to fetch plans")}}),nj={currentPlan:null,subscriptionStatus:"free",selectedPlanId:null,availablePlans:[],plansCacheTime:null,restrictions:{maxBeds:0,enabledModules:[],enabledFeatures:[]},currentUsage:{bedsUsed:0,branchesUsed:0},subscriptionStartDate:null,subscriptionEndDate:null,trialEndDate:null,loading:!1,plansLoading:!1,error:null},mA=Iu({name:"subscription",initialState:nj,reducers:{setCurrentPlan:(t,s)=>{var r,a;t.currentPlan=s.payload,s.payload&&(t.selectedPlanId=s.payload._id,t.restrictions={maxBeds:s.payload.maxBedsAllowed||s.payload.baseBedCount,enabledModules:((r=s.payload.modules)==null?void 0:r.filter(n=>n.enabled).map(n=>n.moduleName))||[],enabledFeatures:((a=s.payload.features)==null?void 0:a.filter(n=>n.enabled).map(n=>n.name))||[]})},setSubscriptionStatus:(t,s)=>{t.subscriptionStatus=s.payload},setCurrentUsage:(t,s)=>{t.currentUsage={...t.currentUsage,...s.payload}},updateBedsUsed:(t,s)=>{t.currentUsage.bedsUsed=s.payload},clearSubscription:t=>nj,setSubscriptionDates:(t,s)=>{t.subscriptionStartDate=s.payload.startDate,t.subscriptionEndDate=s.payload.endDate,t.trialEndDate=s.payload.trialEndDate}},extraReducers:t=>{t.addCase(Md.pending,s=>{s.loading=!0,s.error=null}).addCase(Md.fulfilled,(s,r)=>{var a,n,i,l,o;if(s.loading=!1,s.currentPlan=r.payload.plan,s.selectedPlanId=r.payload.planId,s.subscriptionStatus=r.payload.status,s.subscriptionStartDate=r.payload.startDate,s.subscriptionEndDate=r.payload.endDate,s.trialEndDate=r.payload.trialEndDate,s.currentUsage=r.payload.usage||s.currentUsage,r.payload.restrictions)s.restrictions={maxBeds:r.payload.restrictions.maxBeds,enabledModules:((a=r.payload.restrictions.modules)==null?void 0:a.filter(c=>c.enabled).map(c=>c.moduleName))||[],enabledFeatures:((n=r.payload.restrictions.features)==null?void 0:n.filter(c=>c.enabled).map(c=>c.name))||[]};else if(r.payload.plan){const c=((i=r.payload.customPricing)==null?void 0:i.maxBedsAllowed)||r.payload.plan.maxBedsAllowed||r.payload.plan.baseBedCount;s.restrictions={maxBeds:c,enabledModules:((l=r.payload.plan.modules)==null?void 0:l.filter(u=>u.enabled).map(u=>u.moduleName))||[],enabledFeatures:((o=r.payload.plan.features)==null?void 0:o.filter(u=>u.enabled).map(u=>u.name))||[]}}}).addCase(Md.rejected,(s,r)=>{s.loading=!1,s.error=r.payload}).addCase(n0.pending,s=>{s.loading=!0,s.error=null}).addCase(n0.fulfilled,(s,r)=>{var a,n;s.loading=!1,s.currentPlan=r.payload.plan,s.selectedPlanId=r.payload.planId,s.subscriptionStatus=r.payload.status,s.subscriptionStartDate=r.payload.startDate,s.subscriptionEndDate=r.payload.endDate,r.payload.plan&&(s.restrictions={maxBeds:r.payload.plan.maxBedsAllowed||r.payload.plan.baseBedCount,enabledModules:((a=r.payload.plan.modules)==null?void 0:a.filter(i=>i.enabled).map(i=>i.moduleName))||[],enabledFeatures:((n=r.payload.plan.features)==null?void 0:n.filter(i=>i.enabled).map(i=>i.name))||[]})}).addCase(n0.rejected,(s,r)=>{s.loading=!1,s.error=r.payload}).addCase(i0.pending,s=>{s.plansLoading=!0,s.error=null}).addCase(i0.fulfilled,(s,r)=>{s.plansLoading=!1,s.availablePlans=r.payload,s.plansCacheTime=Date.now()}).addCase(i0.rejected,(s,r)=>{s.plansLoading=!1,s.error=r.payload})}}),J2=t=>t.subscription.currentPlan,xA=t=>t.subscription.subscriptionStatus,Q2=t=>t.subscription.restrictions,Z2=t=>t.subscription.currentUsage,hA=t=>t.subscription.availablePlans,fA=t=>t.subscription.loading,gA=t=>t.subscription.plansLoading,pA=mA.reducer,bA={key:"root",storage:w2,whitelist:["auth","branch","subscription"]},yA=yE({auth:Y_,ui:J_,branch:lA,notifications:dA,subscription:pA}),vA=jE(bA,yA),Qs=bE({reducer:vA,middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),jA=vE(Qs);function l0(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l0=function(r){return typeof r}:l0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l0(t)}function wA(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function NA(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function SA(t,s,r){return s&&NA(t.prototype,s),t}function CA(t,s){return s&&(l0(s)==="object"||typeof s=="function")?s:o0(t)}function _g(t){return _g=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_g(t)}function o0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kA(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),s&&Ag(t,s)}function Ag(t,s){return Ag=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Ag(t,s)}function c0(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}var eS=function(t){kA(s,t);function s(){var r,a;wA(this,s);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return a=CA(this,(r=_g(s)).call.apply(r,[this].concat(i))),c0(o0(a),"state",{bootstrapped:!1}),c0(o0(a),"_unsubscribe",void 0),c0(o0(a),"handlePersistorState",function(){var o=a.props.persistor,c=o.getState(),u=c.bootstrapped;u&&(a.props.onBeforeLift?Promise.resolve(a.props.onBeforeLift()).finally(function(){return a.setState({bootstrapped:!0})}):a.setState({bootstrapped:!0}),a._unsubscribe&&a._unsubscribe())}),a}return SA(s,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),s}(h.PureComponent);c0(eS,"defaultProps",{children:null,loading:null});const Uc=()=>{const t=cr(),[s,r]=h.useState(!1),a=h.useRef(!1),n=He(Pl),i=He(W_),l=He(V_),o=He(z_),c=async x=>{try{return await t(lc(x)).unwrap(),{success:!0}}catch(g){return{success:!1,error:g.message||"Login failed"}}},u=async()=>{try{return await t(ci()).unwrap(),{success:!0}}catch(x){return{success:!1,error:x.message||"Logout failed"}}},d=async()=>{try{return console.log("🔍 Checking current user..."),await t(Ql()).unwrap(),console.log("✅ Current user check successful"),{success:!0}}catch(x){return console.log("❌ Current user check failed:",x),{success:!1,error:x.message||"Failed to get current user"}}};h.useEffect(()=>{if(a.current)return;a.current=!0,(async()=>{console.log("🚀 useAuth: Starting auth check..."),console.log("👤 Current user from Redux:",n),console.log("🔐 Is authenticated from Redux:",i),console.log("⏳ Is loading from Redux:",l),console.log("✅ Has checked auth:",s);try{const p=Lt.getAccessToken(),f=Lt.getRefreshToken(),b=Lt.getCurrentUserFromStorage();if(console.log("🔑 Access token in localStorage:",!!p),console.log("🔄 Refresh token in localStorage:",!!f),console.log("👤 Stored user in localStorage:",!!b),p&&!n)if(console.log("🔄 Have tokens but no Redux user, checking token validity..."),Lt.isAuthenticated()){console.log("✅ Token is valid, fetching current user...");try{await d()}catch(y){console.log("❌ Failed to get current user, clearing auth:",y),Lt.clearAuth()}}else console.log("❌ Token is expired or invalid, user not authenticated");else console.log(p?"✅ User already loaded from storage":"🚫 No access token found, user not authenticated")}catch(p){console.log("❌ Auth check error:",p)}finally{r(!0),console.log("✅ Auth check completed")}})();const g=setTimeout(()=>{s||(console.log("⏰ Auth check timeout, marking as complete"),r(!0))},5e3);return()=>clearTimeout(g)},[]);const m=!s;return console.log("🎯 Final auth state:",{user:!!n,isAuthenticated:i,loading:m,hasCheckedAuth:s,isLoading:l}),{user:n,isAuthenticated:i,loading:m,hasCheckedAuth:s,error:o,login:c,logout:u,getCurrentUser:d}},Hu=(t=!0)=>{const[s,r]=h.useState(!1),[a,n]=h.useState([]),i=He(j=>j.auth.subscription),l=He(j=>j.auth.isAuthenticated),o=h.useRef([]),c=50,u=h.useCallback((j,k)=>{const E={id:Date.now()+Math.random(),type:j,data:k,timestamp:new Date().toISOString()};o.current=[E,...o.current].slice(0,c),n([...o.current])},[]);h.useEffect(()=>(t&&l&&!s&&(console.log("🚀 Initializing subscription manager hook"),As.on("subscriptionChecked",j=>{u("subscriptionChecked",j)}),As.on("subscriptionCheckFailed",j=>{u("subscriptionCheckFailed",j),console.error("Subscription check failed:",j.error)}),As.on("subscriptionUpdated",j=>{u("subscriptionUpdated",j),M.success("Subscription updated successfully")}),As.on("trialExpiringSoon",j=>{u("trialExpiringSoon",j),M.warning(`Your trial expires in ${j.daysRemaining} day${j.daysRemaining!==1?"s":""}. Upgrade now to continue using all features.`,{duration:8e3})}),As.on("trialExpired",j=>{u("trialExpired",j),M.error("Your trial has expired. Please upgrade your plan to continue using the service.",{duration:1e4})}),As.on("subscriptionExpired",j=>{u("subscriptionExpired",j),M.error("Your subscription has expired. Please renew to continue using the service.",{duration:1e4})}),As.on("bedLimitWarning",j=>{u("bedLimitWarning",j);const k=j.limit-j.current;M.warning(`You're approaching your bed limit (${j.current}/${j.limit}). ${k} beds remaining.`,{duration:6e3})}),As.on("branchLimitWarning",j=>{u("branchLimitWarning",j);const k=j.limit-j.current;M.warning(`You're approaching your branch limit (${j.current}/${j.limit}). ${k} branches remaining.`,{duration:6e3})}),As.initialize(),r(!0)),()=>{(!t||!l)&&s&&(console.log("🗑️ Cleaning up subscription manager hook"),As.destroy(),r(!1),o.current=[],n([]))}),[t,l,s,u]);const d=h.useCallback((j,k={})=>As.canPerformAction(j,k),[]),m=h.useCallback((j=1)=>As.canAddBed({additionalBeds:j}),[]),x=h.useCallback((j=1)=>As.canAddBranch({additionalBranches:j}),[]),g=h.useCallback((j,k=null,E=null)=>As.canAccessModule(j,k,E),[]),p=h.useCallback(j=>As.canAccessFeature(j),[]),f=h.useCallback(()=>As.getRemainingResources(),[]),b=h.useCallback(()=>As.getSubscriptionSummary(),[]),y=h.useCallback(async()=>{try{await As.forceRefresh(),M.success("Subscription data refreshed")}catch(j){M.error("Failed to refresh subscription data"),console.error("Force refresh failed:",j)}},[]),v=h.useCallback(()=>As.getSubscriptionHealth(),[i]),N=h.useCallback(()=>{o.current=[],n([])},[]),S=h.useCallback((j=10)=>o.current.slice(0,j),[]),w=h.useCallback((j,k)=>As.on(j,k),[]),C=h.useCallback((j,k)=>As.off(j,k),[]);return h.useEffect(()=>(typeof window<"u"&&(window.subscriptionManager={canPerformAction:d,canAddBed:m,canAddBranch:x,canAccessModule:g,getRemainingResources:f,getSubscriptionSummary:b,getSubscriptionHealth:v,forceRefresh:y,getRecentEvents:S,on:(j,k)=>As.on(j,k),off:(j,k)=>As.off(j,k)}),()=>{typeof window<"u"&&delete window.subscriptionManager}),[d,m,x,g,f,b,v,y,S,w,C]),{subscription:i,isInitialized:s,subscriptionEvents:a,canPerformAction:d,canAddBed:m,canAddBranch:x,canAccessModule:g,canAccessFeature:p,getRemainingResources:f,getSubscriptionSummary:b,getSubscriptionHealth:v,forceRefresh:y,clearEventHistory:N,getRecentEvents:S,on:w,off:C}},Zd=({isOpen:t,onClose:s,onRefresh:r})=>{const a=Ms(),n=cr(),{user:i}=He(v=>v.auth),[l,o]=h.useState(""),[c,u]=h.useState(!1),[d,m]=h.useState(10),g=i||(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})();h.useEffect(()=>{const v=N=>{var S;console.log("🚫 TokenExpiryModal: Received token expiry event:",N.detail),(S=N.detail)!=null&&S.message&&o(N.detail.message)};return window.addEventListener("tokenExpired",v),()=>{window.removeEventListener("tokenExpired",v)}},[]),h.useEffect(()=>{if(!t)return;const v=setInterval(()=>{m(N=>N<=1?(clearInterval(v),p(),0):N-1)},1e3);return()=>clearInterval(v)},[t]),h.useEffect(()=>{t&&m(10)},[t]);const p=async()=>{try{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),n(D0()),(g==null?void 0:g.role)==="superadmin"?a("/login"):a("/admin/login"),M.success("Logged out successfully")}catch(v){console.error("Logout error:",v),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),n(D0()),(g==null?void 0:g.role)==="superadmin"?a("/login"):a("/admin/login")}},f=async()=>{if(r){u(!0);try{if(await r())M.success("Session refreshed successfully!"),s();else throw new Error("Refresh failed")}catch(v){console.error("Token refresh failed:",v),M.error("Failed to refresh session. Please log in again."),p()}finally{u(!1)}}},b=()=>{p()},y=()=>{m(0)};return t?e.jsx(vt,{children:e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(ae.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.4,bounce:.3},className:"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(is,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Session Expired"}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(ut,{className:"w-4 h-4 mr-1"}),"Your authentication session has expired"]})]})]}),e.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white/50 rounded-lg transition-colors",children:e.jsx(ct,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Rt,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-medium mb-1",children:"Security Notice"}),e.jsx("p",{className:"text-blue-800 text-sm",children:l||"Your authentication session has expired for security reasons. Please log in again to continue using the application."})]})]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Important:"})," Any unsaved work may be lost."]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["You will be automatically logged out in ",d," seconds."]})]})]}),e.jsxs("div",{className:"space-y-3",children:[r&&e.jsx("button",{onClick:f,disabled:c,className:"flex items-center justify-center w-full px-4 py-3 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:c?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-4 h-4 mr-2 animate-spin"}),"Refreshing Session..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Try to Refresh Session"]})}),e.jsxs("button",{onClick:b,className:"flex items-center justify-center w-full px-4 py-3 text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 border border-gray-200 hover:border-gray-300",children:[e.jsx(ea,{className:"w-4 h-4 mr-2"}),"Log In Again"]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(is,{className:"w-4 h-4 text-gray-500"}),e.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["You will be redirected to the appropriate login page based on your role (",(g==null?void 0:g.role)||"user",")"]})]})})]})})}):null},Ox=()=>{const[t,s]=h.useState(!1),[r,a]=h.useState(!1),{user:n}=He(d=>d.auth),i=h.useCallback(()=>{const d=Lt.getAccessToken();if(!d)return!0;try{const m=JSON.parse(atob(d.split(".")[1])),x=Date.now()/1e3,g=m.exp<x-30;return g&&!r&&(a(!0),s(!0)),g}catch(m){return console.error("Error checking token expiry:",m),!0}},[r]),l=h.useCallback(()=>{a(!0),s(!0)},[]),o=h.useCallback(()=>{s(!1)},[]),c=h.useCallback(async()=>{var d;try{console.log("🔄 Attempting token refresh...");const m=Lt.getRefreshToken();if(!m)throw console.log("❌ No refresh token available"),new Error("No refresh token available");const x=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({refreshToken:m})});if(console.log("🔄 Token refresh response status:",x.status),!x.ok){const p=await x.json().catch(()=>({}));throw console.log("❌ Token refresh failed:",p),new Error(p.message||"Token refresh failed")}const g=await x.json();if(console.log("✅ Token refresh response:",g),g.success&&((d=g.data)!=null&&d.accessToken))return localStorage.setItem("accessToken",g.data.accessToken),a(!1),s(!1),console.log("✅ Token refreshed successfully"),!0;throw new Error(g.message||"Invalid refresh response")}catch(m){throw console.error("❌ Token refresh failed:",m),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),m}},[]),u=h.useCallback(()=>(n==null?void 0:n.role)==="superadmin"?"/login":"/admin/login",[n==null?void 0:n.role]);return h.useEffect(()=>{const d=()=>{i()};d();const m=setInterval(d,3e4);return()=>clearInterval(m)},[i]),h.useEffect(()=>{i()},[i]),h.useEffect(()=>{const d=m=>{console.log("🚫 Token expiry event received:",m.detail),a(!0),s(!0)};return window.addEventListener("tokenExpired",d),()=>{window.removeEventListener("tokenExpired",d)}},[]),h.useEffect(()=>{const d=m=>{const{status:x,message:g}=m.detail||{};(x===401||g!=null&&g.includes("Invalid token")||g!=null&&g.includes("Token expired")||g!=null&&g.includes("Unauthorized"))&&(console.log("🚫 API error indicates token expiry:",m.detail),a(!0),s(!0))};return window.addEventListener("apiError",d),()=>{window.removeEventListener("apiError",d)}},[]),{showExpiryModal:t,isTokenExpired:r,handleTokenExpiry:l,closeExpiryModal:o,handleRefreshToken:c,getLoginPath:u,checkTokenExpiry:i}},EA=()=>{var N;const[t,s]=h.useState(!1),[r,a]=h.useState(!1),[n,i]=h.useState(new Set),{user:l}=He(S=>S.auth),o=cr(),c=Ms(),u=wo(),{showExpiryModal:d,closeExpiryModal:m,handleRefreshToken:x}=Ox();console.log("👑 SuperadminLayout rendering:",{user:l,location:u.pathname});const g=[{name:"Dashboard",href:"/superadmin/dashboard",icon:Ia},{name:"PG Management",href:"/superadmin/pg-management",icon:Ie},{name:"User Management",icon:a2,hasDropdown:!0,dropdownItems:[{name:"All Users",href:"/superadmin/users",icon:Je},{name:"Support Staff",href:"/superadmin/support-staff",icon:Cr}]},{name:"Subscriptions",icon:Ur,hasDropdown:!0,dropdownItems:[{name:"Subscription Plans",href:"/superadmin/subscriptions",icon:Ur},{name:"Subscriber Management",href:"/superadmin/subscriber-management",icon:Je}]},{name:"Support System",icon:Rs,hasDropdown:!0,dropdownItems:[{name:"All Tickets",href:"/superadmin/tickets",icon:Rs},{name:"Support Staff",href:"/superadmin/support-staff",icon:Cr},{name:"Ticket Activities",href:"/superadmin/ticket-activities",icon:Cr}]},{name:"Financial",icon:Ks,hasDropdown:!0,dropdownItems:[{name:"Payment Tracking",href:"/superadmin/payments",icon:Ks},{name:"Financial Reports",href:"/superadmin/reports",icon:n2}]},{name:"Analytics",href:"/superadmin/analytics",icon:Jt},{name:"Security Dashboard",href:"/superadmin/security",icon:is},{name:"Revenue Dashboard",href:"/superadmin/revenue",icon:_t},{name:"Recent Activities",href:"/superadmin/activities",icon:ys},{name:"Billing",href:"/superadmin/billing",icon:Ft},{name:"Sales",href:"/superadmin/sales-analytics",icon:Jt},{name:"Settings",href:"/superadmin/settings",icon:Es},{name:"Sales Managers",href:"/superadmin/sales-managers",icon:Je}],p=async()=>{try{await o(ci()).unwrap(),M.success("Logged out successfully"),c("/login")}catch{M.error("Logout failed")}},f=S=>u.pathname===S||u.pathname.startsWith(S+"/"),b=S=>{const w=new Set(n);w.has(S)?w.delete(S):w.add(S),i(w)},y=S=>n.has(S),v=S=>S==null?void 0:S.some(w=>f(w.href));return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-2xl border-r border-gray-100 transition-all duration-300 ease-in-out flex flex-col ${t?"w-16":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-purple-100",children:[!t&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2.5 bg-purple-600 rounded-xl shadow-lg",children:e.jsx(vn,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Superadmin"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Control Panel"})]})]}),t&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("div",{className:"p-2.5 bg-purple-600 rounded-xl shadow-lg",children:e.jsx(vn,{className:"h-5 w-5 text-white"})})}),e.jsx("button",{onClick:()=>s(!t),className:"p-1.5 rounded-lg text-gray-500 hover:text-purple-600 hover:bg-purple-50 transition-all duration-200",children:t?e.jsx(ra,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"mt-6 px-3 flex-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:g.map(S=>{const w=S.hasDropdown?v(S.dropdownItems):f(S.href);return e.jsx("div",{children:S.hasDropdown?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>b(S.name),className:`w-full group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${w?"bg-purple-50 text-purple-700 border border-purple-200 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[e.jsx(S.icon,{className:`h-5 w-5 transition-all duration-200 ${w?"text-purple-600":"text-gray-500 group-hover:text-purple-600"}`}),!t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 ml-3 text-left",children:e.jsx("div",{className:"font-medium",children:S.name})}),y(S.name)?e.jsx(zn,{className:"h-4 w-4 text-gray-400 transition-transform duration-200"}):e.jsx(ra,{className:"h-4 w-4 text-gray-400 transition-transform duration-200"})]})]}),!t&&y(S.name)&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-6 mt-2 space-y-1",children:S.dropdownItems.map(C=>{const j=f(C.href);return e.jsxs(ms,{to:C.href,className:`group flex items-center px-3 py-2.5 text-sm rounded-lg transition-all duration-200 ${j?"bg-purple-100 text-purple-700 border border-purple-200":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[e.jsx(C.icon,{className:`h-4 w-4 transition-all duration-200 ${j?"text-purple-600":"text-gray-500 group-hover:text-purple-600"}`}),e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"font-medium",children:C.name})})]},C.name)})})]}):e.jsxs(ms,{to:S.href,className:`group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${w?"bg-purple-50 text-purple-700 border border-purple-200 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[e.jsx(S.icon,{className:`h-5 w-5 transition-all duration-200 ${w?"text-purple-600":"text-gray-500 group-hover:text-purple-600"}`}),!t&&e.jsx("div",{className:"flex-1 ml-3",children:e.jsx("div",{className:"font-medium",children:S.name})})]})},S.name)})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(vn,{className:"h-4 w-4 text-white"})})}),!t&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[l==null?void 0:l.firstName," ",l==null?void 0:l.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:l==null?void 0:l.email}),e.jsx("p",{className:"text-xs text-purple-600 font-medium capitalize",children:l==null?void 0:l.role})]})]})})]}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ease-in-out ${t?"ml-16":"ml-64"}`,children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((N=g.find(S=>S.hasDropdown?v(S.dropdownItems):f(S.href)))==null?void 0:N.name)||"Dashboard"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"p-2 rounded-lg text-gray-400 hover:text-purple-600 hover:bg-purple-50 transition-all duration-200",children:e.jsx(Ln,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!r),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:text-purple-600 hover:bg-purple-50 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(vn,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:l==null?void 0:l.firstName})]}),e.jsx(vt,{children:r&&e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[l==null?void 0:l.firstName," ",l==null?void 0:l.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:l==null?void 0:l.email})]}),e.jsxs(ms,{to:"/superadmin/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition-colors",onClick:()=>a(!1),children:[e.jsx(jt,{className:"h-4 w-4 mr-3 text-gray-400"}),"Profile"]}),e.jsxs(ms,{to:"/superadmin/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition-colors",onClick:()=>a(!1),children:[e.jsx(Es,{className:"h-4 w-4 mr-3 text-gray-400"}),"Settings"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{a(!1),p()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(ea,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsx(Ou,{})})})})]}),e.jsx(Zd,{isOpen:d,onClose:m,onRefresh:x})]})},tS=({selectedBranch:t,onBranchChange:s})=>{const{user:r}=He(d=>d.auth),a=He(iA),n=He(Nr),i=cr(),[l,o]=h.useState(!1);h.useEffect(()=>{(r==null?void 0:r.role)==="admin"&&i(a0())},[r,i]);const c=t||n,u=d=>{i(nA(d)),s&&s(d),o(!1)};return(r==null?void 0:r.role)!=="admin"?null:!a||a.length===0?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Branch"})}),e.jsxs("div",{className:"w-full flex items-center justify-center px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"No branches available"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Branch"})}),e.jsxs("button",{onClick:()=>o(!l),className:"w-full flex items-center justify-between px-4 py-3 text-gray-700 bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:c?c.name:"Choose a branch..."}),(c==null?void 0:c.isDefault)&&e.jsx(Fs,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),e.jsx(zn,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${l?"rotate-180":""}`})]}),l&&e.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 px-2 py-1 mb-1",children:"Select Branch"}),a.map(d=>e.jsxs("button",{onClick:()=>u(d),className:`w-full flex items-center justify-between px-3 py-2 text-left rounded-md transition duration-200 ${(c==null?void 0:c._id)===d._id?"bg-blue-50 text-blue-700":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:d.name}),d.isDefault&&e.jsx(Fs,{className:"h-3 w-3 text-yellow-500 fill-current"})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.status==="active"?"bg-green-100 text-green-800":d.status==="inactive"?"bg-gray-100 text-gray-800":d.status==="maintenance"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status})]},d._id))]})})]})},fi=Object.create(null);fi.open="0";fi.close="1";fi.ping="2";fi.pong="3";fi.message="4";fi.upgrade="5";fi.noop="6";const d0=Object.create(null);Object.keys(fi).forEach(t=>{d0[fi[t]]=t});const Rg={type:"error",data:"parser error"},sS=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",rS=typeof ArrayBuffer=="function",aS=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Cb=({type:t,data:s},r,a)=>sS&&s instanceof Blob?r?a(s):ij(s,a):rS&&(s instanceof ArrayBuffer||aS(s))?r?a(s):ij(new Blob([s]),a):a(fi[t]+(s||"")),ij=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function lj(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let rf;function PA(t,s){if(sS&&t.data instanceof Blob)return t.data.arrayBuffer().then(lj).then(s);if(rS&&(t.data instanceof ArrayBuffer||aS(t.data)))return s(lj(t.data));Cb(t,!1,r=>{rf||(rf=new TextEncoder),s(rf.encode(r))})}const oj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ed=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<oj.length;t++)Ed[oj.charCodeAt(t)]=t;const TA=t=>{let s=t.length*.75,r=t.length,a,n=0,i,l,o,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const u=new ArrayBuffer(s),d=new Uint8Array(u);for(a=0;a<r;a+=4)i=Ed[t.charCodeAt(a)],l=Ed[t.charCodeAt(a+1)],o=Ed[t.charCodeAt(a+2)],c=Ed[t.charCodeAt(a+3)],d[n++]=i<<2|l>>4,d[n++]=(l&15)<<4|o>>2,d[n++]=(o&3)<<6|c&63;return u},_A=typeof ArrayBuffer=="function",kb=(t,s)=>{if(typeof t!="string")return{type:"message",data:nS(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:AA(t.substring(1),s)}:d0[r]?t.length>1?{type:d0[r],data:t.substring(1)}:{type:d0[r]}:Rg},AA=(t,s)=>{if(_A){const r=TA(t);return nS(r,s)}else return{base64:!0,data:t}},nS=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},iS="",RA=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((i,l)=>{Cb(i,!1,o=>{a[l]=o,++n===r&&s(a.join(iS))})})},FA=(t,s)=>{const r=t.split(iS),a=[];for(let n=0;n<r.length;n++){const i=kb(r[n],s);if(a.push(i),i.type==="error")break}return a};function DA(){return new TransformStream({transform(t,s){PA(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let af;function wm(t){return t.reduce((s,r)=>s+r.length,0)}function Nm(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function IA(t,s){af||(af=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(a===0){if(wm(r)<1)break;const c=Nm(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(wm(r)<2)break;const c=Nm(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(wm(r)<8)break;const c=Nm(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){o.enqueue(Rg);break}n=d*Math.pow(2,32)+u.getUint32(4),a=3}else{if(wm(r)<n)break;const c=Nm(r,n);o.enqueue(kb(i?c:af.decode(c),s)),a=0}if(n===0||n>t){o.enqueue(Rg);break}}}})}const lS=4;function jr(t){if(t)return OA(t)}function OA(t){for(var s in jr.prototype)t[s]=jr.prototype[s];return t}jr.prototype.on=jr.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};jr.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};jr.prototype.off=jr.prototype.removeListener=jr.prototype.removeAllListeners=jr.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};jr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};jr.prototype.emitReserved=jr.prototype.emit;jr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};jr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Mx=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),bn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),MA="arraybuffer";function oS(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const BA=bn.setTimeout,LA=bn.clearTimeout;function Bx(t,s){s.useNativeTimers?(t.setTimeoutFn=BA.bind(bn),t.clearTimeoutFn=LA.bind(bn)):(t.setTimeoutFn=bn.setTimeout.bind(bn),t.clearTimeoutFn=bn.clearTimeout.bind(bn))}const $A=1.33;function UA(t){return typeof t=="string"?HA(t):Math.ceil((t.byteLength||t.size)*$A)}function HA(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function cS(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function WA(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function VA(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class zA extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class Eb extends jr{constructor(s){super(),this.writable=!1,Bx(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new zA(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=kb(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=WA(s);return r.length?"?"+r:""}}class GA extends Eb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};FA(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,RA(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=cS()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let dS=!1;try{dS=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const qA=dS;function YA(){}class KA extends GA{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}class di extends jr{constructor(s,r,a){super(),this.createRequest=s,Bx(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=oS(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=di.requestsCount++,di.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=YA,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete di.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}di.requestsCount=0;di.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",cj);else if(typeof addEventListener=="function"){const t="onpagehide"in bn?"pagehide":"unload";addEventListener(t,cj,!1)}}function cj(){for(let t in di.requests)di.requests.hasOwnProperty(t)&&di.requests[t].abort()}const XA=function(){const t=uS({xdomain:!1});return t&&t.responseType!==null}();class JA extends KA{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=XA&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new di(uS,this.uri(),s)}}function uS(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||qA))return new XMLHttpRequest}catch{}if(!s)try{return new bn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const mS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QA extends Eb{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=mS?{}:oS(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;Cb(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&Mx(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=cS()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const nf=bn.WebSocket||bn.MozWebSocket;class ZA extends QA{createSocket(s,r,a){return mS?new nf(s,r,a):r?new nf(s,r):new nf(s)}doWrite(s,r){this.ws.send(r)}}class eR extends Eb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=IA(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=DA();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&Mx(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const tR={websocket:ZA,webtransport:eR,polling:JA},sR=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,rR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fg(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=sR.exec(t||""),i={},l=14;for(;l--;)i[rR[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=aR(i,i.path),i.queryKey=nR(i,i.query),i}function aR(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function nR(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Dg=typeof addEventListener=="function"&&typeof removeEventListener=="function",u0=[];Dg&&addEventListener("offline",()=>{u0.forEach(t=>t())},!1);class gl extends jr{constructor(s,r){if(super(),this.binaryType=MA,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=Fg(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Fg(r.host).host);Bx(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=VA(this.opts.query)),Dg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},u0.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=lS,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&gl.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",gl.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=UA(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,Mx(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:s,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(gl.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Dg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=u0.indexOf(this._offlineEventListener);a!==-1&&u0.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}gl.protocol=lS;class iR extends gl{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;gl.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!a)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;gl.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=r.name,this.emitReserved("upgradeError",x)}}))};function i(){a||(a=!0,d(),r.close(),r=null)}const l=m=>{const x=new Error("probe error: "+m);x.transport=r.name,i(),this.emitReserved("upgradeError",x)};function o(){l("transport closed")}function c(){l("socket closed")}function u(m){r&&m.name!==r.name&&i()}const d=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",o),this.off("close",c),this.off("upgrading",u)};r.once("open",n),r.once("error",l),r.once("close",o),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let lR=class extends iR{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>tR[n]).filter(n=>!!n)),super(s,a)}};function oR(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=Fg(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+s,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const cR=typeof ArrayBuffer=="function",dR=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,xS=Object.prototype.toString,uR=typeof Blob=="function"||typeof Blob<"u"&&xS.call(Blob)==="[object BlobConstructor]",mR=typeof File=="function"||typeof File<"u"&&xS.call(File)==="[object FileConstructor]";function Pb(t){return cR&&(t instanceof ArrayBuffer||dR(t))||uR&&t instanceof Blob||mR&&t instanceof File}function m0(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(m0(t[r]))return!0;return!1}if(Pb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return m0(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&m0(t[r]))return!0;return!1}function xR(t){const s=[],r=t.data,a=t;return a.data=Ig(r,s),a.attachments=s.length,{packet:a,buffers:s}}function Ig(t,s){if(!t)return t;if(Pb(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=Ig(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=Ig(t[a],s));return r}return t}function hR(t,s){return t.data=Og(t.data,s),delete t.attachments,t}function Og(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Og(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Og(t[r],s));return t}const fR=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gR=5;var qt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(qt||(qt={}));class pR{constructor(s){this.replacer=s}encode(s){return(s.type===qt.EVENT||s.type===qt.ACK)&&m0(s)?this.encodeAsBinary({type:s.type===qt.EVENT?qt.BINARY_EVENT:qt.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===qt.BINARY_EVENT||s.type===qt.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=xR(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function dj(t){return Object.prototype.toString.call(t)==="[object Object]"}class Tb extends jr{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===qt.BINARY_EVENT;a||r.type===qt.BINARY_ACK?(r.type=a?qt.EVENT:qt.ACK,this.reconstructor=new bR(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Pb(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(qt[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===qt.BINARY_EVENT||a.type===qt.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(i,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(i,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}a.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(Tb.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case qt.CONNECT:return dj(r);case qt.DISCONNECT:return r===void 0;case qt.CONNECT_ERROR:return typeof r=="string"||dj(r);case qt.EVENT:case qt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&fR.indexOf(r[0])===-1);case qt.ACK:case qt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bR{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=hR(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const yR=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Tb,Encoder:pR,get PacketType(){return qt},protocol:gR},Symbol.toStringTag,{value:"Module"}));function Tn(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const vR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hS extends jr{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Tn(s,"open",this.onopen.bind(this)),Tn(s,"packet",this.onpacket.bind(this)),Tn(s,"error",this.onerror.bind(this)),Tn(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,i;if(vR.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:qt.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,m=r.pop();this._registerAckCallback(d,m),l.id=d}const o=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((a,n)=>{const i=(l,o)=>l?n(l):a(o);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:qt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case qt.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qt.EVENT:case qt.BINARY_EVENT:this.onevent(s);break;case qt.ACK:case qt.BINARY_ACK:this.onack(s);break;case qt.DISCONNECT:this.ondisconnect();break;case qt.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:qt.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function Hc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Hc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Hc.prototype.reset=function(){this.attempts=0};Hc.prototype.setMin=function(t){this.ms=t};Hc.prototype.setMax=function(t){this.max=t};Hc.prototype.setJitter=function(t){this.jitter=t};class Mg extends jr{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Bx(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Hc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||yR;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new lR(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Tn(r,"open",function(){a.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=Tn(r,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Tn(s,"ping",this.onping.bind(this)),Tn(s,"data",this.ondata.bind(this)),Tn(s,"error",this.onerror.bind(this)),Tn(s,"close",this.onclose.bind(this)),Tn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){Mx(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new hS(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const ud={};function x0(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=oR(t,s.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=ud[n]&&i in ud[n].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let c;return o?c=new Mg(a,s):(ud[n]||(ud[n]=new Mg(a,s)),c=ud[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(x0,{Manager:Mg,Socket:hS,io:x0,connect:x0});const jR=()=>{const t=cr(),s=He(Nr),{items:r,loading:a}=He(d=>d.notifications||{items:[],loading:!1}),[n,i]=h.useState(!1),[l,o]=h.useState(null);h.useEffect(()=>{n&&t(Od({page:1,limit:10,unreadOnly:!0,branchId:s==null?void 0:s._id}))},[t,s==null?void 0:s._id,n]),h.useEffect(()=>{try{const d="http://localhost:5000/api".replace(/\/api$/,""),m=x0(d,{withCredentials:!0});return o(m),m.on("connect",()=>{}),m.on("ticket_status_updated",x=>{const g={_id:`tmp_${Date.now()}`,type:"ticket_status",title:"Ticket Status Updated",message:`${(x==null?void 0:x.title)||"Ticket"} is now ${x==null?void 0:x.status}`,data:x,isRead:!1,createdAt:new Date().toISOString()};t(cA(g))}),()=>{try{m.close()}catch{}}}catch{}},[t]);const c=r.filter(d=>!d.isRead),u=c.length;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!n),className:"p-2 rounded-lg text-gray-500 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 relative",children:[e.jsx(Ln,{className:"h-5 w-5"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full shadow-sm",children:u})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),u>0&&e.jsx("button",{onClick:()=>t(Sb({branchId:s==null?void 0:s._id})),className:"text-xs text-blue-600 hover:text-blue-700 hover:underline",children:"Mark all as read"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:a?e.jsx("div",{className:"p-4 text-sm text-gray-500",children:"Loading..."}):c.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 mx-auto mb-2 flex items-center justify-center",children:e.jsx(Ln,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"text-sm text-gray-600",children:"You're all caught up"})]}):c.map(d=>{var m,x,g;return e.jsx("div",{className:"px-4 py-3 border-b border-gray-100 hover:bg-blue-50/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700 border border-blue-200",children:((x=(m=d.type)==null?void 0:m.split("."))==null?void 0:x.pop())||"update"}),((g=d.data)==null?void 0:g.branchName)&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-gray-100 text-gray-700 border border-gray-200",children:d.data.branchName})]}),e.jsx("div",{className:"mt-1 font-medium text-gray-900 truncate",children:d.title}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:d.message}),e.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:new Date(d.createdAt).toLocaleString()})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("button",{onClick:()=>t(Nb(d._id)),className:"text-xs text-blue-600 hover:text-blue-700 hover:underline",children:"Mark read"})})]})},d._id)})}),e.jsx("div",{className:"px-4 py-2 text-right",children:e.jsx(ms,{to:"/admin/notifications",className:"text-xs text-blue-600 hover:text-blue-700 hover:underline",onClick:()=>i(!1),children:"View more"})})]})]})},wR=()=>{var N,S,w,C;const{subscription:t,getSubscriptionSummary:s,getSubscriptionHealth:r,forceRefresh:a}=Hu(),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(new Set),d=s(),m=r();if(h.useEffect(()=>{var j;(j=m==null?void 0:m.issues)!=null&&j.some(k=>k.type==="critical")&&i(!0)},[m]),!t||!d||!m||m.isHealthy&&!d.isTrialActive)return null;const g=(()=>{const j=m.issues.some(E=>E.type==="critical"),k=m.issues.some(E=>E.type==="warning");return j?{bgClass:"bg-red-50 border-red-200",textClass:"text-red-800",icon:Rt,iconColor:"text-red-600"}:k?{bgClass:"bg-yellow-50 border-yellow-200",textClass:"text-yellow-800",icon:ut,iconColor:"text-yellow-600"}:d.isTrialActive?{bgClass:"bg-blue-50 border-blue-200",textClass:"text-blue-800",icon:xi,iconColor:"text-blue-600"}:{bgClass:"bg-green-50 border-green-200",textClass:"text-green-800",icon:vn,iconColor:"text-green-600"}})(),p=g.icon,f=async()=>{o(!0);try{await a()}catch{}finally{o(!1)}},b=j=>{u(k=>new Set([...k,j]))},v=m.issues.filter(j=>!c.has(j.message));return v.length===0&&!d.isTrialActive?null:e.jsx("div",{className:`border-l-4 ${g.bgClass} p-4 mb-4 relative`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx(p,{className:`h-5 w-5 ${g.iconColor} mt-0.5`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-sm font-semibold ${g.textClass}`,children:d.isTrialActive?"Trial Active":"Subscription Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:f,disabled:l,className:`p-1 rounded-md ${g.iconColor} hover:bg-white hover:bg-opacity-50 transition-colors ${l?"animate-spin":""}`,title:"Refresh subscription status",children:e.jsx(wt,{className:"h-4 w-4"})}),v.length>0&&e.jsx("button",{onClick:()=>i(!n),className:`p-1 rounded-md ${g.iconColor} hover:bg-white hover:bg-opacity-50 transition-colors`,children:n?e.jsx(Bc,{className:"h-4 w-4"}):e.jsx(zn,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:`text-sm ${g.textClass} mt-1`,children:d.isTrialActive?e.jsxs("span",{children:[e.jsx("strong",{children:d.planName})," - ",d.trialDaysRemaining," days remaining",d.trialDaysRemaining<=3&&e.jsx("span",{className:"font-semibold text-red-600 ml-2",children:"(Expires soon!)"})]}):e.jsxs("span",{children:[e.jsx("strong",{children:d.planName})," - ",d.status.charAt(0).toUpperCase()+d.status.slice(1)]})}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs",children:[e.jsxs("span",{className:g.textClass,children:["Beds: ",((N=t.usage)==null?void 0:N.bedsUsed)||0," / ",((S=t.restrictions)==null?void 0:S.maxBeds)||0]}),e.jsxs("span",{className:g.textClass,children:["Branches: ",((w=t.usage)==null?void 0:w.branchesUsed)||0," / ",((C=t.restrictions)==null?void 0:C.maxBranches)||0]})]}),n&&v.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:v.map((j,k)=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md ${j.type==="critical"?"bg-red-100 border border-red-200":"bg-yellow-100 border border-yellow-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:`h-4 w-4 ${j.type==="critical"?"text-red-600":"text-yellow-600"}`}),e.jsx("span",{className:`text-sm ${j.type==="critical"?"text-red-800":"text-yellow-800"}`,children:j.message})]}),e.jsx("button",{onClick:()=>b(j.message),className:`p-1 rounded-md hover:bg-white hover:bg-opacity-50 transition-colors ${j.type==="critical"?"text-red-600":"text-yellow-600"}`,children:e.jsx(ct,{className:"h-3 w-3"})})]},k))}),e.jsxs("div",{className:"flex items-center space-x-3 mt-3",children:[d.isTrialActive&&d.trialDaysRemaining<=3&&e.jsx("button",{onClick:()=>{M.success("Navigate to subscription upgrade page")},className:"px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Upgrade Now"}),v.some(j=>j.message.includes("bed limit"))&&e.jsx("button",{onClick:()=>{M.success("Navigate to add beds or upgrade plan")},className:"px-3 py-1 bg-green-600 text-white text-xs font-medium rounded-md hover:bg-green-700 transition-colors",children:"Add Beds"}),v.some(j=>j.message.includes("branch limit"))&&e.jsx("button",{onClick:()=>{M.success("Navigate to add branches or upgrade plan")},className:"px-3 py-1 bg-purple-600 text-white text-xs font-medium rounded-md hover:bg-purple-700 transition-colors",children:"Add Branches"})]})]})]})})})},NR="modulepreload",SR=function(t){return"/"+t},uj={},Bg=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=SR(c),c in uj)return;uj[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":NR,u||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),u)return new Promise((x,g)=>{m.addEventListener("load",x),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};class Ls{static isSubscribed(s){return s?s.status==="active"||s.status==="trial":!1}static isFreePlan(s){return!s||s.status==="free"||!s.plan}static getMaxBeds(s){var r;return s&&((r=s.restrictions)==null?void 0:r.maxBeds)||10}static getMaxBranches(s){var r;return s&&((r=s.restrictions)==null?void 0:r.maxBranches)||1}static canAddBeds(s,r=1,a){const n=this.getMaxBeds(a);return s+r<=n}static isAtBedLimit(s,r){const a=this.getMaxBeds(r);return s>=a}static showTrialBedLimitModal(s,r){return this.isSubscribed(r)&&r.status==="trial"&&this.isAtBedLimit(s,r)?(Bg(async()=>{const{default:a}=await import("./TrialBedLimitModal-eI3cY87j.js");return{default:a}},__vite__mapDeps([0,1,2,3,4,5])).then(({default:a})=>{const n=document.createElement("div");n.id="trial-bed-limit-modal-container",document.body.appendChild(n),Bg(async()=>{const{default:i}=await import("./TrialBedLimitModal-eI3cY87j.js");return{default:i}},__vite__mapDeps([0,1,2,3,4,5])).then(({default:i})=>{const l=A0.createRoot(n);l.render(Ke.createElement(i,{isOpen:!0,currentBeds:s,maxBeds:this.getMaxBeds(r),onClose:()=>{l.unmount(),document.body.removeChild(n)}}))})}),!0):!1}static canAddBranches(s,r=1,a){const n=this.getMaxBranches(a);return s+r<=n}static hasFeature(s,r){var a;return!r||!((a=r.restrictions)!=null&&a.features)?!1:r.restrictions.features.some(n=>n.name===s&&n.enabled)}static hasModule(s,r){var a;return!r||!((a=r.restrictions)!=null&&a.modules)?!1:r.restrictions.modules.some(n=>n.moduleName===s&&n.enabled)}static hasPermission(s,r,a,n){var c;if(!n||!((c=n.restrictions)!=null&&c.modules))return!1;const i=n.restrictions.modules.find(u=>u.moduleName===s&&u.enabled);if(!i||!i.permissions)return!1;const o=(i.permissions||{})[r];return o?o[a]===!0:!1}static canPerformActionOnSubmodule(s,r,a,n){const l={create:"create",read:"read",view:"read",list:"read",update:"update",edit:"update",delete:"delete",remove:"delete"}[a.toLowerCase()];return l?this.hasPermission(s,r,l,n):!1}static getSubmodulePermissions(s,r,a){var i;if(!a||!((i=a.restrictions)!=null&&i.modules))return null;const n=a.restrictions.modules.find(l=>l.moduleName===s&&l.enabled);return!n||!n.permissions?null:n.permissions[r]||null}static hasRestrictedPermissions(s,r){var n;if(!r||!((n=r.restrictions)!=null&&n.modules))return!1;const a=r.restrictions.modules.find(i=>i.moduleName===s&&i.enabled);if(!a||!a.permissions)return!1;for(const i of Object.values(a.permissions))if(!i.create||!i.read||!i.update||!i.delete)return!0;return!1}static getModulePermissions(s,r){var n;if(!r||!((n=r.restrictions)!=null&&n.modules))return{};const a=r.restrictions.modules.find(i=>i.moduleName===s&&i.enabled);return(a==null?void 0:a.permissions)||{}}static getRemainingBeds(s){var n;if(!s)return 10;const r=((n=s.usage)==null?void 0:n.bedsUsed)||0,a=this.getMaxBeds(s);return Math.max(0,a-r)}static getRemainingBranches(s){var n;if(!s)return 0;const r=((n=s.usage)==null?void 0:n.branchesUsed)||0,a=this.getMaxBranches(s);return Math.max(0,a-r)}static isApproachingBedLimit(s,r=.8){var i;if(!s)return!1;const a=((i=s.usage)==null?void 0:i.bedsUsed)||0,n=this.getMaxBeds(s);return a/n>=r}static isApproachingBranchLimit(s,r=.8){var i;if(!s)return!1;const a=((i=s.usage)==null?void 0:i.branchesUsed)||0,n=this.getMaxBranches(s);return a/n>=r}static getStatusBadge(s){if(!s)return{text:"Free Plan",color:"gray",bgColor:"bg-gray-100",textColor:"text-gray-800"};switch(s.status){case"active":return{text:"Active",color:"green",bgColor:"bg-green-100",textColor:"text-green-800"};case"trial":return{text:"Trial",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800"};case"expired":return{text:"Expired",color:"red",bgColor:"bg-red-100",textColor:"text-red-800"};case"cancelled":return{text:"Cancelled",color:"orange",bgColor:"bg-orange-100",textColor:"text-orange-800"};default:return{text:"Free Plan",color:"gray",bgColor:"bg-gray-100",textColor:"text-gray-800"}}}static getPlanName(s){return!s||!s.plan?"Free Plan":s.plan.planName}static allowsMultipleBranches(s){return!s||!s.plan?!1:s.plan.allowMultipleBranches===!0}static getBedUsagePercentage(s){var n;if(!s)return 0;const r=((n=s.usage)==null?void 0:n.bedsUsed)||0,a=this.getMaxBeds(s);return a>0?Math.round(r/a*100):0}static getBranchUsagePercentage(s){var n;if(!s)return 0;const r=((n=s.usage)==null?void 0:n.branchesUsed)||0,a=this.getMaxBranches(s);return a>0?Math.round(r/a*100):0}static canPerformAction(s,r){switch(s){case"create_branch":return this.allowsMultipleBranches(r)&&this.getRemainingBranches(r)>0;case"add_bed":return this.getRemainingBeds(r)>0;case"bulk_upload":return this.hasModule("bulk_upload",r);case"analytics":return this.hasModule("analytics_reports",r);case"custom_reports":return this.hasModule("custom_reports",r);case"api_access":return this.hasModule("api_access",r);default:return!0}}static canAccessRoute(s,r){return s.includes("/admin")&&(s.includes("/dashboard")||s.includes("/settings"))||s.includes("/admin/pg-management")?!0:s.includes("/admin/residents")||s.includes("/admin/onboarding")||s.includes("/admin/offboarding")||s.includes("/admin/moved-out")?this.hasModule("resident_management",r):s.includes("/admin/room-switching")||s.includes("/admin/room-availability")?this.hasModule("room_allocation",r):s.includes("/admin/payments")?this.hasModule("payment_tracking",r):s.includes("/admin/tickets")?this.hasModule("ticket_system",r):s.includes("/admin/reports")?this.hasModule("analytics_reports",r):s.includes("/admin/qr-management")?this.hasModule("qr_code_payments",r):s.includes("/admin/branch-activities")?this.allowsMultipleBranches(r):(s.includes("/admin/activities")&&!s.includes("/branch-activities"),!0)}static getSubscriptionSummary(s){var r,a;return s?{planName:this.getPlanName(s),status:s.status,bedsUsed:((r=s.usage)==null?void 0:r.bedsUsed)||0,bedsLimit:this.getMaxBeds(s),branchesUsed:((a=s.usage)==null?void 0:a.branchesUsed)||0,branchesLimit:this.getMaxBranches(s),allowsMultipleBranches:this.allowsMultipleBranches(s),isSubscribed:this.isSubscribed(s),trialEndDate:s.trialEndDate,endDate:s.endDate}:{planName:"Free Plan",status:"free",bedsUsed:0,bedsLimit:10,branchesUsed:0,branchesLimit:1,allowsMultipleBranches:!1,isSubscribed:!1}}}const Wc=()=>{const t=He(Y2),s=He(Pl);return{subscription:t,user:s,isSubscribed:()=>Ls.isSubscribed(t),isFreePlan:()=>Ls.isFreePlan(t),getMaxBeds:()=>Ls.getMaxBeds(t),getMaxBranches:()=>Ls.getMaxBranches(t),canAddBeds:(r,a=1)=>Ls.canAddBeds(r,a,t),canAddBranches:(r,a=1)=>Ls.canAddBranches(r,a,t),hasFeature:r=>Ls.hasFeature(r,t),hasModule:r=>Ls.hasModule(r,t),getRemainingBeds:()=>Ls.getRemainingBeds(t),getRemainingBranches:()=>Ls.getRemainingBranches(t),isApproachingBedLimit:(r=.8)=>Ls.isApproachingBedLimit(t,r),isApproachingBranchLimit:(r=.8)=>Ls.isApproachingBranchLimit(t,r),getStatusBadge:()=>Ls.getStatusBadge(t),getPlanName:()=>Ls.getPlanName(t),allowsMultipleBranches:()=>Ls.allowsMultipleBranches(t),getBedUsagePercentage:()=>Ls.getBedUsagePercentage(t),getBranchUsagePercentage:()=>Ls.getBranchUsagePercentage(t),canPerformAction:r=>Ls.canPerformAction(r,t),canAccessRoute:r=>Ls.canAccessRoute(r,t),hasPermission:(r,a,n)=>Ls.hasPermission(r,a,n,t),canPerformActionOnSubmodule:(r,a,n)=>Ls.canPerformActionOnSubmodule(r,a,n,t),getSubmodulePermissions:(r,a)=>Ls.getSubmodulePermissions(r,a,t),hasRestrictedPermissions:r=>Ls.hasRestrictedPermissions(r,t),getModulePermissions:r=>Ls.getModulePermissions(r,t),getSubscriptionSummary:()=>Ls.getSubscriptionSummary(t),isAdmin:()=>(s==null?void 0:s.role)==="admin",isSuperAdmin:()=>(s==null?void 0:s.role)==="superadmin"}},fS=({isOpen:t,onClose:s,onTrialActivated:r,subscriptionErrorDetails:a})=>{const n=cr(),[i,l]=h.useState(!1),[o,c]=h.useState(1),[u,d]=h.useState(null),m=(a==null?void 0:a.trialLimit)||(a==null?void 0:a.trialExpired);(a==null?void 0:a.billingCycle)==="trial"||(a==null||a.isTrialActive);const x=async()=>{try{l(!0);const w=JSON.parse(localStorage.getItem("user"));if(!w||!w._id){M.error("User information not found. Please login again.");return}const C=await et.activateFreeTrial(w._id);C.success?(c(4),r&&await r()):(d(C),M.error(C.message||"Failed to activate free trial"))}catch(w){console.error("Error activating trial:",w),M.error("Failed to activate free trial. Please try again.")}finally{l(!1)}},g=()=>{n(ci()),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),M.success("Free Trial Activated! Please log in again.",{duration:5e3,icon:"🚀",style:{background:"#4CAF50",color:"white",fontWeight:"bold"}}),s()},p=[{icon:Je,title:"Full Resident Management",description:"Onboard, manage, and track all your residents with complete CRUD operations"},{icon:is,title:"Payment Processing",description:"Generate QR codes, process payments, and track all financial transactions"},{icon:xi,title:"Advanced Features",description:"Ticket system, analytics, reports, bulk operations, and more"},{icon:Fs,title:"Premium Support",description:"Email notifications, SMS alerts, and priority customer support"}],f=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Rt,{className:"h-8 w-8 text-orange-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Free Trial Bed Limit Reached"}),e.jsx("p",{className:"text-gray-600 mb-4",children:(a==null?void 0:a.message)||`Your free trial allows up to ${(a==null?void 0:a.limit)||10} beds. You've used ${(a==null?void 0:a.currentUsage)||0} beds and need ${(a==null?void 0:a.requested)||0} more.`}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-6 border border-blue-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(a==null?void 0:a.currentUsage)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Beds Used"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(a==null?void 0:a.limit)||10}),e.jsx("div",{className:"text-sm text-gray-600",children:"Trial Limit"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[(a==null?void 0:a.requested)||0," beds needed"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Additional beds required"})]})})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>{s(),window.location.href="/admin/subscription-selection"},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"🚀 Upgrade to Add More Beds"}),e.jsx("button",{onClick:s,className:"px-6 py-3 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}),b=()=>{if(!u)return null;const{code:w,message:C,subscription:j,lastTrial:k}=u;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kl,{className:"h-8 w-8 text-orange-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Trial Status"}),e.jsx("p",{className:"text-gray-600",children:C})]}),j&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-6 border border-blue-200",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:j.type==="trial"?"Active Free Trial":"Active Subscription"}),e.jsxs("div",{className:"inline-flex items-center space-x-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[e.jsx(nc,{className:"h-4 w-4"}),e.jsxs("span",{children:[j.daysRemaining," days remaining"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Expires"}),e.jsx("div",{className:"font-semibold text-blue-700",children:new Date(j.endDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Status"}),e.jsx("div",{className:"font-semibold text-green-600 capitalize",children:j.status})]})]})]}),k&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-6 mb-6 border border-gray-200",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Previous Trial Details"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Ended"}),e.jsx("div",{className:"font-semibold text-gray-700",children:new Date(k.endDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Status"}),e.jsx("div",{className:`font-semibold capitalize ${k.wasCancelled?"text-red-600":k.isExpired?"text-orange-600":"text-gray-600"}`,children:k.wasCancelled?"Cancelled":k.isExpired?"Expired":"Completed"})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[w==="ALREADY_HAS_ACTIVE_SUBSCRIPTION"&&(j==null?void 0:j.type)==="trial"&&e.jsx("button",{onClick:s,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200",children:"Continue with Trial"}),w==="TRIAL_EXPIRED"&&e.jsx("button",{onClick:()=>{s(),window.location.href="/admin/subscription-selection"},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200",children:"Upgrade Now"}),w==="TRIAL_CANCELLED"&&e.jsx("button",{onClick:()=>{M("Please contact support to reactivate your trial",{icon:"ℹ️"})},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-teal-700 transition-all duration-200",children:"Contact Support"}),e.jsx("button",{onClick:()=>{d(null),c(1)},className:"px-6 py-3 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Back to Start"})]})]})},y=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Iv,{className:"h-10 w-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to PG Maintenance Pro! 🎉"}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["Start your ",e.jsx("span",{className:"font-semibold text-blue-600",children:"14-day FREE trial"})," and unlock all premium features"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 mb-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"14"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Days"})]}),e.jsx("div",{className:"w-px h-12 bg-blue-200"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"FREE"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Access"})]}),e.jsx("div",{className:"w-px h-12 bg-purple-200"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"ALL"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Features"})]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:"No credit card required. Cancel anytime during the trial period."})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsxs("button",{onClick:()=>c(2),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:["Explore Features",e.jsx(oi,{className:"inline-block h-4 w-4 ml-2"})]}),e.jsx("button",{onClick:s,className:"px-6 py-3 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Maybe Later"})]})]}),v=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(nc,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Everything You Need Included"}),e.jsx("p",{className:"text-gray-600",children:"Access all premium features during your trial"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:p.map((w,C)=>{const j=w.icon;return e.jsx(ae.div,{initial:{opacity:0,x:C%2===0?-20:20},animate:{opacity:1,x:0},transition:{delay:C*.1},className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(j,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600",children:w.description})]})]})},C)})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 mb-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-800",children:[e.jsx(Be,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"No setup fees • No hidden costs • Cancel anytime"})]})}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>c(1),className:"px-6 py-3 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"← Back"}),e.jsxs("button",{onClick:()=>c(3),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:["Start My Free Trial",e.jsx(nc,{className:"inline-block h-4 w-4 ml-2"})]})]})]}),N=()=>m?f():u?b():e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ut,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-gray-600",children:"Activate your 14-day free trial now and unlock all premium features instantly"})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 mb-6 border border-purple-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Trial Duration:"}),e.jsx("span",{className:"font-semibold text-purple-700",children:"14 Days"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"All Features:"}),e.jsx("span",{className:"font-semibold text-green-600",children:"✓ Unlocked"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Setup Required:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"None"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-Renewal:"}),e.jsx("span",{className:"font-semibold text-orange-600",children:"Disabled"})]})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-white text-xs",children:"!"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-1",children:"Important: Trial Reminder"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"You'll receive email notifications 3 days before your trial expires. You can cancel anytime or upgrade to continue using premium features."})]})]})}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>c(2),className:"px-6 py-3 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:i,children:"← Back"}),e.jsx("button",{onClick:x,disabled:i,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating Trial..."]}):e.jsx(e.Fragment,{children:"🚀 Activate My Free Trial"})})]})]}),S=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Be,{className:"h-12 w-12 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Free Trial Activated! 🎉"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Your 14-day trial with full access is now active."})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 mb-6 border border-green-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Trial Duration:"}),e.jsx("span",{className:"font-semibold text-green-700",children:"14 Days"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Access Level:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"Full Platform"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Modules Unlocked:"}),e.jsx("span",{className:"font-semibold text-purple-600",children:"All Modules"})]})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-white text-xs",children:"!"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-1",children:"Important: Next Steps"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"For security reasons, please log out and log back in to apply your new trial access."})]})]})}),e.jsx("div",{className:"flex justify-center space-x-3",children:e.jsxs("button",{onClick:g,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:["Logout and Relogin",e.jsx(oi,{className:"inline-block h-4 w-4 ml-2"})]})})]});return t?e.jsx(vt,{children:e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${m?"bg-gradient-to-br from-orange-500 to-red-600":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:m?e.jsx(Rt,{className:"h-5 w-5 text-white"}):e.jsx(Iv,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:m?"Upgrade Required":"Free Trial Activation"}),e.jsx("p",{className:"text-sm text-gray-600",children:m?"Your trial bed limit has been reached":"Unlock all premium features"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",disabled:i,children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2",children:[1,2,3,4].map(w=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold transition-colors ${w<=o?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:w}),w<4&&e.jsx("div",{className:`w-8 h-0.5 mx-2 transition-colors ${w<o?"bg-blue-600":"bg-gray-200"}`})]},w))}),e.jsx("div",{className:"text-center mt-2",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[o===1&&"Welcome • 14-Day Free Trial",o===2&&"Features • Premium Access",o===3&&"Activation • Get Started",o===4&&"Post-Activation • Complete"]})})]}),e.jsxs("div",{className:"p-6 max-h-[calc(90vh-200px)] overflow-y-auto",children:[o===1&&y(),o===2&&v(),o===3&&N(),o===4&&S()]})]})})}):null},CR="http://localhost:5000/api";class kR{constructor(){this.api=Ps.create({baseURL:`${CR}/pg`,withCredentials:!0}),this.api.interceptors.request.use(s=>{const r=localStorage.getItem("accessToken");return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>Promise.reject(s)),this.api.interceptors.response.use(s=>s,s=>{var r;return((r=s.response)==null?void 0:r.status)===401&&(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(s)})}async testAuth(){try{return(await this.api.get("/test-auth")).data}catch(s){throw this.handleError(s)}}async testDbUser(s){try{return(await this.api.get(`/test-db-user/${s}`)).data}catch(r){throw this.handleError(r)}}async testSimple(){try{return(await this.api.get("/test-simple")).data}catch(s){throw this.handleError(s)}}async testEmail(s){try{return(await this.api.post("/test-email",{email:s})).data}catch(r){throw this.handleError(r)}}async createPG(s){try{return(await this.api.post("/",s)).data}catch(r){throw this.handleError(r)}}async createPGSales(s){try{return(await this.api.post("/sales-create",s)).data}catch(r){throw this.handleError(r)}}async getSalesPGs(s={},r=1,a=10){try{const n=new URLSearchParams({page:r.toString(),limit:a.toString(),...s});return(await this.api.get(`/sales-list?${n}`)).data}catch(n){throw this.handleError(n)}}async getSalesPGStats(){try{return(await this.api.get("/sales-stats")).data}catch(s){throw this.handleError(s)}}async getAllPGs(s={},r=1,a=10){try{const n=new URLSearchParams({page:r.toString(),limit:a.toString(),...s});return(await this.api.get(`/?${n}`)).data}catch(n){throw this.handleError(n)}}async getPGById(s){try{return(await this.api.get(`/${s}`)).data}catch(r){throw this.handleError(r)}}async updatePG(s,r){try{return(await this.api.put(`/${s}`,r)).data}catch(a){throw this.handleError(a)}}async deletePG(s){try{return(await this.api.delete(`/${s}`)).data}catch(r){throw this.handleError(r)}}async getPGStats(s=null){try{const r=s?`/stats/${s}`:"/stats";return(await this.api.get(r)).data}catch(r){throw this.handleError(r)}}async searchPGs(s,r={}){try{const a=new URLSearchParams({search:s,...r});return(await this.api.get(`/search?${a}`)).data}catch(a){throw this.handleError(a)}}async getPGsByLocation(s,r){try{const a=new URLSearchParams({city:s,state:r});return(await this.api.get(`/location?${a}`)).data}catch(a){throw this.handleError(a)}}async getPGAnalytics(s,r="month"){try{const a=new URLSearchParams({period:r});return(await this.api.get(`/${s}/analytics?${a}`)).data}catch(a){throw this.handleError(a)}}async uploadImage(s,r){try{const a=new FormData;return a.append("image",r),(await this.api.post(`/${s}/images`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw this.handleError(a)}}async deleteImage(s,r){try{return(await this.api.delete(`/${s}/images/${r}`)).data}catch(a){throw this.handleError(a)}}async getPGDashboard(s){try{return(await this.api.get(`/${s}/dashboard`)).data}catch(r){throw this.handleError(r)}}async exportPGData(s,r="pdf"){try{const a=new URLSearchParams({format:r});return(await this.api.get(`/${s}/export?${a}`,{responseType:"blob"})).data}catch(a){throw this.handleError(a)}}async addSampleData(){try{return(await this.api.post("/sample/add")).data}catch(s){throw this.handleError(s)}}async clearSampleData(){try{return(await this.api.delete("/sample/clear")).data}catch(s){throw this.handleError(s)}}async configureSharingTypes(s,r){try{return(await this.api.post("/configure-sharing-types",{pgId:s,sharingTypes:r})).data}catch(a){throw console.error("Error configuring PG sharing types:",a),a}}getDefaultSharingTypes(){return[{type:"1-sharing",name:"Single Occupancy",description:"Private room with single bed",cost:8e3,isCustom:!1},{type:"2-sharing",name:"Double Occupancy",description:"Room shared between two residents",cost:6e3,isCustom:!1},{type:"3-sharing",name:"Triple Occupancy",description:"Room shared between three residents",cost:5e3,isCustom:!1},{type:"4-sharing",name:"Quad Occupancy",description:"Room shared between four residents",cost:4e3,isCustom:!1}]}handleError(s){if(s.response){const{data:r,status:a}=s.response;return{success:!1,message:r.message||"An error occurred",errors:r.errors||[],statusCode:a}}else return s.request?{success:!1,message:"Network error. Please check your connection.",statusCode:0}:{success:!1,message:s.message||"An unexpected error occurred",statusCode:500}}validatePGData(s){var n,i,l,o,c,u,d,m,x,g,p,f,b,y,v;const r=[];(n=s.name)!=null&&n.trim()||r.push({field:"name",message:"PG name is required"}),(l=(i=s.address)==null?void 0:i.street)!=null&&l.trim()||r.push({field:"address.street",message:"Street address is required"}),(c=(o=s.address)==null?void 0:o.city)!=null&&c.trim()||r.push({field:"address.city",message:"City is required"}),(d=(u=s.address)==null?void 0:u.state)!=null&&d.trim()||r.push({field:"address.state",message:"State is required"}),(x=(m=s.address)==null?void 0:m.pincode)!=null&&x.trim()?/^\d{6}$/.test(s.address.pincode)||r.push({field:"address.pincode",message:"Pincode must be 6 digits"}):r.push({field:"address.pincode",message:"Pincode is required"}),(p=(g=s.contact)==null?void 0:g.phone)!=null&&p.trim()?/^\d{10}$/.test(s.contact.phone)||r.push({field:"contact.phone",message:"Phone number must be 10 digits"}):r.push({field:"contact.phone",message:"Phone number is required"}),(b=(f=s.contact)==null?void 0:f.email)!=null&&b.trim()?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(s.contact.email)||r.push({field:"contact.email",message:"Please enter a valid email"}):r.push({field:"contact.email",message:"Email is required"}),(v=(y=s.contact)==null?void 0:y.alternatePhone)!=null&&v.trim()&&!/^\d{10}$/.test(s.contact.alternatePhone)&&r.push({field:"contact.alternatePhone",message:"Alternate phone number must be 10 digits"});const a=["active","inactive","maintenance","full","under_renovation","pending_approval","suspended","closed","limited_occupancy"];return(!s.status||!a.includes(s.status))&&r.push({field:"status",message:"Invalid PG status"}),{isValid:r.length===0,errors:r}}formatPGDataForAPI(s){var r,a,n,i,l,o,c,u,d,m,x,g,p,f,b,y,v,N,S;return{name:(r=s.name)==null?void 0:r.trim(),description:((a=s.description)==null?void 0:a.trim())||"",address:{street:((i=(n=s.address)==null?void 0:n.street)==null?void 0:i.trim())||"",city:((o=(l=s.address)==null?void 0:l.city)==null?void 0:o.trim())||"",state:((u=(c=s.address)==null?void 0:c.state)==null?void 0:u.trim())||"",pincode:((m=(d=s.address)==null?void 0:d.pincode)==null?void 0:m.trim())||"",landmark:((g=(x=s.address)==null?void 0:x.landmark)==null?void 0:g.trim())||""},contact:{phone:((f=(p=s.contact)==null?void 0:p.phone)==null?void 0:f.trim())||"",email:((y=(b=s.contact)==null?void 0:b.email)==null?void 0:y.trim())||"",alternatePhone:((N=(v=s.contact)==null?void 0:v.alternatePhone)==null?void 0:N.trim())||""},property:{type:((S=s.property)==null?void 0:S.type)||"Gents PG"},status:s.status||"active",...s.salesManager&&{salesManager:s.salesManager},...s.salesStaff&&{salesStaff:s.salesStaff}}}formatPGData(s){var r;return{...s,formattedAddress:`${s.address.street}, ${s.address.city}, ${s.address.state} - ${s.address.pincode}`,formattedContact:`${s.contact.phone} | ${s.contact.email}`,occupancyRate:s.occupancyRate||0,isAvailable:s.status==="active"&&s.property.availableRooms>0,amenitiesList:((r=s.property.amenities)==null?void 0:r.join(", "))||"No amenities listed",status:s.status||"active"}}getRoomTypeOptions(){return[{value:"Single",label:"Single Room"},{value:"Double",label:"Double Room"},{value:"Triple",label:"Triple Room"},{value:"Dormitory",label:"Dormitory"}]}getPropertyTypeOptions(){return[{value:"Gents PG",label:"Gents PG"},{value:"Ladies PG",label:"Ladies PG"},{value:"Coliving PG",label:"Coliving PG"},{value:"PG",label:"PG"},{value:"Hostel",label:"Hostel"},{value:"Apartment",label:"Apartment"},{value:"Independent",label:"Independent"}]}getAmenityOptions(){return[{value:"WiFi",label:"WiFi"},{value:"AC",label:"Air Conditioning"},{value:"Food",label:"Food Included"},{value:"Laundry",label:"Laundry"},{value:"Cleaning",label:"Cleaning Service"},{value:"Security",label:"Security"},{value:"Parking",label:"Parking"},{value:"Gym",label:"Gym"},{value:"TV",label:"TV"},{value:"Refrigerator",label:"Refrigerator"},{value:"Geyser",label:"Geyser"},{value:"Furnished",label:"Furnished"}]}getStatusOptions(){return[{value:"active",label:"Active",color:"green"},{value:"inactive",label:"Inactive",color:"gray"},{value:"maintenance",label:"Maintenance",color:"yellow"},{value:"full",label:"Full",color:"red"},{value:"under_renovation",label:"Under Renovation",color:"orange"},{value:"pending_approval",label:"Pending Approval",color:"blue"},{value:"suspended",label:"Suspended",color:"red"},{value:"closed",label:"Closed",color:"gray"},{value:"limited_occupancy",label:"Limited Occupancy",color:"purple"}]}}const xa=new kR,ER=()=>localStorage.getItem("accessToken");class PR{constructor(){this.api=Ps.create({baseURL:"undefined/api/branches",headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(s=>{const r=ER();return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>Promise.reject(s))}async createBranch(s){try{if(!s)throw new Error("Branch data is required");const r=["pgId","name","address","maintainer","contact"];for(const o of r)if(!s[o])throw new Error(`Missing required field: ${o}`);const a=["street","city","state","pincode"];for(const o of a)if(!s.address[o])throw new Error(`Missing required address field: ${o}`);const n=["name","mobile","email"];for(const o of n)if(!s.maintainer[o])throw new Error(`Missing required maintainer field: ${o}`);const i=["phone","email"];for(const o of i)if(!s.contact[o])throw new Error(`Missing required contact field: ${o}`);const l=await this.api.post("/",s);return console.log("Branch Creation Response:",l.data),l.data}catch(r){return console.error("Error creating branch:",r),r.response?(console.error("Server error response:",r.response.data),{success:!1,message:r.response.data.message||"Failed to create branch",error:r.response.data.error||r.message}):r.request?(console.error("No response received:",r.request),{success:!1,message:"No response from server",error:r.message}):(console.error("Error setting up branch creation request:",r.message),{success:!1,message:"Error preparing branch creation request",error:r.message})}}async getBranchesByPG(s){try{if(!s)throw new Error("PG ID is required");const r=await this.api.get(`/pg/${s}`);return console.log("Branches Fetch Response:",r.data),{success:!0,data:r.data.branches||[]}}catch(r){return console.error("Error fetching branches:",r),r.response?(console.error("Server error response:",r.response.data),{success:!1,message:r.response.data.message||"Failed to fetch branches",error:r.response.data.error||r.message}):r.request?(console.error("No response received:",r.request),{success:!1,message:"No response from server",error:r.message}):(console.error("Error setting up branches fetch request:",r.message),{success:!1,message:"Error preparing branches fetch request",error:r.message})}}async setDefaultBranch(s){try{if(!s)throw new Error("Branch ID is required");const r=await this.api.patch(`/${s}/default`);return console.log("Set Default Branch Response:",r.data),{success:!0,data:r.data}}catch(r){return console.error("Error setting default branch:",r),r.response?(console.error("Server error response:",r.response.data),{success:!1,message:r.response.data.message||"Failed to set default branch",error:r.response.data.error||r.message}):r.request?(console.error("No response received:",r.request),{success:!1,message:"No response from server",error:r.message}):(console.error("Error setting up default branch request:",r.message),{success:!1,message:"Error preparing default branch request",error:r.message})}}async updateBranch(s,r){try{if(!s)throw new Error("Branch ID is required");if(!r)throw new Error("Branch data is required");const a=await this.api.put(`/${s}`,r);return console.log("Branch Update Response:",a.data),{success:!0,data:a.data}}catch(a){return console.error("Error updating branch:",a),a.response?(console.error("Server error response:",a.response.data),{success:!1,message:a.response.data.message||"Failed to update branch",error:a.response.data.error||a.message}):a.request?(console.error("No response received:",a.request),{success:!1,message:"No response from server",error:a.message}):(console.error("Error setting up branch update request:",a.message),{success:!1,message:"Error preparing branch update request",error:a.message})}}async deleteBranch(s){try{if(!s)throw new Error("Branch ID is required");const r=await this.api.delete(`/${s}`);return console.log("Branch Delete Response:",r.data),{success:!0,data:r.data}}catch(r){return console.error("Error deleting branch:",r),r.response?(console.error("Server error response:",r.response.data),{success:!1,message:r.response.data.message||"Failed to delete branch",error:r.response.data.error||r.message}):r.request?(console.error("No response received:",r.request),{success:!1,message:"No response from server",error:r.message}):(console.error("Error setting up branch delete request:",r.message),{success:!1,message:"Error preparing branch delete request",error:r.message})}}}const gS=new PR,TR=({isOpen:t,onClose:s,onConfigured:r})=>{const[a,n]=h.useState([]),[i,l]=h.useState(null),[o,c]=h.useState(!1),[u,d]=h.useState([{type:"1-sharing",name:"Single Occupancy",description:"Private room with single bed",cost:8e3,isCustom:!1},{type:"2-sharing",name:"Double Occupancy",description:"Room shared between two residents",cost:6e3,isCustom:!1},{type:"3-sharing",name:"Triple Occupancy",description:"Room shared between three residents",cost:5e3,isCustom:!1},{type:"4-sharing",name:"Quad Occupancy",description:"Room shared between four residents",cost:4e3,isCustom:!1}]);h.useEffect(()=>{t&&m()},[t]);const m=async()=>{try{c(!0);const y=localStorage.getItem("persist:root"),v=y?JSON.parse(JSON.parse(y).auth).user:null;if(!v||!v.pgId){M.error("PG ID not found. Please contact support.");return}const N=await gS.getBranchesByPG(v.pgId);if(N.success&&N.data){n(N.data);const S=N.data.find(w=>w.isDefault);S&&l(S)}else M.error("Failed to fetch branches")}catch(y){console.error("Error fetching branches:",y),M.error("An error occurred while fetching branches")}finally{c(!1)}},x=()=>{d([...u,{type:"",name:"",description:"",cost:0,isCustom:!0}])},g=y=>{if(!u[y].isCustom)return;const v=[...u];v.splice(y,1),d(v)},p=(y,v,N)=>{const S=[...u];if(S[y][v]=N,v==="name"&&S[y].isCustom){const w=N.toLowerCase().split(" ");S[y].type=`${w[0]}-sharing`}d(S)},f=()=>{for(const y of u)if(!y.type||!y.name||y.cost===void 0||y.cost<=0)return M.error("Please fill in all required fields with valid data"),!1;return!0},b=async()=>{if(!i){M.error("Please select a branch first");return}if(f())try{c(!0);const y=localStorage.getItem("persist:root"),v=y?JSON.parse(JSON.parse(y).auth).user:null;if(!v||!v.pgId){M.error("PG ID not found. Please contact support.");return}const N=await xa.configureSharingTypes(v.pgId,u);N.success?(M.success("PG Configuration completed successfully"),r&&r(N.data),s()):M.error(N.message||"Failed to configure PG")}catch(y){console.error("PG Configuration error:",y),M.error("An error occurred while configuring PG")}finally{c(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"PG Configuration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure sharing types for your PG"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(sr,{className:"h-4 w-4 mr-2 text-green-600"}),"Select Branch"]}),o?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(y=>e.jsxs("div",{onClick:()=>l(y),className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 ${(i==null?void 0:i._id)===y._id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-blue-50/20"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${y.isDefault?"bg-yellow-500 text-white":"bg-gray-200"}`,children:e.jsx(Ie,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:y.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[y.address.city,", ",y.address.state]})]})]}),y.isDefault&&e.jsx("div",{className:"mt-2 text-xs text-yellow-700 bg-yellow-100 px-2 py-1 rounded inline-block",children:"Default Branch"})]},y._id))}):e.jsx("div",{className:"text-center text-gray-500",children:"No branches found. Please create a branch first."})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sharing Types"}),e.jsxs("button",{onClick:x,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Custom Type"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map((y,v)=>e.jsxs("div",{className:`border rounded-lg p-4 ${y.isCustom?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[y.isCustom&&e.jsx("button",{onClick:()=>g(v),className:"float-right text-red-500 hover:text-red-700",children:e.jsx(Pr,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:y.name,onChange:N=>p(v,"name",N.target.value),placeholder:"e.g., Single Occupancy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:!y.isCustom})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsx("input",{type:"text",value:y.type,onChange:N=>p(v,"type",N.target.value),placeholder:"e.g., 1-sharing",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:!y.isCustom})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:y.description,onChange:N=>p(v,"description",N.target.value),placeholder:"Optional description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Bed (₹) *"}),e.jsx("input",{type:"number",value:y.cost,onChange:N=>p(v,"cost",parseFloat(N.target.value)||0),placeholder:"Enter cost",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"0"})]})]})]},v))})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," These sharing types will be used for room allocation and pricing. You can modify them later in PG settings."]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition duration-200",children:"Cancel"}),e.jsxs("button",{onClick:b,disabled:o||!i,className:`flex items-center space-x-2 px-6 py-2 rounded-lg transition-all duration-200 ${i?"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(Za,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Save Configuration"})]})]})]})]})}):null},_R=({isOpen:t,onClose:s,onBranchCreated:r,pgId:a})=>{const n=cr(),[i,l]=h.useState(!1),[o,c]=h.useState({name:"",address:{street:"",city:"",state:"",pincode:"",landmark:""},contact:{phone:"",email:"",alternatePhone:""},maintainer:{name:"",mobile:"",email:""},capacity:{totalRooms:0,totalBeds:0,availableRooms:0},status:"active",isDefault:!0}),u=(x,g,p)=>{c(f=>({...f,[x]:{...f[x],[g]:p}}))},d=()=>{const{name:x,address:g,contact:p,maintainer:f}=o;return!x||x.trim()===""?(M.error("Branch name is required"),!1):!g.street||!g.city||!g.state||!g.pincode?(M.error("Please fill in all address fields (street, city, state, pincode)"),!1):!p.phone||!p.email?(M.error("Contact phone and email are required"),!1):!f.name||!f.mobile||!f.email?(M.error("Maintainer details (name, mobile, email) are required"),!1):!0},m=async x=>{if(x.preventDefault(),!a){M.error("PG ID is required. Please contact support.");return}if(d())try{l(!0);const g={pgId:a,name:o.name.trim(),address:{street:o.address.street.trim(),city:o.address.city.trim(),state:o.address.state.trim(),pincode:o.address.pincode.trim(),landmark:(o.address.landmark||"").trim()},maintainer:{name:o.maintainer.name.trim(),mobile:o.maintainer.mobile.trim(),email:o.maintainer.email.trim()},contact:{phone:o.contact.phone.trim(),email:o.contact.email.trim(),alternatePhone:(o.contact.alternatePhone||"").trim()},capacity:{totalRooms:o.capacity.totalRooms||0,totalBeds:o.capacity.totalBeds||0,availableRooms:o.capacity.availableRooms||0},status:o.status||"active",isDefault:!0};console.log("Branch Creation Data:",g);const p=await gS.createBranch(g);p.success?(M.success("Default branch created successfully!"),n(Tg({default_branch:!0})),r&&r(p.data),s()):(M.error(p.message||"Failed to create branch"),console.error("Branch creation error:",p))}catch(g){console.error("Error creating branch:",g),M.error("An error occurred while creating the branch")}finally{l(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Set Up Default Branch"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure your first PG branch"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Name *"}),e.jsx("input",{type:"text",value:o.name,onChange:x=>c(g=>({...g,name:x.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter branch name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o.status,onChange:x=>c(g=>({...g,status:x.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(sr,{className:"h-4 w-4 mr-2 text-green-600"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street *"}),e.jsx("input",{type:"text",value:o.address.street,onChange:x=>u("address","street",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter street address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e.jsx("input",{type:"text",value:o.address.city,onChange:x=>u("address","city",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter city",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),e.jsx("input",{type:"text",value:o.address.state,onChange:x=>u("address","state",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter state",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),e.jsx("input",{type:"text",value:o.address.pincode,onChange:x=>u("address","pincode",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter pincode",pattern:"[0-9]{6}",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Landmark"}),e.jsx("input",{type:"text",value:o.address.landmark,onChange:x=>u("address","landmark",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter landmark (optional)"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2 text-purple-600"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",value:o.contact.phone,onChange:x=>u("contact","phone",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number",pattern:"[0-9]{10}",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:o.contact.email,onChange:x=>u("contact","email",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alternate Phone"}),e.jsx("input",{type:"tel",value:o.contact.alternatePhone,onChange:x=>u("contact","alternatePhone",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter alternate phone",pattern:"[0-9]{10}"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-orange-600"}),"Maintainer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:o.maintainer.name,onChange:x=>u("maintainer","name",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter maintainer name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile *"}),e.jsx("input",{type:"tel",value:o.maintainer.mobile,onChange:x=>u("maintainer","mobile",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter mobile number",pattern:"[0-9]{10}",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:o.maintainer.email,onChange:x=>u("maintainer","email",x.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter maintainer email",required:!0})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-indigo-600"}),"Capacity Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Rooms"}),e.jsx("input",{type:"number",value:o.capacity.totalRooms,onChange:x=>u("capacity","totalRooms",parseInt(x.target.value)||0),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total rooms",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Beds"}),e.jsx("input",{type:"number",value:o.capacity.totalBeds,onChange:x=>u("capacity","totalBeds",parseInt(x.target.value)||0),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total beds",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Rooms"}),e.jsx("input",{type:"number",value:o.capacity.availableRooms,onChange:x=>u("capacity","availableRooms",parseInt(x.target.value)||0),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter available rooms",min:"0"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," This branch will be set as your default branch. You can modify branch details later in settings."]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition duration-200 disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition duration-200 disabled:opacity-50",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(Za,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Create Branch"})]})]})]})]})}):null},AR={resident_management:["residents","onboarding","offboarding","room_switching","moved_out"]},RR=()=>{var O;const[t,s]=h.useState(!1),[r,a]=h.useState(!1),[n,i]=h.useState(new Set),{user:l,subscription:o}=He(W=>W.auth),c=He(Nr),u=cr(),d=Ms(),m=wo(),{hasModule:x,allowsMultipleBranches:g,canPerformActionOnSubmodule:p}=Wc(),[f,b]=h.useState(null),[y,v]=h.useState(null),[N,S]=h.useState(!1),[w,C]=h.useState(!1),[j,k]=h.useState(!1),E=He(q_)||!1,R=He(G_)||!1,D=(o==null?void 0:o.status)==="active"&&(o==null?void 0:o.billingCycle)!=="trial"||!1;h.useEffect(()=>{console.log("🔍 Subscription Status Debug:",{subscription:o,hasActivePaidSubscription:D})},[o,D]),h.useEffect(()=>{console.log("🔍 Configuration Status Debug:",{user:{default_branch:l==null?void 0:l.default_branch,pg_configured:l==null?void 0:l.pg_configured},reduxState:{defaultBranch:R,pgConfigured:E}})},[l,R,E]),h.useEffect(()=>{const W=l&&l.default_branch===!1||R===!1,z=l&&l.pg_configured===!1||E===!1;W?(console.log("🚨 Showing Default Branch Modal",{userDefaultBranch:l==null?void 0:l.default_branch,defaultBranch:R}),C(!0)):z&&(console.log("🚨 Showing PG Configuration Modal",{userPgConfigured:l==null?void 0:l.pg_configured,pgConfigured:E}),k(!0))},[l,R,E]);const P=W=>{u(Tg({default_branch:!0})),C(!1),k(!0)},T=()=>{u(Tg({pg_configured:!0}))};h.useEffect(()=>{if(((o==null?void 0:o.billingCycle)==="trial"||o!=null&&o.isTrialActive)&&(o!=null&&o.trialEndDate)){console.log("✅ Setting up trial countdown");const W=()=>{const H=new Date,Q=new Date(o.startDate),J=new Date(o.trialEndDate),ie=Math.ceil((J-Q)/(1e3*60*60*24)),K=J-H;if(console.log("⏰ Trial countdown update:",{now:H.toISOString(),trialStart:Q.toISOString(),trialEnd:J.toISOString(),diffMs:K,trialPeriodDays:ie}),K>0){const oe=Math.floor(K/864e5),le=Math.floor(K%(1e3*60*60*24)/(1e3*60*60)),Se=Math.floor(K%(1e3*60*60)/(1e3*60));console.log("📅 Setting active trial:",{days:oe,hours:le,minutes:Se}),b({days:oe,hours:le,minutes:Se,expired:!1}),v({trialPeriod:ie,daysUsed:ie-oe,daysRemaining:oe,startDate:Q,endDate:J})}else console.log("❌ Trial expired"),b({days:0,hours:0,minutes:0,expired:!0}),v({trialPeriod:ie,daysUsed:ie,daysRemaining:0,startDate:Q,endDate:J,expired:!0})};W();const z=setInterval(W,6e4);return()=>clearInterval(z)}else b(null),v(null)},[o]),h.useEffect(()=>{const W=sessionStorage.getItem("showTrialModal"),z=sessionStorage.getItem("showTrialModalAfterOnboarding");(W==="true"||z==="true")&&!D&&(sessionStorage.removeItem("showTrialModal"),sessionStorage.removeItem("showTrialModalAfterOnboarding"),S(!0))},[o]);const{showExpiryModal:B,closeExpiryModal:F,handleRefreshToken:L}=Ox();console.log("🏢 AdminLayout rendering:",{user:!!l,subscription:o?{status:o.status,billingCycle:o.billingCycle,isTrialActive:o.isTrialActive}:null,hasActivePaidSubscription:D,trialTimeLeft:f?"active":null,location:m.pathname});const I=[{name:"Dashboard",href:"/admin",icon:EE},{name:"My PG",href:"/admin/pg-management",icon:Ie},{name:"Resident Management",icon:a2,hasDropdown:!0,dropdownItems:[{name:"All Residents",href:"/admin/residents",icon:Je},{name:"Onboarding",href:"/admin/onboarding",icon:Pa},{name:"Offboarding",href:"/admin/offboarding",icon:fb},{name:"Room Switching",href:"/admin/room-switching",icon:ol},{name:"Moved Out",href:"/admin/moved-out",icon:ea}]},{name:"Payments",href:"/admin/payments",icon:Ks},{name:"Tickets",href:"/admin/tickets",icon:Rs},{name:"All Activities",href:"/admin/activities",icon:kl},{name:"Branch Activities",href:"/admin/branch-activities",icon:Ie},{name:"Reports",href:"/admin/reports",icon:n2},{name:"QR Codes",href:"/admin/qr-management",icon:kd},{name:"Room Availability",href:"/admin/room-availability",icon:Ie},{name:"Usage Dashboard",href:"/admin/usage-dashboard",icon:Jt},{name:"Cost Calculator",href:"/admin/cost-calculator",icon:ic},{name:"Self-Service Portal",href:"/admin/self-service",icon:is},{name:"Settings",href:"/admin/settings",icon:Es}],V=()=>I.filter(W=>["Dashboard","Settings"].includes(W.name)||W.name==="My PG"?!0:W.name==="Resident Management"?x("resident_management")?(AR.resident_management||[]).some(H=>p("resident_management",H,"read")):!1:W.name==="Payments"?x("payment_tracking")&&p("payment_tracking","payments","read"):W.name==="Tickets"?x("ticket_system")&&p("ticket_system","tickets","read"):W.name==="Reports"?x("analytics_reports")&&p("analytics_reports","reports","read"):W.name==="QR Codes"?x("qr_code_payments")&&p("qr_code_payments","qr-management","read"):W.name==="Room Availability"?x("room_allocation")&&p("room_allocation","room_availability","read"):W.name==="Branch Activities"?g():(W.name==="All Activities",!0)).map(W=>{if(W.name==="Resident Management"&&W.hasDropdown&&W.dropdownItems){const z=W.dropdownItems.filter(H=>H.name==="All Residents"?p("resident_management","residents","read"):H.name==="Onboarding"?p("resident_management","onboarding","read"):H.name==="Offboarding"?p("resident_management","offboarding","read"):H.name==="Room Switching"?p("resident_management","room_switching","read"):H.name==="Moved Out"?p("resident_management","moved_out","read"):!0);return{...W,dropdownItems:z}}return W}).filter(W=>W.name==="Resident Management"&&W.hasDropdown?W.dropdownItems&&W.dropdownItems.length>0:!0),_=async()=>{try{await u(ci()).unwrap(),M.success("Logged out successfully"),d("/admin/login")}catch{M.error("Logout failed")}},G=async()=>{S(!1);try{window.location.reload()}catch(W){console.error("Error refreshing after trial activation:",W),window.location.reload()}},U=W=>m.pathname===W||m.pathname.startsWith(W+"/"),A=W=>{const z=new Set(n);z.has(W)?z.delete(W):z.add(W),i(z)},q=W=>n.has(W),Y=W=>W==null?void 0:W.some(z=>U(z.href));return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-2xl border-r border-gray-100 transition-all duration-300 ease-in-out flex flex-col ${t?"w-16":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-blue-100",children:[!t&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2.5 bg-blue-600 rounded-xl shadow-lg",children:e.jsx(is,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"PG Admin"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Management"})]})]}),t&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("div",{className:"p-2.5 bg-blue-600 rounded-xl shadow-lg",children:e.jsx(is,{className:"h-5 w-5 text-white"})})}),e.jsx("button",{onClick:()=>s(!t),className:"p-1.5 rounded-lg text-gray-500 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200",children:t?e.jsx(ra,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"mt-6 px-3 flex-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:V().map(W=>{if(W.name==="Settings"&&!(c!=null&&c.isDefault))return null;const z=W.hasDropdown?Y(W.dropdownItems):U(W.href);return e.jsx("div",{children:W.hasDropdown?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>A(W.name),className:`w-full group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${z?"bg-blue-50 text-blue-700 border border-blue-200 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(W.icon,{className:`h-5 w-5 transition-all duration-200 ${z?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),!t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 ml-3 text-left",children:e.jsx("div",{className:"font-medium",children:W.name})}),q(W.name)?e.jsx(zn,{className:"h-4 w-4 text-gray-400 transition-transform duration-200"}):e.jsx(ra,{className:"h-4 w-4 text-gray-400 transition-transform duration-200"})]})]}),!t&&q(W.name)&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-6 mt-2 space-y-1",children:W.dropdownItems.map(H=>{const Q=U(H.href);return e.jsxs(ms,{to:H.href,className:`group flex items-center px-3 py-2.5 text-sm rounded-lg transition-all duration-200 ${Q?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(H.icon,{className:`h-4 w-4 transition-all duration-200 ${Q?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"font-medium",children:H.name})})]},H.name)})})]}):e.jsxs(ms,{to:W.href,className:`group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${z?"bg-blue-50 text-blue-700 border border-blue-200 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(W.icon,{className:`h-5 w-5 transition-all duration-200 ${z?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),!t&&e.jsx("div",{className:"flex-1 ml-3",children:e.jsx("div",{className:"font-medium",children:W.name})})]})},W.name)})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(jt,{className:"h-4 w-4 text-white"})})}),!t&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[l==null?void 0:l.firstName," ",l==null?void 0:l.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:l==null?void 0:l.email}),e.jsx("p",{className:"text-xs text-blue-600 font-medium capitalize",children:l==null?void 0:l.role})]})]})})]}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ease-in-out ${t?"ml-16":"ml-64"}`,children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((O=V().find(W=>W.hasDropdown?Y(W.dropdownItems):U(W.href)))==null?void 0:O.name)||"Dashboard"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[!f&&!y&&!D&&e.jsxs("button",{onClick:()=>S(!0),className:"hidden sm:flex items-center space-x-3 px-4 py-2.5 rounded-xl border-2 border-green-300 bg-gradient-to-r from-green-50 to-emerald-100 text-green-800 shadow-lg shadow-green-100 hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5",title:"Activate Free Trial",children:[e.jsx(Ur,{className:"h-5 w-5"}),e.jsx("span",{className:"font-bold text-sm",children:"🎉 Free Trial"})]}),(f==null?void 0:f.expired)&&y&&!D&&e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"hidden sm:flex items-center space-x-3 px-4 py-2.5 rounded-xl border-2 border-gray-300 bg-gradient-to-r from-gray-50 to-slate-100 text-gray-700 shadow-lg shadow-gray-100",title:"Trial Previously Used",children:[e.jsx(Ur,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm",children:"Trial Used"}),e.jsxs("span",{className:"text-xs opacity-75",children:["Ended ",new Date(y.endDate).toLocaleDateString()]})]})]}),f&&!f.expired&&e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"hidden sm:flex items-center space-x-3 px-4 py-2.5 rounded-xl border-2 border-green-300 bg-gradient-to-r from-green-50 to-emerald-100 text-green-800 shadow-lg shadow-green-100",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse shadow-sm bg-green-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-sm",children:"🎉 Free Trial Active"}),e.jsxs("span",{className:"text-xs bg-white bg-opacity-50 px-2 py-0.5 rounded-full font-semibold",children:[f.days,"d ",f.hours,"h left"]})]}),y&&e.jsxs("span",{className:"text-xs opacity-75",children:["Expires: ",y.endDate.toLocaleDateString()]})]})]}),(f==null?void 0:f.expired)&&e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"hidden sm:flex items-center space-x-3 px-4 py-2.5 bg-gradient-to-r from-red-50 to-red-100 border-2 border-red-300 rounded-xl text-red-800 shadow-lg shadow-red-100",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full shadow-sm shadow-red-300"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-sm",children:"⚠️ Trial Ended"}),e.jsx("span",{className:"text-xs bg-white bg-opacity-50 px-2 py-0.5 rounded-full font-semibold",children:"Action Required"})]}),e.jsx("span",{className:"text-xs font-medium mt-1",children:"Upgrade now to continue using all features"})]}),e.jsx("button",{onClick:()=>d("/admin/subscription-selection"),className:"ml-2 px-3 py-1 bg-red-600 text-white text-xs font-semibold rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:"Upgrade"})]}),!f&&!y&&!D&&e.jsxs("button",{onClick:()=>S(!0),className:"flex sm:hidden items-center space-x-2 px-3 py-1.5 rounded-lg border border-green-300 bg-gradient-to-r from-green-50 to-emerald-100 text-green-800 shadow-md hover:shadow-lg transition-all duration-200",title:"Activate Free Trial",children:[e.jsx(Ur,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"🎉 Trial"})]}),(f==null?void 0:f.expired)&&y&&!D&&e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"flex sm:hidden items-center space-x-2 px-3 py-1.5 rounded-lg border border-gray-300 bg-gradient-to-r from-gray-50 to-slate-100 text-gray-700 shadow-md",title:"Trial Previously Used",children:[e.jsx(Ur,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Used"}),e.jsx("span",{className:"text-xs opacity-75",children:"Trial"})]})]}),f&&!f.expired&&e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"flex sm:hidden items-center space-x-2 px-3 py-1.5 rounded-lg border border-green-300 bg-gradient-to-r from-green-50 to-emerald-100 text-green-800 shadow-md",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full animate-pulse bg-green-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:"🎉 Trial Active"}),e.jsxs("span",{className:"text-xs opacity-75",children:[f.days,"d ",f.hours,"h left"]})]})]}),(f==null?void 0:f.expired)&&e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"flex sm:hidden items-center space-x-2 px-3 py-1.5 bg-gradient-to-r from-red-50 to-red-100 border border-red-300 rounded-lg text-red-800 shadow-md shadow-red-100",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:"⚠️ Trial Ended"}),e.jsx("button",{onClick:()=>d("/admin/subscription-selection"),className:"text-xs bg-red-600 text-white px-2 py-0.5 rounded mt-0.5 hover:bg-red-700 transition-colors",children:"Upgrade"})]})]}),e.jsx("div",{className:"hidden sm:block w-64",children:e.jsx(tS,{})}),e.jsx(jR,{}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!r),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(jt,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:l==null?void 0:l.firstName})]}),e.jsx(vt,{children:r&&e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[l==null?void 0:l.firstName," ",l==null?void 0:l.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:l==null?void 0:l.email})]}),e.jsxs(ms,{to:"/admin/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:()=>a(!1),children:[e.jsx(jt,{className:"h-4 w-4 mr-3 text-gray-400"}),"Profile"]}),e.jsxs(ms,{to:"/admin/settings",className:`flex items-center px-4 py-2 text-sm transition-colors ${c!=null&&c.isDefault?"text-gray-700 hover:bg-blue-50 hover:text-blue-600":"text-gray-400 cursor-not-allowed"}`,onClick:W=>{c!=null&&c.isDefault||W.preventDefault(),a(!1)},children:[e.jsx(Es,{className:"h-4 w-4 mr-3 text-gray-400"}),"Settings"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{a(!1),_()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(ea,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-full mx-auto px-6",children:[e.jsx(wR,{}),e.jsx(Ou,{})]})})})]}),e.jsx(Zd,{isOpen:B,onClose:F,onRefresh:L}),e.jsx(fS,{isOpen:N,onClose:()=>S(!1),onTrialActivated:G}),e.jsx(_R,{isOpen:w,onClose:()=>C(!1),onBranchCreated:P,pgId:(l==null?void 0:l._id)||(l==null?void 0:l.pg)&&l.pg._id}),e.jsx(TR,{isOpen:j,onClose:()=>k(!1),onConfigured:T})]})},FR=()=>{var N;const{user:t,logout:s}=Uc(),r=Ms(),a=wo(),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(new Set),{showExpiryModal:d,closeExpiryModal:m,handleRefreshToken:x}=Ox(),g=[{name:"Dashboard",href:"/support/dashboard",icon:Ia},{name:"Tickets",icon:Rs,hasDropdown:!0,dropdownItems:[{name:"All Tickets",href:"/support/tickets",icon:ns},{name:"My Assigned",href:"/support/tickets/assigned",icon:ys},{name:"Ticket Analytics",href:"/support/tickets/analytics",icon:Jt}]},{name:"Settings",href:"/support/settings",icon:Es},{name:"Profile",href:"/support/profile",icon:jt}],p=async()=>{try{await s(),r("/support-login")}catch(S){console.error("Logout error:",S)}},f=S=>a.pathname===S,b=S=>{const w=new Set(c);w.has(S)?w.delete(S):w.add(S),u(w)},y=S=>c.has(S),v=S=>S.some(w=>f(w.href));return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(vt,{children:!n&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 lg:hidden",onClick:()=>i(!0),children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})})}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-2xl border-r border-gray-200 transition-all duration-300 ease-in-out ${n?"w-16":"w-64"} lg:translate-x-0 lg:static lg:inset-0`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-4 bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 shadow-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(is,{className:"h-5 w-5 text-white"})}),!n&&e.jsx("div",{className:"ml-3",children:e.jsx("span",{className:"text-lg font-bold text-white",children:"Support"})})]}),e.jsx("button",{onClick:()=>i(!n),className:"lg:hidden p-1 rounded text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"flex-1 px-3 py-6 space-y-2 overflow-y-auto",children:g.map(S=>{const w=S.hasDropdown?v(S.dropdownItems):f(S.href);return e.jsx("div",{children:S.hasDropdown?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>b(S.name),className:`w-full group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${w?"bg-blue-50 text-blue-700 border border-blue-200 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(S.icon,{className:`h-5 w-5 transition-all duration-200 ${w?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 ml-3 text-left",children:e.jsx("div",{className:"font-medium",children:S.name})}),y(S.name)?e.jsx(zn,{className:"h-4 w-4 text-gray-400 transition-transform duration-200"}):e.jsx(ra,{className:"h-4 w-4 text-gray-400 transition-transform duration-200"})]})]}),!n&&y(S.name)&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-6 mt-2 space-y-1",children:S.dropdownItems.map(C=>{const j=f(C.href);return e.jsxs(ms,{to:C.href,className:`group flex items-center px-3 py-2.5 text-sm rounded-lg transition-all duration-200 ${j?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(C.icon,{className:`h-4 w-4 transition-all duration-200 ${j?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"font-medium",children:C.name})})]},C.name)})})]}):e.jsxs(ms,{to:S.href,className:`group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${w?"bg-blue-50 text-blue-700 border border-blue-200 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(S.icon,{className:`h-5 w-5 transition-all duration-200 ${w?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),!n&&e.jsx("div",{className:"flex-1 ml-3",children:e.jsx("div",{className:"font-medium",children:S.name})})]})},S.name)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(jt,{className:"h-4 w-4 text-white"})})}),!n&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t==null?void 0:t.email}),e.jsx("p",{className:"text-xs text-blue-600 font-medium capitalize",children:"Support Staff"})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col transition-all duration-300 ease-in-out ml-0",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>i(!n),className:"p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-all duration-200",children:e.jsx(PE,{className:"h-6 w-6"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((N=g.find(S=>S.hasDropdown?v(S.dropdownItems):f(S.href)))==null?void 0:N.name)||"Dashboard"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"p-2 rounded-lg text-gray-400 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 relative",children:[e.jsx(Ln,{className:"h-5 w-5"}),e.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>o(!l),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(jt,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:t==null?void 0:t.firstName})]}),e.jsx(vt,{children:l&&e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]}),e.jsxs(ms,{to:"/support/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:()=>o(!1),children:[e.jsx(jt,{className:"h-4 w-4 mr-3 text-gray-400"}),"Profile"]}),e.jsxs(ms,{to:"/support/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:()=>o(!1),children:[e.jsx(Es,{className:"h-4 w-4 mr-3 text-gray-400"}),"Settings"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{o(!1),p()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(ea,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-full mx-auto px-6",children:e.jsx(Ou,{})})})})]}),e.jsx(Zd,{isOpen:d,onClose:m,onRefresh:x})]})},DR=()=>{var u,d;const[t,s]=h.useState(!1),{user:r}=He(m=>m.auth),a=cr(),n=Ms(),i=wo();h.useEffect(()=>{r&&r.forcePasswordChange&&i.pathname!=="/sales/change-password"&&n("/sales/change-password")},[r,i.pathname,n]);const l=[{name:"Dashboard",href:"/sales/dashboard",icon:Ia},{name:"My PGs",href:"/sales/my-pgs",icon:Ie},{name:"Reports",href:"/sales/reports",icon:ns},{name:"Performance",href:"/sales/performance",icon:Jt},{name:"Settings",href:"/sales/settings",icon:Es}],o=async()=>{try{await a(ci()).unwrap(),M.success("Logged out successfully"),n("/login")}catch{M.error("Logout failed")}},c=m=>i.pathname===m||i.pathname.startsWith(m+"/");return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 bg-white shadow-2xl border-r border-gray-100 transition-all duration-300 ease-in-out w-64",children:[e.jsx("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-100 bg-gradient-to-r from-green-50 to-green-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2.5 bg-green-600 rounded-xl shadow-lg",children:e.jsx(Pa,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Sub-Sales"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Field Agent"})]})]})}),e.jsx("nav",{className:"mt-6 px-3",children:e.jsx("div",{className:"space-y-2",children:l.map(m=>e.jsxs(ms,{to:m.href,className:`group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${c(m.href)?"bg-green-50 text-green-700 border border-green-200 shadow-sm":"text-gray-600 hover:text-green-600 hover:bg-green-50"}`,children:[e.jsx(m.icon,{className:`h-5 w-5 transition-all duration-200 ${c(m.href)?"text-green-600":"text-gray-500 group-hover:text-green-600"}`}),e.jsx("div",{className:"flex-1 ml-3",children:e.jsx("div",{className:"font-medium",children:m.name})})]},m.name))})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(Pa,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r==null?void 0:r.email}),e.jsx("p",{className:"text-xs text-green-600 font-medium capitalize",children:(u=r==null?void 0:r.salesRole)==null?void 0:u.replace("_","-")})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col ml-64",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((d=l.find(m=>c(m.href)))==null?void 0:d.name)||"Dashboard"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"p-2 rounded-lg text-gray-400 hover:text-green-600 hover:bg-green-50 transition-all duration-200",children:e.jsx(Ln,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!t),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:text-green-600 hover:bg-green-50 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(Pa,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:r==null?void 0:r.firstName})]}),e.jsx(vt,{children:t&&e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:r==null?void 0:r.email})]}),e.jsxs(ms,{to:"/sales/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors",onClick:()=>s(!1),children:[e.jsx(Es,{className:"h-4 w-4 mr-3 text-gray-400"}),"Settings"]}),e.jsxs("button",{onClick:()=>{s(!1),o()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(ea,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsx(Ou,{})})})})]})]})},IR=()=>{var u;const[t,s]=h.useState(!1),{user:r}=He(d=>d.auth),a=cr(),n=Ms(),i=wo(),l=[{name:"Dashboard",href:"/sales/dashboard",icon:Ia},{name:"PG Management",href:"/sales/pg-management",icon:Ie},{name:"Sub-Sales Staff",href:"/sales/staff",icon:Je},{name:"Performance",href:"/sales/performance",icon:Jt},{name:"Reports",href:"/sales/reports",icon:ns},{name:"Settings",href:"/sales/settings",icon:Es}],o=async()=>{try{await a(ci()).unwrap(),M.success("Logged out successfully"),n("/login")}catch{M.error("Logout failed")}},c=d=>i.pathname===d||i.pathname.startsWith(d+"/");return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 bg-white shadow-2xl border-r border-gray-100 w-64",children:[e.jsx("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-purple-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2.5 bg-purple-600 rounded-xl shadow-lg",children:e.jsx(Ft,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Sales Team"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Management Portal"})]})]})}),e.jsx("nav",{className:"mt-6 px-3",children:e.jsx("div",{className:"space-y-2",children:l.map(d=>e.jsxs(ms,{to:d.href,className:`group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${c(d.href)?"bg-purple-50 text-purple-700 border border-purple-200 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[e.jsx(d.icon,{className:`h-5 w-5 transition-all duration-200 ${c(d.href)?"text-purple-600":"text-gray-500 group-hover:text-purple-600"}`}),e.jsx("div",{className:"flex-1 ml-3",children:e.jsx("div",{className:"font-medium",children:d.name})})]},d.name))})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(Pa,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r==null?void 0:r.email}),e.jsx("p",{className:"text-xs text-purple-600 font-medium capitalize",children:(r==null?void 0:r.role)||(r==null?void 0:r.salesRole)})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col ml-64",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((u=l.find(d=>c(d.href)))==null?void 0:u.name)||"Dashboard"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"p-2 rounded-lg text-gray-400 hover:text-purple-600 hover:bg-purple-50 transition-all duration-200",children:e.jsx(Ln,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!t),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:text-purple-600 hover:bg-purple-50 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx(Pa,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:r==null?void 0:r.firstName})]}),e.jsx(vt,{children:t&&e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:r==null?void 0:r.email})]}),e.jsxs(ms,{to:"/sales/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition-colors",onClick:()=>s(!1),children:[e.jsx(Es,{className:"h-4 w-4 mr-3 text-gray-400"}),"Settings"]}),e.jsxs("button",{onClick:()=>{s(!1),o()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(ea,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsx(Ou,{})})})})]})]})},OR=()=>{const t=cr(),s=Ms(),{isLoggingIn:r,error:a,loginSuccess:n,isAuthenticated:i}=He(f=>f.auth),[l,o]=h.useState({email:"",password:""}),[c,u]=h.useState(!1),[d,m]=h.useState({});h.useEffect(()=>{i&&s("/")},[i,s]),h.useEffect(()=>{n&&(M.success(n),t(Ix()),s("/"))},[n,t,s]),h.useEffect(()=>{if(a){let f=a;a.includes("Account is locked")?f="Your account is temporarily locked due to multiple failed login attempts. Please contact the administrator to unlock your account.":a.includes("Invalid credentials")?f="Invalid email or password. Please try again.":a.includes("User not found")?f="No account found with this email address.":a.includes("User account is deactivated")&&(f="Your account has been deactivated. Please contact the administrator."),M.error(f),t(Dx())}},[a,t]);const x=f=>{const{name:b,value:y}=f.target;o(v=>({...v,[b]:y})),d[b]&&m(v=>({...v,[b]:""}))},g=()=>{const f={};return l.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(f.email="Please enter a valid email address"):f.email="Email is required",l.password||(f.password="Password is required"),m(f),Object.keys(f).length===0},p=async f=>{if(f.preventDefault(),!!g())try{await t(lc(l)).unwrap()}catch(b){console.error("Login failed:",b)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg xl:max-w-xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[e.jsx("div",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mb-4 sm:mb-6 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg sm:text-xl",children:"PG"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Welcome Back"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-sm mx-auto",children:"Sign in to your PG Maintenance account"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Tr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:x,className:`block w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${d.email?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Enter your email"})]}),d.email&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:d.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"current-password",required:!0,value:l.password,onChange:x,className:`block w-full pl-10 sm:pl-12 pr-12 sm:pr-14 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${d.password?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute inset-y-0 right-0 pr-3 sm:pr-4 flex items-center",children:c?e.jsx(rr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(ot,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),d.password&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:d.password})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 sm:ml-3 block text-xs sm:text-sm text-gray-700",children:"Remember me"})]}),e.jsx(ms,{to:"/forgot-password",className:"text-xs sm:text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Forgot password?"})]}),e.jsx("div",{className:"pt-2 sm:pt-4",children:e.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-3 sm:py-4 px-4 sm:px-6 border border-transparent text-sm sm:text-base font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Signing in..."})]}):e.jsx("span",{className:"text-sm sm:text-base",children:"Sign in"})})}),e.jsxs("div",{className:"relative my-6 sm:my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:e.jsx("span",{className:"px-2 sm:px-4 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500",children:"Or continue with"})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(ms,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Contact administrator"})]})})]})]}),e.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2025 PG Maintenance System. All rights reserved."})})]})},MR=()=>{const t=cr(),s=Ms(),{isRegistering:r,error:a,registerSuccess:n,isAuthenticated:i}=He(S=>S.auth),[l,o]=h.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[x,g]=h.useState({}),[p,f]=h.useState({});h.useEffect(()=>{i&&s("/dashboard")},[i,s]),h.useEffect(()=>{n&&(M.success("Registration successful! Please check your email for login credentials."),t(Ix()),s("/login"))},[n,t,s]),h.useEffect(()=>{a&&(M.error(a),t(Dx()))},[a,t]);const b=S=>{const{name:w,value:C}=S.target;o(j=>({...j,[w]:C})),x[w]&&g(j=>({...j,[w]:""})),w==="password"&&f(Lt.validatePassword(C))},y=()=>{const S={};return l.firstName?l.firstName.length<2?S.firstName="First name must be at least 2 characters long":l.firstName.length>50&&(S.firstName="First name cannot exceed 50 characters"):S.firstName="First name is required",l.lastName?l.lastName.length<2?S.lastName="Last name must be at least 2 characters long":l.lastName.length>50&&(S.lastName="Last name cannot exceed 50 characters"):S.lastName="Last name is required",l.email?Lt.validateEmail(l.email)||(S.email="Please enter a valid email address"):S.email="Email is required",l.phone?Lt.validatePhone(l.phone)||(S.phone="Please enter a valid 10-digit phone number"):S.phone="Phone number is required",l.password?p.isValid||(S.password="Password does not meet requirements"):S.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(S.confirmPassword="Passwords do not match"):S.confirmPassword="Please confirm your password",g(S),Object.keys(S).length===0},v=async S=>{if(S.preventDefault(),!!y())try{const{confirmPassword:w,...C}=l,j=await Lt.register(C);j.success?(M.success("Registration successful! Please check your email for login credentials."),s("/login")):M.error(j.message||"Registration failed")}catch(w){console.error("Registration failed:",w)}},N=()=>{if(!l.password)return null;const{isValid:S,errors:w}=p,C=[{key:"minLength",label:"At least 8 characters",met:!w.minLength},{key:"hasUpperCase",label:"One uppercase letter",met:!w.hasUpperCase},{key:"hasLowerCase",label:"One lowercase letter",met:!w.hasLowerCase},{key:"hasNumbers",label:"One number",met:!w.hasNumbers},{key:"hasSpecialChar",label:"One special character",met:!w.hasSpecialChar}];return e.jsxs("div",{className:"mt-2 sm:mt-3 space-y-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Password requirements:"}),C.map(j=>e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[j.met?e.jsx(Be,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-2 flex-shrink-0"}):e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:j.met?"text-green-600":"text-red-600",children:j.label})]},j.key))]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg xl:max-w-xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[e.jsx("div",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mb-4 sm:mb-6 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg sm:text-xl",children:"PG"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Create Account"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-sm mx-auto",children:"Register as a superadmin for PG Maintenance"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(jt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:l.firstName,onChange:b,className:`block w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.firstName?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"First name"})]}),x.firstName&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.firstName})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(jt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:l.lastName,onChange:b,className:`block w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.lastName?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Last name"})]}),x.lastName&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.lastName})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Tr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:b,className:`block w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.email?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Enter your email"})]}),x.email&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:l.phone,onChange:b,className:`block w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.phone?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"10-digit phone number"})]}),x.phone&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"new-password",required:!0,value:l.password,onChange:b,className:`block w-full pl-10 sm:pl-12 pr-12 sm:pr-14 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.password?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Create a strong password"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute inset-y-0 right-0 pr-3 sm:pr-4 flex items-center",children:c?e.jsx(rr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(ot,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),e.jsx(N,{}),x.password&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.password})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",autoComplete:"new-password",required:!0,value:l.confirmPassword,onChange:b,className:`block w-full pl-10 sm:pl-12 pr-12 sm:pr-14 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.confirmPassword?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute inset-y-0 right-0 pr-3 sm:pr-4 flex items-center",children:d?e.jsx(rr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(ot,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),x.confirmPassword&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.confirmPassword})]})]})]}),e.jsx("div",{className:"pt-2 sm:pt-4",children:e.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-3 sm:py-4 px-4 sm:px-6 border border-transparent text-sm sm:text-base font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Creating account..."})]}):e.jsx("span",{className:"text-sm sm:text-base",children:"Create Account"})})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(ms,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})})]})]}),e.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2025 PG Maintenance System. All rights reserved."})})]})},BR=()=>{const t=cr(),{isForgotPasswordLoading:s,error:r,forgotPasswordSuccess:a}=He(m=>m.auth),[n,i]=h.useState({email:""}),[l,o]=h.useState({});h.useEffect(()=>{a&&(M.success(a),t(Ix()))},[a,t]),h.useEffect(()=>{r&&(M.error(r),t(Dx()))},[r,t]);const c=m=>{const{name:x,value:g}=m.target;i(p=>({...p,[x]:g})),l[x]&&o(p=>({...p,[x]:""}))},u=()=>{const m={};return n.email?Lt.validateEmail(n.email)||(m.email="Please enter a valid email address"):m.email="Email is required",o(m),Object.keys(m).length===0},d=async m=>{if(m.preventDefault(),!!u())try{await t(Id(n)).unwrap()}catch(x){console.error("Forgot password failed:",x)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg xl:max-w-xl mx-auto",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs(ms,{to:"/login",className:"inline-flex items-center text-sm sm:text-base text-blue-600 hover:text-blue-500 transition-colors",children:[e.jsx(vr,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Back to login"]})}),e.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[e.jsx("div",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mb-4 sm:mb-6 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg sm:text-xl",children:"PG"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Forgot Password"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-sm mx-auto",children:"Enter your email address and we'll send you a link to reset your password"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"space-y-4 sm:space-y-5",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Tr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:c,className:`block w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${l.email?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Enter your email address"})]}),l.email&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:l.email})]})]})}),e.jsx("div",{className:"pt-2 sm:pt-4",children:e.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-3 sm:py-4 px-4 sm:px-6 border border-transparent text-sm sm:text-base font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:s?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Sending email..."})]}):e.jsx("span",{className:"text-sm sm:text-base",children:"Send Reset Link"})})}),e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 sm:p-5",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-xs sm:text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• We'll send a password reset link to your email"}),e.jsx("li",{children:"• Click the link in the email to reset your password"}),e.jsx("li",{children:"• The link will expire in 15 minutes for security"}),e.jsx("li",{children:"• Check your spam folder if you don't see the email"})]})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(ms,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})]})]})]}),e.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2025 PG Maintenance System. All rights reserved."})})]})},LR=()=>{const t=cr(),s=Ms(),[r]=r2(),{isResettingPassword:a,error:n,resetPasswordSuccess:i}=He(w=>w.auth),[l,o]=h.useState({password:"",confirmPassword:""}),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[x,g]=h.useState({}),[p,f]=h.useState({}),b=r.get("token");h.useEffect(()=>{b||(M.error("Invalid reset link. Please request a new password reset."),s("/forgot-password"))},[b,s]),h.useEffect(()=>{i&&(M.success(i),t(Ix()),s("/login"))},[i,t,s]),h.useEffect(()=>{n&&(M.error(n),t(Dx()))},[n,t]);const y=w=>{const{name:C,value:j}=w.target;o(k=>({...k,[C]:j})),x[C]&&g(k=>({...k,[C]:""})),C==="password"&&f(Lt.validatePassword(j))},v=()=>{const w={};return l.password?p.isValid||(w.password="Password does not meet requirements"):w.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",g(w),Object.keys(w).length===0},N=async w=>{if(w.preventDefault(),!!v())try{await t(r0({token:b,password:l.password})).unwrap()}catch(C){console.error("Password reset failed:",C)}},S=()=>{if(!l.password)return null;const{isValid:w,errors:C}=p,j=[{key:"minLength",label:"At least 8 characters",met:!C.minLength},{key:"hasUpperCase",label:"One uppercase letter",met:!C.hasUpperCase},{key:"hasLowerCase",label:"One lowercase letter",met:!C.hasLowerCase},{key:"hasNumbers",label:"One number",met:!C.hasNumbers},{key:"hasSpecialChar",label:"One special character",met:!C.hasSpecialChar}];return e.jsxs("div",{className:"mt-2 sm:mt-3 space-y-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Password requirements:"}),j.map(k=>e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[k.met?e.jsx(Be,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-2 flex-shrink-0"}):e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:k.met?"text-green-600":"text-red-600",children:k.label})]},k.key))]})};return b?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg xl:max-w-xl mx-auto",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs(ms,{to:"/login",className:"inline-flex items-center text-sm sm:text-base text-blue-600 hover:text-blue-500 transition-colors",children:[e.jsx(vr,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Back to login"]})}),e.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[e.jsx("div",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mb-4 sm:mb-6 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg sm:text-xl",children:"PG"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Reset Password"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-sm mx-auto",children:"Enter your new password below"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"new-password",required:!0,value:l.password,onChange:y,className:`block w-full pl-10 sm:pl-12 pr-12 sm:pr-14 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.password?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Enter your new password"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute inset-y-0 right-0 pr-3 sm:pr-4 flex items-center",children:c?e.jsx(rr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(ot,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),e.jsx(S,{}),x.password&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.password})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",autoComplete:"new-password",required:!0,value:l.confirmPassword,onChange:y,className:`block w-full pl-10 sm:pl-12 pr-12 sm:pr-14 py-3 sm:py-4 border rounded-xl text-sm sm:text-base placeholder-gray-500 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${x.confirmPassword?"border-red-300 focus:ring-red-500":"border-gray-200"}`,placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute inset-y-0 right-0 pr-3 sm:pr-4 flex items-center",children:d?e.jsx(rr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(ot,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),x.confirmPassword&&e.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:x.confirmPassword})]})]})]}),e.jsx("div",{className:"pt-2 sm:pt-4",children:e.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 sm:py-4 px-4 sm:px-6 border border-transparent text-sm sm:text-base font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting password..."})]}):e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 sm:p-5",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-yellow-900 mb-2",children:"Security Notice"}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"• This link will expire in 15 minutes"}),e.jsx("li",{children:"• Use a strong, unique password"}),e.jsx("li",{children:"• Don't share your password with anyone"}),e.jsx("li",{children:"• Consider using a password manager"})]})]})})]})]}),e.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2025 PG Maintenance System. All rights reserved."})})]}):null},$R=()=>{const[t,s]=h.useState({email:"",password:""}),[r,a]=h.useState(!1),[n,i]=h.useState(!1),[l,o]=h.useState(!1),c=cr(),u=Ms(),d=wo(),{user:m,loading:x,error:g}=He(b=>b.auth);h.useEffect(()=>{var b;(b=d.state)!=null&&b.message&&(o(!0),M.success(d.state.message)),window.history.replaceState({},document.title),m&&(m==null?void 0:m.role)==="admin"?(m.subscription&&(!m.subscription.planId||m.subscription.billingCycle==="trial"&&new Date>new Date(m.subscription.trialEndDate))?sessionStorage.setItem("showTrialModal","true"):sessionStorage.removeItem("showTrialModal"),u("/")):m&&(m==null?void 0:m.role)!=="admin"&&(M.error("This login is for PG Admins only"),u("/login"))},[m,u,d.state]);const p=b=>{s({...t,[b.target.name]:b.target.value})},f=async b=>{var y;b.preventDefault(),i(!0);try{const v=await c(lc(t)).unwrap();if(((y=v.user)==null?void 0:y.role)!=="admin"){M.error("Access denied. This login is for PG Admins only.");return}M.success("Welcome back, Admin!"),v.user.subscription&&(!v.user.subscription.planId||v.user.subscription.billingCycle==="trial"&&new Date>new Date(v.user.subscription.trialEndDate))?sessionStorage.setItem("showTrialModal","true"):sessionStorage.removeItem("showTrialModal"),u("/admin/dashboard")}catch(v){M.error(v.message||"Login failed")}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4 bg-white",children:[e.jsx("div",{className:"pointer-events-none absolute -top-32 -left-32 h-96 w-96 rounded-full bg-gradient-to-br from-cyan-400/30 to-blue-500/30 blur-3xl animate-pulse"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-32 -right-32 h-96 w-96 rounded-full bg-gradient-to-br from-cyan-300/30 to-indigo-400/30 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"pointer-events-none absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 h-80 w-80 rounded-full bg-gradient-to-br from-cyan-200/20 to-blue-300/20 blur-3xl animate-pulse",style:{animationDelay:"2s"}}),e.jsxs("div",{className:"pointer-events-none absolute top-0 left-0 w-full h-full",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 rounded-full bg-gradient-to-br from-cyan-300/20 to-transparent blur-2xl animate-bounce",style:{animationDuration:"3s"}}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-24 h-24 rounded-full bg-gradient-to-br from-blue-300/20 to-transparent blur-2xl animate-bounce",style:{animationDuration:"4s",animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-40 h-40 rounded-full bg-gradient-to-br from-cyan-200/15 to-transparent blur-2xl animate-bounce",style:{animationDuration:"5s",animationDelay:"2s"}})]}),e.jsx("div",{className:"w-full max-w-md sm:max-w-lg",children:e.jsxs(ae.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"relative rounded-3xl p-6 sm:p-8 bg-white/80 backdrop-blur-xl border border-cyan-200/50 shadow-[0_20px_60px_-15px_rgba(6,182,212,0.3)]",children:[e.jsx("div",{className:"absolute inset-x-0 -top-px h-px bg-gradient-to-r from-transparent via-cyan-400/60 to-transparent"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(ae.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.15,type:"spring"},className:"inline-flex items-center justify-center w-14 h-14 sm:w-16 sm:h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 text-white shadow-lg shadow-cyan-500/30 mb-4",children:e.jsx(is,{className:"h-7 w-7 sm:h-8 sm:w-8"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-gray-800",children:"Admin Portal"}),e.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600",children:"Sign in to manage your PG operations securely"}),e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium bg-gradient-to-r from-cyan-50 to-blue-50 text-cyan-700 ring-1 ring-inset ring-cyan-200",children:[e.jsx(nc,{className:"h-3.5 w-3.5"}),"Modern • Compact • Responsive"]})]}),e.jsx("div",{className:"mb-6 rounded-xl bg-gradient-to-br from-cyan-50 to-blue-50 ring-1 ring-cyan-200/50 p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:"font-medium text-cyan-800",children:"PG Administrator Access"})]})}),e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wider text-gray-600 mb-2",children:"Admin Email"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx(Tr,{className:"h-5 w-5 text-gray-400 group-focus-within:text-cyan-500 transition-colors"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:p,required:!0,autoComplete:"username",className:"block w-full rounded-xl border-0 bg-gray-50 text-gray-900 placeholder-gray-500 pl-10 pr-3 py-3 ring-1 ring-inset ring-gray-200 focus:ring-2 focus:ring-inset focus:ring-cyan-400 focus:bg-white transition-all",placeholder:"you@company.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wider text-gray-600 mb-2",children:"Password"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx(Er,{className:"h-5 w-5 text-gray-400 group-focus-within:text-cyan-500 transition-colors"})}),e.jsx("input",{type:r?"text":"password",id:"password",name:"password",value:t.password,onChange:p,required:!0,autoComplete:"current-password",className:"block w-full rounded-xl border-0 bg-gray-50 text-gray-900 placeholder-gray-500 pl-10 pr-12 py-3 ring-1 ring-inset ring-gray-200 focus:ring-2 focus:ring-inset focus:ring-cyan-400 focus:bg-white transition-all",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>a(!r),"aria-label":r?"Hide password":"Show password",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-cyan-500 transition-colors",children:r?e.jsx(rr,{className:"h-5 w-5"}):e.jsx(ot,{className:"h-5 w-5"})})]})]}),e.jsx(ae.button,{type:"submit",disabled:n||x,whileHover:{scale:1.015},whileTap:{scale:.985},className:"w-full inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 text-white py-3 px-4 font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/35 focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:n||x?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white/50 border-t-transparent"}),e.jsx("span",{children:"Signing in…"})]}):"Sign In"})]}),e.jsx("div",{className:"mt-6 space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(ms,{to:"/admin/forgot-password",className:"text-cyan-600 hover:text-cyan-700 font-medium transition-colors",children:"Forgot password?"}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsxs("div",{className:"text-gray-600",children:["Not an admin?"," ",e.jsx(ms,{to:"/login",className:"text-cyan-600 hover:text-cyan-700 font-medium transition-colors",children:"User Login"})]})]})}),e.jsx("div",{className:"mt-6 rounded-xl bg-amber-50 ring-1 ring-amber-200 p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(is,{className:"h-4 w-4 text-amber-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"Security Notice:"})," Ensure you are on the correct site and never share credentials."]})]})})]})})]})},UR=()=>{const[t,s]=h.useState(""),[r,a]=h.useState(!1),[n,i]=h.useState(!1),l=cr(),{loading:o}=He(u=>u.auth),c=async u=>{u.preventDefault(),i(!0);try{await l(Id(t)).unwrap(),a(!0),M.success("Password reset instructions sent to your email")}catch(d){M.error(d.message||"Failed to send reset email")}finally{i(!1)}};return r?e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4 bg-white",children:[e.jsx("div",{className:"pointer-events-none absolute -top-32 -left-32 h-96 w-96 rounded-full bg-gradient-to-br from-cyan-400/30 to-blue-500/30 blur-3xl animate-pulse"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-32 -right-32 h-96 w-96 rounded-full bg-gradient-to-br from-cyan-300/30 to-indigo-400/30 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"w-full max-w-md sm:max-w-lg",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative rounded-3xl p-6 sm:p-8 bg-white/80 backdrop-blur-xl border border-cyan-200/50 shadow-[0_20px_60px_-15px_rgba(6,182,212,0.3)] text-center",children:[e.jsx(ae.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-6",children:e.jsx(Be,{className:"h-8 w-8 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Check Your Email"}),e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium bg-gradient-to-r from-cyan-50 to-blue-50 text-cyan-700 ring-1 ring-inset ring-cyan-200 mb-3",children:[e.jsx(nc,{className:"h-3.5 w-3.5"}),"Instructions sent"]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent password reset instructions to"," ",e.jsx("span",{className:"font-medium text-gray-900",children:t})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 text-left",children:[e.jsx("li",{children:"• Check your email inbox (and spam folder)"}),e.jsx("li",{children:"• Click the reset link in the email"}),e.jsx("li",{children:"• Create a new secure password"}),e.jsx("li",{children:"• Login with your new password"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ms,{to:"/admin/login",className:"inline-flex items-center justify-center w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),"Back to Admin Login"]}),e.jsx("button",{onClick:()=>{a(!1),s("")},className:"text-sm text-blue-600 hover:text-blue-500",children:"Try different email address"})]})]})})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4 bg-white",children:[e.jsx("div",{className:"pointer-events-none absolute -top-32 -left-32 h-96 w-96 rounded-full bg-gradient-to-br from-cyan-400/30 to-blue-500/30 blur-3xl animate-pulse"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-32 -right-32 h-96 w-96 rounded-full bg-gradient-to-br from-cyan-300/30 to-indigo-400/30 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"w-full max-w-md sm:max-w-lg",children:e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative rounded-3xl p-6 sm:p-8 bg-white/80 backdrop-blur-xl border border-cyan-200/50 shadow-[0_20px_60px_-15px_rgba(6,182,212,0.3)]",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(ae.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-14 h-14 sm:w-16 sm:h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 text-white shadow-lg shadow-cyan-500/30 mb-4",children:e.jsx(is,{className:"h-7 w-7 sm:h-8 sm:w-8"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-gray-800",children:"Reset Admin Password"}),e.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600",children:"Enter your admin email to receive reset instructions"})]}),e.jsx("div",{className:"mb-6 rounded-xl bg-gradient-to-br from-cyan-50 to-blue-50 ring-1 ring-cyan-200/50 p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"h-5 w-5 text-cyan-600"}),e.jsx("span",{className:"font-medium text-cyan-800",children:"PG Administrator Password Reset"})]})}),e.jsxs("form",{onSubmit:c,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wider text-gray-600 mb-2",children:"Admin Email Address"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx(Tr,{className:"h-5 w-5 text-gray-400 group-focus-within:text-cyan-500 transition-colors"})}),e.jsx("input",{type:"email",id:"email",value:t,onChange:u=>s(u.target.value),required:!0,autoComplete:"email",className:"block w-full rounded-xl border-0 bg-gray-50 text-gray-900 placeholder-gray-500 pl-10 pr-3 py-3 ring-1 ring-inset ring-gray-200 focus:ring-2 focus:ring-inset focus:ring-cyan-400 focus:bg-white transition-all",placeholder:"Enter your admin email"})]})]}),e.jsx(ae.button,{type:"submit",disabled:n||o,whileHover:{scale:1.015},whileTap:{scale:.985},className:"w-full inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 text-white py-3 px-4 font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/35 focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:n||o?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white/50 border-t-transparent"}),e.jsx("span",{children:"Sending Reset Email…"})]}):"Send Reset Instructions"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(ms,{to:"/admin/login",className:"inline-flex items-center text-sm text-cyan-600 hover:text-cyan-700 font-medium",children:[e.jsx(vr,{className:"h-4 w-4 mr-1"}),"Back to Admin Login"]})}),e.jsxs("div",{className:"mt-6 rounded-xl bg-gradient-to-br from-cyan-50 to-blue-50 ring-1 ring-cyan-200/50 p-4",children:[e.jsx("h3",{className:"font-medium text-cyan-900 mb-2",children:"Security Information"}),e.jsxs("ul",{className:"text-sm text-cyan-800 space-y-1",children:[e.jsx("li",{children:"• Only registered PG admins can reset passwords"}),e.jsx("li",{children:"• Reset links expire after 1 hour for security"}),e.jsx("li",{children:"• Contact support if you don't receive the email"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Need help?"," ",e.jsx("a",{href:"mailto:support@pgmaintenance.com",className:"text-cyan-600 hover:text-cyan-700",children:"Contact Support"})]})})]})})]})},HR=()=>{const t=Ms(),[s,r]=h.useState({email:"",password:""}),[a,n]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(""),[u,d]=h.useState(""),m=p=>{const{name:f,value:b}=p.target;r(y=>({...y,[f]:b})),o&&c("")},x=()=>s.email.trim()?s.password.trim()?Lt.validateEmail(s.email)?!0:(c("Please enter a valid email address"),!1):(c("Password is required"),!1):(c("Email is required"),!1),g=async p=>{if(p.preventDefault(),!!x()){l(!0),c(""),d("");try{console.log("🔍 SupportLogin: Starting support login...");const f=await Lt.supportLogin(s);f.success?(console.log("✅ SupportLogin: Login successful"),d("Login successful! Redirecting..."),setTimeout(()=>{t("/support/dashboard")},1500)):(console.log("❌ SupportLogin: Login failed:",f.message),c(f.message||"Login failed"))}catch(f){console.error("❌ SupportLogin: Login error:",f),c(f.message||"Login failed. Please try again.")}finally{l(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(ae.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mb-4",children:e.jsx("span",{className:"text-2xl",children:"🏠"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Support Portal"}),e.jsx("p",{className:"text-gray-600",children:"Access the ticket management system"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:m,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email",disabled:i})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:a?"text":"password",id:"password",name:"password",value:s.password,onChange:m,className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password",disabled:i}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:i,children:a?e.jsx(rr,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ot,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),o&&e.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(Ze,{className:"h-5 w-5 text-red-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:o})]}),u&&e.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Be,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-700",children:u})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In to Support Portal"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Need help? Contact your administrator"})})]}),e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"text-center mt-8",children:e.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 PG Maintenance System. All rights reserved."})})]})})};YE.register(KE,XE,JE,QE,ZE,eP,tP,sP,rP,aP);const pl=({type:t="line",data:s,options:r={},className:a="",height:n=300,responsive:i=!0})=>{const l=h.useRef(null),o={responsive:i,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{padding:20,font:{size:12,family:"'Inter', sans-serif"},usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:12}}},scales:t==="pie"||t==="doughnut"?{}:{x:{grid:{color:"rgba(0, 0, 0, 0.05)",borderColor:"rgba(0, 0, 0, 0.1)"},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"#6B7280"}},y:{grid:{color:"rgba(0, 0, 0, 0.05)",borderColor:"rgba(0, 0, 0, 0.1)"},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"#6B7280"}}},elements:{point:{radius:4,hoverRadius:6,borderWidth:2,hoverBorderWidth:3},line:{tension:.4,borderWidth:3},bar:{borderRadius:6,borderSkipped:!1}}},c={...o,...r,plugins:{...o.plugins,...r.plugins}},u=(g=1)=>["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"].slice(0,g),m=s.datasets?s:{labels:s.labels||[],datasets:[{label:s.label||"Data",data:s.values||[],backgroundColor:s.backgroundColor||u(1)[0]+"20",borderColor:s.borderColor||u(1)[0],fill:t==="line",tension:t==="line"?.4:void 0}]},x=()=>{const g={ref:l,data:m,options:c,height:n};switch(t){case"bar":return e.jsx(oP,{...g});case"pie":return e.jsx(lP,{...g});case"doughnut":return e.jsx(iP,{...g});case"line":default:return e.jsx(nP,{...g})}};return e.jsx("div",{className:`w-full ${a}`,style:{height:`${n}px`},children:x()})},WR=({data:t,period:s="monthly"})=>{const r={labels:(t==null?void 0:t.labels)||[],values:(t==null?void 0:t.values)||[],label:"Revenue",backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"#3B82F6"},a={plugins:{title:{display:!0,text:`Revenue Trend (${s})`,font:{size:16,weight:"bold"},padding:20}},scales:{y:{beginAtZero:!0,ticks:{callback:function(n){return"₹"+n.toLocaleString()}}}}};return e.jsx(pl,{type:"line",data:r,options:a,height:300})},VR=({data:t})=>{const s={labels:["Occupied","Vacant"],values:[(t==null?void 0:t.occupied)||0,(t==null?void 0:t.vacant)||0],backgroundColor:["#10B981","#F3F4F6"],borderColor:["#059669","#D1D5DB"]},r={plugins:{title:{display:!0,text:"Room Occupancy",font:{size:16,weight:"bold"},padding:20}}};return e.jsx(pl,{type:"doughnut",data:s,options:r,height:250})},zR=({data:t})=>{const s={labels:(t==null?void 0:t.labels)||["Open","In Progress","Resolved","Closed"],values:(t==null?void 0:t.values)||[0,0,0,0],backgroundColor:["#EF4444","#F59E0B","#10B981","#6B7280"]},r={plugins:{title:{display:!0,text:"Ticket Status Distribution",font:{size:16,weight:"bold"},padding:20}}};return e.jsx(pl,{type:"bar",data:s,options:r,height:300})},GR=({data:t})=>{const s={labels:(t==null?void 0:t.labels)||[],datasets:[{label:"Completed",data:(t==null?void 0:t.completed)||[],backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"#10B981"},{label:"Pending",data:(t==null?void 0:t.pending)||[],backgroundColor:"rgba(245, 158, 11, 0.8)",borderColor:"#F59E0B"},{label:"Overdue",data:(t==null?void 0:t.overdue)||[],backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"#EF4444"}]},r={plugins:{title:{display:!0,text:"Payment Status Trend",font:{size:16,weight:"bold"},padding:20}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0}}};return e.jsx(pl,{type:"bar",data:s,options:r,height:300})},pS=()=>{const t=window.location.hostname;return t.match(/^\d+\.\d+\.\d+\.\d+$/)?`http://${t}:5000/api`:"http://localhost:5000/api"},Aa=Ps.create({baseURL:pS(),timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});let lf=!1,Lg=[];const mj=(t,s=null)=>{Lg.forEach(r=>{t?r.reject(t):r.resolve(s)}),Lg=[]};Aa.interceptors.request.use(t=>{var n;const s=localStorage.getItem("accessToken");s&&(t.headers.Authorization=`Bearer ${s}`);const a=(n=Qs.getState().ui)==null?void 0:n.language;return a&&(t.headers["Accept-Language"]=a),t},t=>Promise.reject(t));Aa.interceptors.response.use(t=>t,async t=>{var r,a,n,i;const s=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!s._retry){if(lf)return new Promise((l,o)=>{Lg.push({resolve:l,reject:o})}).then(l=>(s.headers.Authorization=`Bearer ${l}`,Aa(s))).catch(l=>Promise.reject(l));s._retry=!0,lf=!0;try{if(localStorage.getItem("refreshToken")){const o=await Ps.post(`${pS()}/auth/refresh`,{},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(o.data.success)return localStorage.setItem("accessToken",o.data.data.token),localStorage.setItem("refreshToken",o.data.data.refreshToken),o.data.data.user&&localStorage.setItem("user",JSON.stringify(o.data.data.user)),mj(null,o.data.data.token),s.headers.Authorization=`Bearer ${o.data.data.token}`,Aa(s)}}catch(l){return mj(l,null),Qs.dispatch(D0()),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(l)}finally{lf=!1}}return((a=t.response)==null?void 0:a.status)===403?console.error("Access forbidden:",t.response.data):((n=t.response)==null?void 0:n.status)===404?console.error("Resource not found:",t.response.data):((i=t.response)==null?void 0:i.status)===500&&console.error("Server error:",t.response.data),Promise.reject(t)});class qR{async getDashboardOverview(){try{return(await Aa.get("/superadmin/dashboard/overview")).data}catch(s){throw console.error("Error fetching dashboard overview:",s),s}}async getDashboardStats(){try{return(await Aa.get("/superadmin/dashboard/stats")).data}catch(s){throw console.error("Error fetching dashboard stats:",s),s}}async getRevenueAnalytics(s="monthly"){try{return(await Aa.get("/superadmin/analytics/revenue",{params:{period:s}})).data}catch(r){throw console.error("Error fetching revenue analytics:",r),r}}async getOccupancyAnalytics(){try{return(await Aa.get("/superadmin/analytics/occupancy")).data}catch(s){throw console.error("Error fetching occupancy analytics:",s),s}}async getPaymentAnalytics(s="monthly"){try{return(await Aa.get("/superadmin/analytics/payments",{params:{period:s}})).data}catch(r){throw console.error("Error fetching payment analytics:",r),r}}async getTicketAnalytics(){try{return(await Aa.get("/tickets/superadmin-analytics")).data}catch(s){throw console.error("Error fetching ticket analytics:",s),s}}async getRecentActivities(s=15){try{return(await Aa.get("/superadmin/activities",{params:{limit:s}})).data}catch(r){throw console.error("Error fetching recent activities:",r),r}}async getAlerts(){try{return(await Aa.get("/superadmin/alerts")).data}catch(s){throw console.error("Error fetching alerts:",s),s}}async exportDashboardData(s="pdf"){try{return(await Aa.get("/superadmin/export/dashboard",{params:{format:s},responseType:"blob"})).data}catch(r){throw console.error("Error exporting dashboard data:",r),r}}async fetchAllDashboardData(s="monthly"){var r,a,n,i,l,o,c,u,d,m,x,g,p,f,b,y,v,N,S,w,C,j,k,E,R;try{const[D,P,T,B,F,L,I,V]=await Promise.allSettled([this.getDashboardOverview(),this.getDashboardStats(),this.getRevenueAnalytics(s),this.getOccupancyAnalytics(),this.getTicketAnalytics(),this.getPaymentAnalytics(s),this.getRecentActivities(15),this.getAlerts()]),_=D.status==="fulfilled"?(r=D.value)==null?void 0:r.data:null,G=P.status==="fulfilled"?(a=P.value)==null?void 0:a.data:null,U=T.status==="fulfilled"?(n=T.value)==null?void 0:n.data:null,A=B.status==="fulfilled"?(i=B.value)==null?void 0:i.data:null,q=F.status==="fulfilled"?(l=F.value)==null?void 0:l.data:null,Y=L.status==="fulfilled"?(o=L.value)==null?void 0:o.data:null,O=I.status==="fulfilled"?(c=I.value)==null?void 0:c.data:[],W=V.status==="fulfilled"?(u=V.value)==null?void 0:u.data:[],z=_?{totalPGs:((d=_.totals)==null?void 0:d.pgs)||0,activePGs:((m=_.totals)==null?void 0:m.activePgs)||0,totalUsers:((x=_.totals)==null?void 0:x.users)||0,totalResidents:((g=_.totals)==null?void 0:g.residents)||0,activeResidents:((p=_.totals)==null?void 0:p.activeResidents)||0,totalTickets:((f=_.tickets)==null?void 0:f.total)||0,openTickets:((b=_.tickets)==null?void 0:b.open)||0,resolvedTickets:((y=_.tickets)==null?void 0:y.resolved)||0,todayRevenue:((v=_.revenue)==null?void 0:v.today)||0,yesterdayRevenue:((N=_.revenue)==null?void 0:N.yesterday)||0}:null,H=G?{since:G.since||null,newUsers:G.newUsers||0,newResidents:G.newResidents||0,newTickets:G.newTickets||0,newPayments:((S=G.payments)==null?void 0:S.count)||0,newPaymentsAmount:((w=G.payments)==null?void 0:w.amount)||0}:null,Q=U?{period:U.period,series:Array.isArray(U.series)?U.series:[],labels:(U.series||[]).map(Se=>{var Ee;return((Ee=Se._id)==null?void 0:Ee.d)||Se.date||""}),values:(U.series||[]).map(Se=>Se.amount||0)}:null,J=A?{totalRooms:A.totalRooms||0,totalBeds:A.totalBeds||0,occupiedBeds:A.occupiedBeds||0,occupancyRate:A.occupancyRate||0,occupied:A.occupiedBeds||0,vacant:(A.totalBeds||0)-(A.occupiedBeds||0)}:null,ie=q?{overview:q.overview||{},labels:["Open","In Progress","Resolved","Closed"],values:[((C=q.overview)==null?void 0:C.openTickets)||0,((j=q.overview)==null?void 0:j.inProgressTickets)||0,((k=q.overview)==null?void 0:k.resolvedTickets)||0,((E=q.overview)==null?void 0:E.closedTickets)||0],urgent:((R=q.overview)==null?void 0:R.urgentTickets)||0}:null,K=Y?{period:Y.period,totalAmount:Y.totalAmount||0,totalCount:Y.totalCount||0,labels:[],completed:[],pending:[],overdue:[]}:null,oe=Array.isArray(O)?O.map(Se=>({id:Se._id,type:Se.type||"notification",title:Se.title||Se.message||"System Activity",description:Se.description||Se.message||"",timestamp:Se.createdAt||Se.timestamp||new Date().toISOString(),priority:Se.priority||"normal"})):[],le=W?{criticalTickets:W.criticalTickets||[],overduePayments:W.overduePayments||[]}:{criticalTickets:[],overduePayments:[]};return{overview:z,stats:H,revenue:Q,occupancy:J,tickets:ie,payments:K,activities:oe,alerts:le}}catch(D){throw console.error("Error fetching all dashboard data:",D),D}}async getSalesAnalytics(s="monthly",r={}){var a,n;try{return(await Aa.get("/sales/analytics",{params:{period:s,...r}})).data}catch(i){return console.error("Error fetching sales analytics:",i),{success:!1,message:((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch sales analytics",error:i}}}}const $g=new qR;class YR{async recordActivity(s){try{return(await we.post("/activities/record",s)).data}catch(r){throw console.error("Error recording activity:",r),r}}async getRecentActivities(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i!=null&&r.append(n,i)}),(await we.get(`/activities/recent?${r.toString()}`)).data}catch(r){throw console.error("Error fetching recent activities:",r),r}}async getAdminActivities(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i!=null&&r.append(n,i)}),(await we.get(`/activities/admin?${r.toString()}`)).data}catch(r){throw console.error("Error fetching admin activities:",r),r}}async getBranchActivities(s,r={}){try{const a=new URLSearchParams;return Object.entries(r).forEach(([i,l])=>{l!=null&&a.append(i,l)}),(await we.get(`/activities/branch/${s}?${a.toString()}`)).data}catch(a){throw console.error("Error fetching branch activities:",a),a}}async getActivityStats(s="24h"){try{return(await we.get(`/activities/stats?timeRange=${s}`)).data}catch(r){throw console.error("Error fetching activity stats:",r),r}}async getRoleSpecificStats(s="24h"){try{return(await we.get(`/activities/stats/role-specific?timeRange=${s}`)).data}catch(r){throw console.error("Error fetching role-specific stats:",r),r}}async exportActivities(s={}){try{const r=new URLSearchParams;Object.entries(s).forEach(([l,o])=>{o!=null&&r.append(l,o)});const a=await we.get(`/activities/export/csv?${r.toString()}`,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");return i.href=n,i.setAttribute("download","activities.csv"),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(n),!0}catch(r){throw console.error("Error exporting activities:",r),r}}trackPageView(s,r={}){return this.recordActivity({type:"view",title:`Viewed ${s} page`,description:`Accessed the ${s} page`,category:"general",metadata:{page:s,...r}})}trackAction(s,r,a="general",n={}){return this.recordActivity({type:s,title:r.title,description:r.description,category:a,metadata:{action:s,...n}})}trackError(s,r,a={}){return this.recordActivity({type:"error",title:`Error: ${r}`,description:s.message||"An error occurred",category:"error",priority:"high",status:"failed",metadata:{error:s.toString(),stack:s.stack,context:r,...a}})}}const en=new YR;function bS(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=bS(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function yS(){for(var t,s,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(s=bS(t))&&(a&&(a+=" "),a+=s);return a}const _b="-",KR=t=>{const s=JR(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:l=>{const o=l.split(_b);return o[0]===""&&o.length!==1&&o.shift(),vS(o,s)||XR(l)},getConflictingClassGroupIds:(l,o)=>{const c=r[l]||[];return o&&a[l]?[...c,...a[l]]:c}}},vS=(t,s)=>{var l;if(t.length===0)return s.classGroupId;const r=t[0],a=s.nextPart.get(r),n=a?vS(t.slice(1),a):void 0;if(n)return n;if(s.validators.length===0)return;const i=t.join(_b);return(l=s.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},xj=/^\[(.+)\]$/,XR=t=>{if(xj.test(t)){const s=xj.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},JR=t=>{const{theme:s,prefix:r}=t,a={nextPart:new Map,validators:[]};return ZR(Object.entries(t.classGroups),r).forEach(([i,l])=>{Ug(l,a,i,s)}),a},Ug=(t,s,r,a)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?s:hj(s,n);i.classGroupId=r;return}if(typeof n=="function"){if(QR(n)){Ug(n(a),s,r,a);return}s.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,l])=>{Ug(l,hj(s,i),r,a)})})},hj=(t,s)=>{let r=t;return s.split(_b).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},QR=t=>t.isThemeGetter,ZR=(t,s)=>s?t.map(([r,a])=>{const n=a.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[s+l,o])):i);return[r,n]}):t,eF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,a=new Map;const n=(i,l)=>{r.set(i,l),s++,s>t&&(s=0,a=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=a.get(i))!==void 0)return n(i,l),l},set(i,l){r.has(i)?r.set(i,l):n(i,l)}}},jS="!",tF=t=>{const{separator:s,experimentalParseClassName:r}=t,a=s.length===1,n=s[0],i=s.length,l=o=>{const c=[];let u=0,d=0,m;for(let b=0;b<o.length;b++){let y=o[b];if(u===0){if(y===n&&(a||o.slice(b,b+i)===s)){c.push(o.slice(d,b)),d=b+i;continue}if(y==="/"){m=b;continue}}y==="["?u++:y==="]"&&u--}const x=c.length===0?o:o.substring(d),g=x.startsWith(jS),p=g?x.substring(1):x,f=m&&m>d?m-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:f}};return r?o=>r({className:o,parseClassName:l}):l},sF=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(a=>{a[0]==="["?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s},rF=t=>({cache:eF(t.cacheSize),parseClassName:tF(t),...KR(t)}),aF=/\s+/,nF=(t,s)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=s,i=[],l=t.trim().split(aF);let o="";for(let c=l.length-1;c>=0;c-=1){const u=l[c],{modifiers:d,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}=r(u);let p=!!g,f=a(p?x.substring(0,g):x);if(!f){if(!p){o=u+(o.length>0?" "+o:o);continue}if(f=a(x),!f){o=u+(o.length>0?" "+o:o);continue}p=!1}const b=sF(d).join(":"),y=m?b+jS:b,v=y+f;if(i.includes(v))continue;i.push(v);const N=n(f,p);for(let S=0;S<N.length;++S){const w=N[S];i.push(y+w)}o=u+(o.length>0?" "+o:o)}return o};function iF(){let t=0,s,r,a="";for(;t<arguments.length;)(s=arguments[t++])&&(r=wS(s))&&(a&&(a+=" "),a+=r);return a}const wS=t=>{if(typeof t=="string")return t;let s,r="";for(let a=0;a<t.length;a++)t[a]&&(s=wS(t[a]))&&(r&&(r+=" "),r+=s);return r};function lF(t,...s){let r,a,n,i=l;function l(c){const u=s.reduce((d,m)=>m(d),t());return r=rF(u),a=r.cache.get,n=r.cache.set,i=o,o(c)}function o(c){const u=a(c);if(u)return u;const d=nF(c,r);return n(c,d),d}return function(){return i(iF.apply(null,arguments))}}const $s=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},NS=/^\[(?:([a-z-]+):)?(.+)\]$/i,oF=/^\d+\/\d+$/,cF=new Set(["px","full","screen"]),dF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ti=t=>oc(t)||cF.has(t)||oF.test(t),el=t=>Vc(t,"length",wF),oc=t=>!!t&&!Number.isNaN(Number(t)),of=t=>Vc(t,"number",oc),md=t=>!!t&&Number.isInteger(Number(t)),fF=t=>t.endsWith("%")&&oc(t.slice(0,-1)),Mt=t=>NS.test(t),tl=t=>dF.test(t),gF=new Set(["length","size","percentage"]),pF=t=>Vc(t,gF,SS),bF=t=>Vc(t,"position",SS),yF=new Set(["image","url"]),vF=t=>Vc(t,yF,SF),jF=t=>Vc(t,"",NF),xd=()=>!0,Vc=(t,s,r)=>{const a=NS.exec(t);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):r(a[2]):!1},wF=t=>uF.test(t)&&!mF.test(t),SS=()=>!1,NF=t=>xF.test(t),SF=t=>hF.test(t),CF=()=>{const t=$s("colors"),s=$s("spacing"),r=$s("blur"),a=$s("brightness"),n=$s("borderColor"),i=$s("borderRadius"),l=$s("borderSpacing"),o=$s("borderWidth"),c=$s("contrast"),u=$s("grayscale"),d=$s("hueRotate"),m=$s("invert"),x=$s("gap"),g=$s("gradientColorStops"),p=$s("gradientColorStopPositions"),f=$s("inset"),b=$s("margin"),y=$s("opacity"),v=$s("padding"),N=$s("saturate"),S=$s("scale"),w=$s("sepia"),C=$s("skew"),j=$s("space"),k=$s("translate"),E=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Mt,s],P=()=>[Mt,s],T=()=>["",Ti,el],B=()=>["auto",oc,Mt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],_=()=>["","0",Mt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[oc,Mt];return{cacheSize:500,separator:":",theme:{colors:[xd],spacing:[Ti,el],blur:["none","",tl,Mt],brightness:U(),borderColor:[t],borderRadius:["none","","full",tl,Mt],borderSpacing:P(),borderWidth:T(),contrast:U(),grayscale:_(),hueRotate:U(),invert:_(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[fF,el],inset:D(),margin:D(),opacity:U(),padding:P(),saturate:U(),scale:U(),sepia:_(),skew:U(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Mt]}],container:["container"],columns:[{columns:[tl]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Mt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",md,Mt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Mt]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",md,Mt]}],"grid-cols":[{"grid-cols":[xd]}],"col-start-end":[{col:["auto",{span:["full",md,Mt]},Mt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[xd]}],"row-start-end":[{row:["auto",{span:[md,Mt]},Mt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Mt]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Mt,s]}],"min-w":[{"min-w":[Mt,s,"min","max","fit"]}],"max-w":[{"max-w":[Mt,s,"none","full","min","max","fit","prose",{screen:[tl]},tl]}],h:[{h:[Mt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Mt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Mt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Mt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",tl,el]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",of]}],"font-family":[{font:[xd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Mt]}],"line-clamp":[{"line-clamp":["none",oc,of]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ti,Mt]}],"list-image":[{"list-image":["none",Mt]}],"list-style-type":[{list:["none","disc","decimal",Mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ti,el]}],"underline-offset":[{"underline-offset":["auto",Ti,Mt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),bF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:L()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[Ti,Mt]}],"outline-w":[{outline:[Ti,el]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ti,el]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",tl,jF]}],"shadow-color":[{shadow:[xd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",tl,Mt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Mt]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Mt]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[md,Mt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Mt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ti,el,of]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kF=lF(CF);function sa(...t){return kF(yS(t))}var CS={exports:{}},EF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",PF=EF,TF=PF;function kS(){}function ES(){}ES.resetWarningCache=kS;var _F=function(){function t(a,n,i,l,o,c){if(c!==TF){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:ES,resetWarningCache:kS};return r.PropTypes=r,r};CS.exports=_F();var AF=CS.exports;const fn=s2(AF),PS=({icon:t,title:s,value:r,subtitle:a,change:n,className:i})=>{const l=Ke.isValidElement(t)?t:null;return e.jsxs("div",{className:sa("bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-4 transition-all duration-300 hover:shadow-md",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-gray-500",children:l}),n&&e.jsx("span",{className:`text-xs font-medium ${n.startsWith("+")?"text-green-600":"text-red-600"}`,children:n})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:s}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r}),a&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a})]})]})};PS.propTypes={icon:fn.oneOfType([fn.element,fn.node]),title:fn.string.isRequired,value:fn.oneOfType([fn.string,fn.number]).isRequired,subtitle:fn.string,change:fn.string,className:fn.string};const TS=({children:t,className:s})=>e.jsx("div",{className:sa("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",s),children:Ke.Children.map(t,r=>Ke.isValidElement(r)?r:null)});TS.propTypes={children:fn.node,className:fn.string};const RF=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map((t,s)=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 w-36 bg-gray-200 rounded"})]})]})},s))}),Ys=Object.assign(PS,{Grid:TS,GridSkeleton:RF}),FF=({children:t,className:s})=>e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${s||""}`,children:t}),DF=({count:t=6})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(t)].map((s,r)=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 w-36 bg-gray-200 rounded"})]})]})},r))}),IF=()=>{var D;const[t,s]=h.useState(null),[r,a]=h.useState(!0),[n,i]=h.useState(null),[l,o]=h.useState("monthly"),[c,u]=h.useState("revenue"),[d,m]=h.useState(null),[x,g]=h.useState(!0),[p,f]=h.useState({totalPGs:0,totalUsers:0,totalRevenue:0,activeTickets:0,occupancyRate:0,monthlyGrowth:0}),[b,y]=h.useState({revenue:null,occupancy:null,tickets:null,payments:null,activities:[],alerts:[],ticketActivities:[]}),v=h.useCallback(async()=>{try{a(!0),i(null);const P=await $g.fetchAllDashboardData(l);if(P.overview&&(s(P.overview),f(T=>{var B;return{...T,totalPGs:P.overview.totalPGs||0,totalUsers:P.overview.totalUsers||0,totalRevenue:P.overview.todayRevenue||0,activeTickets:P.overview.openTickets||0,occupancyRate:((B=P.occupancy)==null?void 0:B.occupancyRate)||0,monthlyGrowth:(()=>{const F=P.overview.todayRevenue||0,L=P.overview.yesterdayRevenue||0;return L?Number(((F-L)/L*100).toFixed(1)):0})()}})),y({revenue:P.revenue?{labels:P.revenue.labels||[],values:P.revenue.values||[]}:null,occupancy:P.occupancy?{occupied:P.occupancy.occupied||0,vacant:P.occupancy.vacant||0,totalBeds:P.occupancy.totalBeds||0,occupancyRate:P.occupancy.occupancyRate||0}:null,tickets:P.tickets?{labels:P.tickets.labels||["Open","In Progress","Resolved","Closed"],values:P.tickets.values||[0,0,0,0],urgent:P.tickets.urgent||0}:null,payments:P.payments?{labels:N(l),completed:S(P.payments.totalCount,N(l).length,.7),pending:S(P.payments.totalCount,N(l).length,.2),overdue:S(P.payments.totalCount,N(l).length,.1)}:null,activities:P.activities||[],alerts:(()=>{var B,F;const T=[];return(((B=P.alerts)==null?void 0:B.criticalTickets)||[]).forEach(L=>T.push({id:L._id,type:"ticket",title:`Critical Ticket: ${L.title||L._id}`,description:L.description||"High priority ticket",timestamp:L.createdAt})),(((F=P.alerts)==null?void 0:F.overduePayments)||[]).forEach(L=>T.push({id:L._id,type:"payment",title:`Overdue Payment: ₹${L.amount||0}`,description:`Payment overdue${L.residentName?" for "+L.residentName:""}`,timestamp:L.dueDate})),T})(),ticketActivities:[]}),!P.activities||Array.isArray(P.activities)&&P.activities.length===0)try{const T=await en.getSuperadminActivities({page:1,limit:5});T!=null&&T.success&&Array.isArray(T.data)&&y(B=>({...B,activities:T.data}))}catch{}try{const T=await en.getSuperadminActivities({page:1,limit:5,category:"support"});T!=null&&T.success&&Array.isArray(T.data)&&y(B=>({...B,ticketActivities:T.data}))}catch{}m(new Date)}catch(P){console.error("Error fetching dashboard data:",P),i("Failed to load dashboard data")}finally{a(!1)}},[l]),N=P=>{const T=[],B=new Date;if(P==="daily")for(let F=6;F>=0;F--){const L=new Date(B.getTime()-F*864e5);T.push(L.toLocaleDateString("en-IN",{month:"short",day:"numeric"}))}else if(P==="weekly")for(let F=3;F>=0;F--){const L=new Date(B.getTime()-F*7*864e5);T.push(`Wk ${L.getMonth()+1}-${L.getDate()}`)}else if(P==="monthly")for(let F=11;F>=0;F--){const L=new Date(B.getFullYear(),B.getMonth()-F,1);T.push(L.toLocaleDateString("en-IN",{month:"short",year:"2-digit"}))}else if(P==="yearly")for(let F=4;F>=0;F--)T.push(String(B.getFullYear()-F));return T},S=(P,T,B)=>{if(!T)return[];const F=Math.floor(P*B/T);return Array.from({length:T},()=>F)};h.useEffect(()=>{v();let P;return x&&(P=setInterval(()=>{v()},3e4)),()=>{P&&clearInterval(P)}},[v,x]);const w=P=>{o(P)},C=()=>{v()},j=async P=>{try{const T=await $g.exportDashboardData(P),B=window.URL.createObjectURL(T),F=document.createElement("a");F.href=B,F.download=`superadmin-dashboard-${new Date().toISOString().split("T")[0]}.${P}`,document.body.appendChild(F),F.click(),window.URL.revokeObjectURL(B),document.body.removeChild(F)}catch(T){console.error("Export failed:",T)}},k=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(P),E=P=>`${P==null?void 0:P.toFixed(1)}%`,R=(P,T)=>{if(!T||T===0)return{value:0,direction:"neutral"};const B=(P-T)/T*100;return{value:Math.abs(B).toFixed(1),direction:B>0?"up":B<0?"down":"neutral"}};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Superadmin Dashboard"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Monitor and manage your PG ecosystem in real-time"}),d&&e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(ut,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Last updated: ",d.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1",children:["daily","weekly","monthly","yearly"].map(P=>e.jsx("button",{onClick:()=>w(P),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${l===P?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900"}`,children:P.charAt(0).toUpperCase()+P.slice(1)},P))}),e.jsx("button",{onClick:C,disabled:r,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(wt,{className:`h-5 w-5 text-gray-600 ${r?"animate-spin":""}`})}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{onChange:P=>j(P.target.value),className:"appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2 pr-8 text-sm",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Export"}),e.jsx("option",{value:"pdf",children:"PDF Report"}),e.jsx("option",{value:"excel",children:"Excel Report"}),e.jsx("option",{value:"csv",children:"CSV Data"})]}),e.jsx(xr,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]})]})}),b.alerts.length>0&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Rt,{className:"h-6 w-6 text-red-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800",children:"System Alerts"}),e.jsxs("p",{className:"text-red-600 text-sm",children:[b.alerts.length," alerts require your attention"]})]})]})})}),r?e.jsx(DF,{}):e.jsxs(FF,{className:"mb-8",children:[e.jsx(Ys,{title:"Total PGs",value:p.totalPGs,icon:Ie,iconColor:"bg-blue-500",link:"/superadmin/pg-management",trend:R(p.totalPGs,t==null?void 0:t.previousPGs),subtitle:"Active properties"}),e.jsx(Ys,{title:"Total Users",value:p.totalUsers,icon:Je,iconColor:"bg-green-500",link:"/superadmin/users",trend:R(p.totalUsers,t==null?void 0:t.previousUsers),subtitle:"Registered users"}),e.jsx(Ys,{title:"Total Revenue",value:k(p.totalRevenue),icon:Ft,iconColor:"bg-emerald-500",trend:R(p.totalRevenue,t==null?void 0:t.previousRevenue),subtitle:"All time earnings"}),e.jsx(Ys,{title:"Support Tickets",value:p.activeTickets,icon:Cr,iconColor:"bg-orange-500",link:"/superadmin/tickets",subtitle:`${((D=b.tickets)==null?void 0:D.urgent)||0} urgent`}),e.jsx(Ys,{title:"Occupancy Rate",value:E(p.occupancyRate),icon:Ia,iconColor:"bg-purple-500",subtitle:"Average across PGs"}),e.jsx(Ys,{title:"Monthly Growth",value:E(p.monthlyGrowth),icon:_t,iconColor:"bg-cyan-500",trend:{value:p.monthlyGrowth,direction:"up"},subtitle:"Revenue growth"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Trends"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:l})]})]}),b.revenue?e.jsx(WR,{data:b.revenue,period:l}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Jt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Loading revenue data..."})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Occupancy Overview"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ia,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Real-time"})]})]}),b.occupancy?e.jsx(VR,{data:b.occupancy}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ia,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Loading occupancy data..."})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Support Tickets"}),e.jsx(Cr,{className:"h-5 w-5 text-gray-400"})]}),b.tickets?e.jsx(zR,{data:b.tickets}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Cr,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Loading ticket data..."})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Trends"}),e.jsx(Ft,{className:"h-5 w-5 text-gray-400"})]}),b.payments?e.jsx(GR,{data:b.payments}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ft,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Loading payment data..."})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:[{title:"PG Management",icon:Ie,link:"/superadmin/pg-management",color:"text-blue-600"},{title:"User Management",icon:Je,link:"/superadmin/users",color:"text-green-600"},{title:"Support Staff",icon:Cr,link:"/superadmin/support-staff",color:"text-purple-600"},{title:"System Reports",icon:ns,link:"/superadmin/reports",color:"text-orange-600"}].map((P,T)=>e.jsxs(ms,{to:P.link,className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx(P.icon,{className:`h-5 w-5 ${P.color} group-hover:scale-110 transition-transform`}),e.jsx("span",{className:"font-medium text-gray-900",children:P.title})]},T))})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),e.jsx(ys,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:b.activities.length>0?b.activities.map((P,T)=>e.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:`p-2 rounded-lg ${P.category==="financial"?"bg-emerald-100 text-emerald-700":P.category==="management"?"bg-blue-100 text-blue-700":P.category==="support"?"bg-orange-100 text-orange-700":P.category==="authentication"?"bg-purple-100 text-purple-700":P.category==="system"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:[P.category==="financial"&&e.jsx(Ft,{className:"h-4 w-4"}),P.category==="management"&&e.jsx(Je,{className:"h-4 w-4"}),P.category==="support"&&e.jsx(Cr,{className:"h-4 w-4"}),P.category==="authentication"&&e.jsx(is,{className:"h-4 w-4"}),P.category==="system"&&e.jsx(Rt,{className:"h-4 w-4"}),!P.category&&e.jsx(ys,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:P.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(P.timestamp).toLocaleString()})]})]},T)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities"})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 mt-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ticket Activities"}),e.jsx(Cr,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:b.ticketActivities.length>0?b.ticketActivities.map((P,T)=>e.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 text-orange-700",children:e.jsx(Cr,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:P.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(P.timestamp).toLocaleString()})]})]},T)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Cr,{className:"h-12 w-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No ticket activities"})]})})]})})]})})},OF=({isOpen:t,onClose:s,onSuccess:r})=>{const[a,n]=h.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[i,l]=h.useState({}),[o,c]=h.useState(!1),[u,d]=h.useState(!1),[m,x]=h.useState(!1),[g,p]=h.useState(""),[f,b]=h.useState(""),[y,v]=h.useState({score:0,feedback:[]});h.useEffect(()=>{t&&(n({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),l({}),p(""),b(""),v({score:0,feedback:[]}))},[t]);const N=P=>{const{name:T,value:B}=P.target;if(n(F=>({...F,[T]:B})),i[T]&&l(F=>({...F,[T]:""})),g&&p(""),T==="password"){const F=S(B);v(F)}},S=P=>{const T=[];let B=0;return P.length>=8?B+=1:T.push("At least 8 characters"),/[A-Z]/.test(P)?B+=1:T.push("One uppercase letter"),/[a-z]/.test(P)?B+=1:T.push("One lowercase letter"),/[0-9]/.test(P)?B+=1:T.push("One number"),/[^A-Za-z0-9]/.test(P)?B+=1:T.push("One special character"),{score:B,feedback:T}},w=(P,T)=>{switch(P){case"firstName":return T.trim()?T.trim().length<2?"First name must be at least 2 characters":"":"First name is required";case"lastName":return T.trim()?T.trim().length<2?"Last name must be at least 2 characters":"":"Last name is required";case"email":return T.trim()?Lt.validateEmail(T)?"":"Please enter a valid email address":"Email is required";case"phone":return T.trim()?Lt.validatePhone(T)?"":"Please enter a valid 10-digit phone number":"Phone number is required";case"password":return T.trim()?T.length<8?"Password must be at least 8 characters":y.score<3?"Password is too weak":"":"Password is required";case"confirmPassword":return T.trim()?T!==a.password?"Passwords do not match":"":"Please confirm your password";default:return""}},C=()=>{const P={};let T=!0;return Object.keys(a).forEach(B=>{const F=w(B,a[B]);F&&(P[B]=F,T=!1)}),l(P),T},j=async P=>{if(P.preventDefault(),P.stopPropagation(),!!C()){x(!0),p(""),b("");try{console.log("🔍 SupportStaffForm: Starting support staff registration...");const T=await Lt.registerSupportStaff(a);T.success?(console.log("✅ SupportStaffForm: Registration successful"),b("Support staff registered successfully! An email has been sent with login credentials."),r&&r(),setTimeout(()=>{s()},2e3)):(console.log("❌ SupportStaffForm: Registration failed:",T.message),p(T.message||"Registration failed"))}catch(T){console.error("❌ SupportStaffForm: Registration error:",T),p(T.message||"Registration failed. Please try again.")}finally{x(!1)}}},k=P=>{P&&(P.preventDefault(),P.stopPropagation()),m||s()},E=P=>{P.target===P.currentTarget&&k()},R=()=>y.score<=2?"bg-red-500":y.score<=3?"bg-yellow-500":y.score<=4?"bg-blue-500":"bg-green-500",D=()=>y.score<=2?"Weak":y.score<=3?"Fair":y.score<=4?"Good":"Strong";return e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:E,children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity"}),e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"relative inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full z-[10000]",onClick:P=>P.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(Cr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{id:"modal-title",className:"text-xl font-semibold text-white",children:"Add Support Staff"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Create a new support staff account"})]})]}),e.jsx("button",{onClick:k,disabled:m,className:"text-white/80 hover:text-white disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-white/50 rounded-xl p-2 transition-colors","aria-label":"Close modal",type:"button",children:e.jsx(ct,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"bg-white px-6 py-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-semibold text-gray-700",children:"First Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:a.firstName,onChange:N,className:`pl-12 pr-4 py-3 w-full border-2 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all ${i.firstName?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter first name",disabled:m,"aria-describedby":i.firstName?"firstName-error":void 0})]}),i.firstName&&e.jsxs(ae.p,{id:"firstName-error",className:"mt-2 text-sm text-red-600 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),i.firstName]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-semibold text-gray-700",children:"Last Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:a.lastName,onChange:N,className:`pl-12 pr-4 py-3 w-full border-2 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all ${i.lastName?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter last name",disabled:m,"aria-describedby":i.lastName?"lastName-error":void 0})]}),i.lastName&&e.jsxs(ae.p,{id:"lastName-error",className:"mt-2 text-sm text-red-600 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),i.lastName]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:N,className:`pl-12 pr-4 py-3 w-full border-2 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all ${i.email?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter email address",disabled:m,"aria-describedby":i.email?"email-error":void 0})]}),i.email&&e.jsxs(ae.p,{id:"email-error",className:"mt-2 text-sm text-red-600 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),i.email]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:N,className:`pl-12 pr-4 py-3 w-full border-2 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all ${i.phone?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter 10-digit phone number",maxLength:"10",disabled:m,"aria-describedby":i.phone?"phone-error":void 0})]}),i.phone&&e.jsxs(ae.p,{id:"phone-error",className:"mt-2 text-sm text-red-600 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),i.phone]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Er,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:o?"text":"password",id:"password",name:"password",value:a.password,onChange:N,className:`pl-12 pr-12 py-3 w-full border-2 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all ${i.password?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter password",disabled:m,"aria-describedby":i.password?"password-error":"password-strength"}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-lg p-1 transition-colors",disabled:m,"aria-label":o?"Hide password":"Show password",children:o?e.jsx(rr,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),a.password&&e.jsxs("div",{id:"password-strength",className:"mt-3 p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Password Strength"}),e.jsx("span",{className:`text-xs font-semibold ${y.score<=2?"text-red-600":y.score<=3?"text-yellow-600":y.score<=4?"text-blue-600":"text-green-600"}`,children:D()})]}),e.jsx("div",{className:"flex space-x-1 mb-2",children:[1,2,3,4,5].map(P=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-all ${P<=y.score?R():"bg-gray-200"}`},P))}),y.feedback.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 flex items-start",children:[e.jsx(kl,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:y.feedback.join(", ")})]})]}),i.password&&e.jsxs(ae.p,{id:"password-error",className:"mt-2 text-sm text-red-600 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),i.password]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Er,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:u?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:N,className:`pl-12 pr-12 py-3 w-full border-2 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all ${i.confirmPassword?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Confirm password",disabled:m,"aria-describedby":i.confirmPassword?"confirmPassword-error":void 0}),e.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-4 top-1/2 transform -translate-y-1/2 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-lg p-1 transition-colors",disabled:m,"aria-label":u?"Hide password":"Show password",children:u?e.jsx(rr,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),i.confirmPassword&&e.jsxs(ae.p,{id:"confirmPassword-error",className:"mt-2 text-sm text-red-600 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),i.confirmPassword]})]})]}),g&&e.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg",role:"alert",children:[e.jsx(Ze,{className:"h-5 w-5 text-red-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:g})]}),f&&e.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center p-3 bg-green-50 border border-green-200 rounded-lg",role:"alert",children:[e.jsx(Be,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-700",children:f})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:k,disabled:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:m?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):"Add Support Staff"})]})]})})]})]})})})},_S=({isOpen:t,onClose:s,onConfirm:r,itemName:a,itemType:n="PG"})=>e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Rt,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Deletion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(Pr,{className:"h-6 w-6 text-red-600"})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Delete ",n]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',a,'"']}),"? This action will permanently remove the ",n.toLowerCase()," and all associated data."]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Warning"}),e.jsxs("p",{children:["This action cannot be undone. All data associated with this ",n.toLowerCase()," will be permanently deleted."]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[e.jsx(Pr,{className:"h-4 w-4"}),e.jsxs("span",{children:["Delete ",n]})]})]})]})})}),MF=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(null),[d,m]=h.useState(""),[x,g]=h.useState("all"),[p,f]=h.useState(!1);h.useEffect(()=>{b()},[]);const b=async()=>{try{a(!0);const E=await Lt.getSupportStaff();E.success?s(E.data):M.error(E.message||"Failed to load support staff")}catch(E){console.error("Error loading support staff:",E),M.error("Failed to load support staff")}finally{a(!1)}},y=async()=>{f(!0),await b(),f(!1),M.success("Support staff list refreshed")},v=()=>{b(),M.success("Support staff added successfully!")},N=async()=>{if(c)try{const E=await Lt.deleteUser(c._id);E.success?(s(R=>R.filter(D=>D._id!==c._id)),M.success("Support staff deleted successfully!"),o(!1),u(null)):M.error(E.message||"Failed to delete support staff")}catch(E){console.error("Error deleting support staff:",E),M.error("Failed to delete support staff")}},S=async(E,R)=>{try{const D=await Lt.updateUserStatus(E,!R);D.success?(s(P=>P.map(T=>T._id===E?{...T,isActive:!R}:T)),M.success(`Support staff ${R?"deactivated":"activated"} successfully!`)):M.error(D.message||"Failed to update status")}catch(D){console.error("Error updating staff status:",D),M.error("Failed to update status")}},w=(E,R)=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),R())},C=t.filter(E=>{const R=E.firstName.toLowerCase().includes(d.toLowerCase())||E.lastName.toLowerCase().includes(d.toLowerCase())||E.email.toLowerCase().includes(d.toLowerCase()),D=x==="all"||x==="active"&&E.isActive||x==="inactive"&&!E.isActive;return R&&D}),j=E=>E?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200",k=E=>E?_0:hg;return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading support staff..."})]})}):e.jsxs("div",{className:"p-6",role:"main","aria-label":"Support Staff Management",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Support Staff"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage support staff accounts and permissions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:y,disabled:p,className:"flex items-center px-3 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 disabled:opacity-50","aria-label":"Refresh support staff list",children:[e.jsx(wt,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 transition-colors","aria-label":"Add new support staff member",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Add Support Staff"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",role:"region","aria-label":"Support staff statistics",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-blue-600","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900","aria-live":"polite",children:t.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(_0,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Staff"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900","aria-live":"polite",children:t.filter(E=>E.isActive).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(hg,{className:"h-6 w-6 text-yellow-600","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive Staff"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900","aria-live":"polite",children:t.filter(E=>!E.isActive).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(xt,{className:"h-6 w-6 text-purple-600","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900","aria-live":"polite",children:t.filter(E=>{const R=new Date(E.createdAt),D=new Date;return R.getMonth()===D.getMonth()&&R.getFullYear()===D.getFullYear()}).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"search-staff",className:"sr-only",children:"Search support staff"}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400","aria-hidden":"true"}),e.jsx("input",{id:"search-staff",type:"text",placeholder:"Search support staff...",value:d,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Search support staff by name or email"})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(aa,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"}),e.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filter by status"}),e.jsxs("select",{id:"status-filter",value:x,onChange:E=>g(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Filter support staff by status",children:[e.jsx("option",{value:"all",children:"All Staff"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Support Staff List"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",C.length," of ",t.length," staff members"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",role:"table","aria-label":"Support staff list",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Staff Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(E=>{const R=k(E.isActive);return e.jsxs(ae.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",role:"row",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",role:"cell",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600","aria-label":`${E.firstName} ${E.lastName} initials`,children:[E.firstName.charAt(0),E.lastName.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E.firstName," ",E.lastName]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",E._id.slice(-8)]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",role:"cell",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 text-gray-400","aria-hidden":"true"}),e.jsx("a",{href:`mailto:${E.email}`,className:"hover:text-blue-600",children:E.email})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2 text-gray-400","aria-hidden":"true"}),e.jsx("a",{href:`tel:${E.phone}`,className:"hover:text-blue-600",children:E.phone})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",role:"cell",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${j(E.isActive)}`,"aria-label":`Status: ${E.isActive?"Active":"Inactive"}`,children:[e.jsx(R,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),E.isActive?"Active":"Inactive"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",role:"cell",children:new Date(E.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",role:"cell",children:E.lastLogin?new Date(E.lastLogin).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",role:"cell",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>S(E._id,E.isActive),onKeyPress:D=>w(D,()=>S(E._id,E.isActive)),className:`px-3 py-1 rounded-md text-xs font-medium focus:ring-2 focus:ring-blue-500 ${E.isActive?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,tabIndex:0,role:"button","aria-label":`${E.isActive?"Deactivate":"Activate"} ${E.firstName} ${E.lastName}`,children:E.isActive?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>{u(E),o(!0)},onKeyPress:D=>w(D,()=>{u(E),o(!0)}),className:"text-red-600 hover:text-red-900 focus:ring-2 focus:ring-red-500 rounded",tabIndex:0,role:"button","aria-label":`Delete ${E.firstName} ${E.lastName}`,children:e.jsx(Pr,{className:"h-4 w-4","aria-hidden":"true"})})]})})]},E._id)})})]})}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto h-12 w-12 text-gray-400","aria-hidden":"true"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No support staff found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d||x!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first support staff member."}),!d&&x==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500","aria-label":"Add your first support staff member",children:[e.jsx(as,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Add Support Staff"]})})]})]}),e.jsx(OF,{isOpen:n,onClose:()=>i(!1),onSuccess:v}),e.jsx(_S,{isOpen:l,onClose:()=>{o(!1),u(null)},onConfirm:N,title:"Delete Support Staff",message:`Are you sure you want to delete ${c==null?void 0:c.firstName} ${c==null?void 0:c.lastName}? This action cannot be undone.`,confirmText:"Delete Staff",loading:!1})]})},BF=()=>{var w,C;const{user:t}=He(j=>j.auth),s=He(Nr),r=Ms(),[a,n]=h.useState(!0),[i,l]=h.useState({residents:{total:0,active:0,pending:0,movedOut:0,thisMonth:0,byStatus:{active:0,pending:0,inactive:0},byGender:{male:0,female:0}},financial:{totalRevenue:0,monthlyRevenue:0,pendingPayments:0,overduePayments:0,revenueGrowth:0,averageRent:0},occupancy:{totalRooms:0,occupiedRooms:0,availableRooms:0,occupancyRate:0,occupancyTrend:0},tickets:{open:0,urgent:0,resolved:0,total:0,resolutionRate:0},pg:{name:"",description:"",address:"",phone:"",email:"",totalBranches:0}}),[o,c]=h.useState([]),[u,d]=h.useState([]),[m,x]=h.useState({payments:{pending:0,overdue:0,total:0,totalAmount:0},tickets:{open:0,urgent:0,total:0},residents:{pending:0,onboarding:0,offboarding:0},details:{pendingPayments:[],overduePayments:[],openTickets:[],pendingResidents:[]}}),[g,p]=h.useState(0);h.useEffect(()=>{if(!t){r("/admin/login");return}if((t==null?void 0:t.role)!=="admin"){M.error("Access denied. Admin privileges required."),r("/login");return}f()},[t,r,s,g]);const f=async()=>{var j,k,E;try{if(n(!0),!s){n(!1);return}const R=s._id||s;if(!R){n(!1),M.error("Invalid branch selected. Please select a valid branch.");return}const[D,P,T]=await Promise.all([we.get(`/dashboard/overview?branchId=${R}`),we.get(`/dashboard/activities?branchId=${R}`),we.get(`/dashboard/pending-tasks?branchId=${R}`)]);if(D.data.success&&l(D.data.data),P.data.success){c(P.data.data);const B=P.data.data.filter(F=>F.type==="ticket");d(B.slice(0,6))}T.data.success&&x(T.data.data)}catch(R){console.error("❌ Error loading dashboard data:",R),((j=R.response)==null?void 0:j.status)===404?M.error("Dashboard API endpoints not found. Please check server configuration."):((k=R.response)==null?void 0:k.status)===400?M.error("Invalid branch ID. Please select a valid branch."):((E=R.response)==null?void 0:E.status)===401?(M.error("Authentication failed. Please login again."),r("/admin/login")):M.error("Failed to load dashboard data. Please try again.")}finally{n(!1)}},b=()=>{p(j=>j+1),M.success("Dashboard refreshed")},y=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=j=>{if(!j)return"";const k=new Date(j),R=Math.floor((new Date-k)/(1e3*60*60));return R<1?"Just now":R<24?`${R}h ago`:`${Math.floor(R/24)}d ago`},N=j=>{switch(j){case"completed":case"active":case"resolved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=j=>{switch(j){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return!t||(t==null?void 0:t.role)!=="admin"?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"PG Admin"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Management System"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:b,className:"flex items-center px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors text-sm font-medium",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-semibold text-sm",children:[(w=t.firstName)==null?void 0:w.charAt(0),(C=t.lastName)==null?void 0:C.charAt(0)]})})]})]})]})})}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"pointer-events-none absolute -top-10 -left-10 h-40 w-40 rounded-full bg-gradient-to-br from-emerald-300/20 to-cyan-400/20 blur-2xl"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-10 -right-10 h-40 w-40 rounded-full bg-gradient-to-br from-cyan-200/20 to-blue-300/20 blur-2xl"}),!s||a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Monitor, manage, and optimize your PG operations with ease."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl shadow-lg p-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(Ft,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-sm text-emerald-100",children:[e.jsx(_t,{className:"h-4 w-4 mr-1"}),Math.abs(i.financial.revenueGrowth||0),"%"]})})]}),e.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:y(i.financial.totalRevenue)}),e.jsx("p",{className:"text-emerald-100 font-medium",children:"Total Revenue"}),e.jsx("p",{className:"text-emerald-200 text-sm mt-1",children:"Increased from last month"})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl",children:e.jsx(xt,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-emerald-600 text-sm",children:[e.jsx(_t,{className:"h-4 w-4 mr-1"}),"+12%"]})})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:y(i.financial.monthlyRevenue)}),e.jsx("p",{className:"text-gray-600 font-medium",children:"This Month"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Increased from last month"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl",children:e.jsx(ut,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-emerald-600 text-sm",children:[e.jsx(_t,{className:"h-4 w-4 mr-1"}),"+5%"]})})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.financial.pendingPayments}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Pending"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Awaiting payment"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl",children:e.jsx(Ze,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-rose-600 text-sm",children:[e.jsx(Jd,{className:"h-4 w-4 mr-1"}),"-2%"]})})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.financial.overduePayments}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Overdue"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Requires attention"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Analytics"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"This Month"})]})]}),e.jsx("div",{className:"space-y-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((j,k)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 text-sm text-gray-600 font-medium",children:j}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3 relative overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-full rounded-full transition-all duration-500",style:{width:`${Math.random()*80+20}%`}})}),e.jsxs("div",{className:"w-12 text-sm text-gray-600 text-right",children:[Math.floor(Math.random()*50+20),"%"]})]},j))})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reminders"}),e.jsx(Ln,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Collection"}),e.jsx("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full",children:"Today"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Collect rent from residents - 02:00 PM - 04:00 PM"}),e.jsx("button",{className:"w-full bg-emerald-500 text-white py-2 px-4 rounded-lg hover:bg-emerald-600 transition-colors text-sm font-medium",children:"Start Collection"})]}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Maintenance Check"}),e.jsx("span",{className:"text-xs text-amber-600 bg-amber-100 px-2 py-1 rounded-full",children:"Tomorrow"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Room 101 - AC repair scheduled"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Je,{className:"h-5 w-5 mr-2 text-cyan-600"}),"Residents Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl",children:e.jsx(Je,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(_t,{className:"h-4 w-4 mr-1"}),"+",i.residents.thisMonth]})})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.residents.total}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Residents"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl",children:e.jsx(Pa,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.residents.active}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl",children:e.jsx(ut,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.residents.pending}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-slate-500 to-slate-700 rounded-xl",children:e.jsx(fb,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.residents.movedOut}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Moved Out"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Rs,{className:"h-5 w-5 mr-2 text-orange-600"}),"Tickets Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.tickets.total}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.tickets.open}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Open"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-lg",children:e.jsx(Ln,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.tickets.urgent}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgent"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:i.tickets.resolved}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Collaboration"}),e.jsx("button",{className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"+ Add Member"})]}),e.jsx("div",{className:"space-y-4",children:[{name:"Alexandra Deff",task:"Payment Processing",status:"Completed",color:"emerald"},{name:"Edwin Adenike",task:"Resident Onboarding",status:"In Progress",color:"blue"},{name:"Isaac Oluwatemilorun",task:"Maintenance Check",status:"Pending",color:"amber"},{name:"David Oshodi",task:"Room Allocation",status:"In Progress",color:"blue"}].map((j,k)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:j.name.split(" ").map(E=>E[0]).join("")})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:j.name}),e.jsx("p",{className:"text-sm text-gray-600",children:j.task})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.color==="emerald"?"bg-emerald-100 text-emerald-800":j.color==="blue"?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:j.status})]},k))})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PG Progress"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:"41%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Operations Complete"})]})]}),e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[e.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-gray-200"}),e.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${2*Math.PI*50}`,strokeDashoffset:`${2*Math.PI*50*(1-.41)}`,className:"text-emerald-500",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"41%"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Complete"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Completed (41%)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"In Progress (35%)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Pending (24%)"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Rs,{className:"h-5 w-5 mr-2 text-orange-600"}),"Recent Tickets"]}),e.jsxs(ms,{to:"/admin/tickets",className:"flex items-center text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:["View All",e.jsx(zh,{className:"h-4 w-4 ml-1"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.length>0?u.map((j,k)=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Rs,{className:"h-4 w-4 text-orange-600"})}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S(j.priority)}`,children:j.priority})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2 line-clamp-2",children:j.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:j.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:v(j.timestamp)}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${N(j.status)}`,children:j.status})]})]},j.id)):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Rs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent tickets found"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"h-5 w-5 mr-2 text-blue-600"}),"Recent Activities"]}),e.jsxs(ms,{to:"/admin/reports",className:"flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:["View All",e.jsx(zh,{className:"h-4 w-4 ml-1"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:o.length>0?o.slice(0,5).map((j,k)=>e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:k*.1},className:"flex items-center p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:`p-2 rounded-lg mr-4 ${j.type==="payment"?"bg-green-100":j.type==="resident"?"bg-blue-100":"bg-orange-100"}`,children:[j.type==="payment"&&e.jsx(Ks,{className:"h-4 w-4 text-green-600"}),j.type==="resident"&&e.jsx(Je,{className:"h-4 w-4 text-blue-600"}),j.type==="ticket"&&e.jsx(Rs,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:j.title}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:j.description})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xs text-gray-500",children:v(j.timestamp)}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${N(j.status)}`,children:j.status})]})]},j.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities found"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg",children:e.jsx(Ia,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(_t,{className:"h-4 w-4 mr-1"}),i.occupancy.occupancyTrend>0?"+":"",i.occupancy.occupancyTrend]})})]}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:[i.occupancy.occupancyRate,"%"]}),e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Occupancy Rate"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.occupancy.occupiedRooms,"/",i.occupancy.totalRooms," rooms"]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:y(i.financial.averageRent)}),e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Rent"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Per resident per month"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-teal-500 to-teal-600 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-white"})})}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:[i.tickets.resolutionRate,"%"]}),e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Resolution Rate"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tickets resolved successfully"})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer",onClick:()=>r("/admin/room-availability"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:e.jsx(Ia,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-purple-600 text-sm",children:[e.jsx(zh,{className:"h-4 w-4 mr-1"}),"View"]})})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.occupancy.availableRooms}),e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Available Rooms"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to view detailed availability"})]})]})]})]})]})};function Wr(t){if(t===null||t===!0||t===!1)return NaN;var s=Number(t);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}function ht(t,s){if(s.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+s.length+" present")}function $t(t){ht(1,arguments);var s=Object.prototype.toString.call(t);return t instanceof Date||At(t)==="object"&&s==="[object Date]"?new Date(t.getTime()):typeof t=="number"||s==="[object Number]"?new Date(t):((typeof t=="string"||s==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Sa(t,s){ht(2,arguments);var r=$t(t),a=Wr(s);return isNaN(a)?new Date(NaN):(a&&r.setDate(r.getDate()+a),r)}function $n(t,s){ht(2,arguments);var r=$t(t),a=Wr(s);if(isNaN(a))return new Date(NaN);if(!a)return r;var n=r.getDate(),i=new Date(r.getTime());i.setMonth(r.getMonth()+a+1,0);var l=i.getDate();return n>=l?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}function LF(t,s){ht(2,arguments);var r=$t(t).getTime(),a=Wr(s);return new Date(r+a)}var $F={};function Tl(){return $F}function gi(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=Tl(),m=Wr((r=(a=(n=(i=s==null?void 0:s.weekStartsOn)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&a!==void 0?a:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=$t(t),g=x.getDay(),p=(g<m?7:0)+g-m;return x.setDate(x.getDate()-p),x.setHours(0,0,0,0),x}function oo(t){return ht(1,arguments),gi(t,{weekStartsOn:1})}function UF(t){ht(1,arguments);var s=$t(t),r=s.getFullYear(),a=new Date(0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);var n=oo(a),i=new Date(0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);var l=oo(i);return s.getTime()>=n.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function HF(t){ht(1,arguments);var s=UF(t),r=new Date(0);r.setFullYear(s,0,4),r.setHours(0,0,0,0);var a=oo(r);return a}function eu(t){var s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),t.getTime()-s.getTime()}function vc(t){ht(1,arguments);var s=$t(t);return s.setHours(0,0,0,0),s}var WF=864e5;function Ai(t,s){ht(2,arguments);var r=vc(t),a=vc(s),n=r.getTime()-eu(r),i=a.getTime()-eu(a);return Math.round((n-i)/WF)}function Hg(t,s){ht(2,arguments);var r=Wr(s),a=r*7;return Sa(t,a)}function VF(t,s){ht(2,arguments);var r=Wr(s);return $n(t,r*12)}function zF(t){ht(1,arguments);var s;if(t&&typeof t.forEach=="function")s=t;else if(At(t)==="object"&&t!==null)s=Array.prototype.slice.call(t);else return new Date(NaN);var r;return s.forEach(function(a){var n=$t(a);(r===void 0||r<n||isNaN(Number(n)))&&(r=n)}),r||new Date(NaN)}function GF(t){ht(1,arguments);var s;if(t&&typeof t.forEach=="function")s=t;else if(At(t)==="object"&&t!==null)s=Array.prototype.slice.call(t);else return new Date(NaN);var r;return s.forEach(function(a){var n=$t(a);(r===void 0||r>n||isNaN(n.getDate()))&&(r=n)}),r||new Date(NaN)}function Da(t,s){ht(2,arguments);var r=vc(t),a=vc(s);return r.getTime()===a.getTime()}function Ab(t){return ht(1,arguments),t instanceof Date||At(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qF(t){if(ht(1,arguments),!Ab(t)&&typeof t!="number")return!1;var s=$t(t);return!isNaN(Number(s))}function tu(t,s){ht(2,arguments);var r=$t(t),a=$t(s),n=r.getFullYear()-a.getFullYear(),i=r.getMonth()-a.getMonth();return n*12+i}var YF=6048e5;function KF(t,s,r){ht(2,arguments);var a=gi(t,r),n=gi(s,r),i=a.getTime()-eu(a),l=n.getTime()-eu(n);return Math.round((i-l)/YF)}function su(t){ht(1,arguments);var s=$t(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function pa(t){ht(1,arguments);var s=$t(t);return s.setDate(1),s.setHours(0,0,0,0),s}function XF(t){ht(1,arguments);var s=$t(t),r=s.getFullYear();return s.setFullYear(r+1,0,0),s.setHours(23,59,59,999),s}function AS(t){ht(1,arguments);var s=$t(t),r=new Date(0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Rb(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=Tl(),m=Wr((r=(a=(n=(i=s==null?void 0:s.weekStartsOn)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&a!==void 0?a:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=$t(t),g=x.getDay(),p=(g<m?-7:0)+6-(g-m);return x.setDate(x.getDate()+p),x.setHours(23,59,59,999),x}function RS(t){return ht(1,arguments),Rb(t,{weekStartsOn:1})}function JF(t,s){ht(2,arguments);var r=Wr(s);return LF(t,-r)}var QF=864e5;function ZF(t){ht(1,arguments);var s=$t(t),r=s.getTime();s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0);var a=s.getTime(),n=r-a;return Math.floor(n/QF)+1}function I0(t){ht(1,arguments);var s=1,r=$t(t),a=r.getUTCDay(),n=(a<s?7:0)+a-s;return r.setUTCDate(r.getUTCDate()-n),r.setUTCHours(0,0,0,0),r}function FS(t){ht(1,arguments);var s=$t(t),r=s.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(r+1,0,4),a.setUTCHours(0,0,0,0);var n=I0(a),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var l=I0(i);return s.getTime()>=n.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function eD(t){ht(1,arguments);var s=FS(t),r=new Date(0);r.setUTCFullYear(s,0,4),r.setUTCHours(0,0,0,0);var a=I0(r);return a}var tD=6048e5;function sD(t){ht(1,arguments);var s=$t(t),r=I0(s).getTime()-eD(s).getTime();return Math.round(r/tD)+1}function O0(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=Tl(),m=Wr((r=(a=(n=(i=s==null?void 0:s.weekStartsOn)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&a!==void 0?a:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=$t(t),g=x.getUTCDay(),p=(g<m?7:0)+g-m;return x.setUTCDate(x.getUTCDate()-p),x.setUTCHours(0,0,0,0),x}function DS(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=$t(t),m=d.getUTCFullYear(),x=Tl(),g=Wr((r=(a=(n=(i=s==null?void 0:s.firstWeekContainsDate)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:x.firstWeekContainsDate)!==null&&a!==void 0?a:(c=x.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(m+1,0,g),p.setUTCHours(0,0,0,0);var f=O0(p,s),b=new Date(0);b.setUTCFullYear(m,0,g),b.setUTCHours(0,0,0,0);var y=O0(b,s);return d.getTime()>=f.getTime()?m+1:d.getTime()>=y.getTime()?m:m-1}function rD(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=Tl(),m=Wr((r=(a=(n=(i=s==null?void 0:s.firstWeekContainsDate)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&a!==void 0?a:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),x=DS(t,s),g=new Date(0);g.setUTCFullYear(x,0,m),g.setUTCHours(0,0,0,0);var p=O0(g,s);return p}var aD=6048e5;function nD(t,s){ht(1,arguments);var r=$t(t),a=O0(r,s).getTime()-rD(r,s).getTime();return Math.round(a/aD)+1}function ps(t,s){for(var r=t<0?"-":"",a=Math.abs(t).toString();a.length<s;)a="0"+a;return r+a}var sl={y:function(s,r){var a=s.getUTCFullYear(),n=a>0?a:1-a;return ps(r==="yy"?n%100:n,r.length)},M:function(s,r){var a=s.getUTCMonth();return r==="M"?String(a+1):ps(a+1,2)},d:function(s,r){return ps(s.getUTCDate(),r.length)},a:function(s,r){var a=s.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(s,r){return ps(s.getUTCHours()%12||12,r.length)},H:function(s,r){return ps(s.getUTCHours(),r.length)},m:function(s,r){return ps(s.getUTCMinutes(),r.length)},s:function(s,r){return ps(s.getUTCSeconds(),r.length)},S:function(s,r){var a=r.length,n=s.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,a-3));return ps(i,r.length)}},Oo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iD={G:function(s,r,a){var n=s.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(s,r,a){if(r==="yo"){var n=s.getUTCFullYear(),i=n>0?n:1-n;return a.ordinalNumber(i,{unit:"year"})}return sl.y(s,r)},Y:function(s,r,a,n){var i=DS(s,n),l=i>0?i:1-i;if(r==="YY"){var o=l%100;return ps(o,2)}return r==="Yo"?a.ordinalNumber(l,{unit:"year"}):ps(l,r.length)},R:function(s,r){var a=FS(s);return ps(a,r.length)},u:function(s,r){var a=s.getUTCFullYear();return ps(a,r.length)},Q:function(s,r,a){var n=Math.ceil((s.getUTCMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return ps(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,r,a){var n=Math.ceil((s.getUTCMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return ps(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,r,a){var n=s.getUTCMonth();switch(r){case"M":case"MM":return sl.M(s,r);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(s,r,a){var n=s.getUTCMonth();switch(r){case"L":return String(n+1);case"LL":return ps(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(s,r,a,n){var i=nD(s,n);return r==="wo"?a.ordinalNumber(i,{unit:"week"}):ps(i,r.length)},I:function(s,r,a){var n=sD(s);return r==="Io"?a.ordinalNumber(n,{unit:"week"}):ps(n,r.length)},d:function(s,r,a){return r==="do"?a.ordinalNumber(s.getUTCDate(),{unit:"date"}):sl.d(s,r)},D:function(s,r,a){var n=ZF(s);return r==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):ps(n,r.length)},E:function(s,r,a){var n=s.getUTCDay();switch(r){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(s,r,a,n){var i=s.getUTCDay(),l=(i-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return ps(l,2);case"eo":return a.ordinalNumber(l,{unit:"day"});case"eee":return a.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"});case"eeee":default:return a.day(i,{width:"wide",context:"formatting"})}},c:function(s,r,a,n){var i=s.getUTCDay(),l=(i-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return ps(l,r.length);case"co":return a.ordinalNumber(l,{unit:"day"});case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"});case"cccc":default:return a.day(i,{width:"wide",context:"standalone"})}},i:function(s,r,a){var n=s.getUTCDay(),i=n===0?7:n;switch(r){case"i":return String(i);case"ii":return ps(i,r.length);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(s,r,a){var n=s.getUTCHours(),i=n/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,r,a){var n=s.getUTCHours(),i;switch(n===12?i=Oo.noon:n===0?i=Oo.midnight:i=n/12>=1?"pm":"am",r){case"b":case"bb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,r,a){var n=s.getUTCHours(),i;switch(n>=17?i=Oo.evening:n>=12?i=Oo.afternoon:n>=4?i=Oo.morning:i=Oo.night,r){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,r,a){if(r==="ho"){var n=s.getUTCHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return sl.h(s,r)},H:function(s,r,a){return r==="Ho"?a.ordinalNumber(s.getUTCHours(),{unit:"hour"}):sl.H(s,r)},K:function(s,r,a){var n=s.getUTCHours()%12;return r==="Ko"?a.ordinalNumber(n,{unit:"hour"}):ps(n,r.length)},k:function(s,r,a){var n=s.getUTCHours();return n===0&&(n=24),r==="ko"?a.ordinalNumber(n,{unit:"hour"}):ps(n,r.length)},m:function(s,r,a){return r==="mo"?a.ordinalNumber(s.getUTCMinutes(),{unit:"minute"}):sl.m(s,r)},s:function(s,r,a){return r==="so"?a.ordinalNumber(s.getUTCSeconds(),{unit:"second"}):sl.s(s,r)},S:function(s,r){return sl.S(s,r)},X:function(s,r,a,n){var i=n._originalDate||s,l=i.getTimezoneOffset();if(l===0)return"Z";switch(r){case"X":return gj(l);case"XXXX":case"XX":return Vl(l);case"XXXXX":case"XXX":default:return Vl(l,":")}},x:function(s,r,a,n){var i=n._originalDate||s,l=i.getTimezoneOffset();switch(r){case"x":return gj(l);case"xxxx":case"xx":return Vl(l);case"xxxxx":case"xxx":default:return Vl(l,":")}},O:function(s,r,a,n){var i=n._originalDate||s,l=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+fj(l,":");case"OOOO":default:return"GMT"+Vl(l,":")}},z:function(s,r,a,n){var i=n._originalDate||s,l=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+fj(l,":");case"zzzz":default:return"GMT"+Vl(l,":")}},t:function(s,r,a,n){var i=n._originalDate||s,l=Math.floor(i.getTime()/1e3);return ps(l,r.length)},T:function(s,r,a,n){var i=n._originalDate||s,l=i.getTime();return ps(l,r.length)}};function fj(t,s){var r=t>0?"-":"+",a=Math.abs(t),n=Math.floor(a/60),i=a%60;if(i===0)return r+String(n);var l=s;return r+String(n)+l+ps(i,2)}function gj(t,s){if(t%60===0){var r=t>0?"-":"+";return r+ps(Math.abs(t)/60,2)}return Vl(t,s)}function Vl(t,s){var r=s||"",a=t>0?"-":"+",n=Math.abs(t),i=ps(Math.floor(n/60),2),l=ps(n%60,2);return a+i+r+l}var pj=function(s,r){switch(s){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},IS=function(s,r){switch(s){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},lD=function(s,r){var a=s.match(/(P+)(p+)?/)||[],n=a[1],i=a[2];if(!i)return pj(s,r);var l;switch(n){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",pj(n,r)).replace("{{time}}",IS(i,r))},oD={p:IS,P:lD},cD=["D","DD"],dD=["YY","YYYY"];function uD(t){return cD.indexOf(t)!==-1}function mD(t){return dD.indexOf(t)!==-1}function bj(t,s,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(s,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(s,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(s,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(s,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var xD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hD=function(s,r,a){var n,i=xD[s];return typeof i=="string"?n=i:r===1?n=i.one:n=i.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function cf(t){return function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=s.width?String(s.width):t.defaultWidth,a=t.formats[r]||t.formats[t.defaultWidth];return a}}var fD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bD={date:cf({formats:fD,defaultWidth:"full"}),time:cf({formats:gD,defaultWidth:"full"}),dateTime:cf({formats:pD,defaultWidth:"full"})},yD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vD=function(s,r,a,n){return yD[s]};function hd(t){return function(s,r){var a=r!=null&&r.context?String(r.context):"standalone",n;if(a==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;n=t.formattingValues[l]||t.formattingValues[i]}else{var o=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[c]||t.values[o]}var u=t.argumentCallback?t.argumentCallback(s):s;return n[u]}}var jD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ND={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ED=function(s,r){var a=Number(s),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},PD={ordinalNumber:ED,era:hd({values:jD,defaultWidth:"wide"}),quarter:hd({values:wD,defaultWidth:"wide",argumentCallback:function(s){return s-1}}),month:hd({values:ND,defaultWidth:"wide"}),day:hd({values:SD,defaultWidth:"wide"}),dayPeriod:hd({values:CD,defaultWidth:"wide",formattingValues:kD,defaultFormattingWidth:"wide"})};function fd(t){return function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;var l=i[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?_D(o,function(m){return m.test(l)}):TD(o,function(m){return m.test(l)}),u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=s.slice(l.length);return{value:u,rest:d}}}function TD(t,s){for(var r in t)if(t.hasOwnProperty(r)&&s(t[r]))return r}function _D(t,s){for(var r=0;r<t.length;r++)if(s(t[r]))return r}function AD(t){return function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.match(t.matchPattern);if(!a)return null;var n=a[0],i=s.match(t.parsePattern);if(!i)return null;var l=t.valueCallback?t.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;var o=s.slice(n.length);return{value:l,rest:o}}}var RD=/^(\d+)(th|st|nd|rd)?/i,FD=/\d+/i,DD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ID={any:[/^b/i,/^(a|c)/i]},OD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},MD={any:[/1/i,/2/i,/3/i,/4/i]},BD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},LD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$D={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},UD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},VD={ordinalNumber:AD({matchPattern:RD,parsePattern:FD,valueCallback:function(s){return parseInt(s,10)}}),era:fd({matchPatterns:DD,defaultMatchWidth:"wide",parsePatterns:ID,defaultParseWidth:"any"}),quarter:fd({matchPatterns:OD,defaultMatchWidth:"wide",parsePatterns:MD,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:fd({matchPatterns:BD,defaultMatchWidth:"wide",parsePatterns:LD,defaultParseWidth:"any"}),day:fd({matchPatterns:$D,defaultMatchWidth:"wide",parsePatterns:UD,defaultParseWidth:"any"}),dayPeriod:fd({matchPatterns:HD,defaultMatchWidth:"any",parsePatterns:WD,defaultParseWidth:"any"})},OS={code:"en-US",formatDistance:hD,formatLong:bD,formatRelative:vD,localize:PD,match:VD,options:{weekStartsOn:0,firstWeekContainsDate:1}},zD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qD=/^'([^]*?)'?$/,YD=/''/g,KD=/[a-zA-Z]/;function Zs(t,s,r){var a,n,i,l,o,c,u,d,m,x,g,p,f,b,y,v,N,S;ht(2,arguments);var w=String(s),C=Tl(),j=(a=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:C.locale)!==null&&a!==void 0?a:OS,k=Wr((i=(l=(o=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&o!==void 0?o:C.firstWeekContainsDate)!==null&&l!==void 0?l:(m=C.locale)===null||m===void 0||(x=m.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Wr((g=(p=(f=(b=r==null?void 0:r.weekStartsOn)!==null&&b!==void 0?b:r==null||(y=r.locale)===null||y===void 0||(v=y.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&f!==void 0?f:C.weekStartsOn)!==null&&p!==void 0?p:(N=C.locale)===null||N===void 0||(S=N.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&g!==void 0?g:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!j.localize)throw new RangeError("locale must contain localize property");if(!j.formatLong)throw new RangeError("locale must contain formatLong property");var R=$t(t);if(!qF(R))throw new RangeError("Invalid time value");var D=eu(R),P=JF(R,D),T={firstWeekContainsDate:k,weekStartsOn:E,locale:j,_originalDate:R},B=w.match(GD).map(function(F){var L=F[0];if(L==="p"||L==="P"){var I=oD[L];return I(F,j.formatLong)}return F}).join("").match(zD).map(function(F){if(F==="''")return"'";var L=F[0];if(L==="'")return XD(F);var I=iD[L];if(I)return!(r!=null&&r.useAdditionalWeekYearTokens)&&mD(F)&&bj(F,s,String(t)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&uD(F)&&bj(F,s,String(t)),I(P,F,j.localize,T);if(L.match(KD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return F}).join("");return B}function XD(t){var s=t.match(qD);return s?s[1].replace(YD,"'"):t}function JD(t){ht(1,arguments);var s=$t(t),r=s.getFullYear(),a=s.getMonth(),n=new Date(0);return n.setFullYear(r,a+1,0),n.setHours(0,0,0,0),n.getDate()}var QD=6048e5;function ZD(t){ht(1,arguments);var s=$t(t),r=oo(s).getTime()-HF(s).getTime();return Math.round(r/QD)+1}function eI(t){ht(1,arguments);var s=$t(t),r=s.getTime();return r}function tI(t){return ht(1,arguments),Math.floor(eI(t)/1e3)}function sI(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=$t(t),m=d.getFullYear(),x=Tl(),g=Wr((r=(a=(n=(i=s==null?void 0:s.firstWeekContainsDate)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:x.firstWeekContainsDate)!==null&&a!==void 0?a:(c=x.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(m+1,0,g),p.setHours(0,0,0,0);var f=gi(p,s),b=new Date(0);b.setFullYear(m,0,g),b.setHours(0,0,0,0);var y=gi(b,s);return d.getTime()>=f.getTime()?m+1:d.getTime()>=y.getTime()?m:m-1}function rI(t,s){var r,a,n,i,l,o,c,u;ht(1,arguments);var d=Tl(),m=Wr((r=(a=(n=(i=s==null?void 0:s.firstWeekContainsDate)!==null&&i!==void 0?i:s==null||(l=s.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&a!==void 0?a:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),x=sI(t,s),g=new Date(0);g.setFullYear(x,0,m),g.setHours(0,0,0,0);var p=gi(g,s);return p}var aI=6048e5;function nI(t,s){ht(1,arguments);var r=$t(t),a=gi(r,s).getTime()-rI(r,s).getTime();return Math.round(a/aI)+1}function iI(t){ht(1,arguments);var s=$t(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(0,0,0,0),s}function lI(t,s){return ht(1,arguments),KF(iI(t),pa(t),s)+1}function Wg(t,s){ht(2,arguments);var r=$t(t),a=$t(s);return r.getTime()>a.getTime()}function MS(t,s){ht(2,arguments);var r=$t(t),a=$t(s);return r.getTime()<a.getTime()}function Vg(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function Fb(t,s){if(t){if(typeof t=="string")return Vg(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vg(t,s):void 0}}function Ut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ru(t,s){return ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ru(t,s)}function zi(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ru(t,s)}function au(t){return au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},au(t)}function Db(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Db=function(){return!!t})()}function oI(t,s){if(s&&(At(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ut(t)}function Gi(t){var s=Db();return function(){var r,a=au(t);if(s){var n=au(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return oI(this,r)}}function Rr(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function yj(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,wE(a.key),a)}}function Fr(t,s,r){return s&&yj(t.prototype,s),r&&yj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ib(t,s){ht(2,arguments);var r=$t(t),a=$t(s);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function cI(t,s){ht(2,arguments);var r=$t(t),a=$t(s);return r.getFullYear()===a.getFullYear()}function df(t,s){ht(2,arguments);var r=Wr(s);return Sa(t,-r)}function uf(t,s){ht(2,arguments);var r=$t(t),a=Wr(s),n=r.getFullYear(),i=r.getDate(),l=new Date(0);l.setFullYear(n,a,15),l.setHours(0,0,0,0);var o=JD(l);return r.setMonth(a,Math.min(i,o)),r}function vj(t,s){ht(2,arguments);var r=$t(t),a=Wr(s);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(a),r)}function jj(t,[s,r]){return Math.min(r,Math.max(s,t))}function Us(t,s,{checkForDefaultPrevented:r=!0}={}){return function(n){if(t==null||t(n),r===!1||!n.defaultPrevented)return s==null?void 0:s(n)}}function Lx(t,s=[]){let r=[];function a(i,l){const o=h.createContext(l),c=r.length;r=[...r,l];const u=m=>{var y;const{scope:x,children:g,...p}=m,f=((y=x==null?void 0:x[t])==null?void 0:y[c])||o,b=h.useMemo(()=>p,Object.values(p));return e.jsx(f.Provider,{value:b,children:g})};u.displayName=i+"Provider";function d(m,x){var f;const g=((f=x==null?void 0:x[t])==null?void 0:f[c])||o,p=h.useContext(g);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,d]}const n=()=>{const i=r.map(l=>h.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return h.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return n.scopeName=t,[a,dI(n,...s)]}function dI(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const a=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const l=a.reduce((o,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...o,...m}},{});return h.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}function wj(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function BS(...t){return s=>{let r=!1;const a=t.map(n=>{const i=wj(n,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let n=0;n<a.length;n++){const i=a[n];typeof i=="function"?i():wj(t[n],null)}}}}function wr(...t){return h.useCallback(BS(...t),t)}function jc(t){const s=mI(t),r=h.forwardRef((a,n)=>{const{children:i,...l}=a,o=h.Children.toArray(i),c=o.find(hI);if(c){const u=c.props.children,d=o.map(m=>m===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:n,children:h.isValidElement(u)?h.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:n,children:i})});return r.displayName=`${t}.Slot`,r}var uI=jc("Slot");function mI(t){const s=h.forwardRef((r,a)=>{const{children:n,...i}=r;if(h.isValidElement(n)){const l=gI(n),o=fI(i,n.props);return n.type!==h.Fragment&&(o.ref=a?BS(a,l):l),h.cloneElement(n,o)}return h.Children.count(n)>1?h.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var xI=Symbol("radix.slottable");function hI(t){return h.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xI}function fI(t,s){const r={...s};for(const a in s){const n=t[a],i=s[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...o)=>{const c=i(...o);return n(...o),c}:n&&(r[a]=n):a==="style"?r[a]={...n,...i}:a==="className"&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...t,...r}}function gI(t){var a,n;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function pI(t){const s=t+"CollectionProvider",[r,a]=Lx(s),[n,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=f=>{const{scope:b,children:y}=f,v=Ke.useRef(null),N=Ke.useRef(new Map).current;return e.jsx(n,{scope:b,itemMap:N,collectionRef:v,children:y})};l.displayName=s;const o=t+"CollectionSlot",c=jc(o),u=Ke.forwardRef((f,b)=>{const{scope:y,children:v}=f,N=i(o,y),S=wr(b,N.collectionRef);return e.jsx(c,{ref:S,children:v})});u.displayName=o;const d=t+"CollectionItemSlot",m="data-radix-collection-item",x=jc(d),g=Ke.forwardRef((f,b)=>{const{scope:y,children:v,...N}=f,S=Ke.useRef(null),w=wr(b,S),C=i(d,y);return Ke.useEffect(()=>(C.itemMap.set(S,{ref:S,...N}),()=>void C.itemMap.delete(S))),e.jsx(x,{[m]:"",ref:w,children:v})});g.displayName=d;function p(f){const b=i(t+"CollectionConsumer",f);return Ke.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const N=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((C,j)=>N.indexOf(C.ref.current)-N.indexOf(j.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:u,ItemSlot:g},p,a]}var bI=h.createContext(void 0);function yI(t){const s=h.useContext(bI);return t||s||"ltr"}var vI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ar=vI.reduce((t,s)=>{const r=jc(`Primitive.${s}`),a=h.forwardRef((n,i)=>{const{asChild:l,...o}=n,c=l?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{});function jI(t,s){t&&Cl.flushSync(()=>t.dispatchEvent(s))}function co(t){const s=h.useRef(t);return h.useEffect(()=>{s.current=t}),h.useMemo(()=>(...r)=>{var a;return(a=s.current)==null?void 0:a.call(s,...r)},[])}function wI(t,s=globalThis==null?void 0:globalThis.document){const r=co(t);h.useEffect(()=>{const a=n=>{n.key==="Escape"&&r(n)};return s.addEventListener("keydown",a,{capture:!0}),()=>s.removeEventListener("keydown",a,{capture:!0})},[r,s])}var NI="DismissableLayer",zg="dismissableLayer.update",SI="dismissableLayer.pointerDownOutside",CI="dismissableLayer.focusOutside",Nj,LS=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ob=h.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,u=h.useContext(LS),[d,m]=h.useState(null),x=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=h.useState({}),p=wr(s,j=>m(j)),f=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=f.indexOf(b),v=d?f.indexOf(d):-1,N=u.layersWithOutsidePointerEventsDisabled.size>0,S=v>=y,w=PI(j=>{const k=j.target,E=[...u.branches].some(R=>R.contains(k));!S||E||(n==null||n(j),l==null||l(j),j.defaultPrevented||o==null||o())},x),C=TI(j=>{const k=j.target;[...u.branches].some(R=>R.contains(k))||(i==null||i(j),l==null||l(j),j.defaultPrevented||o==null||o())},x);return wI(j=>{v===u.layers.size-1&&(a==null||a(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},x),h.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Nj=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Sj(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=Nj)}},[d,x,r,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Sj())},[d,u]),h.useEffect(()=>{const j=()=>g({});return document.addEventListener(zg,j),()=>document.removeEventListener(zg,j)},[]),e.jsx(ar.div,{...c,ref:p,style:{pointerEvents:N?S?"auto":"none":void 0,...t.style},onFocusCapture:Us(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Us(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Us(t.onPointerDownCapture,w.onPointerDownCapture)})});Ob.displayName=NI;var kI="DismissableLayerBranch",EI=h.forwardRef((t,s)=>{const r=h.useContext(LS),a=h.useRef(null),n=wr(s,a);return h.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(ar.div,{...t,ref:n})});EI.displayName=kI;function PI(t,s=globalThis==null?void 0:globalThis.document){const r=co(t),a=h.useRef(!1),n=h.useRef(()=>{});return h.useEffect(()=>{const i=o=>{if(o.target&&!a.current){let c=function(){$S(SI,r,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",n.current),n.current=c,s.addEventListener("click",n.current,{once:!0})):c()}else s.removeEventListener("click",n.current);a.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",n.current)}},[s,r]),{onPointerDownCapture:()=>a.current=!0}}function TI(t,s=globalThis==null?void 0:globalThis.document){const r=co(t),a=h.useRef(!1);return h.useEffect(()=>{const n=i=>{i.target&&!a.current&&$S(CI,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",n),()=>s.removeEventListener("focusin",n)},[s,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Sj(){const t=new CustomEvent(zg);document.dispatchEvent(t)}function $S(t,s,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&n.addEventListener(t,s,{once:!0}),a?jI(n,i):n.dispatchEvent(i)}var mf=0;function US(){h.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Cj()),document.body.insertAdjacentElement("beforeend",t[1]??Cj()),mf++,()=>{mf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),mf--}},[])}function Cj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var xf="focusScope.autoFocusOnMount",hf="focusScope.autoFocusOnUnmount",kj={bubbles:!1,cancelable:!0},_I="FocusScope",Mb=h.forwardRef((t,s)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...l}=t,[o,c]=h.useState(null),u=co(n),d=co(i),m=h.useRef(null),x=wr(s,f=>c(f)),g=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(a){let f=function(N){if(g.paused||!o)return;const S=N.target;o.contains(S)?m.current=S:nl(m.current,{select:!0})},b=function(N){if(g.paused||!o)return;const S=N.relatedTarget;S!==null&&(o.contains(S)||nl(m.current,{select:!0}))},y=function(N){if(document.activeElement===document.body)for(const w of N)w.removedNodes.length>0&&nl(o)};document.addEventListener("focusin",f),document.addEventListener("focusout",b);const v=new MutationObserver(y);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",b),v.disconnect()}}},[a,o,g.paused]),h.useEffect(()=>{if(o){Pj.add(g);const f=document.activeElement;if(!o.contains(f)){const y=new CustomEvent(xf,kj);o.addEventListener(xf,u),o.dispatchEvent(y),y.defaultPrevented||(AI(OI(HS(o)),{select:!0}),document.activeElement===f&&nl(o))}return()=>{o.removeEventListener(xf,u),setTimeout(()=>{const y=new CustomEvent(hf,kj);o.addEventListener(hf,d),o.dispatchEvent(y),y.defaultPrevented||nl(f??document.body,{select:!0}),o.removeEventListener(hf,d),Pj.remove(g)},0)}}},[o,u,d,g]);const p=h.useCallback(f=>{if(!r&&!a||g.paused)return;const b=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,y=document.activeElement;if(b&&y){const v=f.currentTarget,[N,S]=RI(v);N&&S?!f.shiftKey&&y===S?(f.preventDefault(),r&&nl(N,{select:!0})):f.shiftKey&&y===N&&(f.preventDefault(),r&&nl(S,{select:!0})):y===v&&f.preventDefault()}},[r,a,g.paused]);return e.jsx(ar.div,{tabIndex:-1,...l,ref:x,onKeyDown:p})});Mb.displayName=_I;function AI(t,{select:s=!1}={}){const r=document.activeElement;for(const a of t)if(nl(a,{select:s}),document.activeElement!==r)return}function RI(t){const s=HS(t),r=Ej(s,t),a=Ej(s.reverse(),t);return[r,a]}function HS(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Ej(t,s){for(const r of t)if(!FI(r,{upTo:s}))return r}function FI(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function DI(t){return t instanceof HTMLInputElement&&"select"in t}function nl(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&DI(t)&&s&&t.select()}}var Pj=II();function II(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=Tj(t,s),t.unshift(s)},remove(s){var r;t=Tj(t,s),(r=t[0])==null||r.resume()}}}function Tj(t,s){const r=[...t],a=r.indexOf(s);return a!==-1&&r.splice(a,1),r}function OI(t){return t.filter(s=>s.tagName!=="A")}var ya=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},MI=Mc[" useId ".trim().toString()]||(()=>{}),BI=0;function $x(t){const[s,r]=h.useState(MI());return ya(()=>{r(a=>a??String(BI++))},[t]),s?`radix-${s}`:""}const LI=["top","right","bottom","left"],bl=Math.min,Ga=Math.max,M0=Math.round,Sm=Math.floor,ui=t=>({x:t,y:t}),$I={left:"right",right:"left",bottom:"top",top:"bottom"},UI={start:"end",end:"start"};function Gg(t,s,r){return Ga(t,bl(s,r))}function $i(t,s){return typeof t=="function"?t(s):t}function Ui(t){return t.split("-")[0]}function zc(t){return t.split("-")[1]}function Bb(t){return t==="x"?"y":"x"}function Lb(t){return t==="y"?"height":"width"}const HI=new Set(["top","bottom"]);function ni(t){return HI.has(Ui(t))?"y":"x"}function $b(t){return Bb(ni(t))}function WI(t,s,r){r===void 0&&(r=!1);const a=zc(t),n=$b(t),i=Lb(n);let l=n==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=B0(l)),[l,B0(l)]}function VI(t){const s=B0(t);return[qg(t),s,qg(s)]}function qg(t){return t.replace(/start|end/g,s=>UI[s])}const _j=["left","right"],Aj=["right","left"],zI=["top","bottom"],GI=["bottom","top"];function qI(t,s,r){switch(t){case"top":case"bottom":return r?s?Aj:_j:s?_j:Aj;case"left":case"right":return s?zI:GI;default:return[]}}function YI(t,s,r,a){const n=zc(t);let i=qI(Ui(t),r==="start",a);return n&&(i=i.map(l=>l+"-"+n),s&&(i=i.concat(i.map(qg)))),i}function B0(t){return t.replace(/left|right|bottom|top/g,s=>$I[s])}function KI(t){return{top:0,right:0,bottom:0,left:0,...t}}function WS(t){return typeof t!="number"?KI(t):{top:t,right:t,bottom:t,left:t}}function L0(t){const{x:s,y:r,width:a,height:n}=t;return{width:a,height:n,top:r,left:s,right:s+a,bottom:r+n,x:s,y:r}}function Rj(t,s,r){let{reference:a,floating:n}=t;const i=ni(s),l=$b(s),o=Lb(l),c=Ui(s),u=i==="y",d=a.x+a.width/2-n.width/2,m=a.y+a.height/2-n.height/2,x=a[o]/2-n[o]/2;let g;switch(c){case"top":g={x:d,y:a.y-n.height};break;case"bottom":g={x:d,y:a.y+a.height};break;case"right":g={x:a.x+a.width,y:m};break;case"left":g={x:a.x-n.width,y:m};break;default:g={x:a.x,y:a.y}}switch(zc(s)){case"start":g[l]-=x*(r&&u?-1:1);break;case"end":g[l]+=x*(r&&u?-1:1);break}return g}const XI=async(t,s,r)=>{const{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:l}=r,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let u=await l.getElementRects({reference:t,floating:s,strategy:n}),{x:d,y:m}=Rj(u,a,c),x=a,g={},p=0;for(let f=0;f<o.length;f++){const{name:b,fn:y}=o[f],{x:v,y:N,data:S,reset:w}=await y({x:d,y:m,initialPlacement:a,placement:x,strategy:n,middlewareData:g,rects:u,platform:l,elements:{reference:t,floating:s}});d=v??d,m=N??m,g={...g,[b]:{...g[b],...S}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(x=w.placement),w.rects&&(u=w.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:n}):w.rects),{x:d,y:m}=Rj(u,x,c)),f=-1)}return{x:d,y:m,placement:x,strategy:n,middlewareData:g}};async function nu(t,s){var r;s===void 0&&(s={});const{x:a,y:n,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:x=!1,padding:g=0}=$i(s,t),p=WS(g),b=o[x?m==="floating"?"reference":"floating":m],y=L0(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),v=m==="floating"?{x:a,y:n,width:l.floating.width,height:l.floating.height}:l.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),S=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},w=L0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:N,strategy:c}):v);return{top:(y.top-w.top+p.top)/S.y,bottom:(w.bottom-y.bottom+p.bottom)/S.y,left:(y.left-w.left+p.left)/S.x,right:(w.right-y.right+p.right)/S.x}}const JI=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:a,placement:n,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:u,padding:d=0}=$i(t,s)||{};if(u==null)return{};const m=WS(d),x={x:r,y:a},g=$b(n),p=Lb(g),f=await l.getDimensions(u),b=g==="y",y=b?"top":"left",v=b?"bottom":"right",N=b?"clientHeight":"clientWidth",S=i.reference[p]+i.reference[g]-x[g]-i.floating[p],w=x[g]-i.reference[g],C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let j=C?C[N]:0;(!j||!await(l.isElement==null?void 0:l.isElement(C)))&&(j=o.floating[N]||i.floating[p]);const k=S/2-w/2,E=j/2-f[p]/2-1,R=bl(m[y],E),D=bl(m[v],E),P=R,T=j-f[p]-D,B=j/2-f[p]/2+k,F=Gg(P,B,T),L=!c.arrow&&zc(n)!=null&&B!==F&&i.reference[p]/2-(B<P?R:D)-f[p]/2<0,I=L?B<P?B-P:B-T:0;return{[g]:x[g]+I,data:{[g]:F,centerOffset:B-F-I,...L&&{alignmentOffset:I}},reset:L}}}),QI=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,a;const{placement:n,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:u}=s,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...b}=$i(t,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=Ui(n),v=ni(o),N=Ui(o)===o,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),w=x||(N||!f?[B0(o)]:VI(o)),C=p!=="none";!x&&C&&w.push(...YI(o,f,p,S));const j=[o,...w],k=await nu(s,b),E=[];let R=((a=i.flip)==null?void 0:a.overflows)||[];if(d&&E.push(k[y]),m){const B=WI(n,l,S);E.push(k[B[0]],k[B[1]])}if(R=[...R,{placement:n,overflows:E}],!E.every(B=>B<=0)){var D,P;const B=(((D=i.flip)==null?void 0:D.index)||0)+1,F=j[B];if(F&&(!(m==="alignment"?v!==ni(F):!1)||R.every(V=>ni(V.placement)===v?V.overflows[0]>0:!0)))return{data:{index:B,overflows:R},reset:{placement:F}};let L=(P=R.filter(I=>I.overflows[0]<=0).sort((I,V)=>I.overflows[1]-V.overflows[1])[0])==null?void 0:P.placement;if(!L)switch(g){case"bestFit":{var T;const I=(T=R.filter(V=>{if(C){const _=ni(V.placement);return _===v||_==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(_=>_>0).reduce((_,G)=>_+G,0)]).sort((V,_)=>V[1]-_[1])[0])==null?void 0:T[0];I&&(L=I);break}case"initialPlacement":L=o;break}if(n!==L)return{reset:{placement:L}}}return{}}}};function Fj(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function Dj(t){return LI.some(s=>t[s]>=0)}const ZI=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:a="referenceHidden",...n}=$i(t,s);switch(a){case"referenceHidden":{const i=await nu(s,{...n,elementContext:"reference"}),l=Fj(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Dj(l)}}}case"escaped":{const i=await nu(s,{...n,altBoundary:!0}),l=Fj(i,r.floating);return{data:{escapedOffsets:l,escaped:Dj(l)}}}default:return{}}}}},VS=new Set(["left","top"]);async function eO(t,s){const{placement:r,platform:a,elements:n}=t,i=await(a.isRTL==null?void 0:a.isRTL(n.floating)),l=Ui(r),o=zc(r),c=ni(r)==="y",u=VS.has(l)?-1:1,d=i&&c?-1:1,m=$i(s,t);let{mainAxis:x,crossAxis:g,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof p=="number"&&(g=o==="end"?p*-1:p),c?{x:g*d,y:x*u}:{x:x*u,y:g*d}}const tO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,a;const{x:n,y:i,placement:l,middlewareData:o}=s,c=await eO(s,t);return l===((r=o.offset)==null?void 0:r.placement)&&(a=o.arrow)!=null&&a.alignmentOffset?{}:{x:n+c.x,y:i+c.y,data:{...c,placement:l}}}}},sO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:a,placement:n}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:b=>{let{x:y,y:v}=b;return{x:y,y:v}}},...c}=$i(t,s),u={x:r,y:a},d=await nu(s,c),m=ni(Ui(n)),x=Bb(m);let g=u[x],p=u[m];if(i){const b=x==="y"?"top":"left",y=x==="y"?"bottom":"right",v=g+d[b],N=g-d[y];g=Gg(v,g,N)}if(l){const b=m==="y"?"top":"left",y=m==="y"?"bottom":"right",v=p+d[b],N=p-d[y];p=Gg(v,p,N)}const f=o.fn({...s,[x]:g,[m]:p});return{...f,data:{x:f.x-r,y:f.y-a,enabled:{[x]:i,[m]:l}}}}}},rO=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:a,placement:n,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=$i(t,s),d={x:r,y:a},m=ni(n),x=Bb(m);let g=d[x],p=d[m];const f=$i(o,s),b=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const N=x==="y"?"height":"width",S=i.reference[x]-i.floating[N]+b.mainAxis,w=i.reference[x]+i.reference[N]-b.mainAxis;g<S?g=S:g>w&&(g=w)}if(u){var y,v;const N=x==="y"?"width":"height",S=VS.has(Ui(n)),w=i.reference[m]-i.floating[N]+(S&&((y=l.offset)==null?void 0:y[m])||0)+(S?0:b.crossAxis),C=i.reference[m]+i.reference[N]+(S?0:((v=l.offset)==null?void 0:v[m])||0)-(S?b.crossAxis:0);p<w?p=w:p>C&&(p=C)}return{[x]:g,[m]:p}}}},aO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,a;const{placement:n,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...u}=$i(t,s),d=await nu(s,u),m=Ui(n),x=zc(n),g=ni(n)==="y",{width:p,height:f}=i.floating;let b,y;m==="top"||m==="bottom"?(b=m,y=x===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(y=m,b=x==="end"?"top":"bottom");const v=f-d.top-d.bottom,N=p-d.left-d.right,S=bl(f-d[b],v),w=bl(p-d[y],N),C=!s.middlewareData.shift;let j=S,k=w;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(k=N),(a=s.middlewareData.shift)!=null&&a.enabled.y&&(j=v),C&&!x){const R=Ga(d.left,0),D=Ga(d.right,0),P=Ga(d.top,0),T=Ga(d.bottom,0);g?k=p-2*(R!==0||D!==0?R+D:Ga(d.left,d.right)):j=f-2*(P!==0||T!==0?P+T:Ga(d.top,d.bottom))}await c({...s,availableWidth:k,availableHeight:j});const E=await l.getDimensions(o.floating);return p!==E.width||f!==E.height?{reset:{rects:!0}}:{}}}};function Ux(){return typeof window<"u"}function Gc(t){return zS(t)?(t.nodeName||"").toLowerCase():"#document"}function Qa(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function ji(t){var s;return(s=(zS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function zS(t){return Ux()?t instanceof Node||t instanceof Qa(t).Node:!1}function Un(t){return Ux()?t instanceof Element||t instanceof Qa(t).Element:!1}function pi(t){return Ux()?t instanceof HTMLElement||t instanceof Qa(t).HTMLElement:!1}function Ij(t){return!Ux()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Qa(t).ShadowRoot}const nO=new Set(["inline","contents"]);function Wu(t){const{overflow:s,overflowX:r,overflowY:a,display:n}=Hn(t);return/auto|scroll|overlay|hidden|clip/.test(s+a+r)&&!nO.has(n)}const iO=new Set(["table","td","th"]);function lO(t){return iO.has(Gc(t))}const oO=[":popover-open",":modal"];function Hx(t){return oO.some(s=>{try{return t.matches(s)}catch{return!1}})}const cO=["transform","translate","scale","rotate","perspective"],dO=["transform","translate","scale","rotate","perspective","filter"],uO=["paint","layout","strict","content"];function Ub(t){const s=Hb(),r=Un(t)?Hn(t):t;return cO.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||dO.some(a=>(r.willChange||"").includes(a))||uO.some(a=>(r.contain||"").includes(a))}function mO(t){let s=yl(t);for(;pi(s)&&!wc(s);){if(Ub(s))return s;if(Hx(s))return null;s=yl(s)}return null}function Hb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xO=new Set(["html","body","#document"]);function wc(t){return xO.has(Gc(t))}function Hn(t){return Qa(t).getComputedStyle(t)}function Wx(t){return Un(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yl(t){if(Gc(t)==="html")return t;const s=t.assignedSlot||t.parentNode||Ij(t)&&t.host||ji(t);return Ij(s)?s.host:s}function GS(t){const s=yl(t);return wc(s)?t.ownerDocument?t.ownerDocument.body:t.body:pi(s)&&Wu(s)?s:GS(s)}function iu(t,s,r){var a;s===void 0&&(s=[]),r===void 0&&(r=!0);const n=GS(t),i=n===((a=t.ownerDocument)==null?void 0:a.body),l=Qa(n);if(i){const o=Yg(l);return s.concat(l,l.visualViewport||[],Wu(n)?n:[],o&&r?iu(o):[])}return s.concat(n,iu(n,[],r))}function Yg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qS(t){const s=Hn(t);let r=parseFloat(s.width)||0,a=parseFloat(s.height)||0;const n=pi(t),i=n?t.offsetWidth:r,l=n?t.offsetHeight:a,o=M0(r)!==i||M0(a)!==l;return o&&(r=i,a=l),{width:r,height:a,$:o}}function Wb(t){return Un(t)?t:t.contextElement}function cc(t){const s=Wb(t);if(!pi(s))return ui(1);const r=s.getBoundingClientRect(),{width:a,height:n,$:i}=qS(s);let l=(i?M0(r.width):r.width)/a,o=(i?M0(r.height):r.height)/n;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const hO=ui(0);function YS(t){const s=Qa(t);return!Hb()||!s.visualViewport?hO:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function fO(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==Qa(t)?!1:s}function uo(t,s,r,a){s===void 0&&(s=!1),r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=Wb(t);let l=ui(1);s&&(a?Un(a)&&(l=cc(a)):l=cc(t));const o=fO(i,r,a)?YS(i):ui(0);let c=(n.left+o.x)/l.x,u=(n.top+o.y)/l.y,d=n.width/l.x,m=n.height/l.y;if(i){const x=Qa(i),g=a&&Un(a)?Qa(a):a;let p=x,f=Yg(p);for(;f&&a&&g!==p;){const b=cc(f),y=f.getBoundingClientRect(),v=Hn(f),N=y.left+(f.clientLeft+parseFloat(v.paddingLeft))*b.x,S=y.top+(f.clientTop+parseFloat(v.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,m*=b.y,c+=N,u+=S,p=Qa(f),f=Yg(p)}}return L0({width:d,height:m,x:c,y:u})}function Vx(t,s){const r=Wx(t).scrollLeft;return s?s.left+r:uo(ji(t)).left+r}function KS(t,s){const r=t.getBoundingClientRect(),a=r.left+s.scrollLeft-Vx(t,r),n=r.top+s.scrollTop;return{x:a,y:n}}function gO(t){let{elements:s,rect:r,offsetParent:a,strategy:n}=t;const i=n==="fixed",l=ji(a),o=s?Hx(s.floating):!1;if(a===l||o&&i)return r;let c={scrollLeft:0,scrollTop:0},u=ui(1);const d=ui(0),m=pi(a);if((m||!m&&!i)&&((Gc(a)!=="body"||Wu(l))&&(c=Wx(a)),pi(a))){const g=uo(a);u=cc(a),d.x=g.x+a.clientLeft,d.y=g.y+a.clientTop}const x=l&&!m&&!i?KS(l,c):ui(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+x.x,y:r.y*u.y-c.scrollTop*u.y+d.y+x.y}}function pO(t){return Array.from(t.getClientRects())}function bO(t){const s=ji(t),r=Wx(t),a=t.ownerDocument.body,n=Ga(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),i=Ga(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let l=-r.scrollLeft+Vx(t);const o=-r.scrollTop;return Hn(a).direction==="rtl"&&(l+=Ga(s.clientWidth,a.clientWidth)-n),{width:n,height:i,x:l,y:o}}const Oj=25;function yO(t,s){const r=Qa(t),a=ji(t),n=r.visualViewport;let i=a.clientWidth,l=a.clientHeight,o=0,c=0;if(n){i=n.width,l=n.height;const d=Hb();(!d||d&&s==="fixed")&&(o=n.offsetLeft,c=n.offsetTop)}const u=Vx(a);if(u<=0){const d=a.ownerDocument,m=d.body,x=getComputedStyle(m),g=d.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,p=Math.abs(a.clientWidth-m.clientWidth-g);p<=Oj&&(i-=p)}else u<=Oj&&(i+=u);return{width:i,height:l,x:o,y:c}}const vO=new Set(["absolute","fixed"]);function jO(t,s){const r=uo(t,!0,s==="fixed"),a=r.top+t.clientTop,n=r.left+t.clientLeft,i=pi(t)?cc(t):ui(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=n*i.x,u=a*i.y;return{width:l,height:o,x:c,y:u}}function Mj(t,s,r){let a;if(s==="viewport")a=yO(t,r);else if(s==="document")a=bO(ji(t));else if(Un(s))a=jO(s,r);else{const n=YS(t);a={x:s.x-n.x,y:s.y-n.y,width:s.width,height:s.height}}return L0(a)}function XS(t,s){const r=yl(t);return r===s||!Un(r)||wc(r)?!1:Hn(r).position==="fixed"||XS(r,s)}function wO(t,s){const r=s.get(t);if(r)return r;let a=iu(t,[],!1).filter(o=>Un(o)&&Gc(o)!=="body"),n=null;const i=Hn(t).position==="fixed";let l=i?yl(t):t;for(;Un(l)&&!wc(l);){const o=Hn(l),c=Ub(l);!c&&o.position==="fixed"&&(n=null),(i?!c&&!n:!c&&o.position==="static"&&!!n&&vO.has(n.position)||Wu(l)&&!c&&XS(t,l))?a=a.filter(d=>d!==l):n=o,l=yl(l)}return s.set(t,a),a}function NO(t){let{element:s,boundary:r,rootBoundary:a,strategy:n}=t;const l=[...r==="clippingAncestors"?Hx(s)?[]:wO(s,this._c):[].concat(r),a],o=l[0],c=l.reduce((u,d)=>{const m=Mj(s,d,n);return u.top=Ga(m.top,u.top),u.right=bl(m.right,u.right),u.bottom=bl(m.bottom,u.bottom),u.left=Ga(m.left,u.left),u},Mj(s,o,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function SO(t){const{width:s,height:r}=qS(t);return{width:s,height:r}}function CO(t,s,r){const a=pi(s),n=ji(s),i=r==="fixed",l=uo(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=ui(0);function u(){c.x=Vx(n)}if(a||!a&&!i)if((Gc(s)!=="body"||Wu(n))&&(o=Wx(s)),a){const g=uo(s,!0,i,s);c.x=g.x+s.clientLeft,c.y=g.y+s.clientTop}else n&&u();i&&!a&&n&&u();const d=n&&!a&&!i?KS(n,o):ui(0),m=l.left+o.scrollLeft-c.x-d.x,x=l.top+o.scrollTop-c.y-d.y;return{x:m,y:x,width:l.width,height:l.height}}function ff(t){return Hn(t).position==="static"}function Bj(t,s){if(!pi(t)||Hn(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return ji(t)===r&&(r=r.ownerDocument.body),r}function JS(t,s){const r=Qa(t);if(Hx(t))return r;if(!pi(t)){let n=yl(t);for(;n&&!wc(n);){if(Un(n)&&!ff(n))return n;n=yl(n)}return r}let a=Bj(t,s);for(;a&&lO(a)&&ff(a);)a=Bj(a,s);return a&&wc(a)&&ff(a)&&!Ub(a)?r:a||mO(t)||r}const kO=async function(t){const s=this.getOffsetParent||JS,r=this.getDimensions,a=await r(t.floating);return{reference:CO(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function EO(t){return Hn(t).direction==="rtl"}const PO={convertOffsetParentRelativeRectToViewportRelativeRect:gO,getDocumentElement:ji,getClippingRect:NO,getOffsetParent:JS,getElementRects:kO,getClientRects:pO,getDimensions:SO,getScale:cc,isElement:Un,isRTL:EO};function QS(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function TO(t,s){let r=null,a;const n=ji(t);function i(){var o;clearTimeout(a),(o=r)==null||o.disconnect(),r=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:m,width:x,height:g}=u;if(o||s(),!x||!g)return;const p=Sm(m),f=Sm(n.clientWidth-(d+x)),b=Sm(n.clientHeight-(m+g)),y=Sm(d),N={rootMargin:-p+"px "+-f+"px "+-b+"px "+-y+"px",threshold:Ga(0,bl(1,c))||1};let S=!0;function w(C){const j=C[0].intersectionRatio;if(j!==c){if(!S)return l();j?l(!1,j):a=setTimeout(()=>{l(!1,1e-7)},1e3)}j===1&&!QS(u,t.getBoundingClientRect())&&l(),S=!1}try{r=new IntersectionObserver(w,{...N,root:n.ownerDocument})}catch{r=new IntersectionObserver(w,N)}r.observe(t)}return l(!0),i}function _O(t,s,r,a){a===void 0&&(a={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,u=Wb(t),d=n||i?[...u?iu(u):[],...iu(s)]:[];d.forEach(y=>{n&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const m=u&&o?TO(u,r):null;let x=-1,g=null;l&&(g=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&g&&(g.unobserve(s),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(s)})),r()}),u&&!c&&g.observe(u),g.observe(s));let p,f=c?uo(t):null;c&&b();function b(){const y=uo(t);f&&!QS(f,y)&&r(),f=y,p=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(v=>{n&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),m==null||m(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(p)}}const AO=tO,RO=sO,FO=QI,DO=aO,IO=ZI,Lj=JI,OO=rO,MO=(t,s,r)=>{const a=new Map,n={platform:PO,...r},i={...n.platform,_c:a};return XI(t,s,{...n,platform:i})};var BO=typeof document<"u",LO=function(){},h0=BO?h.useLayoutEffect:LO;function $0(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,a,n;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(a=r;a--!==0;)if(!$0(t[a],s[a]))return!1;return!0}if(n=Object.keys(t),r=n.length,r!==Object.keys(s).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(s,n[a]))return!1;for(a=r;a--!==0;){const i=n[a];if(!(i==="_owner"&&t.$$typeof)&&!$0(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function ZS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $j(t,s){const r=ZS(t);return Math.round(s*r)/r}function gf(t){const s=h.useRef(t);return h0(()=>{s.current=t}),s}function $O(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:a=[],platform:n,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:u}=t,[d,m]=h.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[x,g]=h.useState(a);$0(x,a)||g(a);const[p,f]=h.useState(null),[b,y]=h.useState(null),v=h.useCallback(V=>{V!==C.current&&(C.current=V,f(V))},[]),N=h.useCallback(V=>{V!==j.current&&(j.current=V,y(V))},[]),S=i||p,w=l||b,C=h.useRef(null),j=h.useRef(null),k=h.useRef(d),E=c!=null,R=gf(c),D=gf(n),P=gf(u),T=h.useCallback(()=>{if(!C.current||!j.current)return;const V={placement:s,strategy:r,middleware:x};D.current&&(V.platform=D.current),MO(C.current,j.current,V).then(_=>{const G={..._,isPositioned:P.current!==!1};B.current&&!$0(k.current,G)&&(k.current=G,Cl.flushSync(()=>{m(G)}))})},[x,s,r,D,P]);h0(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,m(V=>({...V,isPositioned:!1})))},[u]);const B=h.useRef(!1);h0(()=>(B.current=!0,()=>{B.current=!1}),[]),h0(()=>{if(S&&(C.current=S),w&&(j.current=w),S&&w){if(R.current)return R.current(S,w,T);T()}},[S,w,T,R,E]);const F=h.useMemo(()=>({reference:C,floating:j,setReference:v,setFloating:N}),[v,N]),L=h.useMemo(()=>({reference:S,floating:w}),[S,w]),I=h.useMemo(()=>{const V={position:r,left:0,top:0};if(!L.floating)return V;const _=$j(L.floating,d.x),G=$j(L.floating,d.y);return o?{...V,transform:"translate("+_+"px, "+G+"px)",...ZS(L.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:_,top:G}},[r,o,L.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:T,refs:F,elements:L,floatingStyles:I}),[d,T,F,L,I])}const UO=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:a,padding:n}=typeof t=="function"?t(r):t;return a&&s(a)?a.current!=null?Lj({element:a.current,padding:n}).fn(r):{}:a?Lj({element:a,padding:n}).fn(r):{}}}},HO=(t,s)=>({...AO(t),options:[t,s]}),WO=(t,s)=>({...RO(t),options:[t,s]}),VO=(t,s)=>({...OO(t),options:[t,s]}),zO=(t,s)=>({...FO(t),options:[t,s]}),GO=(t,s)=>({...DO(t),options:[t,s]}),qO=(t,s)=>({...IO(t),options:[t,s]}),YO=(t,s)=>({...UO(t),options:[t,s]});var KO="Arrow",eC=h.forwardRef((t,s)=>{const{children:r,width:a=10,height:n=5,...i}=t;return e.jsx(ar.svg,{...i,ref:s,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});eC.displayName=KO;var XO=eC;function JO(t){const[s,r]=h.useState(void 0);return ya(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;l=u.inlineSize,o=u.blockSize}else l=t.offsetWidth,o=t.offsetHeight;r({width:l,height:o})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else r(void 0)},[t]),s}var Vb="Popper",[tC,zx]=Lx(Vb),[QO,sC]=tC(Vb),rC=t=>{const{__scopePopper:s,children:r}=t,[a,n]=h.useState(null);return e.jsx(QO,{scope:s,anchor:a,onAnchorChange:n,children:r})};rC.displayName=Vb;var aC="PopperAnchor",nC=h.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:a,...n}=t,i=sC(aC,r),l=h.useRef(null),o=wr(s,l),c=h.useRef(null);return h.useEffect(()=>{const u=c.current;c.current=(a==null?void 0:a.current)||l.current,u!==c.current&&i.onAnchorChange(c.current)}),a?null:e.jsx(ar.div,{...n,ref:o})});nC.displayName=aC;var zb="PopperContent",[ZO,eM]=tC(zb),iC=h.forwardRef((t,s)=>{var z,H,Q,J,ie,K;const{__scopePopper:r,side:a="bottom",sideOffset:n=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:x=!1,updatePositionStrategy:g="optimized",onPlaced:p,...f}=t,b=sC(zb,r),[y,v]=h.useState(null),N=wr(s,oe=>v(oe)),[S,w]=h.useState(null),C=JO(S),j=(C==null?void 0:C.width)??0,k=(C==null?void 0:C.height)??0,E=a+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(u)?u:[u],P=D.length>0,T={padding:R,boundary:D.filter(sM),altBoundary:P},{refs:B,floatingStyles:F,placement:L,isPositioned:I,middlewareData:V}=$O({strategy:"fixed",placement:E,whileElementsMounted:(...oe)=>_O(...oe,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[HO({mainAxis:n+k,alignmentAxis:l}),c&&WO({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?VO():void 0,...T}),c&&zO({...T}),GO({...T,apply:({elements:oe,rects:le,availableWidth:Se,availableHeight:Ee})=>{const{width:ye,height:We}=le.reference,fe=oe.floating.style;fe.setProperty("--radix-popper-available-width",`${Se}px`),fe.setProperty("--radix-popper-available-height",`${Ee}px`),fe.setProperty("--radix-popper-anchor-width",`${ye}px`),fe.setProperty("--radix-popper-anchor-height",`${We}px`)}}),S&&YO({element:S,padding:o}),rM({arrowWidth:j,arrowHeight:k}),x&&qO({strategy:"referenceHidden",...T})]}),[_,G]=cC(L),U=co(p);ya(()=>{I&&(U==null||U())},[I,U]);const A=(z=V.arrow)==null?void 0:z.x,q=(H=V.arrow)==null?void 0:H.y,Y=((Q=V.arrow)==null?void 0:Q.centerOffset)!==0,[O,W]=h.useState();return ya(()=>{y&&W(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:I?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O,"--radix-popper-transform-origin":[(J=V.transformOrigin)==null?void 0:J.x,(ie=V.transformOrigin)==null?void 0:ie.y].join(" "),...((K=V.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(ZO,{scope:r,placedSide:_,onArrowChange:w,arrowX:A,arrowY:q,shouldHideArrow:Y,children:e.jsx(ar.div,{"data-side":_,"data-align":G,...f,ref:N,style:{...f.style,animation:I?void 0:"none"}})})})});iC.displayName=zb;var lC="PopperArrow",tM={top:"bottom",right:"left",bottom:"top",left:"right"},oC=h.forwardRef(function(s,r){const{__scopePopper:a,...n}=s,i=eM(lC,a),l=tM[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(XO,{...n,ref:r,style:{...n.style,display:"block"}})})});oC.displayName=lC;function sM(t){return t!==null}var rM=t=>({name:"transformOrigin",options:t,fn(s){var b,y,v;const{placement:r,rects:a,middlewareData:n}=s,l=((b=n.arrow)==null?void 0:b.centerOffset)!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[u,d]=cC(r),m={start:"0%",center:"50%",end:"100%"}[d],x=(((y=n.arrow)==null?void 0:y.x)??0)+o/2,g=(((v=n.arrow)==null?void 0:v.y)??0)+c/2;let p="",f="";return u==="bottom"?(p=l?m:`${x}px`,f=`${-c}px`):u==="top"?(p=l?m:`${x}px`,f=`${a.floating.height+c}px`):u==="right"?(p=`${-c}px`,f=l?m:`${g}px`):u==="left"&&(p=`${a.floating.width+c}px`,f=l?m:`${g}px`),{data:{x:p,y:f}}}});function cC(t){const[s,r="center"]=t.split("-");return[s,r]}var dC=rC,Gb=nC,uC=iC,mC=oC,aM="Portal",qb=h.forwardRef((t,s)=>{var o;const{container:r,...a}=t,[n,i]=h.useState(!1);ya(()=>i(!0),[]);const l=r||n&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?xg.createPortal(e.jsx(ar.div,{...a,ref:s}),l):null});qb.displayName=aM;var nM=Mc[" useInsertionEffect ".trim().toString()]||ya;function Kg({prop:t,defaultProp:s,onChange:r=()=>{},caller:a}){const[n,i,l]=iM({defaultProp:s,onChange:r}),o=t!==void 0,c=o?t:n;{const d=h.useRef(t!==void 0);h.useEffect(()=>{const m=d.current;m!==o&&console.warn(`${a} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,a])}const u=h.useCallback(d=>{var m;if(o){const x=lM(d)?d(t):d;x!==t&&((m=l.current)==null||m.call(l,x))}else i(d)},[o,t,i,l]);return[c,u]}function iM({defaultProp:t,onChange:s}){const[r,a]=h.useState(t),n=h.useRef(r),i=h.useRef(s);return nM(()=>{i.current=s},[s]),h.useEffect(()=>{var l;n.current!==r&&((l=i.current)==null||l.call(i,r),n.current=r)},[r,n]),[r,a,i]}function lM(t){return typeof t=="function"}function oM(t){const s=h.useRef({value:t,previous:t});return h.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var xC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cM="VisuallyHidden",dM=h.forwardRef((t,s)=>e.jsx(ar.span,{...t,ref:s,style:{...xC,...t.style}}));dM.displayName=cM;var uM=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Mo=new WeakMap,Cm=new WeakMap,km={},pf=0,hC=function(t){return t&&(t.host||hC(t.parentNode))},mM=function(t,s){return s.map(function(r){if(t.contains(r))return r;var a=hC(r);return a&&t.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},xM=function(t,s,r,a){var n=mM(s,Array.isArray(t)?t:[t]);km[r]||(km[r]=new WeakMap);var i=km[r],l=[],o=new Set,c=new Set(n),u=function(m){!m||o.has(m)||(o.add(m),u(m.parentNode))};n.forEach(u);var d=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(x){if(o.has(x))d(x);else try{var g=x.getAttribute(a),p=g!==null&&g!=="false",f=(Mo.get(x)||0)+1,b=(i.get(x)||0)+1;Mo.set(x,f),i.set(x,b),l.push(x),f===1&&p&&Cm.set(x,!0),b===1&&x.setAttribute(r,"true"),p||x.setAttribute(a,"true")}catch(y){console.error("aria-hidden: cannot operate on ",x,y)}})};return d(s),o.clear(),pf++,function(){l.forEach(function(m){var x=Mo.get(m)-1,g=i.get(m)-1;Mo.set(m,x),i.set(m,g),x||(Cm.has(m)||m.removeAttribute(a),Cm.delete(m)),g||m.removeAttribute(r)}),pf--,pf||(Mo=new WeakMap,Mo=new WeakMap,Cm=new WeakMap,km={})}},fC=function(t,s,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),n=uM(t);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),xM(a,n,r,"aria-hidden")):function(){return null}},ri=function(){return ri=Object.assign||function(s){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},ri.apply(this,arguments)};function gC(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function hM(t,s,r){if(r||arguments.length===2)for(var a=0,n=s.length,i;a<n;a++)(i||!(a in s))&&(i||(i=Array.prototype.slice.call(s,0,a)),i[a]=s[a]);return t.concat(i||Array.prototype.slice.call(s))}var f0="right-scroll-bar-position",g0="width-before-scroll-bar",fM="with-scroll-bars-hidden",gM="--removed-body-scroll-bar-size";function bf(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function pM(t,s){var r=h.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(a){var n=r.value;n!==a&&(r.value=a,r.callback(a,n))}}}})[0];return r.callback=s,r.facade}var bM=typeof window<"u"?h.useLayoutEffect:h.useEffect,Uj=new WeakMap;function yM(t,s){var r=pM(null,function(a){return t.forEach(function(n){return bf(n,a)})});return bM(function(){var a=Uj.get(r);if(a){var n=new Set(a),i=new Set(t),l=r.current;n.forEach(function(o){i.has(o)||bf(o,null)}),i.forEach(function(o){n.has(o)||bf(o,l)})}Uj.set(r,t)},[t]),r}function vM(t){return t}function jM(t,s){s===void 0&&(s=vM);var r=[],a=!1,n={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=s(i,a);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(a=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){a=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(i),l=r}var c=function(){var d=l;l=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){l.push(d),u()},filter:function(d){return l=l.filter(d),r}}}};return n}function wM(t){t===void 0&&(t={});var s=jM(null);return s.options=ri({async:!0,ssr:!1},t),s}var pC=function(t){var s=t.sideCar,r=gC(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=s.read();if(!a)throw new Error("Sidecar medium not found");return h.createElement(a,ri({},r))};pC.isSideCarExport=!0;function NM(t,s){return t.useMedium(s),pC}var bC=wM(),yf=function(){},Gx=h.forwardRef(function(t,s){var r=h.useRef(null),a=h.useState({onScrollCapture:yf,onWheelCapture:yf,onTouchMoveCapture:yf}),n=a[0],i=a[1],l=t.forwardProps,o=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,m=t.shards,x=t.sideCar,g=t.noRelative,p=t.noIsolation,f=t.inert,b=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,N=t.gapMode,S=gC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=x,C=yM([r,s]),j=ri(ri({},S),n);return h.createElement(h.Fragment,null,d&&h.createElement(w,{sideCar:bC,removeScrollBar:u,shards:m,noRelative:g,noIsolation:p,inert:f,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:N}),l?h.cloneElement(h.Children.only(o),ri(ri({},j),{ref:C})):h.createElement(v,ri({},j,{className:c,ref:C}),o))});Gx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gx.classNames={fullWidth:g0,zeroRight:f0};var SM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function CM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=SM();return s&&t.setAttribute("nonce",s),t}function kM(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function EM(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var PM=function(){var t=0,s=null;return{add:function(r){t==0&&(s=CM())&&(kM(s,r),EM(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},TM=function(){var t=PM();return function(s,r){h.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},yC=function(){var t=TM(),s=function(r){var a=r.styles,n=r.dynamic;return t(a,n),null};return s},_M={left:0,top:0,right:0,gap:0},vf=function(t){return parseInt(t||"",10)||0},AM=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],a=s[t==="padding"?"paddingTop":"marginTop"],n=s[t==="padding"?"paddingRight":"marginRight"];return[vf(r),vf(a),vf(n)]},RM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return _M;var s=AM(t),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,a-r+s[2]-s[0])}},FM=yC(),dc="data-scroll-locked",DM=function(t,s,r,a){var n=t.left,i=t.top,l=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(fM,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(o,"px ").concat(a,`;
  }
  body[`).concat(dc,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(f0,` {
    right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(g0,` {
    margin-right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(f0," .").concat(f0,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(g0," .").concat(g0,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(dc,`] {
    `).concat(gM,": ").concat(o,`px;
  }
`)},Hj=function(){var t=parseInt(document.body.getAttribute(dc)||"0",10);return isFinite(t)?t:0},IM=function(){h.useEffect(function(){return document.body.setAttribute(dc,(Hj()+1).toString()),function(){var t=Hj()-1;t<=0?document.body.removeAttribute(dc):document.body.setAttribute(dc,t.toString())}},[])},OM=function(t){var s=t.noRelative,r=t.noImportant,a=t.gapMode,n=a===void 0?"margin":a;IM();var i=h.useMemo(function(){return RM(n)},[n]);return h.createElement(FM,{styles:DM(i,!s,n,r?"":"!important")})},Xg=!1;if(typeof window<"u")try{var Em=Object.defineProperty({},"passive",{get:function(){return Xg=!0,!0}});window.addEventListener("test",Em,Em),window.removeEventListener("test",Em,Em)}catch{Xg=!1}var Bo=Xg?{passive:!1}:!1,MM=function(t){return t.tagName==="TEXTAREA"},vC=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!MM(t)&&r[s]==="visible")},BM=function(t){return vC(t,"overflowY")},LM=function(t){return vC(t,"overflowX")},Wj=function(t,s){var r=s.ownerDocument,a=s;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=jC(t,a);if(n){var i=wC(t,a),l=i[1],o=i[2];if(l>o)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},$M=function(t){var s=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;return[s,r,a]},UM=function(t){var s=t.scrollLeft,r=t.scrollWidth,a=t.clientWidth;return[s,r,a]},jC=function(t,s){return t==="v"?BM(s):LM(s)},wC=function(t,s){return t==="v"?$M(s):UM(s)},HM=function(t,s){return t==="h"&&s==="rtl"?-1:1},WM=function(t,s,r,a,n){var i=HM(t,window.getComputedStyle(s).direction),l=i*a,o=r.target,c=s.contains(o),u=!1,d=l>0,m=0,x=0;do{if(!o)break;var g=wC(t,o),p=g[0],f=g[1],b=g[2],y=f-b-i*p;(p||y)&&jC(t,o)&&(m+=y,x+=p);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(d&&Math.abs(m)<1||!d&&Math.abs(x)<1)&&(u=!0),u},Pm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Vj=function(t){return[t.deltaX,t.deltaY]},zj=function(t){return t&&"current"in t?t.current:t},VM=function(t,s){return t[0]===s[0]&&t[1]===s[1]},zM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GM=0,Lo=[];function qM(t){var s=h.useRef([]),r=h.useRef([0,0]),a=h.useRef(),n=h.useState(GM++)[0],i=h.useState(yC)[0],l=h.useRef(t);h.useEffect(function(){l.current=t},[t]),h.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var f=hM([t.lockRef.current],(t.shards||[]).map(zj),!0).filter(Boolean);return f.forEach(function(b){return b.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),f.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var o=h.useCallback(function(f,b){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!l.current.allowPinchZoom;var y=Pm(f),v=r.current,N="deltaX"in f?f.deltaX:v[0]-y[0],S="deltaY"in f?f.deltaY:v[1]-y[1],w,C=f.target,j=Math.abs(N)>Math.abs(S)?"h":"v";if("touches"in f&&j==="h"&&C.type==="range")return!1;var k=Wj(j,C);if(!k)return!0;if(k?w=j:(w=j==="v"?"h":"v",k=Wj(j,C)),!k)return!1;if(!a.current&&"changedTouches"in f&&(N||S)&&(a.current=w),!w)return!0;var E=a.current||w;return WM(E,b,f,E==="h"?N:S)},[]),c=h.useCallback(function(f){var b=f;if(!(!Lo.length||Lo[Lo.length-1]!==i)){var y="deltaY"in b?Vj(b):Pm(b),v=s.current.filter(function(w){return w.name===b.type&&(w.target===b.target||b.target===w.shadowParent)&&VM(w.delta,y)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var N=(l.current.shards||[]).map(zj).filter(Boolean).filter(function(w){return w.contains(b.target)}),S=N.length>0?o(b,N[0]):!l.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),u=h.useCallback(function(f,b,y,v){var N={name:f,delta:b,target:y,should:v,shadowParent:YM(y)};s.current.push(N),setTimeout(function(){s.current=s.current.filter(function(S){return S!==N})},1)},[]),d=h.useCallback(function(f){r.current=Pm(f),a.current=void 0},[]),m=h.useCallback(function(f){u(f.type,Vj(f),f.target,o(f,t.lockRef.current))},[]),x=h.useCallback(function(f){u(f.type,Pm(f),f.target,o(f,t.lockRef.current))},[]);h.useEffect(function(){return Lo.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",c,Bo),document.addEventListener("touchmove",c,Bo),document.addEventListener("touchstart",d,Bo),function(){Lo=Lo.filter(function(f){return f!==i}),document.removeEventListener("wheel",c,Bo),document.removeEventListener("touchmove",c,Bo),document.removeEventListener("touchstart",d,Bo)}},[]);var g=t.removeScrollBar,p=t.inert;return h.createElement(h.Fragment,null,p?h.createElement(i,{styles:zM(n)}):null,g?h.createElement(OM,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function YM(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const KM=NM(bC,qM);var Yb=h.forwardRef(function(t,s){return h.createElement(Gx,ri({},t,{ref:s,sideCar:KM}))});Yb.classNames=Gx.classNames;var XM=[" ","Enter","ArrowUp","ArrowDown"],JM=[" ","Enter"],mo="Select",[qx,Yx,QM]=pI(mo),[qc]=Lx(mo,[QM,zx]),Kx=zx(),[ZM,_l]=qc(mo),[e8,t8]=qc(mo),NC=t=>{const{__scopeSelect:s,children:r,open:a,defaultOpen:n,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:u,name:d,autoComplete:m,disabled:x,required:g,form:p}=t,f=Kx(s),[b,y]=h.useState(null),[v,N]=h.useState(null),[S,w]=h.useState(!1),C=yI(u),[j,k]=Kg({prop:a,defaultProp:n??!1,onChange:i,caller:mo}),[E,R]=Kg({prop:l,defaultProp:o,onChange:c,caller:mo}),D=h.useRef(null),P=b?p||!!b.closest("form"):!0,[T,B]=h.useState(new Set),F=Array.from(T).map(L=>L.props.value).join(";");return e.jsx(dC,{...f,children:e.jsxs(ZM,{required:g,scope:s,trigger:b,onTriggerChange:y,valueNode:v,onValueNodeChange:N,valueNodeHasChildren:S,onValueNodeHasChildrenChange:w,contentId:$x(),value:E,onValueChange:R,open:j,onOpenChange:k,dir:C,triggerPointerDownPosRef:D,disabled:x,children:[e.jsx(qx.Provider,{scope:s,children:e.jsx(e8,{scope:t.__scopeSelect,onNativeOptionAdd:h.useCallback(L=>{B(I=>new Set(I).add(L))},[]),onNativeOptionRemove:h.useCallback(L=>{B(I=>{const V=new Set(I);return V.delete(L),V})},[]),children:r})}),P?e.jsxs(YC,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:m,value:E,onChange:L=>R(L.target.value),disabled:x,form:p,children:[E===void 0?e.jsx("option",{value:""}):null,Array.from(T)]},F):null]})})};NC.displayName=mo;var SC="SelectTrigger",CC=h.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:a=!1,...n}=t,i=Kx(r),l=_l(SC,r),o=l.disabled||a,c=wr(s,l.onTriggerChange),u=Yx(r),d=h.useRef("touch"),[m,x,g]=XC(f=>{const b=u().filter(N=>!N.disabled),y=b.find(N=>N.value===l.value),v=JC(b,f,y);v!==void 0&&l.onValueChange(v.value)}),p=f=>{o||(l.onOpenChange(!0),g()),f&&(l.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(Gb,{asChild:!0,...i,children:e.jsx(ar.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":KC(l.value)?"":void 0,...n,ref:c,onClick:Us(n.onClick,f=>{f.currentTarget.focus(),d.current!=="mouse"&&p(f)}),onPointerDown:Us(n.onPointerDown,f=>{d.current=f.pointerType;const b=f.target;b.hasPointerCapture(f.pointerId)&&b.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(p(f),f.preventDefault())}),onKeyDown:Us(n.onKeyDown,f=>{const b=m.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&x(f.key),!(b&&f.key===" ")&&XM.includes(f.key)&&(p(),f.preventDefault())})})})});CC.displayName=SC;var kC="SelectValue",EC=h.forwardRef((t,s)=>{const{__scopeSelect:r,className:a,style:n,children:i,placeholder:l="",...o}=t,c=_l(kC,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,m=wr(s,c.onValueNodeChange);return ya(()=>{u(d)},[u,d]),e.jsx(ar.span,{...o,ref:m,style:{pointerEvents:"none"},children:KC(c.value)?e.jsx(e.Fragment,{children:l}):i})});EC.displayName=kC;var s8="SelectIcon",PC=h.forwardRef((t,s)=>{const{__scopeSelect:r,children:a,...n}=t;return e.jsx(ar.span,{"aria-hidden":!0,...n,ref:s,children:a||"▼"})});PC.displayName=s8;var r8="SelectPortal",TC=t=>e.jsx(qb,{asChild:!0,...t});TC.displayName=r8;var xo="SelectContent",_C=h.forwardRef((t,s)=>{const r=_l(xo,t.__scopeSelect),[a,n]=h.useState();if(ya(()=>{n(new DocumentFragment)},[]),!r.open){const i=a;return i?Cl.createPortal(e.jsx(AC,{scope:t.__scopeSelect,children:e.jsx(qx.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(RC,{...t,ref:s})});_C.displayName=xo;var Pn=10,[AC,Al]=qc(xo),a8="SelectContentImpl",n8=jc("SelectContent.RemoveScroll"),RC=h.forwardRef((t,s)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:m,collisionBoundary:x,collisionPadding:g,sticky:p,hideWhenDetached:f,avoidCollisions:b,...y}=t,v=_l(xo,r),[N,S]=h.useState(null),[w,C]=h.useState(null),j=wr(s,z=>S(z)),[k,E]=h.useState(null),[R,D]=h.useState(null),P=Yx(r),[T,B]=h.useState(!1),F=h.useRef(!1);h.useEffect(()=>{if(N)return fC(N)},[N]),US();const L=h.useCallback(z=>{const[H,...Q]=P().map(K=>K.ref.current),[J]=Q.slice(-1),ie=document.activeElement;for(const K of z)if(K===ie||(K==null||K.scrollIntoView({block:"nearest"}),K===H&&w&&(w.scrollTop=0),K===J&&w&&(w.scrollTop=w.scrollHeight),K==null||K.focus(),document.activeElement!==ie))return},[P,w]),I=h.useCallback(()=>L([k,N]),[L,k,N]);h.useEffect(()=>{T&&I()},[T,I]);const{onOpenChange:V,triggerPointerDownPosRef:_}=v;h.useEffect(()=>{if(N){let z={x:0,y:0};const H=J=>{var ie,K;z={x:Math.abs(Math.round(J.pageX)-(((ie=_.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(J.pageY)-(((K=_.current)==null?void 0:K.y)??0))}},Q=J=>{z.x<=10&&z.y<=10?J.preventDefault():N.contains(J.target)||V(!1),document.removeEventListener("pointermove",H),_.current=null};return _.current!==null&&(document.addEventListener("pointermove",H),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",Q,{capture:!0})}}},[N,V,_]),h.useEffect(()=>{const z=()=>V(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[V]);const[G,U]=XC(z=>{const H=P().filter(ie=>!ie.disabled),Q=H.find(ie=>ie.ref.current===document.activeElement),J=JC(H,z,Q);J&&setTimeout(()=>J.ref.current.focus())}),A=h.useCallback((z,H,Q)=>{const J=!F.current&&!Q;(v.value!==void 0&&v.value===H||J)&&(E(z),J&&(F.current=!0))},[v.value]),q=h.useCallback(()=>N==null?void 0:N.focus(),[N]),Y=h.useCallback((z,H,Q)=>{const J=!F.current&&!Q;(v.value!==void 0&&v.value===H||J)&&D(z)},[v.value]),O=a==="popper"?Jg:FC,W=O===Jg?{side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:m,collisionBoundary:x,collisionPadding:g,sticky:p,hideWhenDetached:f,avoidCollisions:b}:{};return e.jsx(AC,{scope:r,content:N,viewport:w,onViewportChange:C,itemRefCallback:A,selectedItem:k,onItemLeave:q,itemTextRefCallback:Y,focusSelectedItem:I,selectedItemText:R,position:a,isPositioned:T,searchRef:G,children:e.jsx(Yb,{as:n8,allowPinchZoom:!0,children:e.jsx(Mb,{asChild:!0,trapped:v.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:Us(n,z=>{var H;(H=v.trigger)==null||H.focus({preventScroll:!0}),z.preventDefault()}),children:e.jsx(Ob,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:e.jsx(O,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:z=>z.preventDefault(),...y,...W,onPlaced:()=>B(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Us(y.onKeyDown,z=>{const H=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!H&&z.key.length===1&&U(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let J=P().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(z.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const ie=z.target,K=J.indexOf(ie);J=J.slice(K+1)}setTimeout(()=>L(J)),z.preventDefault()}})})})})})})});RC.displayName=a8;var i8="SelectItemAlignedPosition",FC=h.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:a,...n}=t,i=_l(xo,r),l=Al(xo,r),[o,c]=h.useState(null),[u,d]=h.useState(null),m=wr(s,j=>d(j)),x=Yx(r),g=h.useRef(!1),p=h.useRef(!0),{viewport:f,selectedItem:b,selectedItemText:y,focusSelectedItem:v}=l,N=h.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&f&&b&&y){const j=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(i.dir!=="rtl"){const ie=R.left-k.left,K=E.left-ie,oe=j.left-K,le=j.width+oe,Se=Math.max(le,k.width),Ee=window.innerWidth-Pn,ye=jj(K,[Pn,Math.max(Pn,Ee-Se)]);o.style.minWidth=le+"px",o.style.left=ye+"px"}else{const ie=k.right-R.right,K=window.innerWidth-E.right-ie,oe=window.innerWidth-j.right-K,le=j.width+oe,Se=Math.max(le,k.width),Ee=window.innerWidth-Pn,ye=jj(K,[Pn,Math.max(Pn,Ee-Se)]);o.style.minWidth=le+"px",o.style.right=ye+"px"}const D=x(),P=window.innerHeight-Pn*2,T=f.scrollHeight,B=window.getComputedStyle(u),F=parseInt(B.borderTopWidth,10),L=parseInt(B.paddingTop,10),I=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),_=F+L+T+V+I,G=Math.min(b.offsetHeight*5,_),U=window.getComputedStyle(f),A=parseInt(U.paddingTop,10),q=parseInt(U.paddingBottom,10),Y=j.top+j.height/2-Pn,O=P-Y,W=b.offsetHeight/2,z=b.offsetTop+W,H=F+L+z,Q=_-H;if(H<=Y){const ie=D.length>0&&b===D[D.length-1].ref.current;o.style.bottom="0px";const K=u.clientHeight-f.offsetTop-f.offsetHeight,oe=Math.max(O,W+(ie?q:0)+K+I),le=H+oe;o.style.height=le+"px"}else{const ie=D.length>0&&b===D[0].ref.current;o.style.top="0px";const oe=Math.max(Y,F+f.offsetTop+(ie?A:0)+W)+Q;o.style.height=oe+"px",f.scrollTop=H-Y+f.offsetTop}o.style.margin=`${Pn}px 0`,o.style.minHeight=G+"px",o.style.maxHeight=P+"px",a==null||a(),requestAnimationFrame(()=>g.current=!0)}},[x,i.trigger,i.valueNode,o,u,f,b,y,i.dir,a]);ya(()=>N(),[N]);const[S,w]=h.useState();ya(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const C=h.useCallback(j=>{j&&p.current===!0&&(N(),v==null||v(),p.current=!1)},[N,v]);return e.jsx(o8,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:C,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:e.jsx(ar.div,{...n,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});FC.displayName=i8;var l8="SelectPopperPosition",Jg=h.forwardRef((t,s)=>{const{__scopeSelect:r,align:a="start",collisionPadding:n=Pn,...i}=t,l=Kx(r);return e.jsx(uC,{...l,...i,ref:s,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jg.displayName=l8;var[o8,Kb]=qc(xo,{}),Qg="SelectViewport",DC=h.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:a,...n}=t,i=Al(Qg,r),l=Kb(Qg,r),o=wr(s,i.onViewportChange),c=h.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(qx.Slot,{scope:r,children:e.jsx(ar.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Us(n.onScroll,u=>{const d=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&m){const g=Math.abs(c.current-d.scrollTop);if(g>0){const p=window.innerHeight-Pn*2,f=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),y=Math.max(f,b);if(y<p){const v=y+g,N=Math.min(p,v),S=v-N;m.style.height=N+"px",m.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});DC.displayName=Qg;var IC="SelectGroup",[c8,d8]=qc(IC),OC=h.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=$x();return e.jsx(c8,{scope:r,id:n,children:e.jsx(ar.div,{role:"group","aria-labelledby":n,...a,ref:s})})});OC.displayName=IC;var MC="SelectLabel",BC=h.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=d8(MC,r);return e.jsx(ar.div,{id:n.id,...a,ref:s})});BC.displayName=MC;var U0="SelectItem",[u8,LC]=qc(U0),$C=h.forwardRef((t,s)=>{const{__scopeSelect:r,value:a,disabled:n=!1,textValue:i,...l}=t,o=_l(U0,r),c=Al(U0,r),u=o.value===a,[d,m]=h.useState(i??""),[x,g]=h.useState(!1),p=wr(s,v=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,v,a,n)}),f=$x(),b=h.useRef("touch"),y=()=>{n||(o.onValueChange(a),o.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(u8,{scope:r,value:a,disabled:n,textId:f,isSelected:u,onItemTextChange:h.useCallback(v=>{m(N=>N||((v==null?void 0:v.textContent)??"").trim())},[]),children:e.jsx(qx.ItemSlot,{scope:r,value:a,disabled:n,textValue:d,children:e.jsx(ar.div,{role:"option","aria-labelledby":f,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...l,ref:p,onFocus:Us(l.onFocus,()=>g(!0)),onBlur:Us(l.onBlur,()=>g(!1)),onClick:Us(l.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:Us(l.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:Us(l.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:Us(l.onPointerMove,v=>{var N;b.current=v.pointerType,n?(N=c.onItemLeave)==null||N.call(c):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Us(l.onPointerLeave,v=>{var N;v.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Us(l.onKeyDown,v=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(JM.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});$C.displayName=U0;var Pd="SelectItemText",UC=h.forwardRef((t,s)=>{const{__scopeSelect:r,className:a,style:n,...i}=t,l=_l(Pd,r),o=Al(Pd,r),c=LC(Pd,r),u=t8(Pd,r),[d,m]=h.useState(null),x=wr(s,y=>m(y),c.onItemTextChange,y=>{var v;return(v=o.itemTextRefCallback)==null?void 0:v.call(o,y,c.value,c.disabled)}),g=d==null?void 0:d.textContent,p=h.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:f,onNativeOptionRemove:b}=u;return ya(()=>(f(p),()=>b(p)),[f,b,p]),e.jsxs(e.Fragment,{children:[e.jsx(ar.span,{id:c.textId,...i,ref:x}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Cl.createPortal(i.children,l.valueNode):null]})});UC.displayName=Pd;var HC="SelectItemIndicator",WC=h.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t;return LC(HC,r).isSelected?e.jsx(ar.span,{"aria-hidden":!0,...a,ref:s}):null});WC.displayName=HC;var Zg="SelectScrollUpButton",VC=h.forwardRef((t,s)=>{const r=Al(Zg,t.__scopeSelect),a=Kb(Zg,t.__scopeSelect),[n,i]=h.useState(!1),l=wr(s,a.onScrollButtonChange);return ya(()=>{if(r.viewport&&r.isPositioned){let o=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),n?e.jsx(GC,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});VC.displayName=Zg;var ep="SelectScrollDownButton",zC=h.forwardRef((t,s)=>{const r=Al(ep,t.__scopeSelect),a=Kb(ep,t.__scopeSelect),[n,i]=h.useState(!1),l=wr(s,a.onScrollButtonChange);return ya(()=>{if(r.viewport&&r.isPositioned){let o=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),n?e.jsx(GC,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});zC.displayName=ep;var GC=h.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:a,...n}=t,i=Al("SelectScrollButton",r),l=h.useRef(null),o=Yx(r),c=h.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),ya(()=>{var d;const u=o().find(m=>m.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),e.jsx(ar.div,{"aria-hidden":!0,...n,ref:s,style:{flexShrink:0,...n.style},onPointerDown:Us(n.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(a,50))}),onPointerMove:Us(n.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),l.current===null&&(l.current=window.setInterval(a,50))}),onPointerLeave:Us(n.onPointerLeave,()=>{c()})})}),m8="SelectSeparator",qC=h.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t;return e.jsx(ar.div,{"aria-hidden":!0,...a,ref:s})});qC.displayName=m8;var tp="SelectArrow",x8=h.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=Kx(r),i=_l(tp,r),l=Al(tp,r);return i.open&&l.position==="popper"?e.jsx(mC,{...n,...a,ref:s}):null});x8.displayName=tp;var h8="SelectBubbleInput",YC=h.forwardRef(({__scopeSelect:t,value:s,...r},a)=>{const n=h.useRef(null),i=wr(a,n),l=oM(s);return h.useEffect(()=>{const o=n.current;if(!o)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&d){const m=new Event("change",{bubbles:!0});d.call(o,s),o.dispatchEvent(m)}},[l,s]),e.jsx(ar.select,{...r,style:{...xC,...r.style},ref:i,defaultValue:s})});YC.displayName=h8;function KC(t){return t===""||t===void 0}function XC(t){const s=co(t),r=h.useRef(""),a=h.useRef(0),n=h.useCallback(l=>{const o=r.current+l;s(o),function c(u){r.current=u,window.clearTimeout(a.current),u!==""&&(a.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),i=h.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,n,i]}function JC(t,s,r){const n=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let l=f8(t,Math.max(i,0));n.length===1&&(l=l.filter(u=>u!==r));const c=l.find(u=>u.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==r?c:void 0}function f8(t,s){return t.map((r,a)=>t[(s+a)%t.length])}var g8=NC,QC=CC,p8=EC,b8=PC,y8=TC,ZC=_C,v8=DC,j8=OC,e4=BC,t4=$C,w8=UC,N8=WC,s4=VC,r4=zC,a4=qC;const ls=g8,mi=j8,os=p8,Qt=h.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(QC,{ref:a,className:sa("flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(b8,{asChild:!0,children:e.jsx(zn,{className:"h-4 w-4 opacity-50"})})]}));Qt.displayName=QC.displayName;const n4=h.forwardRef(({className:t,...s},r)=>e.jsx(s4,{ref:r,className:sa("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Bc,{className:"h-4 w-4"})}));n4.displayName=s4.displayName;const i4=h.forwardRef(({className:t,...s},r)=>e.jsx(r4,{ref:r,className:sa("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(zn,{className:"h-4 w-4"})}));i4.displayName=r4.displayName;const Zt=h.forwardRef(({className:t,children:s,position:r="popper",...a},n)=>e.jsx(y8,{children:e.jsxs(ZC,{ref:n,className:sa("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(n4,{}),e.jsx(v8,{className:sa("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(i4,{})]})}));Zt.displayName=ZC.displayName;const Dn=h.forwardRef(({className:t,...s},r)=>e.jsx(e4,{ref:r,className:sa("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Dn.displayName=e4.displayName;const ke=h.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(t4,{ref:a,className:sa("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(N8,{children:e.jsx(hi,{className:"h-4 w-4"})})}),e.jsx(w8,{children:s})]}));ke.displayName=t4.displayName;const Xb=h.forwardRef(({className:t,...s},r)=>e.jsx(a4,{ref:r,className:sa("-mx-1 my-1 h-px bg-gray-100",t),...s}));Xb.displayName=a4.displayName;function S8(t,s){return h.useReducer((r,a)=>s[r][a]??r,t)}var Jb=t=>{const{present:s,children:r}=t,a=C8(s),n=typeof r=="function"?r({present:a.isPresent}):h.Children.only(r),i=wr(a.ref,k8(n));return typeof r=="function"||a.isPresent?h.cloneElement(n,{ref:i}):null};Jb.displayName="Presence";function C8(t){const[s,r]=h.useState(),a=h.useRef(null),n=h.useRef(t),i=h.useRef("none"),l=t?"mounted":"unmounted",[o,c]=S8(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=Tm(a.current);i.current=o==="mounted"?u:"none"},[o]),ya(()=>{const u=a.current,d=n.current;if(d!==t){const x=i.current,g=Tm(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&x!==g?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,c]),ya(()=>{if(s){let u;const d=s.ownerDocument.defaultView??window,m=g=>{const f=Tm(a.current).includes(CSS.escape(g.animationName));if(g.target===s&&f&&(c("ANIMATION_END"),!n.current)){const b=s.style.animationFillMode;s.style.animationFillMode="forwards",u=d.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=b)})}},x=g=>{g.target===s&&(i.current=Tm(a.current))};return s.addEventListener("animationstart",x),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{d.clearTimeout(u),s.removeEventListener("animationstart",x),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:h.useCallback(u=>{a.current=u?getComputedStyle(u):null,r(u)},[])}}function Tm(t){return(t==null?void 0:t.animationName)||"none"}function k8(t){var a,n;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Xx="Popover",[l4]=Lx(Xx,[zx]),Vu=zx(),[E8,Rl]=l4(Xx),o4=t=>{const{__scopePopover:s,children:r,open:a,defaultOpen:n,onOpenChange:i,modal:l=!1}=t,o=Vu(s),c=h.useRef(null),[u,d]=h.useState(!1),[m,x]=Kg({prop:a,defaultProp:n??!1,onChange:i,caller:Xx});return e.jsx(dC,{...o,children:e.jsx(E8,{scope:s,contentId:$x(),triggerRef:c,open:m,onOpenChange:x,onOpenToggle:h.useCallback(()=>x(g=>!g),[x]),hasCustomAnchor:u,onCustomAnchorAdd:h.useCallback(()=>d(!0),[]),onCustomAnchorRemove:h.useCallback(()=>d(!1),[]),modal:l,children:r})})};o4.displayName=Xx;var c4="PopoverAnchor",P8=h.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=Rl(c4,r),i=Vu(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=n;return h.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Gb,{...i,...a,ref:s})});P8.displayName=c4;var d4="PopoverTrigger",u4=h.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=Rl(d4,r),i=Vu(r),l=wr(s,n.triggerRef),o=e.jsx(ar.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":g4(n.open),...a,ref:l,onClick:Us(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:e.jsx(Gb,{asChild:!0,...i,children:o})});u4.displayName=d4;var Qb="PopoverPortal",[T8,_8]=l4(Qb,{forceMount:void 0}),m4=t=>{const{__scopePopover:s,forceMount:r,children:a,container:n}=t,i=Rl(Qb,s);return e.jsx(T8,{scope:s,forceMount:r,children:e.jsx(Jb,{present:r||i.open,children:e.jsx(qb,{asChild:!0,container:n,children:a})})})};m4.displayName=Qb;var Nc="PopoverContent",x4=h.forwardRef((t,s)=>{const r=_8(Nc,t.__scopePopover),{forceMount:a=r.forceMount,...n}=t,i=Rl(Nc,t.__scopePopover);return e.jsx(Jb,{present:a||i.open,children:i.modal?e.jsx(R8,{...n,ref:s}):e.jsx(F8,{...n,ref:s})})});x4.displayName=Nc;var A8=jc("PopoverContent.RemoveScroll"),R8=h.forwardRef((t,s)=>{const r=Rl(Nc,t.__scopePopover),a=h.useRef(null),n=wr(s,a),i=h.useRef(!1);return h.useEffect(()=>{const l=a.current;if(l)return fC(l)},[]),e.jsx(Yb,{as:A8,allowPinchZoom:!0,children:e.jsx(h4,{...t,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Us(t.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Us(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,u=o.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Us(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),F8=h.forwardRef((t,s)=>{const r=Rl(Nc,t.__scopePopover),a=h.useRef(!1),n=h.useRef(!1);return e.jsx(h4,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(a.current||(o=r.triggerRef.current)==null||o.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const l=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),h4=h.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=t,x=Rl(Nc,r),g=Vu(r);return US(),e.jsx(Mb,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(Ob,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>x.onOpenChange(!1),children:e.jsx(uC,{"data-state":g4(x.open),role:"dialog",id:x.contentId,...g,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),f4="PopoverClose",D8=h.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=Rl(f4,r);return e.jsx(ar.button,{type:"button",...a,ref:s,onClick:Us(t.onClick,()=>n.onOpenChange(!1))})});D8.displayName=f4;var I8="PopoverArrow",O8=h.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=Vu(r);return e.jsx(mC,{...n,...a,ref:s})});O8.displayName=I8;function g4(t){return t?"open":"closed"}var M8=o4,B8=u4,L8=m4,p4=x4;const Hi=M8,Wi=B8,bi=h.forwardRef(({className:t,align:s="center",sideOffset:r=4,...a},n)=>e.jsx(L8,{children:e.jsx(p4,{ref:n,align:s,sideOffset:r,className:sa("z-50 w-72 rounded-md border border-gray-200 bg-white p-4 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));bi.displayName=p4.displayName;var kt=function(){return kt=Object.assign||function(s){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},kt.apply(this,arguments)};function $8(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function b4(t,s,r){for(var a=0,n=s.length,i;a<n;a++)(i||!(a in s))&&(i||(i=Array.prototype.slice.call(s,0,a)),i[a]=s[a]);return t.concat(i||Array.prototype.slice.call(s))}function zu(t){return t.mode==="multiple"}function Gu(t){return t.mode==="range"}function Jx(t){return t.mode==="single"}var U8={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function H8(t,s){return Zs(t,"LLLL y",s)}function W8(t,s){return Zs(t,"d",s)}function V8(t,s){return Zs(t,"LLLL",s)}function z8(t){return"".concat(t)}function G8(t,s){return Zs(t,"cccccc",s)}function q8(t,s){return Zs(t,"yyyy",s)}var Y8=Object.freeze({__proto__:null,formatCaption:H8,formatDay:W8,formatMonthCaption:V8,formatWeekNumber:z8,formatWeekdayName:G8,formatYearCaption:q8}),K8=function(t,s,r){return Zs(t,"do MMMM (EEEE)",r)},X8=function(){return"Month: "},J8=function(){return"Go to next month"},Q8=function(){return"Go to previous month"},Z8=function(t,s){return Zs(t,"cccc",s)},eB=function(t){return"Week n. ".concat(t)},tB=function(){return"Year: "},sB=Object.freeze({__proto__:null,labelDay:K8,labelMonthDropdown:X8,labelNext:J8,labelPrevious:Q8,labelWeekNumber:eB,labelWeekday:Z8,labelYearDropdown:tB});function rB(){var t="buttons",s=U8,r=OS,a={},n={},i=1,l={},o=new Date;return{captionLayout:t,classNames:s,formatters:Y8,labels:sB,locale:r,modifiersClassNames:a,modifiers:n,numberOfMonths:i,styles:l,today:o,mode:"default"}}function aB(t){var s=t.fromYear,r=t.toYear,a=t.fromMonth,n=t.toMonth,i=t.fromDate,l=t.toDate;return a?i=pa(a):s&&(i=new Date(s,0,1)),n?l=su(n):r&&(l=new Date(r,11,31)),{fromDate:i?vc(i):void 0,toDate:l?vc(l):void 0}}var y4=h.createContext(void 0);function nB(t){var s,r=t.initialProps,a=rB(),n=aB(r),i=n.fromDate,l=n.toDate,o=(s=r.captionLayout)!==null&&s!==void 0?s:a.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(Jx(r)||zu(r)||Gu(r))&&(c=r.onSelect);var u=kt(kt(kt({},a),r),{captionLayout:o,classNames:kt(kt({},a.classNames),r.classNames),components:kt({},r.components),formatters:kt(kt({},a.formatters),r.formatters),fromDate:i,labels:kt(kt({},a.labels),r.labels),mode:r.mode||a.mode,modifiers:kt(kt({},a.modifiers),r.modifiers),modifiersClassNames:kt(kt({},a.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:kt(kt({},a.styles),r.styles),toDate:l});return e.jsx(y4.Provider,{value:u,children:t.children})}function Bs(){var t=h.useContext(y4);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function v4(t){var s=Bs(),r=s.locale,a=s.classNames,n=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:a.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:r})})}function iB(t){return e.jsx("svg",kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function j4(t){var s,r,a=t.onChange,n=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,u=Bs(),d=(r=(s=u.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&r!==void 0?r:iB;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:n,onChange:a,children:i}),e.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function lB(t){var s,r=Bs(),a=r.fromDate,n=r.toDate,i=r.styles,l=r.locale,o=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!a)return e.jsx(e.Fragment,{});if(!n)return e.jsx(e.Fragment,{});var m=[];if(cI(a,n))for(var x=pa(a),g=a.getMonth();g<=n.getMonth();g++)m.push(uf(x,g));else for(var x=pa(new Date),g=0;g<=11;g++)m.push(uf(x,g));var p=function(b){var y=Number(b.target.value),v=uf(pa(t.displayMonth),y);t.onChange(v)},f=(s=u==null?void 0:u.Dropdown)!==null&&s!==void 0?s:j4;return e.jsx(f,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:p,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:m.map(function(b){return e.jsx("option",{value:b.getMonth(),children:o(b,{locale:l})},b.getMonth())})})}function oB(t){var s,r=t.displayMonth,a=Bs(),n=a.fromDate,i=a.toDate,l=a.locale,o=a.styles,c=a.classNames,u=a.components,d=a.formatters.formatYearCaption,m=a.labels.labelYearDropdown,x=[];if(!n)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var g=n.getFullYear(),p=i.getFullYear(),f=g;f<=p;f++)x.push(vj(AS(new Date),f));var b=function(v){var N=vj(pa(r),Number(v.target.value));t.onChange(N)},y=(s=u==null?void 0:u.Dropdown)!==null&&s!==void 0?s:j4;return e.jsx(y,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:b,value:r.getFullYear(),caption:d(r,{locale:l}),children:x.map(function(v){return e.jsx("option",{value:v.getFullYear(),children:d(v,{locale:l})},v.getFullYear())})})}function cB(t,s){var r=h.useState(t),a=r[0],n=r[1],i=s===void 0?a:s;return[i,n]}function dB(t){var s=t.month,r=t.defaultMonth,a=t.today,n=s||r||a||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&tu(i,n)<0){var u=-1*(c-1);n=$n(i,u)}return l&&tu(n,l)<0&&(n=l),pa(n)}function uB(){var t=Bs(),s=dB(t),r=cB(s,t.month),a=r[0],n=r[1],i=function(l){var o;if(!t.disableNavigation){var c=pa(l);n(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[a,i]}function mB(t,s){for(var r=s.reverseMonths,a=s.numberOfMonths,n=pa(t),i=pa($n(n,a)),l=tu(i,n),o=[],c=0;c<l;c++){var u=$n(n,c);o.push(u)}return r&&(o=o.reverse()),o}function xB(t,s){if(!s.disableNavigation){var r=s.toDate,a=s.pagedNavigation,n=s.numberOfMonths,i=n===void 0?1:n,l=a?i:1,o=pa(t);if(!r)return $n(o,l);var c=tu(r,t);if(!(c<i))return $n(o,l)}}function hB(t,s){if(!s.disableNavigation){var r=s.fromDate,a=s.pagedNavigation,n=s.numberOfMonths,i=n===void 0?1:n,l=a?i:1,o=pa(t);if(!r)return $n(o,-l);var c=tu(o,r);if(!(c<=0))return $n(o,-l)}}var w4=h.createContext(void 0);function fB(t){var s=Bs(),r=uB(),a=r[0],n=r[1],i=mB(a,s),l=xB(a,s),o=hB(a,s),c=function(m){return i.some(function(x){return Ib(m,x)})},u=function(m,x){c(m)||(x&&MS(m,x)?n($n(m,1+s.numberOfMonths*-1)):n(m))},d={currentMonth:a,displayMonths:i,goToMonth:n,goToDate:u,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(w4.Provider,{value:d,children:t.children})}function qu(){var t=h.useContext(w4);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Gj(t){var s,r=Bs(),a=r.classNames,n=r.styles,i=r.components,l=qu().goToMonth,o=function(d){l($n(d,t.displayIndex?-t.displayIndex:0))},c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:v4,u=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:a.caption_dropdowns,style:n.caption_dropdowns,children:[e.jsx("div",{className:a.vhidden,children:u}),e.jsx(lB,{onChange:o,displayMonth:t.displayMonth}),e.jsx(oB,{onChange:o,displayMonth:t.displayMonth})]})}function gB(t){return e.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function pB(t){return e.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var H0=h.forwardRef(function(t,s){var r=Bs(),a=r.classNames,n=r.styles,i=[a.button_reset,a.button];t.className&&i.push(t.className);var l=i.join(" "),o=kt(kt({},n.button_reset),n.button);return t.style&&Object.assign(o,t.style),e.jsx("button",kt({},t,{ref:s,type:"button",className:l,style:o}))});function bB(t){var s,r,a=Bs(),n=a.dir,i=a.locale,l=a.classNames,o=a.styles,c=a.labels,u=c.labelPrevious,d=c.labelNext,m=a.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var x=u(t.previousMonth,{locale:i}),g=[l.nav_button,l.nav_button_previous].join(" "),p=d(t.nextMonth,{locale:i}),f=[l.nav_button,l.nav_button_next].join(" "),b=(s=m==null?void 0:m.IconRight)!==null&&s!==void 0?s:pB,y=(r=m==null?void 0:m.IconLeft)!==null&&r!==void 0?r:gB;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(H0,{name:"previous-month","aria-label":x,className:g,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:n==="rtl"?e.jsx(b,{className:l.nav_icon,style:o.nav_icon}):e.jsx(y,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(H0,{name:"next-month","aria-label":p,className:f,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:n==="rtl"?e.jsx(y,{className:l.nav_icon,style:o.nav_icon}):e.jsx(b,{className:l.nav_icon,style:o.nav_icon})})]})}function qj(t){var s=Bs().numberOfMonths,r=qu(),a=r.previousMonth,n=r.nextMonth,i=r.goToMonth,l=r.displayMonths,o=l.findIndex(function(p){return Ib(t.displayMonth,p)}),c=o===0,u=o===l.length-1,d=s>1&&(c||!u),m=s>1&&(u||!c),x=function(){a&&i(a)},g=function(){n&&i(n)};return e.jsx(bB,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:m,nextMonth:n,previousMonth:a,onPreviousClick:x,onNextClick:g})}function yB(t){var s,r=Bs(),a=r.classNames,n=r.disableNavigation,i=r.styles,l=r.captionLayout,o=r.components,c=(s=o==null?void 0:o.CaptionLabel)!==null&&s!==void 0?s:v4,u;return n?u=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?u=e.jsx(Gj,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?u=e.jsxs(e.Fragment,{children:[e.jsx(Gj,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(qj,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(qj,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:a.caption,style:i.caption,children:u})}function vB(t){var s=Bs(),r=s.footer,a=s.styles,n=s.classNames.tfoot;return r?e.jsx("tfoot",{className:n,style:a.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:r})})}):e.jsx(e.Fragment,{})}function jB(t,s,r){for(var a=r?oo(new Date):gi(new Date,{locale:t,weekStartsOn:s}),n=[],i=0;i<7;i++){var l=Sa(a,i);n.push(l)}return n}function wB(){var t=Bs(),s=t.classNames,r=t.styles,a=t.showWeekNumber,n=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=jB(n,i,l);return e.jsxs("tr",{style:r.head_row,className:s.head_row,children:[a&&e.jsx("td",{style:r.head_cell,className:s.head_cell}),u.map(function(d,m){return e.jsx("th",{scope:"col",className:s.head_cell,style:r.head_cell,"aria-label":c(d,{locale:n}),children:o(d,{locale:n})},m)})]})}function NB(){var t,s=Bs(),r=s.classNames,a=s.styles,n=s.components,i=(t=n==null?void 0:n.HeadRow)!==null&&t!==void 0?t:wB;return e.jsx("thead",{style:a.head,className:r.head,children:e.jsx(i,{})})}function SB(t){var s=Bs(),r=s.locale,a=s.formatters.formatDay;return e.jsx(e.Fragment,{children:a(t.date,{locale:r})})}var Zb=h.createContext(void 0);function CB(t){if(!zu(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Zb.Provider,{value:s,children:t.children})}return e.jsx(kB,{initialProps:t.initialProps,children:t.children})}function kB(t){var s=t.initialProps,r=t.children,a=s.selected,n=s.min,i=s.max,l=function(u,d,m){var x,g;(x=s.onDayClick)===null||x===void 0||x.call(s,u,d,m);var p=!!(d.selected&&n&&(a==null?void 0:a.length)===n);if(!p){var f=!!(!d.selected&&i&&(a==null?void 0:a.length)===i);if(!f){var b=a?b4([],a):[];if(d.selected){var y=b.findIndex(function(v){return Da(u,v)});b.splice(y,1)}else b.push(u);(g=s.onSelect)===null||g===void 0||g.call(s,b,u,d,m)}}},o={disabled:[]};a&&o.disabled.push(function(u){var d=i&&a.length>i-1,m=a.some(function(x){return Da(x,u)});return!!(d&&!m)});var c={selected:a,onDayClick:l,modifiers:o};return e.jsx(Zb.Provider,{value:c,children:r})}function ey(){var t=h.useContext(Zb);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function EB(t,s){var r=s||{},a=r.from,n=r.to;return a&&n?Da(n,t)&&Da(a,t)?void 0:Da(n,t)?{from:n,to:void 0}:Da(a,t)?void 0:Wg(a,t)?{from:t,to:n}:{from:a,to:t}:n?Wg(t,n)?{from:n,to:t}:{from:t,to:n}:a?MS(t,a)?{from:t,to:a}:{from:a,to:t}:{from:t,to:void 0}}var ty=h.createContext(void 0);function PB(t){if(!Gu(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(ty.Provider,{value:s,children:t.children})}return e.jsx(TB,{initialProps:t.initialProps,children:t.children})}function TB(t){var s=t.initialProps,r=t.children,a=s.selected,n=a||{},i=n.from,l=n.to,o=s.min,c=s.max,u=function(g,p,f){var b,y;(b=s.onDayClick)===null||b===void 0||b.call(s,g,p,f);var v=EB(g,a);(y=s.onSelect)===null||y===void 0||y.call(s,v,g,p,f)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],l?(d.range_end=[l],Da(i,l)||(d.range_middle=[{after:i,before:l}])):d.range_end=[i]):l&&(d.range_start=[l],d.range_end=[l]),o&&(i&&!l&&d.disabled.push({after:df(i,o-1),before:Sa(i,o-1)}),i&&l&&d.disabled.push({after:i,before:Sa(i,o-1)}),!i&&l&&d.disabled.push({after:df(l,o-1),before:Sa(l,o-1)})),c){if(i&&!l&&(d.disabled.push({before:Sa(i,-c+1)}),d.disabled.push({after:Sa(i,c-1)})),i&&l){var m=Ai(l,i)+1,x=c-m;d.disabled.push({before:df(i,x)}),d.disabled.push({after:Sa(l,x)})}!i&&l&&(d.disabled.push({before:Sa(l,-c+1)}),d.disabled.push({after:Sa(l,c-1)}))}return e.jsx(ty.Provider,{value:{selected:a,onDayClick:u,modifiers:d},children:r})}function sy(){var t=h.useContext(ty);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function p0(t){return Array.isArray(t)?b4([],t):t!==void 0?[t]:[]}function _B(t){var s={};return Object.entries(t).forEach(function(r){var a=r[0],n=r[1];s[a]=p0(n)}),s}var Wn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Wn||(Wn={}));var AB=Wn.Selected,_i=Wn.Disabled,RB=Wn.Hidden,FB=Wn.Today,jf=Wn.RangeEnd,wf=Wn.RangeMiddle,Nf=Wn.RangeStart,DB=Wn.Outside;function IB(t,s,r){var a,n=(a={},a[AB]=p0(t.selected),a[_i]=p0(t.disabled),a[RB]=p0(t.hidden),a[FB]=[t.today],a[jf]=[],a[wf]=[],a[Nf]=[],a[DB]=[],a);return t.fromDate&&n[_i].push({before:t.fromDate}),t.toDate&&n[_i].push({after:t.toDate}),zu(t)?n[_i]=n[_i].concat(s.modifiers[_i]):Gu(t)&&(n[_i]=n[_i].concat(r.modifiers[_i]),n[Nf]=r.modifiers[Nf],n[wf]=r.modifiers[wf],n[jf]=r.modifiers[jf]),n}var N4=h.createContext(void 0);function OB(t){var s=Bs(),r=ey(),a=sy(),n=IB(s,r,a),i=_B(s.modifiers),l=kt(kt({},n),i);return e.jsx(N4.Provider,{value:l,children:t.children})}function S4(){var t=h.useContext(N4);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function MB(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function BB(t){return!!(t&&typeof t=="object"&&"from"in t)}function LB(t){return!!(t&&typeof t=="object"&&"after"in t)}function $B(t){return!!(t&&typeof t=="object"&&"before"in t)}function UB(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function HB(t,s){var r,a=s.from,n=s.to;if(a&&n){var i=Ai(n,a)<0;i&&(r=[n,a],a=r[0],n=r[1]);var l=Ai(t,a)>=0&&Ai(n,t)>=0;return l}return n?Da(n,t):a?Da(a,t):!1}function WB(t){return Ab(t)}function VB(t){return Array.isArray(t)&&t.every(Ab)}function zB(t,s){return s.some(function(r){if(typeof r=="boolean")return r;if(WB(r))return Da(t,r);if(VB(r))return r.includes(t);if(BB(r))return HB(t,r);if(UB(r))return r.dayOfWeek.includes(t.getDay());if(MB(r)){var a=Ai(r.before,t),n=Ai(r.after,t),i=a>0,l=n<0,o=Wg(r.before,r.after);return o?l&&i:i||l}return LB(r)?Ai(t,r.after)>0:$B(r)?Ai(r.before,t)>0:typeof r=="function"?r(t):!1})}function ry(t,s,r){var a=Object.keys(s).reduce(function(i,l){var o=s[l];return zB(t,o)&&i.push(l),i},[]),n={};return a.forEach(function(i){return n[i]=!0}),r&&!Ib(t,r)&&(n.outside=!0),n}function GB(t,s){for(var r=pa(t[0]),a=su(t[t.length-1]),n,i,l=r;l<=a;){var o=ry(l,s),c=!o.disabled&&!o.hidden;if(!c){l=Sa(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),n||(n=l),l=Sa(l,1)}return i||n}var qB=365;function C4(t,s){var r=s.moveBy,a=s.direction,n=s.context,i=s.modifiers,l=s.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=n.weekStartsOn,u=n.fromDate,d=n.toDate,m=n.locale,x={day:Sa,week:Hg,month:$n,year:VF,startOfWeek:function(b){return n.ISOWeek?oo(b):gi(b,{locale:m,weekStartsOn:c})},endOfWeek:function(b){return n.ISOWeek?RS(b):Rb(b,{locale:m,weekStartsOn:c})}},g=x[r](t,a==="after"?1:-1);a==="before"&&u?g=zF([u,g]):a==="after"&&d&&(g=GF([d,g]));var p=!0;if(i){var f=ry(g,i);p=!f.disabled&&!f.hidden}return p?g:o.count>qB?o.lastFocused:C4(g,{moveBy:r,direction:a,context:n,modifiers:i,retry:kt(kt({},o),{count:o.count+1})})}var k4=h.createContext(void 0);function YB(t){var s=qu(),r=S4(),a=h.useState(),n=a[0],i=a[1],l=h.useState(),o=l[0],c=l[1],u=GB(s.displayMonths,r),d=n??(o&&s.isDateDisplayed(o))?o:u,m=function(){c(n),i(void 0)},x=function(b){i(b)},g=Bs(),p=function(b,y){if(n){var v=C4(n,{moveBy:b,direction:y,context:g,modifiers:r});Da(n,v)||(s.goToDate(v,n),x(v))}},f={focusedDay:n,focusTarget:d,blur:m,focus:x,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return e.jsx(k4.Provider,{value:f,children:t.children})}function ay(){var t=h.useContext(k4);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function KB(t,s){var r=S4(),a=ry(t,r,s);return a}var ny=h.createContext(void 0);function XB(t){if(!Jx(t.initialProps)){var s={selected:void 0};return e.jsx(ny.Provider,{value:s,children:t.children})}return e.jsx(JB,{initialProps:t.initialProps,children:t.children})}function JB(t){var s=t.initialProps,r=t.children,a=function(i,l,o){var c,u,d;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,l,o),l.selected&&!s.required){(u=s.onSelect)===null||u===void 0||u.call(s,void 0,i,l,o);return}(d=s.onSelect)===null||d===void 0||d.call(s,i,i,l,o)},n={selected:s.selected,onDayClick:a};return e.jsx(ny.Provider,{value:n,children:r})}function E4(){var t=h.useContext(ny);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function QB(t,s){var r=Bs(),a=E4(),n=ey(),i=sy(),l=ay(),o=l.focusDayAfter,c=l.focusDayBefore,u=l.focusWeekAfter,d=l.focusWeekBefore,m=l.blur,x=l.focus,g=l.focusMonthBefore,p=l.focusMonthAfter,f=l.focusYearBefore,b=l.focusYearAfter,y=l.focusStartOfWeek,v=l.focusEndOfWeek,N=function(I){var V,_,G,U;Jx(r)?(V=a.onDayClick)===null||V===void 0||V.call(a,t,s,I):zu(r)?(_=n.onDayClick)===null||_===void 0||_.call(n,t,s,I):Gu(r)?(G=i.onDayClick)===null||G===void 0||G.call(i,t,s,I):(U=r.onDayClick)===null||U===void 0||U.call(r,t,s,I)},S=function(I){var V;x(t),(V=r.onDayFocus)===null||V===void 0||V.call(r,t,s,I)},w=function(I){var V;m(),(V=r.onDayBlur)===null||V===void 0||V.call(r,t,s,I)},C=function(I){var V;(V=r.onDayMouseEnter)===null||V===void 0||V.call(r,t,s,I)},j=function(I){var V;(V=r.onDayMouseLeave)===null||V===void 0||V.call(r,t,s,I)},k=function(I){var V;(V=r.onDayPointerEnter)===null||V===void 0||V.call(r,t,s,I)},E=function(I){var V;(V=r.onDayPointerLeave)===null||V===void 0||V.call(r,t,s,I)},R=function(I){var V;(V=r.onDayTouchCancel)===null||V===void 0||V.call(r,t,s,I)},D=function(I){var V;(V=r.onDayTouchEnd)===null||V===void 0||V.call(r,t,s,I)},P=function(I){var V;(V=r.onDayTouchMove)===null||V===void 0||V.call(r,t,s,I)},T=function(I){var V;(V=r.onDayTouchStart)===null||V===void 0||V.call(r,t,s,I)},B=function(I){var V;(V=r.onDayKeyUp)===null||V===void 0||V.call(r,t,s,I)},F=function(I){var V;switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),r.dir==="rtl"?o():c();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),r.dir==="rtl"?c():o();break;case"ArrowDown":I.preventDefault(),I.stopPropagation(),u();break;case"ArrowUp":I.preventDefault(),I.stopPropagation(),d();break;case"PageUp":I.preventDefault(),I.stopPropagation(),I.shiftKey?f():g();break;case"PageDown":I.preventDefault(),I.stopPropagation(),I.shiftKey?b():p();break;case"Home":I.preventDefault(),I.stopPropagation(),y();break;case"End":I.preventDefault(),I.stopPropagation(),v();break}(V=r.onDayKeyDown)===null||V===void 0||V.call(r,t,s,I)},L={onClick:N,onFocus:S,onBlur:w,onKeyDown:F,onKeyUp:B,onMouseEnter:C,onMouseLeave:j,onPointerEnter:k,onPointerLeave:E,onTouchCancel:R,onTouchEnd:D,onTouchMove:P,onTouchStart:T};return L}function ZB(){var t=Bs(),s=E4(),r=ey(),a=sy(),n=Jx(t)?s.selected:zu(t)?r.selected:Gu(t)?a.selected:void 0;return n}function e9(t){return Object.values(Wn).includes(t)}function t9(t,s){var r=[t.classNames.day];return Object.keys(s).forEach(function(a){var n=t.modifiersClassNames[a];if(n)r.push(n);else if(e9(a)){var i=t.classNames["day_".concat(a)];i&&r.push(i)}}),r}function s9(t,s){var r=kt({},t.styles.day);return Object.keys(s).forEach(function(a){var n;r=kt(kt({},r),(n=t.modifiersStyles)===null||n===void 0?void 0:n[a])}),r}function r9(t,s,r){var a,n,i,l=Bs(),o=ay(),c=KB(t,s),u=QB(t,c),d=ZB(),m=!!(l.onDayClick||l.mode!=="default");h.useEffect(function(){var C;c.outside||o.focusedDay&&m&&Da(o.focusedDay,t)&&((C=r.current)===null||C===void 0||C.focus())},[o.focusedDay,t,r,m,c.outside]);var x=t9(l,c).join(" "),g=s9(l,c),p=!!(c.outside&&!l.showOutsideDays||c.hidden),f=(i=(n=l.components)===null||n===void 0?void 0:n.DayContent)!==null&&i!==void 0?i:SB,b=e.jsx(f,{date:t,displayMonth:s,activeModifiers:c}),y={style:g,className:x,children:b,role:"gridcell"},v=o.focusTarget&&Da(o.focusTarget,t)&&!c.outside,N=o.focusedDay&&Da(o.focusedDay,t),S=kt(kt(kt({},y),(a={disabled:c.disabled,role:"gridcell"},a["aria-selected"]=c.selected,a.tabIndex=N||v?0:-1,a)),u),w={isButton:m,isHidden:p,activeModifiers:c,selectedDays:d,buttonProps:S,divProps:y};return w}function a9(t){var s=h.useRef(null),r=r9(t.date,t.displayMonth,s);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(H0,kt({name:"day",ref:s},r.buttonProps)):e.jsx("div",kt({},r.divProps))}function n9(t){var s=t.number,r=t.dates,a=Bs(),n=a.onWeekNumberClick,i=a.styles,l=a.classNames,o=a.locale,c=a.labels.labelWeekNumber,u=a.formatters.formatWeekNumber,d=u(Number(s),{locale:o});if(!n)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:d});var m=c(Number(s),{locale:o}),x=function(g){n(s,r,g)};return e.jsx(H0,{name:"week-number","aria-label":m,className:l.weeknumber,style:i.weeknumber,onClick:x,children:d})}function i9(t){var s,r,a=Bs(),n=a.styles,i=a.classNames,l=a.showWeekNumber,o=a.components,c=(s=o==null?void 0:o.Day)!==null&&s!==void 0?s:a9,u=(r=o==null?void 0:o.WeekNumber)!==null&&r!==void 0?r:n9,d;return l&&(d=e.jsx("td",{className:i.cell,style:n.cell,children:e.jsx(u,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:n.row,children:[d,t.dates.map(function(m){return e.jsx("td",{className:i.cell,style:n.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:m})},tI(m))})]})}function Yj(t,s,r){for(var a=r!=null&&r.ISOWeek?RS(s):Rb(s,r),n=r!=null&&r.ISOWeek?oo(t):gi(t,r),i=Ai(a,n),l=[],o=0;o<=i;o++)l.push(Sa(n,o));var c=l.reduce(function(u,d){var m=r!=null&&r.ISOWeek?ZD(d):nI(d,r),x=u.find(function(g){return g.weekNumber===m});return x?(x.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function l9(t,s){var r=Yj(pa(t),su(t),s);if(s!=null&&s.useFixedWeeks){var a=lI(t,s);if(a<6){var n=r[r.length-1],i=n.dates[n.dates.length-1],l=Hg(i,6-a),o=Yj(Hg(i,1),l,s);r.push.apply(r,o)}}return r}function o9(t){var s,r,a,n=Bs(),i=n.locale,l=n.classNames,o=n.styles,c=n.hideHead,u=n.fixedWeeks,d=n.components,m=n.weekStartsOn,x=n.firstWeekContainsDate,g=n.ISOWeek,p=l9(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:g,locale:i,weekStartsOn:m,firstWeekContainsDate:x}),f=(s=d==null?void 0:d.Head)!==null&&s!==void 0?s:NB,b=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:i9,y=(a=d==null?void 0:d.Footer)!==null&&a!==void 0?a:vB;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(f,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:p.map(function(v){return e.jsx(b,{displayMonth:t.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),e.jsx(y,{displayMonth:t.displayMonth})]})}function c9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var d9=c9()?h.useLayoutEffect:h.useEffect,Sf=!1,u9=0;function Kj(){return"react-day-picker-".concat(++u9)}function m9(t){var s,r=t??(Sf?Kj():null),a=h.useState(r),n=a[0],i=a[1];return d9(function(){n===null&&i(Kj())},[]),h.useEffect(function(){Sf===!1&&(Sf=!0)},[]),(s=t??n)!==null&&s!==void 0?s:void 0}function x9(t){var s,r,a=Bs(),n=a.dir,i=a.classNames,l=a.styles,o=a.components,c=qu().displayMonths,u=m9(a.id?"".concat(a.id,"-").concat(t.displayIndex):void 0),d=a.id?"".concat(a.id,"-grid-").concat(t.displayIndex):void 0,m=[i.month],x=l.month,g=t.displayIndex===0,p=t.displayIndex===c.length-1,f=!g&&!p;n==="rtl"&&(s=[g,p],p=s[0],g=s[1]),g&&(m.push(i.caption_start),x=kt(kt({},x),l.caption_start)),p&&(m.push(i.caption_end),x=kt(kt({},x),l.caption_end)),f&&(m.push(i.caption_between),x=kt(kt({},x),l.caption_between));var b=(r=o==null?void 0:o.Caption)!==null&&r!==void 0?r:yB;return e.jsxs("div",{className:m.join(" "),style:x,children:[e.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(o9,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function h9(t){var s=Bs(),r=s.classNames,a=s.styles;return e.jsx("div",{className:r.months,style:a.months,children:t.children})}function f9(t){var s,r,a=t.initialProps,n=Bs(),i=ay(),l=qu(),o=h.useState(!1),c=o[0],u=o[1];h.useEffect(function(){n.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[n.initialFocus,c,i.focus,i.focusTarget,i]);var d=[n.classNames.root,n.className];n.numberOfMonths>1&&d.push(n.classNames.multiple_months),n.showWeekNumber&&d.push(n.classNames.with_weeknumber);var m=kt(kt({},n.styles.root),n.style),x=Object.keys(a).filter(function(p){return p.startsWith("data-")}).reduce(function(p,f){var b;return kt(kt({},p),(b={},b[f]=a[f],b))},{}),g=(r=(s=a.components)===null||s===void 0?void 0:s.Months)!==null&&r!==void 0?r:h9;return e.jsx("div",kt({className:d.join(" "),style:m,dir:n.dir,id:n.id,nonce:a.nonce,title:a.title,lang:a.lang},x,{children:e.jsx(g,{children:l.displayMonths.map(function(p,f){return e.jsx(x9,{displayIndex:f,displayMonth:p},f)})})}))}function g9(t){var s=t.children,r=$8(t,["children"]);return e.jsx(nB,{initialProps:r,children:e.jsx(fB,{children:e.jsx(XB,{initialProps:r,children:e.jsx(CB,{initialProps:r,children:e.jsx(PB,{initialProps:r,children:e.jsx(OB,{children:e.jsx(YB,{children:s})})})})})})})}function p9(t){return e.jsx(g9,kt({},t,{children:e.jsx(f9,{initialProps:t})}))}function yi({className:t,classNames:s,showOutsideDays:r=!0,...a}){return e.jsx(p9,{showOutsideDays:r,className:sa("p-3 bg-white border border-gray-200 rounded-lg",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:sa("h-7 w-7 bg-transparent hover:bg-gray-100 p-0 opacity-50 hover:opacity-100 rounded-md flex items-center justify-center","border border-gray-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-gray-500 rounded-md w-9 font-normal text-[0.8rem] text-center",row:"flex w-full mt-2",cell:sa("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-gray-100","hover:bg-gray-100 rounded-md"),day:sa("h-9 w-9 p-0 font-normal aria-selected:opacity-100 hover:bg-blue-100 hover:text-blue-900","rounded-md flex items-center justify-center","focus:ring-2 focus:ring-blue-500 focus:outline-none"),day_selected:"bg-blue-600 text-white hover:bg-blue-700",day_today:"bg-gray-100 text-blue-600",day_outside:"text-gray-400 opacity-50",day_disabled:"text-gray-400 opacity-50 cursor-not-allowed",day_range_middle:"aria-selected:bg-gray-100 aria-selected:text-gray-900 bg-gray-100",day_hidden:"invisible",...s},components:{IconLeft:()=>e.jsx(Ua,{className:"h-4 w-4"}),IconRight:()=>e.jsx(ra,{className:"h-4 w-4"})},...a})}yi.displayName="Calendar";const iy=({isOpen:t,onClose:s,pg:r=null,onSuccess:a,isSalesMode:n=!1})=>{const{user:i}=He(y=>y.auth),[l,o]=h.useState(!1),[c,u]=h.useState({name:"",description:"",address:{street:"",city:"",state:"",pincode:"",landmark:""},contact:{phone:"",email:"",alternatePhone:""},property:{type:"Gents PG"},status:"active",...n&&{salesManager:"",salesStaff:""}}),[d,m]=h.useState({}),x=!!r,g=[{value:"active",label:"Active",color:"green"},{value:"inactive",label:"Inactive",color:"gray"},{value:"maintenance",label:"Maintenance",color:"yellow"},{value:"full",label:"Full",color:"red"},{value:"under_renovation",label:"Under Renovation",color:"orange"},{value:"pending_approval",label:"Pending Approval",color:"blue"},{value:"suspended",label:"Suspended",color:"red"},{value:"closed",label:"Closed",color:"gray"},{value:"limited_occupancy",label:"Limited Occupancy",color:"purple"}],p=[{value:"Gents PG",label:"Gents PG"},{value:"Ladies PG",label:"Ladies PG"},{value:"Coliving PG",label:"Coliving PG"},{value:"PG",label:"PG"},{value:"Hostel",label:"Hostel"},{value:"Apartment",label:"Apartment"},{value:"Independent",label:"Independent"}];h.useEffect(()=>{var y,v,N,S,w,C,j,k,E,R;if(x&&r)u({name:r.name||"",description:r.description||"",address:{street:((y=r.address)==null?void 0:y.street)||"",city:((v=r.address)==null?void 0:v.city)||"",state:((N=r.address)==null?void 0:N.state)||"",pincode:((S=r.address)==null?void 0:S.pincode)||"",landmark:((w=r.address)==null?void 0:w.landmark)||""},contact:{phone:((C=r.contact)==null?void 0:C.phone)||"",email:((j=r.contact)==null?void 0:j.email)||"",alternatePhone:((k=r.contact)==null?void 0:k.alternatePhone)||""},property:{type:((E=r.property)==null?void 0:E.type)||"Gents PG"},status:r.status||"active",...n&&{salesManager:r.salesManager||"",salesStaff:r.salesStaff||""}});else if(n&&!x){let D="",P="";(i==null?void 0:i.salesRole)==="sub_sales"?(D=((R=i.parentSalesPerson)==null?void 0:R.fullName)||"",P=`${i.firstName} ${i.lastName}`):(i==null?void 0:i.role)==="sales_manager"&&(D=`${i.firstName} ${i.lastName}`,P=""),u(T=>({...T,salesManager:D,salesStaff:P}))}},[r,x,n,i]);const f=(y,v)=>{if(y.includes(".")){const[N,S]=y.split(".");u(w=>({...w,[N]:{...w[N],[S]:v}}))}else u(N=>({...N,[y]:v}));d[y]&&m(N=>({...N,[y]:""}))},b=async y=>{y.preventDefault(),o(!0);try{console.log("Form data being submitted:",c);const v=xa.validatePGData(c);if(console.log("Validation result:",v),!v.isValid){const w={};v.errors.forEach(C=>{w[C.field]=C.message}),console.log("Validation errors:",w),m(w),M.error("Please fix the validation errors");return}const N=xa.formatPGDataForAPI(c);console.log("Formatted data for API:",N);let S;x?S=await xa.updatePG(r._id,N):n?S=await xa.createPGSales(N):S=await xa.createPG(N),console.log("API response:",S),S.success?(M.success(x?"PG updated successfully!":"PG created successfully!"),a(),s()):M.error(S.message||"Operation failed")}catch(v){console.error("Error:",v),M.error(v.message||"An error occurred")}finally{o(!1)}};return e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ie,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:x?"Edit PG":"Add New PG"}),e.jsx("p",{className:"text-sm text-gray-600",children:x?"Update PG information":"Create a new PG property"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PG Name *"}),e.jsx("input",{type:"text",value:c.name,onChange:y=>f("name",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter PG name"}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),e.jsxs(ls,{value:c.property.type,onValueChange:y=>f("property.type",y),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Property Type"})}),e.jsx(Zt,{children:p.map(y=>e.jsx(ke,{value:y.value,children:y.label},y.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PG Status"}),e.jsxs(ls,{value:c.status,onValueChange:y=>f("status",y),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select PG Status"})}),e.jsx(Zt,{children:g.map(y=>e.jsx(ke,{value:y.value,children:y.label},y.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:y=>f("description",y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter PG description"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),e.jsx("input",{type:"text",value:c.address.street,onChange:y=>f("address.street",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d["address.street"]?"border-red-500":"border-gray-300"}`,placeholder:"Enter street address"}),d["address.street"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d["address.street"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e.jsx("input",{type:"text",value:c.address.city,onChange:y=>f("address.city",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d["address.city"]?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),d["address.city"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d["address.city"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),e.jsx("input",{type:"text",value:c.address.state,onChange:y=>f("address.state",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d["address.state"]?"border-red-500":"border-gray-300"}`,placeholder:"Enter state"}),d["address.state"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d["address.state"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),e.jsx("input",{type:"text",value:c.address.pincode,onChange:y=>f("address.pincode",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d["address.pincode"]?"border-red-500":"border-gray-300"}`,placeholder:"Enter 6-digit pincode",maxLength:6}),d["address.pincode"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d["address.pincode"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Landmark"}),e.jsx("input",{type:"text",value:c.address.landmark,onChange:y=>f("address.landmark",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter nearby landmark"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:c.contact.phone,onChange:y=>f("contact.phone",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d["contact.phone"]?"border-red-500":"border-gray-300"}`,placeholder:"Enter 10-digit phone number",maxLength:10}),d["contact.phone"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d["contact.phone"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:c.contact.email,onChange:y=>f("contact.email",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d["contact.email"]?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),d["contact.email"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d["contact.email"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alternate Phone"}),e.jsx("input",{type:"tel",value:c.contact.alternatePhone,onChange:y=>f("contact.alternatePhone",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter alternate phone number",maxLength:10})]})]})]}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"Sales Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sales Manager"}),e.jsx("input",{type:"text",value:c.salesManager,onChange:y=>f("salesManager",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${(i==null?void 0:i.role)==="sales_manager"?"bg-gray-50":"border-gray-300"}`,placeholder:"Enter sales manager name",readOnly:(i==null?void 0:i.role)==="sales_manager"}),(i==null?void 0:i.role)==="sales_manager"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from your account"})]}),(i==null?void 0:i.salesRole)==="sub_sales"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sales Staff"}),e.jsx("input",{type:"text",value:c.salesStaff,onChange:y=>f("salesStaff",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50",placeholder:"Enter sales staff name",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from your account"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(no,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{className:"h-4 w-4"}),e.jsx("span",{children:x?"Update PG":"Create PG"})]})})]})]})]})})})},P4=({isOpen:t,onClose:s,pg:r})=>{var i,l,o,c,u,d,m,x,g,p,f,b,y,v;if(!r)return null;const a=xa.getPropertyTypeOptions(),n=N=>{const S=a.find(w=>w.value===N);return S?S.label:N};return e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(sr,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"PG Details"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PG Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:r==null?void 0:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:n((i=r==null?void 0:r.property)==null?void 0:i.type)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900",children:(r==null?void 0:r.description)||"No description available"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),e.jsx("p",{className:"text-sm text-gray-900",children:(l=r==null?void 0:r.address)==null?void 0:l.street})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("p",{className:"text-sm text-gray-900",children:(o=r==null?void 0:r.address)==null?void 0:o.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("p",{className:"text-sm text-gray-900",children:(c=r==null?void 0:r.address)==null?void 0:c.state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),e.jsx("p",{className:"text-sm text-gray-900",children:(u=r==null?void 0:r.address)==null?void 0:u.pincode})]}),((d=r==null?void 0:r.address)==null?void 0:d.landmark)&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Landmark"}),e.jsx("p",{className:"text-sm text-gray-900",children:(m=r==null?void 0:r.address)==null?void 0:m.landmark})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:(x=r==null?void 0:r.contact)==null?void 0:x.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:(g=r==null?void 0:r.contact)==null?void 0:g.email})]}),((p=r==null?void 0:r.contact)==null?void 0:p.alternatePhone)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alternate Phone"}),e.jsx("p",{className:"text-sm text-gray-900",children:(f=r==null?void 0:r.contact)==null?void 0:f.alternatePhone})]})]})]}),r.admin&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Admin Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Name"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[(b=r==null?void 0:r.admin)==null?void 0:b.firstName," ",(y=r==null?void 0:r.admin)==null?void 0:y.lastName]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:(v=r==null?void 0:r.admin)==null?void 0:v.email})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(r==null?void 0:r.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(r==null?void 0:r.updatedAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),e.jsx("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:e.jsx("button",{onClick:s,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})})},Xj=({trigger:t,children:s,align:r="right"})=>{const[a,n]=h.useState(!1),i=h.useRef(null);return h.useEffect(()=>{const l=o=>{i.current&&!i.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("div",{onClick:()=>n(!a),className:"cursor-pointer",children:t}),e.jsx(vt,{children:a&&e.jsx(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:`absolute z-50 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 ${r==="left"?"left-0":"right-0"}`,children:s})})]})},$o=({icon:t,children:s,onClick:r,className:a="",danger:n=!1})=>e.jsxs("button",{onClick:r,className:`w-full flex items-center px-4 py-2.5 text-sm transition-colors ${n?"text-red-700 hover:bg-red-50":"text-gray-700 hover:bg-gray-50"} ${a}`,children:[t&&e.jsx(t,{className:`h-4 w-4 mr-3 ${n?"text-red-500":"text-gray-500"}`}),s]}),Jj=({name:t,size:s="md",className:r=""})=>{const a={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base",xl:"h-16 w-16 text-lg"},n=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],i=o=>o?o.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2):"PG",l=o=>{if(!o)return n[0];const c=o.charCodeAt(0)%n.length;return n[c]};return e.jsx("div",{className:`${a[s]} ${l(t)} rounded-full flex items-center justify-center text-white font-semibold ${r}`,children:i(t)})},b9=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState({}),[l,o]=h.useState({status:"",city:"",state:"",propertyType:"",minPrice:"",maxPrice:"",startDate:null,endDate:null}),[c,u]=h.useState(""),[d,m]=h.useState(1),[x,g]=h.useState(1),[p,f]=h.useState(!1),[b,y]=h.useState(!1),[v,N]=h.useState(!1),[S,w]=h.useState(!1),[C,j]=h.useState(null),[k,E]=h.useState(!1);h.useEffect(()=>{R(),D()},[d,l]);const R=async()=>{try{a(!0);const O=await xa.getAllPGs(l,d,10);O.success&&(s(O.data),g(O.pagination.pages))}catch(O){M.error("Failed to load PGs"),console.error("Error loading PGs:",O)}finally{a(!1)}},D=async()=>{try{if(!localStorage.getItem("accessToken")){M.error("Please log in to view PG statistics"),i({totalPGs:0,activePGs:0,totalRevenue:0,occupancyRate:0,activePercentage:0,newPGsThisMonth:0,revenueGrowth:null,vacantRooms:0});return}const W=await xa.getPGStats();if(W.success){const z={...W.data,activePercentage:W.data.totalPGs>0?Math.round(W.data.activePGs/W.data.totalPGs*100):0,newPGsThisMonth:W.data.newPGsThisMonth||0,revenueGrowth:W.data.revenueGrowth?Math.round(W.data.revenueGrowth*100):null,vacantRooms:W.data.totalRooms&&W.data.occupiedRooms?W.data.totalRooms-W.data.occupiedRooms:void 0};i(z)}else M.error(W.message||"Failed to load PG statistics"),i({totalPGs:0,activePGs:0,totalRevenue:0,occupancyRate:0,activePercentage:0,newPGsThisMonth:0,revenueGrowth:null,vacantRooms:0})}catch(O){if(console.error("Error loading stats:",O),O.response&&O.response.status===401){M.error("Session expired. Please log in again."),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),window.location.href="/login";return}i({totalPGs:0,activePGs:0,totalRevenue:0,occupancyRate:0,activePercentage:0,newPGsThisMonth:0,revenueGrowth:null,vacantRooms:0}),M.error("Failed to load PG statistics. Please try again later.")}},P=async()=>{if(!c.trim()){R();return}try{a(!0);const O=await xa.searchPGs(c,l);O.success&&(s(O.data),g(1))}catch{M.error("Search failed")}finally{a(!1)}},T=()=>{j(null),y(!0)},B=O=>{j(O),y(!0)},F=O=>{j(O),N(!0)},L=O=>{j(O),w(!0)},I=async()=>{if(C)try{E(!0);const O=await xa.deletePG(C._id);O.success?(M.success("PG deleted successfully"),R(),D(),N(!1),j(null)):M.error(O.message||"Failed to delete PG")}catch(O){M.error("Failed to delete PG"),console.error("Error deleting PG:",O)}finally{E(!1)}},V=()=>{R(),D()},_=O=>{o(W=>({...W,...O}))},G=()=>{o({status:"",city:"",state:"",propertyType:"",minPrice:"",maxPrice:"",startDate:null,endDate:null}),u(""),f(!1)},U=()=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(aa,{className:"mr-2 h-5 w-5 text-blue-600"}),"PG Filters"]}),e.jsxs("button",{onClick:()=>f(!p),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[p?"Hide":"Show"," Advanced Filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search PGs by name or location...",value:c,onChange:O=>u(O.target.value),onKeyPress:O=>O.key==="Enter"&&P(),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Property Type"}),e.jsxs(ls,{value:l.propertyType||"all",onValueChange:O=>_({propertyType:O}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Property Type"})}),e.jsxs(Zt,{children:[e.jsxs(mi,{children:[e.jsx(Dn,{children:"PG Types"}),e.jsx(ke,{value:"all",children:"All Types"}),e.jsx(ke,{value:"Gents PG",children:"Gents PG"}),e.jsx(ke,{value:"Ladies PG",children:"Ladies PG"}),e.jsx(ke,{value:"Coliving PG",children:"Coliving PG"})]}),e.jsx(Xb,{}),e.jsxs(mi,{children:[e.jsx(Dn,{children:"Other Property Types"}),e.jsx(ke,{value:"PG",children:"PG"}),e.jsx(ke,{value:"Hostel",children:"Hostel"}),e.jsx(ke,{value:"Apartment",children:"Apartment"}),e.jsx(ke,{value:"Independent",children:"Independent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),e.jsxs(ls,{value:l.status||"all",onValueChange:O=>_({status:O}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Status"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Status"}),e.jsx(ke,{value:"active",children:"Active"}),e.jsx(ke,{value:"inactive",children:"Inactive"}),e.jsx(ke,{value:"maintenance",children:"Maintenance"}),e.jsx(ke,{value:"full",children:"Full"})]})]})]})]}),e.jsx(vt,{children:p&&e.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"City"}),e.jsx("input",{type:"text",placeholder:"Enter city",value:l.city||"",onChange:O=>_({city:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"State"}),e.jsx("input",{type:"text",placeholder:"Enter state",value:l.state||"",onChange:O=>_({state:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Start Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),l.startDate?Zs(new Date(l.startDate),"MMM dd, yyyy"):"Select Start Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:l.startDate?new Date(l.startDate):void 0,onSelect:O=>_({startDate:O?Zs(O,"yyyy-MM-dd"):null}),initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),l.endDate?Zs(new Date(l.endDate),"MMM dd, yyyy"):"Select End Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:l.endDate?new Date(l.endDate):void 0,onSelect:O=>_({endDate:O?Zs(O,"yyyy-MM-dd"):null}),initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Min Price"}),e.jsx("input",{type:"number",placeholder:"Min price",value:l.minPrice||"",onChange:O=>_({minPrice:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Max Price"}),e.jsx("input",{type:"number",placeholder:"Max price",value:l.maxPrice||"",onChange:O=>_({maxPrice:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}),(Object.values(l).some(O=>O!==""&&O!==null)||c)&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Clear All Filters"]})})]}),A=O=>{const W={active:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},inactive:{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"},maintenance:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200"},full:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},under_renovation:{bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200"},pending_approval:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"},suspended:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},closed:{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"},limited_occupancy:{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200"}};return W[O]||W.inactive},q=()=>r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[e.jsx(Ie,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No PGs Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c||Object.values(l).some(O=>O!=="")?"No PGs match your current filters.":"Start by adding your first PG."}),e.jsxs("button",{onClick:T,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Add New PG"]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PG Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rooms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((O,W)=>{var H,Q,J,ie,K,oe,le;const z=A(O.status);return e.jsxs(ae.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:W*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jj,{name:O.name,size:"md"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:O.name}),e.jsx("div",{className:"text-sm text-gray-500",children:((H=O.property)==null?void 0:H.type)||"Unknown Type"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:((Q=O.address)==null?void 0:Q.city)||((J=O.address)==null?void 0:J.state)||"Unknown"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[((ie=O.property)==null?void 0:ie.availableRooms)||0,"/",((K=O.property)==null?void 0:K.totalRooms)||0,e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",((oe=O.property)==null?void 0:oe.occupancyRate)||0,"% occupied)"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[(le=O.pricing)!=null&&le.basePrice?Y(O.pricing.basePrice):"₹NaN"," per month"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium 
                          ${z.bg} 
                          ${z.text} 
                          ${z.border} 
                          border`,children:O.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs(Xj,{trigger:e.jsx("button",{className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:e.jsx(io,{className:"h-5 w-5"})}),children:[e.jsx($o,{icon:ot,onClick:()=>L(O),children:"View Details"}),e.jsx($o,{icon:fa,onClick:()=>B(O),children:"Edit PG"}),e.jsx($o,{icon:Pr,onClick:()=>F(O),danger:!0,children:"Delete PG"})]})})]},O._id)})})]})}),e.jsx("div",{className:"lg:hidden",children:t.map((O,W)=>{var H,Q,J,ie,K,oe,le;const z=A(O.status);return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:W*.05},className:"p-4 border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jj,{name:O.name,size:"md"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:O.name}),e.jsx("div",{className:"text-xs text-gray-500",children:((H=O.property)==null?void 0:H.type)||"Unknown Type"})]})]}),e.jsxs(Xj,{trigger:e.jsx("button",{className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:e.jsx(io,{className:"h-5 w-5"})}),align:"right",children:[e.jsx($o,{icon:ot,onClick:()=>L(O),children:"View Details"}),e.jsx($o,{icon:fa,onClick:()=>B(O),children:"Edit PG"}),e.jsx($o,{icon:Pr,onClick:()=>F(O),danger:!0,children:"Delete PG"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Location"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(sr,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:((Q=O.address)==null?void 0:Q.city)||((J=O.address)==null?void 0:J.state)||"Unknown"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Rooms"}),e.jsxs("div",{className:"text-gray-900",children:[((ie=O.property)==null?void 0:ie.availableRooms)||0,"/",((K=O.property)==null?void 0:K.totalRooms)||0,e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",((oe=O.property)==null?void 0:oe.occupancyRate)||0,"% occupied)"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Price"}),e.jsxs("div",{className:"text-gray-900 font-semibold",children:[(le=O.pricing)!=null&&le.basePrice?Y(O.pricing.basePrice):"₹NaN"," per month"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium 
                        ${z.bg} 
                        ${z.text} 
                        ${z.border} 
                        border`,children:O.status})]})]})]},O._id)})})]}),Y=O=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(O);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"PG Management"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Manage all PG properties and their details"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsxs("button",{onClick:T,className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Add New PG"]}),e.jsx("button",{onClick:()=>R(),className:"inline-flex items-center justify-center px-4 py-3 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors shadow-sm",children:e.jsx(wt,{className:`h-5 w-5 ${r?"animate-spin":""}`})})]})]})}),U(),q(),x>1&&e.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",e.jsx("span",{className:"font-semibold text-gray-900",children:d})," of ",e.jsx("span",{className:"font-semibold text-gray-900",children:x})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>m(Math.max(1,d-1)),disabled:d===1,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ua,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("button",{onClick:()=>m(Math.min(x,d+1)),disabled:d===x,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",e.jsx(ra,{className:"h-4 w-4 ml-1"})]})]})]}),e.jsx(iy,{isOpen:b,onClose:()=>{y(!1),j(null)},pg:C,onSuccess:V}),e.jsx(_S,{isOpen:v,onClose:()=>{N(!1),j(null)},onConfirm:I,itemName:(C==null?void 0:C.name)||"",itemType:"PG"}),e.jsx(P4,{isOpen:S,onClose:()=>{w(!1),j(null)},pg:C})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var W0={};W0.version="0.18.5";var T4=1252,y9=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ly={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},oy=function(t){y9.indexOf(t)!=-1&&(T4=ly[0]=t)};function v9(){oy(1252)}var Rn=function(t){oy(t)};function cy(){Rn(1200),v9()}function Qj(t){for(var s=[],r=0,a=t.length;r<a;++r)s[r]=t.charCodeAt(r);return s}function j9(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return s.join("")}function _4(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return s.join("")}var Td=function(t){var s=t.charCodeAt(0),r=t.charCodeAt(1);return s==255&&r==254?j9(t.slice(2)):s==254&&r==255?_4(t.slice(2)):s==65279?t.slice(1):t},_m=function(s){return String.fromCharCode(s)},Zj=function(s){return String.fromCharCode(s)},lu,cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ou(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),i=r>>2,a=t.charCodeAt(u++),l=(r&3)<<4|a>>4,n=t.charCodeAt(u++),o=(a&15)<<2|n>>6,c=n&63,isNaN(a)?o=c=64:isNaN(n)&&(c=64),s+=cl.charAt(i)+cl.charAt(l)+cl.charAt(o)+cl.charAt(c);return s}function tn(t){var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)i=cl.indexOf(t.charAt(u++)),l=cl.indexOf(t.charAt(u++)),r=i<<2|l>>4,s+=String.fromCharCode(r),o=cl.indexOf(t.charAt(u++)),a=(l&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(a)),c=cl.indexOf(t.charAt(u++)),n=(o&3)<<6|c,c!==64&&(s+=String.fromCharCode(n));return s}var Ht=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),qi=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,r){return r?new Buffer(s,r):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function vl(t){return Ht?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function ew(t){return Ht?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ka=function(s){return Ht?qi(s,"binary"):s.split("").map(function(r){return r.charCodeAt(0)&255})};function Qx(t){if(typeof ArrayBuffer>"u")return Ka(t);for(var s=new ArrayBuffer(t.length),r=new Uint8Array(s),a=0;a!=t.length;++a)r[a]=t.charCodeAt(a)&255;return s}function Fl(t){if(Array.isArray(t))return t.map(function(a){return String.fromCharCode(a)}).join("");for(var s=[],r=0;r<t.length;++r)s[r]=String.fromCharCode(t[r]);return s.join("")}function w9(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function dy(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return dy(new Uint8Array(t));for(var s=new Array(t.length),r=0;r<t.length;++r)s[r]=t[r];return s}var $r=Ht?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:qi(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,r=0;for(s=0;s<t.length;++s)r+=t[s].length;var a=new Uint8Array(r),n=0;for(s=0,r=0;s<t.length;r+=n,++s)if(n=t[s].length,t[s]instanceof Uint8Array)a.set(t[s],r);else{if(typeof t[s]=="string")throw"wtf";a.set(new Uint8Array(t[s]),r)}return a}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function N9(t){for(var s=[],r=0,a=t.length+250,n=vl(t.length+255),i=0;i<t.length;++i){var l=t.charCodeAt(i);if(l<128)n[r++]=l;else if(l<2048)n[r++]=192|l>>6&31,n[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=t.charCodeAt(++i)&1023;n[r++]=240|l>>8&7,n[r++]=128|l>>2&63,n[r++]=128|o>>6&15|(l&3)<<4,n[r++]=128|o&63}else n[r++]=224|l>>12&15,n[r++]=128|l>>6&63,n[r++]=128|l&63;r>a&&(s.push(n.slice(0,r)),r=0,n=vl(65535),a=65530)}return s.push(n.slice(0,r)),$r(s)}var Ta=/\u0000/g,_d=/[\u0001-\u0006]/g;function uc(t){for(var s="",r=t.length-1;r>=0;)s+=t.charAt(r--);return s}function Fn(t,s){var r=""+t;return r.length>=s?r:ir("0",s-r.length)+r}function uy(t,s){var r=""+t;return r.length>=s?r:ir(" ",s-r.length)+r}function V0(t,s){var r=""+t;return r.length>=s?r:r+ir(" ",s-r.length)}function S9(t,s){var r=""+Math.round(t);return r.length>=s?r:ir("0",s-r.length)+r}function C9(t,s){var r=""+t;return r.length>=s?r:ir("0",s-r.length)+r}var tw=Math.pow(2,32);function Uo(t,s){if(t>tw||t<-tw)return S9(t,s);var r=Math.round(t);return C9(r,s)}function z0(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var sw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Cf=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function k9(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var bt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},rw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},E9={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function G0(t,s,r){for(var a=t<0?-1:1,n=t*a,i=0,l=1,o=0,c=1,u=0,d=0,m=Math.floor(n);u<s&&(m=Math.floor(n),o=m*l+i,d=m*u+c,!(n-m<5e-8));)n=1/(n-m),i=l,l=o,c=u,u=d;if(d>s&&(u>s?(d=c,o=i):(d=u,o=l)),!r)return[0,a*o,d];var x=Math.floor(a*o/d);return[x,a*o-x*d,d]}function Kl(t,s,r){if(t>2958465||t<0)return null;var a=t|0,n=Math.floor(86400*(t-a)),i=0,l=[],o={D:a,T:n,u:86400*(t-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(a+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++a,++o.D)),a===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=F9(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var A4=new Date(1899,11,31,0,0,0),P9=A4.getTime(),T9=new Date(1900,2,1,0,0,0);function R4(t,s){var r=t.getTime();return s?r-=1461*24*60*60*1e3:t>=T9&&(r+=24*60*60*1e3),(r-(P9+(t.getTimezoneOffset()-A4.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function my(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function _9(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function A9(t){var s=t<0?12:11,r=my(t.toFixed(12));return r.length<=s||(r=t.toPrecision(10),r.length<=s)?r:t.toExponential(5)}function R9(t){var s=my(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function cu(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return s>=-4&&s<=-1?r=t.toPrecision(10+s):Math.abs(s)<=9?r=A9(t):s===10?r=t.toFixed(10).substr(0,12):r=R9(t),my(_9(r.toUpperCase()))}function ho(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):cu(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return wn(14,R4(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function F9(t,s){s[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function D9(t,s,r,a){var n="",i=0,l=0,o=r.y,c,u=0;switch(t){case 98:o=r.y+543;case 121:switch(s.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(s.length){case 1:case 2:c=r.m,u=s.length;break;case 3:return Cf[r.m-1][1];case 5:return Cf[r.m-1][0];default:return Cf[r.m-1][2]}break;case 100:switch(s.length){case 1:case 2:c=r.d,u=s.length;break;case 3:return sw[r.q][0];default:return sw[r.q][1]}break;case 104:switch(s.length){case 1:case 2:c=1+(r.H+11)%12,u=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:c=r.H,u=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:c=r.M,u=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return r.u===0&&(s=="s"||s=="ss")?Fn(r.S,s.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=Fn(i,2+a),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+s}u=s.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Fn(c,u):"";return d}function dl(t){var s=3;if(t.length<=s)return t;for(var r=t.length%s,a=t.substr(0,r);r!=t.length;r+=s)a+=(a.length>0?",":"")+t.substr(r,s);return a}var F4=/%/g;function I9(t,s,r){var a=s.replace(F4,""),n=s.length-a.length;return Fi(t,a,r*Math.pow(10,2*n))+ir("%",n)}function O9(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return Fi(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function D4(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+D4(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),r.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(n+i)%n)+"."+d.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var I4=/# (\?+)( ?)\/( ?)(\d+)/;function M9(t,s,r){var a=parseInt(t[4],10),n=Math.round(s*a),i=Math.floor(n/a),l=n-i*a,o=a;return r+(i===0?"":""+i)+" "+(l===0?ir(" ",t[1].length+1+t[4].length):uy(l,t[1].length)+t[2]+"/"+t[3]+Fn(o,t[4].length))}function B9(t,s,r){return r+(s===0?"":""+s)+ir(" ",t[1].length+2+t[4].length)}var O4=/^#*0*\.([0#]+)/,M4=/\).*[0#]/,B4=/\(###\) ###\\?-####/;function Ca(t){for(var s="",r,a=0;a!=t.length;++a)switch(r=t.charCodeAt(a)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(r)}return s}function aw(t,s){var r=Math.pow(10,s);return""+Math.round(t*r)/r}function nw(t,s){var r=t-Math.floor(t),a=Math.pow(10,s);return s<(""+Math.round(r*a)).length?0:Math.round(r*a)}function L9(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function $9(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function mn(t,s,r){if(t.charCodeAt(0)===40&&!s.match(M4)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?mn("n",a,r):"("+mn("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return O9(t,s,r);if(s.indexOf("%")!==-1)return I9(t,s,r);if(s.indexOf("E")!==-1)return D4(s,r);if(s.charCodeAt(0)===36)return"$"+mn(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),u=r<0?"-":"";if(s.match(/^00+$/))return u+Uo(c,s.length);if(s.match(/^[#?]+$/))return n=Uo(r,0),n==="0"&&(n=""),n.length>s.length?n:Ca(s.substr(0,s.length-n.length))+n;if(i=s.match(I4))return M9(i,c,u);if(s.match(/^#+0+$/))return u+Uo(c,s.length-s.indexOf("0"));if(i=s.match(O4))return n=aw(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ca(i[1])).replace(/\.$/,"."+Ca(i[1])).replace(/\.(\d*)$/,function(p,f){return"."+f+ir("0",Ca(i[1]).length-f.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return u+aw(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return u+dl(Uo(c,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+mn(t,s,-r):dl(""+(Math.floor(r)+L9(r,i[1].length)))+"."+Fn(nw(r,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return mn(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=uc(mn(t,s.replace(/[\\-]/g,""),r)),l=0,uc(uc(s.replace(/\\/g,"")).replace(/[0#]/g,function(p){return l<n.length?n.charAt(l++):p==="0"?"0":""}));if(s.match(B4))return n=mn(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=G0(c,Math.pow(10,l)-1,!1),n=""+u,d=Fi("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+i[2]+"/"+i[3],d=V0(o[2],l),d.length<i[4].length&&(d=Ca(i[4].substr(i[4].length-d.length))+d),n+=d,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=G0(c,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?uy(o[1],l)+i[2]+"/"+i[3]+V0(o[2],l):ir(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=Uo(r,0),s.length<=n.length?n:Ca(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var m=s.indexOf(".")-l,x=s.length-n.length-m;return Ca(s.substr(0,m)+n+s.substr(s.length-x))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=nw(r,i[1].length),r<0?"-"+mn(t,s,-r):dl($9(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Fn(0,3-p.length):"")+p})+"."+Fn(l,i[1].length);switch(s){case"###,##0.00":return mn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=dl(Uo(c,0));return g!=="0"?u+g:"";case"###,###.00":return mn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return mn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function U9(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return Fi(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function H9(t,s,r){var a=s.replace(F4,""),n=s.length-a.length;return Fi(t,a,r*Math.pow(10,2*n))+ir("%",n)}function L4(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+L4(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),!r.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(n+i)%n)+"."+d.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ei(t,s,r){if(t.charCodeAt(0)===40&&!s.match(M4)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ei("n",a,r):"("+ei("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return U9(t,s,r);if(s.indexOf("%")!==-1)return H9(t,s,r);if(s.indexOf("E")!==-1)return L4(s,r);if(s.charCodeAt(0)===36)return"$"+ei(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),u=r<0?"-":"";if(s.match(/^00+$/))return u+Fn(c,s.length);if(s.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>s.length?n:Ca(s.substr(0,s.length-n.length))+n;if(i=s.match(I4))return B9(i,c,u);if(s.match(/^#+0+$/))return u+Fn(c,s.length-s.indexOf("0"));if(i=s.match(O4))return n=(""+r).replace(/^([^\.]+)$/,"$1."+Ca(i[1])).replace(/\.$/,"."+Ca(i[1])),n=n.replace(/\.(\d*)$/,function(p,f){return"."+f+ir("0",Ca(i[1]).length-f.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return u+dl(""+c);if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ei(t,s,-r):dl(""+r)+"."+ir("0",i[1].length);if(i=s.match(/^#,#*,#0/))return ei(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=uc(ei(t,s.replace(/[\\-]/g,""),r)),l=0,uc(uc(s.replace(/\\/g,"")).replace(/[0#]/g,function(p){return l<n.length?n.charAt(l++):p==="0"?"0":""}));if(s.match(B4))return n=ei(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=G0(c,Math.pow(10,l)-1,!1),n=""+u,d=Fi("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+i[2]+"/"+i[3],d=V0(o[2],l),d.length<i[4].length&&(d=Ca(i[4].substr(i[4].length-d.length))+d),n+=d,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=G0(c,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?uy(o[1],l)+i[2]+"/"+i[3]+V0(o[2],l):ir(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+r,s.length<=n.length?n:Ca(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var m=s.indexOf(".")-l,x=s.length-n.length-m;return Ca(s.substr(0,m)+n+s.substr(s.length-x))}if(i=s.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ei(t,s,-r):dl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Fn(0,3-p.length):"")+p})+"."+Fn(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var g=dl(""+c);return g!=="0"?u+g:"";default:if(s.match(/\.[0#?]*$/))return ei(t,s.slice(0,s.lastIndexOf(".")),r)+Ca(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Fi(t,s,r){return(r|0)===r?ei(t,s,r):mn(t,s,r)}function W9(t){for(var s=[],r=!1,a=0,n=0;a<t.length;++a)switch(t.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:s[s.length]=t.substr(n,a-n),n=a+1}if(s[s.length]=t.substr(n),r===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var $4=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Yc(t){for(var s=0,r="",a="";s<t.length;)switch(r=t.charAt(s)){case"G":z0(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="上午/下午")return!0;++s;break;case"[":for(a=r;t.charAt(s++)!=="]"&&s<t.length;)a+=t.charAt(s);if(a.match($4))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++s))>-1||r=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===r;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function V9(t,s,r,a){for(var n=[],i="",l=0,o="",c="t",u,d,m,x="H";l<t.length;)switch(o=t.charAt(l)){case"G":if(!z0(t,l))throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(m=t.charCodeAt(++l))!==34&&l<t.length;)i+=String.fromCharCode(m);n[n.length]={t:"t",v:i},++l;break;case"\\":var g=t.charAt(++l),p=g==="("||g===")"?g:"t";n[n.length]={t:p,v:g},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(t.charAt(l+1)==="1"||t.charAt(l+1)==="2"){if(u==null&&(u=Kl(s,r,t.charAt(l+1)==="2"),u==null))return"";n[n.length]={t:"X",v:t.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||u==null&&(u=Kl(s,r),u==null))return"";for(i=o;++l<t.length&&t.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=x),n[n.length]={t:o,v:i},c=o;break;case"A":case"a":case"上":var f={t:o,v:o};if(u==null&&(u=Kl(s,r)),t.substr(l,3).toUpperCase()==="A/P"?(u!=null&&(f.v=u.H>=12?"P":"A"),f.t="T",x="h",l+=3):t.substr(l,5).toUpperCase()==="AM/PM"?(u!=null&&(f.v=u.H>=12?"PM":"AM"),f.t="T",l+=5,x="h"):t.substr(l,5).toUpperCase()==="上午/下午"?(u!=null&&(f.v=u.H>=12?"下午":"上午"),f.t="T",l+=5,x="h"):(f.t="t",++l),u==null&&f.t==="T")return"";n[n.length]=f,c=o;break;case"[":for(i=o;t.charAt(l++)!=="]"&&l<t.length;)i+=t.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match($4)){if(u==null&&(u=Kl(s,r),u==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Yc(t)||(n[n.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++l<t.length&&(o=t.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},c=o;break;case"*":++l,(t.charAt(l)==" "||t.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:a===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<t.length&&"0123456789".indexOf(t.charAt(++l))>-1;)i+=t.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"t",v:o},++l;break}var b=0,y=0,v;for(l=n.length-1,c="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=x,c="h",b<1&&(b=1);break;case"s":(v=n[l].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=n[l].t;break;case"m":c==="s"&&(n[l].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&n[l].v.match(/[Hh]/)&&(b=1),b<2&&n[l].v.match(/[Mm]/)&&(b=2),b<3&&n[l].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var N="",S;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=D9(n[l].t.charCodeAt(0),n[l].v,u,y),n[l].t="t";break;case"n":case"?":for(S=l+1;n[S]!=null&&((o=n[S].t)==="?"||o==="D"||(o===" "||o==="t")&&n[S+1]!=null&&(n[S+1].t==="?"||n[S+1].t==="t"&&n[S+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[S].v==="/"||n[S].v===" "&&n[S+1]!=null&&n[S+1].t=="?"));)n[l].v+=n[S].v,n[S]={v:"",t:";"},++S;N+=n[l].v,l=S-1;break;case"G":n[l].t="t",n[l].v=ho(s,r);break}var w="",C,j;if(N.length>0){N.charCodeAt(0)==40?(C=s<0&&N.charCodeAt(0)===45?-s:s,j=Fi("n",N,C)):(C=s<0&&a>1?-s:s,j=Fi("n",N,C),C<0&&n[0]&&n[0].t=="t"&&(j=j.substr(1),n[0].v="-"+n[0].v)),S=j.length-1;var k=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){k=l;break}var E=n.length;if(k===n.length&&j.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(S>=n[l].v.length-1?(S-=n[l].v.length,n[l].v=j.substr(S+1,n[l].v.length)):S<0?n[l].v="":(n[l].v=j.substr(0,S+1),S=-1),n[l].t="t",E=l);S>=0&&E<n.length&&(n[E].v=j.substr(0,S+1)+n[E].v)}else if(k!==n.length&&j.indexOf("E")===-1){for(S=j.indexOf(".")-1,l=k;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(d=n[l].v.indexOf(".")>-1&&l===k?n[l].v.indexOf(".")-1:n[l].v.length-1,w=n[l].v.substr(d+1);d>=0;--d)S>=0&&(n[l].v.charAt(d)==="0"||n[l].v.charAt(d)==="#")&&(w=j.charAt(S--)+w);n[l].v=w,n[l].t="t",E=l}for(S>=0&&E<n.length&&(n[E].v=j.substr(0,S+1)+n[E].v),S=j.indexOf(".")+1,l=k;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==k)){for(d=n[l].v.indexOf(".")>-1&&l===k?n[l].v.indexOf(".")+1:0,w=n[l].v.substr(0,d);d<n[l].v.length;++d)S<j.length&&(w+=j.charAt(S++));n[l].v=w,n[l].t="t",E=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(C=a>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=Fi(n[l].t,n[l].v,C),n[l].t="t");var R="";for(l=0;l!==n.length;++l)n[l]!=null&&(R+=n[l].v);return R}var iw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function lw(t,s){if(s==null)return!1;var r=parseFloat(s[2]);switch(s[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function z9(t,s){var r=W9(t),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof s!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=s>0?r[0]:s<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(iw),o=r[1].match(iw);return lw(s,l)?[a,r[0]]:lw(s,o)?[a,r[1]]:[a,r[l!=null&&o!=null?2:1]]}return[a,i]}function wn(t,s,r){r==null&&(r={});var a="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?a=r.dateNF:a=t;break;case"number":t==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:bt)[t],a==null&&(a=r.table&&r.table[rw[t]]||bt[rw[t]]),a==null&&(a=E9[t]||"General");break}if(z0(a,0))return ho(s,r);s instanceof Date&&(s=R4(s,r.date1904));var n=z9(a,s);if(z0(n[1]))return ho(s,r);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return V9(n[1],s,r,n[0])}function Di(t,s){if(typeof s!="number"){s=+s||-1;for(var r=0;r<392;++r){if(bt[r]==null){s<0&&(s=r);continue}if(bt[r]==t){s=r;break}}s<0&&(s=391)}return bt[s]=t,s}function Zx(t){for(var s=0;s!=392;++s)t[s]!==void 0&&Di(t[s],s)}function Kc(){bt=k9()}var G9={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},U4=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function q9(t){var s=typeof t=="number"?bt[t]:t;return s=s.replace(U4,"(\\d+)"),new RegExp("^"+s+"$")}function Y9(t,s,r){var a=-1,n=-1,i=-1,l=-1,o=-1,c=-1;(s.match(U4)||[]).forEach(function(m,x){var g=parseInt(r[x+1],10);switch(m.toLowerCase().charAt(0)){case"y":a=g;break;case"d":i=g;break;case"h":l=g;break;case"s":c=g;break;case"m":l>=0?o=g:n=g;break}}),c>=0&&o==-1&&n>=0&&(o=n,n=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?u:a==-1&&n==-1&&i==-1?d:u+"T"+d}var K9=function(){var t={};t.version="1.2.0";function s(){for(var j=0,k=new Array(256),E=0;E!=256;++E)j=E,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,k[E]=j;return typeof Int32Array<"u"?new Int32Array(k):k}var r=s();function a(j){var k=0,E=0,R=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)D[R]=j[R];for(R=0;R!=256;++R)for(E=j[R],k=256+R;k<4096;k+=256)E=D[k]=E>>>8^j[E&255];var P=[];for(R=1;R!=16;++R)P[R-1]=typeof Int32Array<"u"?D.subarray(R*256,R*256+256):D.slice(R*256,R*256+256);return P}var n=a(r),i=n[0],l=n[1],o=n[2],c=n[3],u=n[4],d=n[5],m=n[6],x=n[7],g=n[8],p=n[9],f=n[10],b=n[11],y=n[12],v=n[13],N=n[14];function S(j,k){for(var E=k^-1,R=0,D=j.length;R<D;)E=E>>>8^r[(E^j.charCodeAt(R++))&255];return~E}function w(j,k){for(var E=k^-1,R=j.length-15,D=0;D<R;)E=N[j[D++]^E&255]^v[j[D++]^E>>8&255]^y[j[D++]^E>>16&255]^b[j[D++]^E>>>24]^f[j[D++]]^p[j[D++]]^g[j[D++]]^x[j[D++]]^m[j[D++]]^d[j[D++]]^u[j[D++]]^c[j[D++]]^o[j[D++]]^l[j[D++]]^i[j[D++]]^r[j[D++]];for(R+=15;D<R;)E=E>>>8^r[(E^j[D++])&255];return~E}function C(j,k){for(var E=k^-1,R=0,D=j.length,P=0,T=0;R<D;)P=j.charCodeAt(R++),P<128?E=E>>>8^r[(E^P)&255]:P<2048?(E=E>>>8^r[(E^(192|P>>6&31))&255],E=E>>>8^r[(E^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,T=j.charCodeAt(R++)&1023,E=E>>>8^r[(E^(240|P>>8&7))&255],E=E>>>8^r[(E^(128|P>>2&63))&255],E=E>>>8^r[(E^(128|T>>6&15|(P&3)<<4))&255],E=E>>>8^r[(E^(128|T&63))&255]):(E=E>>>8^r[(E^(224|P>>12&15))&255],E=E>>>8^r[(E^(128|P>>6&63))&255],E=E>>>8^r[(E^(128|P&63))&255]);return~E}return t.table=r,t.bstr=S,t.buf=w,t.str=C,t}(),lt=function(){var s={};s.version="1.2.1";function r(X,se){for(var Z=X.split("/"),te=se.split("/"),re=0,ne=0,he=Math.min(Z.length,te.length);re<he;++re){if(ne=Z[re].length-te[re].length)return ne;if(Z[re]!=te[re])return Z[re]<te[re]?-1:1}return Z.length-te.length}function a(X){if(X.charAt(X.length-1)=="/")return X.slice(0,-1).indexOf("/")===-1?X:a(X.slice(0,-1));var se=X.lastIndexOf("/");return se===-1?X:X.slice(0,se+1)}function n(X){if(X.charAt(X.length-1)=="/")return n(X.slice(0,-1));var se=X.lastIndexOf("/");return se===-1?X:X.slice(se+1)}function i(X,se){typeof se=="string"&&(se=new Date(se));var Z=se.getHours();Z=Z<<6|se.getMinutes(),Z=Z<<5|se.getSeconds()>>>1,X.write_shift(2,Z);var te=se.getFullYear()-1980;te=te<<4|se.getMonth()+1,te=te<<5|se.getDate(),X.write_shift(2,te)}function l(X){var se=X.read_shift(2)&65535,Z=X.read_shift(2)&65535,te=new Date,re=Z&31;Z>>>=5;var ne=Z&15;Z>>>=4,te.setMilliseconds(0),te.setFullYear(Z+1980),te.setMonth(ne-1),te.setDate(re);var he=se&31;se>>>=5;var je=se&63;return se>>>=6,te.setHours(se),te.setMinutes(je),te.setSeconds(he<<1),te}function o(X){Jr(X,0);for(var se={},Z=0;X.l<=X.length-4;){var te=X.read_shift(2),re=X.read_shift(2),ne=X.l+re,he={};switch(te){case 21589:Z=X.read_shift(1),Z&1&&(he.mtime=X.read_shift(4)),re>5&&(Z&2&&(he.atime=X.read_shift(4)),Z&4&&(he.ctime=X.read_shift(4))),he.mtime&&(he.mt=new Date(he.mtime*1e3));break}X.l=ne,se[te]=he}return se}var c;function u(){return c||(c={})}function d(X,se){if(X[0]==80&&X[1]==75)return cs(X,se);if((X[0]|32)==109&&(X[1]|32)==105)return tt(X,se);if(X.length<512)throw new Error("CFB file size "+X.length+" < 512");var Z=3,te=512,re=0,ne=0,he=0,je=0,ue=0,xe=[],ge=X.slice(0,512);Jr(ge,0);var Re=m(ge);switch(Z=Re[0],Z){case 3:te=512;break;case 4:te=4096;break;case 0:if(Re[1]==0)return cs(X,se);default:throw new Error("Major Version: Expected 3 or 4 saw "+Z)}te!==512&&(ge=X.slice(0,te),Jr(ge,28));var Ae=X.slice(0,te);x(ge,Z);var Ye=ge.read_shift(4,"i");if(Z===3&&Ye!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ye);ge.l+=4,he=ge.read_shift(4,"i"),ge.l+=4,ge.chk("00100000","Mini Stream Cutoff Size: "),je=ge.read_shift(4,"i"),re=ge.read_shift(4,"i"),ue=ge.read_shift(4,"i"),ne=ge.read_shift(4,"i");for(var Me=-1,Ge=0;Ge<109&&(Me=ge.read_shift(4,"i"),!(Me<0));++Ge)xe[Ge]=Me;var nt=g(X,te);b(ue,ne,nt,te,xe);var ts=v(nt,he,xe,te);ts[he].name="!Directory",re>0&&je!==T&&(ts[je].name="!MiniFAT"),ts[xe[0]].name="!FAT",ts.fat_addrs=xe,ts.ssz=te;var hs={},Js=[],nn=[],na=[];N(he,ts,nt,Js,re,hs,nn,je),p(nn,na,Js),Js.shift();var Ir={FileIndex:nn,FullPaths:na};return se&&se.raw&&(Ir.raw={header:Ae,sectors:nt}),Ir}function m(X){if(X[X.l]==80&&X[X.l+1]==75)return[0,0];X.chk(B,"Header Signature: "),X.l+=16;var se=X.read_shift(2,"u");return[X.read_shift(2,"u"),se]}function x(X,se){var Z=9;switch(X.l+=2,Z=X.read_shift(2)){case 9:if(se!=3)throw new Error("Sector Shift: Expected 9 saw "+Z);break;case 12:if(se!=4)throw new Error("Sector Shift: Expected 12 saw "+Z);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Z)}X.chk("0600","Mini Sector Shift: "),X.chk("000000000000","Reserved: ")}function g(X,se){for(var Z=Math.ceil(X.length/se)-1,te=[],re=1;re<Z;++re)te[re-1]=X.slice(re*se,(re+1)*se);return te[Z-1]=X.slice(Z*se),te}function p(X,se,Z){for(var te=0,re=0,ne=0,he=0,je=0,ue=Z.length,xe=[],ge=[];te<ue;++te)xe[te]=ge[te]=te,se[te]=Z[te];for(;je<ge.length;++je)te=ge[je],re=X[te].L,ne=X[te].R,he=X[te].C,xe[te]===te&&(re!==-1&&xe[re]!==re&&(xe[te]=xe[re]),ne!==-1&&xe[ne]!==ne&&(xe[te]=xe[ne])),he!==-1&&(xe[he]=te),re!==-1&&te!=xe[te]&&(xe[re]=xe[te],ge.lastIndexOf(re)<je&&ge.push(re)),ne!==-1&&te!=xe[te]&&(xe[ne]=xe[te],ge.lastIndexOf(ne)<je&&ge.push(ne));for(te=1;te<ue;++te)xe[te]===te&&(ne!==-1&&xe[ne]!==ne?xe[te]=xe[ne]:re!==-1&&xe[re]!==re&&(xe[te]=xe[re]));for(te=1;te<ue;++te)if(X[te].type!==0){if(je=te,je!=xe[je])do je=xe[je],se[te]=se[je]+"/"+se[te];while(je!==0&&xe[je]!==-1&&je!=xe[je]);xe[te]=-1}for(se[0]+="/",te=1;te<ue;++te)X[te].type!==2&&(se[te]+="/")}function f(X,se,Z){for(var te=X.start,re=X.size,ne=[],he=te;Z&&re>0&&he>=0;)ne.push(se.slice(he*P,he*P+P)),re-=P,he=Gl(Z,he*4);return ne.length===0?Ne(0):$r(ne).slice(0,X.size)}function b(X,se,Z,te,re){var ne=T;if(X===T){if(se!==0)throw new Error("DIFAT chain shorter than expected")}else if(X!==-1){var he=Z[X],je=(te>>>2)-1;if(!he)return;for(var ue=0;ue<je&&(ne=Gl(he,ue*4))!==T;++ue)re.push(ne);b(Gl(he,te-4),se-1,Z,te,re)}}function y(X,se,Z,te,re){var ne=[],he=[];re||(re=[]);var je=te-1,ue=0,xe=0;for(ue=se;ue>=0;){re[ue]=!0,ne[ne.length]=ue,he.push(X[ue]);var ge=Z[Math.floor(ue*4/te)];if(xe=ue*4&je,te<4+xe)throw new Error("FAT boundary crossed: "+ue+" 4 "+te);if(!X[ge])break;ue=Gl(X[ge],xe)}return{nodes:ne,data:yw([he])}}function v(X,se,Z,te){var re=X.length,ne=[],he=[],je=[],ue=[],xe=te-1,ge=0,Re=0,Ae=0,Ye=0;for(ge=0;ge<re;++ge)if(je=[],Ae=ge+se,Ae>=re&&(Ae-=re),!he[Ae]){ue=[];var Me=[];for(Re=Ae;Re>=0;){Me[Re]=!0,he[Re]=!0,je[je.length]=Re,ue.push(X[Re]);var Ge=Z[Math.floor(Re*4/te)];if(Ye=Re*4&xe,te<4+Ye)throw new Error("FAT boundary crossed: "+Re+" 4 "+te);if(!X[Ge]||(Re=Gl(X[Ge],Ye),Me[Re]))break}ne[Ae]={nodes:je,data:yw([ue])}}return ne}function N(X,se,Z,te,re,ne,he,je){for(var ue=0,xe=te.length?2:0,ge=se[X].data,Re=0,Ae=0,Ye;Re<ge.length;Re+=128){var Me=ge.slice(Re,Re+128);Jr(Me,64),Ae=Me.read_shift(2),Ye=yy(Me,0,Ae-xe),te.push(Ye);var Ge={name:Ye,type:Me.read_shift(1),color:Me.read_shift(1),L:Me.read_shift(4,"i"),R:Me.read_shift(4,"i"),C:Me.read_shift(4,"i"),clsid:Me.read_shift(16),state:Me.read_shift(4,"i"),start:0,size:0},nt=Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2);nt!==0&&(Ge.ct=S(Me,Me.l-8));var ts=Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2);ts!==0&&(Ge.mt=S(Me,Me.l-8)),Ge.start=Me.read_shift(4,"i"),Ge.size=Me.read_shift(4,"i"),Ge.size<0&&Ge.start<0&&(Ge.size=Ge.type=0,Ge.start=T,Ge.name=""),Ge.type===5?(ue=Ge.start,re>0&&ue!==T&&(se[ue].name="!StreamData")):Ge.size>=4096?(Ge.storage="fat",se[Ge.start]===void 0&&(se[Ge.start]=y(Z,Ge.start,se.fat_addrs,se.ssz)),se[Ge.start].name=Ge.name,Ge.content=se[Ge.start].data.slice(0,Ge.size)):(Ge.storage="minifat",Ge.size<0?Ge.size=0:ue!==T&&Ge.start!==T&&se[ue]&&(Ge.content=f(Ge,se[ue].data,(se[je]||{}).data))),Ge.content&&Jr(Ge.content,0),ne[Ye]=Ge,he.push(Ge)}}function S(X,se){return new Date((Ya(X,se+4)/1e7*Math.pow(2,32)+Ya(X,se)/1e7-11644473600)*1e3)}function w(X,se){return u(),d(c.readFileSync(X),se)}function C(X,se){var Z=se&&se.type;switch(Z||Ht&&Buffer.isBuffer(X)&&(Z="buffer"),Z||"base64"){case"file":return w(X,se);case"base64":return d(Ka(tn(X)),se);case"binary":return d(Ka(X),se)}return d(X,se)}function j(X,se){var Z=se||{},te=Z.root||"Root Entry";if(X.FullPaths||(X.FullPaths=[]),X.FileIndex||(X.FileIndex=[]),X.FullPaths.length!==X.FileIndex.length)throw new Error("inconsistent CFB structure");X.FullPaths.length===0&&(X.FullPaths[0]=te+"/",X.FileIndex[0]={name:te,type:5}),Z.CLSID&&(X.FileIndex[0].clsid=Z.CLSID),k(X)}function k(X){var se="Sh33tJ5";if(!lt.find(X,"/"+se)){var Z=Ne(4);Z[0]=55,Z[1]=Z[3]=50,Z[2]=54,X.FileIndex.push({name:se,type:2,content:Z,size:4,L:69,R:69,C:69}),X.FullPaths.push(X.FullPaths[0]+se),E(X)}}function E(X,se){j(X);for(var Z=!1,te=!1,re=X.FullPaths.length-1;re>=0;--re){var ne=X.FileIndex[re];switch(ne.type){case 0:te?Z=!0:(X.FileIndex.pop(),X.FullPaths.pop());break;case 1:case 2:case 5:te=!0,isNaN(ne.R*ne.L*ne.C)&&(Z=!0),ne.R>-1&&ne.L>-1&&ne.R==ne.L&&(Z=!0);break;default:Z=!0;break}}if(!(!Z&&!se)){var he=new Date(1987,1,19),je=0,ue=Object.create?Object.create(null):{},xe=[];for(re=0;re<X.FullPaths.length;++re)ue[X.FullPaths[re]]=!0,X.FileIndex[re].type!==0&&xe.push([X.FullPaths[re],X.FileIndex[re]]);for(re=0;re<xe.length;++re){var ge=a(xe[re][0]);te=ue[ge],te||(xe.push([ge,{name:n(ge).replace("/",""),type:1,clsid:L,ct:he,mt:he,content:null}]),ue[ge]=!0)}for(xe.sort(function(Ye,Me){return r(Ye[0],Me[0])}),X.FullPaths=[],X.FileIndex=[],re=0;re<xe.length;++re)X.FullPaths[re]=xe[re][0],X.FileIndex[re]=xe[re][1];for(re=0;re<xe.length;++re){var Re=X.FileIndex[re],Ae=X.FullPaths[re];if(Re.name=n(Ae).replace("/",""),Re.L=Re.R=Re.C=-(Re.color=1),Re.size=Re.content?Re.content.length:0,Re.start=0,Re.clsid=Re.clsid||L,re===0)Re.C=xe.length>1?1:-1,Re.size=0,Re.type=5;else if(Ae.slice(-1)=="/"){for(je=re+1;je<xe.length&&a(X.FullPaths[je])!=Ae;++je);for(Re.C=je>=xe.length?-1:je,je=re+1;je<xe.length&&a(X.FullPaths[je])!=a(Ae);++je);Re.R=je>=xe.length?-1:je,Re.type=1}else a(X.FullPaths[re+1]||"")==a(Ae)&&(Re.R=re+1),Re.type=2}}}function R(X,se){var Z=se||{};if(Z.fileType=="mad")return Pt(X,Z);switch(E(X),Z.fileType){case"zip":return Gr(X,Z)}var te=function(Ye){for(var Me=0,Ge=0,nt=0;nt<Ye.FileIndex.length;++nt){var ts=Ye.FileIndex[nt];if(ts.content){var hs=ts.content.length;hs>0&&(hs<4096?Me+=hs+63>>6:Ge+=hs+511>>9)}}for(var Js=Ye.FullPaths.length+3>>2,nn=Me+7>>3,na=Me+127>>7,Ir=nn+Ge+Js+na,Na=Ir+127>>7,Ha=Na<=109?0:Math.ceil((Na-109)/127);Ir+Na+Ha+127>>7>Na;)Ha=++Na<=109?0:Math.ceil((Na-109)/127);var Yr=[1,Ha,Na,na,Js,Ge,Me,0];return Ye.FileIndex[0].size=Me<<6,Yr[7]=(Ye.FileIndex[0].start=Yr[0]+Yr[1]+Yr[2]+Yr[3]+Yr[4]+Yr[5])+(Yr[6]+7>>3),Yr}(X),re=Ne(te[7]<<9),ne=0,he=0;{for(ne=0;ne<8;++ne)re.write_shift(1,F[ne]);for(ne=0;ne<8;++ne)re.write_shift(2,0);for(re.write_shift(2,62),re.write_shift(2,3),re.write_shift(2,65534),re.write_shift(2,9),re.write_shift(2,6),ne=0;ne<3;++ne)re.write_shift(2,0);for(re.write_shift(4,0),re.write_shift(4,te[2]),re.write_shift(4,te[0]+te[1]+te[2]+te[3]-1),re.write_shift(4,0),re.write_shift(4,4096),re.write_shift(4,te[3]?te[0]+te[1]+te[2]-1:T),re.write_shift(4,te[3]),re.write_shift(-4,te[1]?te[0]-1:T),re.write_shift(4,te[1]),ne=0;ne<109;++ne)re.write_shift(-4,ne<te[2]?te[1]+ne:-1)}if(te[1])for(he=0;he<te[1];++he){for(;ne<236+he*127;++ne)re.write_shift(-4,ne<te[2]?te[1]+ne:-1);re.write_shift(-4,he===te[1]-1?T:he+1)}var je=function(Ye){for(he+=Ye;ne<he-1;++ne)re.write_shift(-4,ne+1);Ye&&(++ne,re.write_shift(-4,T))};for(he=ne=0,he+=te[1];ne<he;++ne)re.write_shift(-4,I.DIFSECT);for(he+=te[2];ne<he;++ne)re.write_shift(-4,I.FATSECT);je(te[3]),je(te[4]);for(var ue=0,xe=0,ge=X.FileIndex[0];ue<X.FileIndex.length;++ue)ge=X.FileIndex[ue],ge.content&&(xe=ge.content.length,!(xe<4096)&&(ge.start=he,je(xe+511>>9)));for(je(te[6]+7>>3);re.l&511;)re.write_shift(-4,I.ENDOFCHAIN);for(he=ne=0,ue=0;ue<X.FileIndex.length;++ue)ge=X.FileIndex[ue],ge.content&&(xe=ge.content.length,!(!xe||xe>=4096)&&(ge.start=he,je(xe+63>>6)));for(;re.l&511;)re.write_shift(-4,I.ENDOFCHAIN);for(ne=0;ne<te[4]<<2;++ne){var Re=X.FullPaths[ne];if(!Re||Re.length===0){for(ue=0;ue<17;++ue)re.write_shift(4,0);for(ue=0;ue<3;++ue)re.write_shift(4,-1);for(ue=0;ue<12;++ue)re.write_shift(4,0);continue}ge=X.FileIndex[ne],ne===0&&(ge.start=ge.size?ge.start-1:T);var Ae=ne===0&&Z.root||ge.name;if(xe=2*(Ae.length+1),re.write_shift(64,Ae,"utf16le"),re.write_shift(2,xe),re.write_shift(1,ge.type),re.write_shift(1,ge.color),re.write_shift(-4,ge.L),re.write_shift(-4,ge.R),re.write_shift(-4,ge.C),ge.clsid)re.write_shift(16,ge.clsid,"hex");else for(ue=0;ue<4;++ue)re.write_shift(4,0);re.write_shift(4,ge.state||0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,ge.start),re.write_shift(4,ge.size),re.write_shift(4,0)}for(ne=1;ne<X.FileIndex.length;++ne)if(ge=X.FileIndex[ne],ge.size>=4096)if(re.l=ge.start+1<<9,Ht&&Buffer.isBuffer(ge.content))ge.content.copy(re,re.l,0,ge.size),re.l+=ge.size+511&-512;else{for(ue=0;ue<ge.size;++ue)re.write_shift(1,ge.content[ue]);for(;ue&511;++ue)re.write_shift(1,0)}for(ne=1;ne<X.FileIndex.length;++ne)if(ge=X.FileIndex[ne],ge.size>0&&ge.size<4096)if(Ht&&Buffer.isBuffer(ge.content))ge.content.copy(re,re.l,0,ge.size),re.l+=ge.size+63&-64;else{for(ue=0;ue<ge.size;++ue)re.write_shift(1,ge.content[ue]);for(;ue&63;++ue)re.write_shift(1,0)}if(Ht)re.l=re.length;else for(;re.l<re.length;)re.write_shift(1,0);return re}function D(X,se){var Z=X.FullPaths.map(function(ue){return ue.toUpperCase()}),te=Z.map(function(ue){var xe=ue.split("/");return xe[xe.length-(ue.slice(-1)=="/"?2:1)]}),re=!1;se.charCodeAt(0)===47?(re=!0,se=Z[0].slice(0,-1)+se):re=se.indexOf("/")!==-1;var ne=se.toUpperCase(),he=re===!0?Z.indexOf(ne):te.indexOf(ne);if(he!==-1)return X.FileIndex[he];var je=!ne.match(_d);for(ne=ne.replace(Ta,""),je&&(ne=ne.replace(_d,"!")),he=0;he<Z.length;++he)if((je?Z[he].replace(_d,"!"):Z[he]).replace(Ta,"")==ne||(je?te[he].replace(_d,"!"):te[he]).replace(Ta,"")==ne)return X.FileIndex[he];return null}var P=64,T=-2,B="d0cf11e0a1b11ae1",F=[208,207,17,224,161,177,26,225],L="00000000000000000000000000000000",I={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:T,FREESECT:-1,HEADER_SIGNATURE:B,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:L,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(X,se,Z){u();var te=R(X,Z);c.writeFileSync(se,te)}function _(X){for(var se=new Array(X.length),Z=0;Z<X.length;++Z)se[Z]=String.fromCharCode(X[Z]);return se.join("")}function G(X,se){var Z=R(X,se);switch(se&&se.type||"buffer"){case"file":return u(),c.writeFileSync(se.filename,Z),Z;case"binary":return typeof Z=="string"?Z:_(Z);case"base64":return ou(typeof Z=="string"?Z:_(Z));case"buffer":if(Ht)return Buffer.isBuffer(Z)?Z:qi(Z);case"array":return typeof Z=="string"?Ka(Z):Z}return Z}var U;function A(X){try{var se=X.InflateRaw,Z=new se;if(Z._processChunk(new Uint8Array([3,0]),Z._finishFlushFlag),Z.bytesRead)U=X;else throw new Error("zlib does not expose bytesRead")}catch(te){console.error("cannot use native zlib: "+(te.message||te))}}function q(X,se){if(!U)return Wt(X,se);var Z=U.InflateRaw,te=new Z,re=te._processChunk(X.slice(X.l),te._finishFlushFlag);return X.l+=te.bytesRead,re}function Y(X){return U?U.deflateRawSync(X):Pe(X)}var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function H(X){var se=(X<<1|X<<11)&139536|(X<<5|X<<15)&558144;return(se>>16|se>>8|se)&255}for(var Q=typeof Uint8Array<"u",J=Q?new Uint8Array(256):[],ie=0;ie<256;++ie)J[ie]=H(ie);function K(X,se){var Z=J[X&255];return se<=8?Z>>>8-se:(Z=Z<<8|J[X>>8&255],se<=16?Z>>>16-se:(Z=Z<<8|J[X>>16&255],Z>>>24-se))}function oe(X,se){var Z=se&7,te=se>>>3;return(X[te]|(Z<=6?0:X[te+1]<<8))>>>Z&3}function le(X,se){var Z=se&7,te=se>>>3;return(X[te]|(Z<=5?0:X[te+1]<<8))>>>Z&7}function Se(X,se){var Z=se&7,te=se>>>3;return(X[te]|(Z<=4?0:X[te+1]<<8))>>>Z&15}function Ee(X,se){var Z=se&7,te=se>>>3;return(X[te]|(Z<=3?0:X[te+1]<<8))>>>Z&31}function ye(X,se){var Z=se&7,te=se>>>3;return(X[te]|(Z<=1?0:X[te+1]<<8))>>>Z&127}function We(X,se,Z){var te=se&7,re=se>>>3,ne=(1<<Z)-1,he=X[re]>>>te;return Z<8-te||(he|=X[re+1]<<8-te,Z<16-te)||(he|=X[re+2]<<16-te,Z<24-te)||(he|=X[re+3]<<24-te),he&ne}function fe(X,se,Z){var te=se&7,re=se>>>3;return te<=5?X[re]|=(Z&7)<<te:(X[re]|=Z<<te&255,X[re+1]=(Z&7)>>8-te),se+3}function Fe(X,se,Z){var te=se&7,re=se>>>3;return Z=(Z&1)<<te,X[re]|=Z,se+1}function ce(X,se,Z){var te=se&7,re=se>>>3;return Z<<=te,X[re]|=Z&255,Z>>>=8,X[re+1]=Z,se+8}function Ce(X,se,Z){var te=se&7,re=se>>>3;return Z<<=te,X[re]|=Z&255,Z>>>=8,X[re+1]=Z&255,X[re+2]=Z>>>8,se+16}function ze(X,se){var Z=X.length,te=2*Z>se?2*Z:se+5,re=0;if(Z>=se)return X;if(Ht){var ne=ew(te);if(X.copy)X.copy(ne);else for(;re<X.length;++re)ne[re]=X[re];return ne}else if(Q){var he=new Uint8Array(te);if(he.set)he.set(X);else for(;re<Z;++re)he[re]=X[re];return he}return X.length=te,X}function De(X){for(var se=new Array(X),Z=0;Z<X;++Z)se[Z]=0;return se}function st(X,se,Z){var te=1,re=0,ne=0,he=0,je=0,ue=X.length,xe=Q?new Uint16Array(32):De(32);for(ne=0;ne<32;++ne)xe[ne]=0;for(ne=ue;ne<Z;++ne)X[ne]=0;ue=X.length;var ge=Q?new Uint16Array(ue):De(ue);for(ne=0;ne<ue;++ne)xe[re=X[ne]]++,te<re&&(te=re),ge[ne]=0;for(xe[0]=0,ne=1;ne<=te;++ne)xe[ne+16]=je=je+xe[ne-1]<<1;for(ne=0;ne<ue;++ne)je=X[ne],je!=0&&(ge[ne]=xe[je+16]++);var Re=0;for(ne=0;ne<ue;++ne)if(Re=X[ne],Re!=0)for(je=K(ge[ne],te)>>te-Re,he=(1<<te+4-Re)-1;he>=0;--he)se[je|he<<Re]=Re&15|ne<<4;return te}var Xe=Q?new Uint16Array(512):De(512),it=Q?new Uint16Array(32):De(32);if(!Q){for(var ft=0;ft<512;++ft)Xe[ft]=0;for(ft=0;ft<32;++ft)it[ft]=0}(function(){for(var X=[],se=0;se<32;se++)X.push(5);st(X,it,32);var Z=[];for(se=0;se<=143;se++)Z.push(8);for(;se<=255;se++)Z.push(9);for(;se<=279;se++)Z.push(7);for(;se<=287;se++)Z.push(8);st(Z,Xe,288)})();var be=function(){for(var se=Q?new Uint8Array(32768):[],Z=0,te=0;Z<z.length-1;++Z)for(;te<z[Z+1];++te)se[te]=Z;for(;te<32768;++te)se[te]=29;var re=Q?new Uint8Array(259):[];for(Z=0,te=0;Z<W.length-1;++Z)for(;te<W[Z+1];++te)re[te]=Z;function ne(je,ue){for(var xe=0;xe<je.length;){var ge=Math.min(65535,je.length-xe),Re=xe+ge==je.length;for(ue.write_shift(1,+Re),ue.write_shift(2,ge),ue.write_shift(2,~ge&65535);ge-- >0;)ue[ue.l++]=je[xe++]}return ue.l}function he(je,ue){for(var xe=0,ge=0,Re=Q?new Uint16Array(32768):[];ge<je.length;){var Ae=Math.min(65535,je.length-ge);if(Ae<10){for(xe=fe(ue,xe,+(ge+Ae==je.length)),xe&7&&(xe+=8-(xe&7)),ue.l=xe/8|0,ue.write_shift(2,Ae),ue.write_shift(2,~Ae&65535);Ae-- >0;)ue[ue.l++]=je[ge++];xe=ue.l*8;continue}xe=fe(ue,xe,+(ge+Ae==je.length)+2);for(var Ye=0;Ae-- >0;){var Me=je[ge];Ye=(Ye<<5^Me)&32767;var Ge=-1,nt=0;if((Ge=Re[Ye])&&(Ge|=ge&-32768,Ge>ge&&(Ge-=32768),Ge<ge))for(;je[Ge+nt]==je[ge+nt]&&nt<250;)++nt;if(nt>2){Me=re[nt],Me<=22?xe=ce(ue,xe,J[Me+1]>>1)-1:(ce(ue,xe,3),xe+=5,ce(ue,xe,J[Me-23]>>5),xe+=3);var ts=Me<8?0:Me-4>>2;ts>0&&(Ce(ue,xe,nt-W[Me]),xe+=ts),Me=se[ge-Ge],xe=ce(ue,xe,J[Me]>>3),xe-=3;var hs=Me<4?0:Me-2>>1;hs>0&&(Ce(ue,xe,ge-Ge-z[Me]),xe+=hs);for(var Js=0;Js<nt;++Js)Re[Ye]=ge&32767,Ye=(Ye<<5^je[ge])&32767,++ge;Ae-=nt-1}else Me<=143?Me=Me+48:xe=Fe(ue,xe,1),xe=ce(ue,xe,J[Me]),Re[Ye]=ge&32767,++ge}xe=ce(ue,xe,0)-1}return ue.l=(xe+7)/8|0,ue.l}return function(ue,xe){return ue.length<8?ne(ue,xe):he(ue,xe)}}();function Pe(X){var se=Ne(50+Math.floor(X.length*1.1)),Z=be(X,se);return se.slice(0,Z)}var ee=Q?new Uint16Array(32768):De(32768),me=Q?new Uint16Array(32768):De(32768),Te=Q?new Uint16Array(128):De(128),qe=1,gt=1;function Nt(X,se){var Z=Ee(X,se)+257;se+=5;var te=Ee(X,se)+1;se+=5;var re=Se(X,se)+4;se+=4;for(var ne=0,he=Q?new Uint8Array(19):De(19),je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ue=1,xe=Q?new Uint8Array(8):De(8),ge=Q?new Uint8Array(8):De(8),Re=he.length,Ae=0;Ae<re;++Ae)he[O[Ae]]=ne=le(X,se),ue<ne&&(ue=ne),xe[ne]++,se+=3;var Ye=0;for(xe[0]=0,Ae=1;Ae<=ue;++Ae)ge[Ae]=Ye=Ye+xe[Ae-1]<<1;for(Ae=0;Ae<Re;++Ae)(Ye=he[Ae])!=0&&(je[Ae]=ge[Ye]++);var Me=0;for(Ae=0;Ae<Re;++Ae)if(Me=he[Ae],Me!=0){Ye=J[je[Ae]]>>8-Me;for(var Ge=(1<<7-Me)-1;Ge>=0;--Ge)Te[Ye|Ge<<Me]=Me&7|Ae<<3}var nt=[];for(ue=1;nt.length<Z+te;)switch(Ye=Te[ye(X,se)],se+=Ye&7,Ye>>>=3){case 16:for(ne=3+oe(X,se),se+=2,Ye=nt[nt.length-1];ne-- >0;)nt.push(Ye);break;case 17:for(ne=3+le(X,se),se+=3;ne-- >0;)nt.push(0);break;case 18:for(ne=11+ye(X,se),se+=7;ne-- >0;)nt.push(0);break;default:nt.push(Ye),ue<Ye&&(ue=Ye);break}var ts=nt.slice(0,Z),hs=nt.slice(Z);for(Ae=Z;Ae<286;++Ae)ts[Ae]=0;for(Ae=te;Ae<30;++Ae)hs[Ae]=0;return qe=st(ts,ee,286),gt=st(hs,me,30),se}function mt(X,se){if(X[0]==3&&!(X[1]&3))return[vl(se),2];for(var Z=0,te=0,re=ew(se||1<<18),ne=0,he=re.length>>>0,je=0,ue=0;!(te&1);){if(te=le(X,Z),Z+=3,te>>>1)te>>1==1?(je=9,ue=5):(Z=Nt(X,Z),je=qe,ue=gt);else{Z&7&&(Z+=8-(Z&7));var xe=X[Z>>>3]|X[(Z>>>3)+1]<<8;if(Z+=32,xe>0)for(!se&&he<ne+xe&&(re=ze(re,ne+xe),he=re.length);xe-- >0;)re[ne++]=X[Z>>>3],Z+=8;continue}for(;;){!se&&he<ne+32767&&(re=ze(re,ne+32767),he=re.length);var ge=We(X,Z,je),Re=te>>>1==1?Xe[ge]:ee[ge];if(Z+=Re&15,Re>>>=4,!(Re>>>8&255))re[ne++]=Re;else{if(Re==256)break;Re-=257;var Ae=Re<8?0:Re-4>>2;Ae>5&&(Ae=0);var Ye=ne+W[Re];Ae>0&&(Ye+=We(X,Z,Ae),Z+=Ae),ge=We(X,Z,ue),Re=te>>>1==1?it[ge]:me[ge],Z+=Re&15,Re>>>=4;var Me=Re<4?0:Re-2>>1,Ge=z[Re];for(Me>0&&(Ge+=We(X,Z,Me),Z+=Me),!se&&he<Ye&&(re=ze(re,Ye+100),he=re.length);ne<Ye;)re[ne]=re[ne-Ge],++ne}}}return se?[re,Z+7>>>3]:[re.slice(0,ne),Z+7>>>3]}function Wt(X,se){var Z=X.slice(X.l||0),te=mt(Z,se);return X.l+=te[1],te[0]}function Le(X,se){if(X)typeof console<"u"&&console.error(se);else throw new Error(se)}function cs(X,se){var Z=X;Jr(Z,0);var te=[],re=[],ne={FileIndex:te,FullPaths:re};j(ne,{root:se.root});for(var he=Z.length-4;(Z[he]!=80||Z[he+1]!=75||Z[he+2]!=5||Z[he+3]!=6)&&he>=0;)--he;Z.l=he+4,Z.l+=4;var je=Z.read_shift(2);Z.l+=6;var ue=Z.read_shift(4);for(Z.l=ue,he=0;he<je;++he){Z.l+=20;var xe=Z.read_shift(4),ge=Z.read_shift(4),Re=Z.read_shift(2),Ae=Z.read_shift(2),Ye=Z.read_shift(2);Z.l+=8;var Me=Z.read_shift(4),Ge=o(Z.slice(Z.l+Re,Z.l+Re+Ae));Z.l+=Re+Ae+Ye;var nt=Z.l;Z.l=Me+4,Gs(Z,xe,ge,ne,Ge),Z.l=nt}return ne}function Gs(X,se,Z,te,re){X.l+=2;var ne=X.read_shift(2),he=X.read_shift(2),je=l(X);if(ne&8257)throw new Error("Unsupported ZIP encryption");for(var ue=X.read_shift(4),xe=X.read_shift(4),ge=X.read_shift(4),Re=X.read_shift(2),Ae=X.read_shift(2),Ye="",Me=0;Me<Re;++Me)Ye+=String.fromCharCode(X[X.l++]);if(Ae){var Ge=o(X.slice(X.l,X.l+Ae));(Ge[21589]||{}).mt&&(je=Ge[21589].mt),((re||{})[21589]||{}).mt&&(je=re[21589].mt)}X.l+=Ae;var nt=X.slice(X.l,X.l+xe);switch(he){case 8:nt=q(X,ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+he)}var ts=!1;ne&8&&(ue=X.read_shift(4),ue==134695760&&(ue=X.read_shift(4),ts=!0),xe=X.read_shift(4),ge=X.read_shift(4)),xe!=se&&Le(ts,"Bad compressed size: "+se+" != "+xe),ge!=Z&&Le(ts,"Bad uncompressed size: "+Z+" != "+ge),qr(te,Ye,nt,{unsafe:!0,mt:je})}function Gr(X,se){var Z=se||{},te=[],re=[],ne=Ne(1),he=Z.compression?8:0,je=0,ue=0,xe=0,ge=0,Re=0,Ae=X.FullPaths[0],Ye=Ae,Me=X.FileIndex[0],Ge=[],nt=0;for(ue=1;ue<X.FullPaths.length;++ue)if(Ye=X.FullPaths[ue].slice(Ae.length),Me=X.FileIndex[ue],!(!Me.size||!Me.content||Ye=="Sh33tJ5")){var ts=ge,hs=Ne(Ye.length);for(xe=0;xe<Ye.length;++xe)hs.write_shift(1,Ye.charCodeAt(xe)&127);hs=hs.slice(0,hs.l),Ge[Re]=K9.buf(Me.content,0);var Js=Me.content;he==8&&(Js=Y(Js)),ne=Ne(30),ne.write_shift(4,67324752),ne.write_shift(2,20),ne.write_shift(2,je),ne.write_shift(2,he),Me.mt?i(ne,Me.mt):ne.write_shift(4,0),ne.write_shift(-4,Ge[Re]),ne.write_shift(4,Js.length),ne.write_shift(4,Me.content.length),ne.write_shift(2,hs.length),ne.write_shift(2,0),ge+=ne.length,te.push(ne),ge+=hs.length,te.push(hs),ge+=Js.length,te.push(Js),ne=Ne(46),ne.write_shift(4,33639248),ne.write_shift(2,0),ne.write_shift(2,20),ne.write_shift(2,je),ne.write_shift(2,he),ne.write_shift(4,0),ne.write_shift(-4,Ge[Re]),ne.write_shift(4,Js.length),ne.write_shift(4,Me.content.length),ne.write_shift(2,hs.length),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(4,0),ne.write_shift(4,ts),nt+=ne.l,re.push(ne),nt+=hs.length,re.push(hs),++Re}return ne=Ne(22),ne.write_shift(4,101010256),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,Re),ne.write_shift(2,Re),ne.write_shift(4,nt),ne.write_shift(4,ge),ne.write_shift(2,0),$r([$r(te),$r(re),ne])}var Xs={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function _s(X,se){if(X.ctype)return X.ctype;var Z=X.name||"",te=Z.match(/\.([^\.]+)$/);return te&&Xs[te[1]]||se&&(te=(Z=se).match(/[\.\\]([^\.\\])+$/),te&&Xs[te[1]])?Xs[te[1]]:"application/octet-stream"}function ds(X){for(var se=ou(X),Z=[],te=0;te<se.length;te+=76)Z.push(se.slice(te,te+76));return Z.join(`\r
`)+`\r
`}function St(X){var se=X.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xe){var ge=xe.charCodeAt(0).toString(16).toUpperCase();return"="+(ge.length==1?"0"+ge:ge)});se=se.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),se.charAt(0)==`
`&&(se="=0D"+se.slice(1)),se=se.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Z=[],te=se.split(`\r
`),re=0;re<te.length;++re){var ne=te[re];if(ne.length==0){Z.push("");continue}for(var he=0;he<ne.length;){var je=76,ue=ne.slice(he,he+je);ue.charAt(je-1)=="="?je--:ue.charAt(je-2)=="="?je-=2:ue.charAt(je-3)=="="&&(je-=3),ue=ne.slice(he,he+je),he+=je,he<ne.length&&(ue+="="),Z.push(ue)}}return Z.join(`\r
`)}function at(X){for(var se=[],Z=0;Z<X.length;++Z){for(var te=X[Z];Z<=X.length&&te.charAt(te.length-1)=="=";)te=te.slice(0,te.length-1)+X[++Z];se.push(te)}for(var re=0;re<se.length;++re)se[re]=se[re].replace(/[=][0-9A-Fa-f]{2}/g,function(ne){return String.fromCharCode(parseInt(ne.slice(1),16))});return Ka(se.join(`\r
`))}function pt(X,se,Z){for(var te="",re="",ne="",he,je=0;je<10;++je){var ue=se[je];if(!ue||ue.match(/^\s*$/))break;var xe=ue.match(/^(.*?):\s*([^\s].*)$/);if(xe)switch(xe[1].toLowerCase()){case"content-location":te=xe[2].trim();break;case"content-type":ne=xe[2].trim();break;case"content-transfer-encoding":re=xe[2].trim();break}}switch(++je,re.toLowerCase()){case"base64":he=Ka(tn(se.slice(je).join("")));break;case"quoted-printable":he=at(se.slice(je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+re)}var ge=qr(X,te.slice(Z.length),he,{unsafe:!0});ne&&(ge.ctype=ne)}function tt(X,se){if(_(X.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Z=se&&se.root||"",te=(Ht&&Buffer.isBuffer(X)?X.toString("binary"):_(X)).split(`\r
`),re=0,ne="";for(re=0;re<te.length;++re)if(ne=te[re],!!/^Content-Location:/i.test(ne)&&(ne=ne.slice(ne.indexOf("file")),Z||(Z=ne.slice(0,ne.lastIndexOf("/")+1)),ne.slice(0,Z.length)!=Z))for(;Z.length>0&&(Z=Z.slice(0,Z.length-1),Z=Z.slice(0,Z.lastIndexOf("/")+1),ne.slice(0,Z.length)!=Z););var he=(te[1]||"").match(/boundary="(.*?)"/);if(!he)throw new Error("MAD cannot find boundary");var je="--"+(he[1]||""),ue=[],xe=[],ge={FileIndex:ue,FullPaths:xe};j(ge);var Re,Ae=0;for(re=0;re<te.length;++re){var Ye=te[re];Ye!==je&&Ye!==je+"--"||(Ae++&&pt(ge,te.slice(Re,re),Z),Re=re)}return ge}function Pt(X,se){var Z=se||{},te=Z.boundary||"SheetJS";te="------="+te;for(var re=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+te.slice(2)+'"',"","",""],ne=X.FullPaths[0],he=ne,je=X.FileIndex[0],ue=1;ue<X.FullPaths.length;++ue)if(he=X.FullPaths[ue].slice(ne.length),je=X.FileIndex[ue],!(!je.size||!je.content||he=="Sh33tJ5")){he=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(nt){return"_x"+nt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(nt){return"_u"+nt.charCodeAt(0).toString(16)+"_"});for(var xe=je.content,ge=Ht&&Buffer.isBuffer(xe)?xe.toString("binary"):_(xe),Re=0,Ae=Math.min(1024,ge.length),Ye=0,Me=0;Me<=Ae;++Me)(Ye=ge.charCodeAt(Me))>=32&&Ye<128&&++Re;var Ge=Re>=Ae*4/5;re.push(te),re.push("Content-Location: "+(Z.root||"file:///C:/SheetJS/")+he),re.push("Content-Transfer-Encoding: "+(Ge?"quoted-printable":"base64")),re.push("Content-Type: "+_s(je,he)),re.push(""),re.push(Ge?St(ge):ds(ge))}return re.push(te+`--\r
`),re.join(`\r
`)}function Ns(X){var se={};return j(se,X),se}function qr(X,se,Z,te){var re=te&&te.unsafe;re||j(X);var ne=!re&&lt.find(X,se);if(!ne){var he=X.FullPaths[0];se.slice(0,he.length)==he?he=se:(he.slice(-1)!="/"&&(he+="/"),he=(he+se).replace("//","/")),ne={name:n(se),type:2},X.FileIndex.push(ne),X.FullPaths.push(he),re||lt.utils.cfb_gc(X)}return ne.content=Z,ne.size=Z?Z.length:0,te&&(te.CLSID&&(ne.clsid=te.CLSID),te.mt&&(ne.mt=te.mt),te.ct&&(ne.ct=te.ct)),ne}function Dr(X,se){j(X);var Z=lt.find(X,se);if(Z){for(var te=0;te<X.FileIndex.length;++te)if(X.FileIndex[te]==Z)return X.FileIndex.splice(te,1),X.FullPaths.splice(te,1),!0}return!1}function Ds(X,se,Z){j(X);var te=lt.find(X,se);if(te){for(var re=0;re<X.FileIndex.length;++re)if(X.FileIndex[re]==te)return X.FileIndex[re].name=n(Z),X.FullPaths[re]=Z,!0}return!1}function an(X){E(X,!0)}return s.find=D,s.read=C,s.parse=d,s.write=G,s.writeFile=V,s.utils={cfb_new:Ns,cfb_add:qr,cfb_del:Dr,cfb_mov:Ds,cfb_gc:an,ReadShift:Bd,CheckField:ck,prep_blob:Jr,bconcat:$r,use_zlib:A,_deflateRaw:Pe,_inflateRaw:Wt,consts:I},s}();function X9(t){return typeof t=="string"?Qx(t):Array.isArray(t)?w9(t):t}function Yu(t,s,r){if(typeof Deno<"u"){if(r&&typeof s=="string")switch(r){case"utf8":s=new TextEncoder(r).encode(s);break;case"binary":s=Qx(s);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,s)}var a=r=="utf8"?ii(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,t);if(typeof Blob<"u"){var n=new Blob([X9(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,t);if(typeof saveAs<"u")return saveAs(n,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:t,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=t,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(s)&&(s=Fl(s)),o.write(s),o.close(),s}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function J9(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var r=s.read();return s.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+t)}function or(t){for(var s=Object.keys(t),r=[],a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(t,s[a])&&r.push(s[a]);return r}function ow(t,s){for(var r=[],a=or(t),n=0;n!==a.length;++n)r[t[a[n]][s]]==null&&(r[t[a[n]][s]]=a[n]);return r}function eh(t){for(var s=[],r=or(t),a=0;a!==r.length;++a)s[t[r[a]]]=r[a];return s}function th(t){for(var s=[],r=or(t),a=0;a!==r.length;++a)s[t[r[a]]]=parseInt(r[a],10);return s}function Q9(t){for(var s=[],r=or(t),a=0;a!==r.length;++a)s[t[r[a]]]==null&&(s[t[r[a]]]=[]),s[t[r[a]]].push(r[a]);return s}var q0=new Date(1899,11,30,0,0,0);function _r(t,s){var r=t.getTime(),a=q0.getTime()+(t.getTimezoneOffset()-q0.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var H4=new Date,Z9=q0.getTime()+(H4.getTimezoneOffset()-q0.getTimezoneOffset())*6e4,cw=H4.getTimezoneOffset();function sh(t){var s=new Date;return s.setTime(t*24*60*60*1e3+Z9),s.getTimezoneOffset()!==cw&&s.setTime(s.getTime()+(s.getTimezoneOffset()-cw)*6e4),s}function eL(t){var s=0,r=0,a=!1,n=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(a=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=r*parseInt(n[i],10)}return s}var dw=new Date("2017-02-19T19:06:09.000Z"),W4=isNaN(dw.getFullYear())?new Date("2/19/17"):dw,tL=W4.getFullYear()==2017;function Vs(t,s){var r=new Date(t);if(tL)return s>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):s<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(W4.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return t.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function fo(t,s){if(Ht&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return ii(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return ii(_4(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return ii(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return ii(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var a=[],n=0;n!=t.length;++n)a.push(String.fromCharCode(t[n]));return a.join("")}function zs(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=zs(t[r]));return s}function ir(t,s){for(var r="";r.length<s;)r+=t;return r}function In(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var r=1,a=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(s=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(s=Number(a)))?s/r:s}var sL=["january","february","march","april","may","june","july","august","september","october","november","december"];function Sc(t){var s=new Date(t),r=new Date(NaN),a=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return r;var l=t.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&sL.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||i>1)&&a!=101?s:t.match(/[^-0-9:,\/\\]/)?r:s}var rL=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(t||typeof a=="string")return r.split(a);for(var i=r.split(a),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}}();function V4(t){return t?t.content&&t.type?fo(t.content,!0):t.data?Td(t.data):t.asNodeBuffer&&Ht?Td(t.asNodeBuffer().toString("binary")):t.asBinary?Td(t.asBinary()):t._data&&t._data.getContent?Td(fo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function z4(t){if(!t)return null;if(t.data)return Qj(t.data);if(t.asNodeBuffer&&Ht)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?Qj(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function aL(t){return t&&t.name.slice(-4)===".bin"?z4(t):V4(t)}function gn(t,s){for(var r=t.FullPaths||or(t.files),a=s.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||n==l)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function xy(t,s){var r=gn(t,s);if(r==null)throw new Error("Cannot find file "+s+" in zip");return r}function pr(t,s,r){if(!r)return aL(xy(t,s));if(!s)return null;try{return pr(t,s)}catch{return null}}function Xa(t,s,r){if(!r)return V4(xy(t,s));if(!s)return null;try{return Xa(t,s)}catch{return null}}function nL(t,s,r){return z4(xy(t,s))}function uw(t){for(var s=t.FullPaths||or(t.files),r=[],a=0;a<s.length;++a)s[a].slice(-1)!="/"&&r.push(s[a].replace(/^Root Entry[\/]/,""));return r.sort()}function Bt(t,s,r){if(t.FullPaths){if(typeof r=="string"){var a;return Ht?a=qi(r):a=N9(r),lt.utils.cfb_add(t,s,a)}lt.utils.cfb_add(t,s,r)}else t.file(s,r)}function hy(){return lt.utils.cfb_new()}function G4(t,s){switch(s.type){case"base64":return lt.read(t,{type:"base64"});case"binary":return lt.read(t,{type:"binary"});case"buffer":case"array":return lt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Ad(t,s){if(t.charAt(0)=="/")return t.slice(1);var r=s.split("/");s.slice(-1)!="/"&&r.pop();for(var a=t.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var hr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,iL=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,mw=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,lL=/<[^>]*>/g,wa=hr.match(mw)?mw:lL,oL=/<\w*:/,cL=/<(\/?)\w+:/;function Et(t,s,r){for(var a={},n=0,i=0;n!==t.length&&!((i=t.charCodeAt(n))===32||i===10||i===13);++n);if(s||(a[0]=t.slice(0,n)),n===t.length)return a;var l=t.match(iL),o=0,c="",u=0,d="",m="",x=1;if(l)for(u=0;u!=l.length;++u){for(m=l[u],i=0;i!=m.length&&m.charCodeAt(i)!==61;++i);for(d=m.slice(0,i).trim();m.charCodeAt(i+1)==32;)++i;for(x=(n=m.charCodeAt(i+1))==34||n==39?1:0,c=m.slice(i+1+x,m.length-x),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(a[g]&&d.slice(o-3,o)=="ext")continue;a[g]=c,a[g.toLowerCase()]=c}}return a}function wi(t){return t.replace(cL,"<$1")}var q4={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},fy=eh(q4),Xt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(t,function(o,c){return q4[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(s,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,l)+r(n.slice(l+3))}}(),gy=/[&<>'"]/g,dL=/[\u0000-\u0008\u000b-\u001f]/g;function vs(t){var s=t+"";return s.replace(gy,function(r){return fy[r]}).replace(dL,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function xw(t){return vs(t).replace(/ /g,"_x0020_")}var Y4=/[\u0000-\u001f]/g;function py(t){var s=t+"";return s.replace(gy,function(r){return fy[r]}).replace(/\n/g,"<br/>").replace(Y4,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function uL(t){var s=t+"";return s.replace(gy,function(r){return fy[r]}).replace(Y4,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var hw=function(){var t=/&#(\d+);/g;function s(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(t,s)}}();function mL(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Hs(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function kf(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0;r<t.length;){if(a=t.charCodeAt(r++),a<128){s+=String.fromCharCode(a);continue}if(n=t.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=t.charCodeAt(r++),a<240){s+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}l=t.charCodeAt(r++),o=((a&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function fw(t){var s=vl(2*t.length),r,a,n=1,i=0,l=0,o;for(a=0;a<t.length;a+=n)n=1,(o=t.charCodeAt(a))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(a+1)&63),n=2):o<240?(r=(o&15)*4096+(t.charCodeAt(a+1)&63)*64+(t.charCodeAt(a+2)&63),n=3):(n=4,r=(o&7)*262144+(t.charCodeAt(a+1)&63)*4096+(t.charCodeAt(a+2)&63)*64+(t.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=r%256,s[i++]=r>>>8;return s.slice(0,i).toString("ucs2")}function gw(t){return qi(t,"binary").toString("utf8")}var Am="foo bar bazâð£",ks=Ht&&(gw(Am)==kf(Am)&&gw||fw(Am)==kf(Am)&&fw)||kf,ii=Ht?function(t){return qi(t,"utf8").toString("binary")}:function(t){for(var s=[],r=0,a=0,n=0;r<t.length;)switch(a=t.charCodeAt(r++),!0){case a<128:s.push(String.fromCharCode(a));break;case a<2048:s.push(String.fromCharCode(192+(a>>6))),s.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=t.charCodeAt(r++)-56320+(a<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(a>>12))),s.push(String.fromCharCode(128+(a>>6&63))),s.push(String.fromCharCode(128+(a&63)))}return s.join("")},du=function(){var t={};return function(r,a){var n=r+"|"+(a||"");return t[n]?t[n]:t[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),K4=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)a=a.replace(t[n][0],t[n][1]);return a}}(),xL=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),hL=/<\/?(?:vt:)?variant>/g,fL=/<(?:vt:)([^>]*)>([\s\S]*)</;function pw(t,s){var r=Et(t),a=t.match(xL(r.baseType))||[],n=[];if(a.length!=r.size){if(s.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(i){var l=i.replace(hL,"").match(fL);l&&n.push({v:ks(l[2]),t:l[1]})}),n}var X4=/(^\s|\s$|\n)/;function ta(t,s){return"<"+t+(s.match(X4)?' xml:space="preserve"':"")+">"+s+"</"+t+">"}function uu(t){return or(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function $e(t,s,r){return"<"+t+(r!=null?uu(r):"")+(s!=null?(s.match(X4)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function sp(t,s){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(s)throw r}return""}function gL(t,s){switch(typeof t){case"string":var r=$e("vt:lpwstr",vs(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return $e((t|0)==t?"vt:i4":"vt:r8",vs(String(t)));case"boolean":return $e("vt:bool",t?"true":"false")}if(t instanceof Date)return $e("vt:filetime",sp(t));throw new Error("Unable to serialize "+t)}function by(t){if(Ht&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ks(Fl(dy(t)));throw new Error("Bad input format: expected Buffer or string")}var mu=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,kr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},No=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],qa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function pL(t,s){for(var r=1-2*(t[s+7]>>>7),a=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),n=t[s+6]&15,i=5;i>=0;--i)n=n*256+t[s+i];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function bL(t,s,r){var a=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=a?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(n&15)<<4|i&15,t[r+7]=n>>4|a}var bw=function(t){for(var s=[],r=10240,a=0;a<t[0].length;++a)if(t[0][a])for(var n=0,i=t[0][a].length;n<i;n+=r)s.push.apply(s,t[0][a].slice(n,n+r));return s},yw=Ht?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:qi(s)})):bw(t)}:bw,vw=function(t,s,r){for(var a=[],n=s;n<r;n+=2)a.push(String.fromCharCode(Ri(t,n)));return a.join("").replace(Ta,"")},yy=Ht?function(t,s,r){return Buffer.isBuffer(t)?t.toString("utf16le",s,r).replace(Ta,""):vw(t,s,r)}:vw,jw=function(t,s,r){for(var a=[],n=s;n<s+r;++n)a.push(("0"+t[n].toString(16)).slice(-2));return a.join("")},J4=Ht?function(t,s,r){return Buffer.isBuffer(t)?t.toString("hex",s,s+r):jw(t,s,r)}:jw,ww=function(t,s,r){for(var a=[],n=s;n<r;n++)a.push(String.fromCharCode(Zo(t,n)));return a.join("")},Ku=Ht?function(s,r,a){return Buffer.isBuffer(s)?s.toString("utf8",r,a):ww(s,r,a)}:ww,Q4=function(t,s){var r=Ya(t,s);return r>0?Ku(t,s+4,s+4+r-1):""},Z4=Q4,ek=function(t,s){var r=Ya(t,s);return r>0?Ku(t,s+4,s+4+r-1):""},tk=ek,sk=function(t,s){var r=2*Ya(t,s);return r>0?Ku(t,s+4,s+4+r-1):""},rk=sk,ak=function(s,r){var a=Ya(s,r);return a>0?yy(s,r+4,r+4+a):""},nk=ak,ik=function(t,s){var r=Ya(t,s);return r>0?Ku(t,s+4,s+4+r):""},lk=ik,ok=function(t,s){return pL(t,s)},Y0=ok,vy=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};Ht&&(Z4=function(s,r){if(!Buffer.isBuffer(s))return Q4(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},tk=function(s,r){if(!Buffer.isBuffer(s))return ek(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},rk=function(s,r){if(!Buffer.isBuffer(s))return sk(s,r);var a=2*s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a-1)},nk=function(s,r){if(!Buffer.isBuffer(s))return ak(s,r);var a=s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a)},lk=function(s,r){if(!Buffer.isBuffer(s))return ik(s,r);var a=s.readUInt32LE(r);return s.toString("utf8",r+4,r+4+a)},Y0=function(s,r){return Buffer.isBuffer(s)?s.readDoubleLE(r):ok(s,r)},vy=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var Zo=function(t,s){return t[s]},Ri=function(t,s){return t[s+1]*256+t[s]},yL=function(t,s){var r=t[s+1]*256+t[s];return r<32768?r:(65535-r+1)*-1},Ya=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},Gl=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},vL=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Bd(t,s){var r="",a,n,i=[],l,o,c,u;switch(s){case"dbcs":if(u=this.l,Ht&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Ri(this,u)),u+=2;t*=2;break;case"utf8":r=Ku(this,this.l,this.l+t);break;case"utf16le":t*=2,r=yy(this,this.l,this.l+t);break;case"wstr":return Bd.call(this,t,"dbcs");case"lpstr-ansi":r=Z4(this,this.l),t=4+Ya(this,this.l);break;case"lpstr-cp":r=tk(this,this.l),t=4+Ya(this,this.l);break;case"lpwstr":r=rk(this,this.l),t=4+2*Ya(this,this.l);break;case"lpp4":t=4+Ya(this,this.l),r=nk(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ya(this,this.l),r=lk(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(l=Zo(this,this.l+t++))!==0;)i.push(_m(l));r=i.join("");break;case"_wstr":for(t=0,r="";(l=Ri(this,this.l+t))!==0;)i.push(_m(l)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return l=Zo(this,u),this.l=u+1,o=Bd.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(_m(Ri(this,u))),u+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return l=Zo(this,u),this.l=u+1,o=Bd.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(_m(Zo(this,u))),u+=1}r=i.join("");break;default:switch(t){case 1:return a=Zo(this,this.l),this.l++,a;case 2:return a=(s==="i"?yL:Ri)(this,this.l),this.l+=2,a;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(a=(t>0?Gl:vL)(this,this.l),this.l+=4,a):(n=Ya(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return t==8?n=Y0(this,this.l):n=Y0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:r=J4(this,this.l,t);break}}return this.l+=t,r}var jL=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255,t[r+2]=s>>>16&255,t[r+3]=s>>>24&255},wL=function(t,s,r){t[r]=s&255,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255},NL=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255};function SL(t,s,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=s.length;++n)NL(this,s.charCodeAt(n),this.l+2*n);a=2*s.length}else if(r==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;a=s.length}else if(r==="hex"){for(;n<t;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(n=0;n<Math.min(s.length,t);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:a=1,this[this.l]=s&255;break;case 2:a=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:a=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:a=4,jL(this,s,this.l);break;case 8:if(a=8,r==="f"){bL(this,s,this.l);break}case 16:break;case-4:a=4,wL(this,s,this.l);break}return this.l+=a,this}function ck(t,s){var r=J4(this,this.l,t.length>>1);if(r!==t)throw new Error(s+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Jr(t,s){t.l=s,t.read_shift=Bd,t.chk=ck,t.write_shift=SL}function va(t,s){t.l+=s}function Ne(t){var s=vl(t);return Jr(s,0),s}function Yi(t,s,r){if(t){var a,n,i;Jr(t,t.l||0);for(var l=t.length,o=0,c=0;t.l<l;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=bu[o]||bu[65535];for(a=t.read_shift(1),i=a&127,n=1;n<4&&a&128;++n)i+=((a=t.read_shift(1))&127)<<7*n;c=t.l+i;var d=u.f&&u.f(t,i,r);if(t.l=c,s(d,u,o))return}}}function Ba(){var t=[],s=Ht?256:2048,r=function(u){var d=Ne(u);return Jr(d,0),d},a=r(s),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&t.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(n(),a=r(Math.max(u+1,s)))},l=function(){return n(),$r(t)},o=function(u){n(),a=u,a.l==null&&(a.l=a.length),i(s)};return{next:i,push:o,end:l,_bufs:t}}function _e(t,s,r,a){var n=+s,i;if(!isNaN(n)){a||(a=bu[n].p||(r||[]).length||0),i=1+(n>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var l=t.next(i);n<=127?l.write_shift(1,n):(l.write_shift(1,(n&127)+128),l.write_shift(1,n>>7));for(var o=0;o!=4;++o)if(a>=128)l.write_shift(1,(a&127)+128),a>>=7;else{l.write_shift(1,a);break}a>0&&vy(r)&&t.push(r)}}function Ld(t,s,r){var a=zs(t);if(s.s?(a.cRel&&(a.c+=s.s.c),a.rRel&&(a.r+=s.s.r)):(a.cRel&&(a.c+=s.c),a.rRel&&(a.r+=s.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function Nw(t,s,r){var a=zs(t);return a.s=Ld(a.s,s.s,r),a.e=Ld(a.e,s.s,r),a}function $d(t,s){if(t.cRel&&t.c<0)for(t=zs(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=zs(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var r=yt(t);return!t.cRel&&t.cRel!=null&&(r=EL(r)),!t.rRel&&t.rRel!=null&&(r=CL(r)),r}function Ef(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+er(t.s.c)+":"+(t.e.cRel?"":"$")+er(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+mr(t.s.r)+":"+(t.e.rRel?"":"$")+mr(t.e.r):$d(t.s,s.biff)+":"+$d(t.e,s.biff)}function jy(t){return parseInt(kL(t),10)-1}function mr(t){return""+(t+1)}function CL(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function kL(t){return t.replace(/\$(\d+)$/,"$1")}function wy(t){for(var s=PL(t),r=0,a=0;a!==s.length;++a)r=26*r+s.charCodeAt(a)-64;return r-1}function er(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function EL(t){return t.replace(/^([A-Z])/,"$$$1")}function PL(t){return t.replace(/^\$([A-Z])/,"$1")}function TL(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function tr(t){for(var s=0,r=0,a=0;a<t.length;++a){var n=t.charCodeAt(a);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:s-1}}function yt(t){for(var s=t.c+1,r="";s;s=(s-1)/26|0)r=String.fromCharCode((s-1)%26+65)+r;return r+(t.r+1)}function $a(t){var s=t.indexOf(":");return s==-1?{s:tr(t),e:tr(t)}:{s:tr(t.slice(0,s)),e:tr(t.slice(s+1))}}function Ot(t,s){return typeof s>"u"||typeof s=="number"?Ot(t.s,t.e):(typeof t!="string"&&(t=yt(t)),typeof s!="string"&&(s=yt(s)),t==s?t:t+":"+s)}function es(t){var s={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,i=t.length;for(r=0;a<i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.s.c=--r,r=0;a<i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(s.s.r=--r,a===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++a,r=0;a!=i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.e.c=--r,r=0;a!=i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return s.e.r=--r,s}function Sw(t,s){var r=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=wn(t.z,r?_r(s):s)}catch{}try{return t.w=wn((t.XF||{}).numFmtId||(r?14:0),r?_r(s):s)}catch{return""+s}}function Vi(t,s,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Ki[t.v]||t.v:s==null?Sw(t,t.v):Sw(t,s))}function Dl(t,s){var r=s&&s.sheet?s.sheet:"Sheet1",a={};return a[r]=t,{SheetNames:[r],Sheets:a}}function dk(t,s,r){var a=r||{},n=t?Array.isArray(t):a.dense,i=t||(n?[]:{}),l=0,o=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?tr(a.origin):a.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=es(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),l==-1&&(u.e.r=l=d.e.r+1)}for(var m=0;m!=s.length;++m)if(s[m]){if(!Array.isArray(s[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=s[m].length;++x)if(!(typeof s[m][x]>"u")){var g={v:s[m][x]},p=l+m,f=o+x;if(u.s.r>p&&(u.s.r=p),u.s.c>f&&(u.s.c=f),u.e.r<p&&(u.e.r=p),u.e.c<f&&(u.e.c=f),s[m][x]&&typeof s[m][x]=="object"&&!Array.isArray(s[m][x])&&!(s[m][x]instanceof Date))g=s[m][x];else if(Array.isArray(g.v)&&(g.f=s[m][x][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(a.nullError)g.t="e",g.v=0;else if(a.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=a.dateNF||bt[14],a.cellDates?(g.t="d",g.w=wn(g.z,_r(g.v))):(g.t="n",g.v=_r(g.v),g.w=wn(g.z,g.v))):g.t="s";if(n)i[p]||(i[p]=[]),i[p][f]&&i[p][f].z&&(g.z=i[p][f].z),i[p][f]=g;else{var b=yt({c:f,r:p});i[b]&&i[b].z&&(g.z=i[b].z),i[b]=g}}}return u.s.c<1e7&&(i["!ref"]=Ot(u)),i}function Xc(t,s){return dk(null,t,s)}function _L(t){return t.read_shift(4,"i")}function On(t,s){return s||(s=Ne(4)),s.write_shift(4,t),s}function ba(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function Hr(t,s){var r=!1;return s==null&&(r=!0,s=Ne(4+2*t.length)),s.write_shift(4,t.length),t.length>0&&s.write_shift(0,t,"dbcs"),r?s.slice(0,s.l):s}function AL(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function RL(t,s){return s||(s=Ne(4)),s.write_shift(2,0),s.write_shift(2,0),s}function Ny(t,s){var r=t.l,a=t.read_shift(1),n=ba(t),i=[],l={t:n,h:n};if(a&1){for(var o=t.read_shift(4),c=0;c!=o;++c)i.push(AL(t));l.r=i}else l.r=[{ich:0,ifnt:0}];return t.l=r+s,l}function FL(t,s){var r=!1;return s==null&&(r=!0,s=Ne(15+4*t.t.length)),s.write_shift(1,0),Hr(t.t,s),r?s.slice(0,s.l):s}var DL=Ny;function IL(t,s){var r=!1;return s==null&&(r=!0,s=Ne(23+4*t.t.length)),s.write_shift(1,1),Hr(t.t,s),s.write_shift(4,1),RL({},s),r?s.slice(0,s.l):s}function Cn(t){var s=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:r}}function So(t,s){return s==null&&(s=Ne(8)),s.write_shift(-4,t.c),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}function Co(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}function ko(t,s){return s==null&&(s=Ne(4)),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}var OL=ba,uk=Hr;function Sy(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}function K0(t,s){var r=!1;return s==null&&(r=!0,s=Ne(127)),s.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&s.write_shift(0,t,"dbcs"),r?s.slice(0,s.l):s}var ML=ba,rp=Sy,Cy=K0;function ky(t){var s=t.slice(t.l,t.l+4),r=s[0]&1,a=s[0]&2;t.l+=4;var n=a===0?Y0([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):Gl(s,0)>>2;return r?n/100:n}function mk(t,s){s==null&&(s=Ne(4));var r=0,a=0,n=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?a=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(a=1,r=1),a)s.write_shift(-4,((r?n:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function xk(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}function BL(t,s){return s||(s=Ne(16)),s.write_shift(4,t.s.r),s.write_shift(4,t.e.r),s.write_shift(4,t.s.c),s.write_shift(4,t.e.c),s}var Eo=xk,Jc=BL;function ha(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function go(t,s){return(s||Ne(8)).write_shift(8,t,"f")}function LL(t){var s={},r=t.read_shift(1),a=r>>>1,n=t.read_shift(1),i=t.read_shift(2,"i"),l=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,a){case 0:s.auto=1;break;case 1:s.index=n;var u=Zl[n];u&&(s.rgb=hu(u));break;case 2:s.rgb=hu([l,o,c]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function X0(t,s){if(s||(s=Ne(8)),!t||t.auto)return s.write_shift(4,0),s.write_shift(4,0),s;t.index!=null?(s.write_shift(1,2),s.write_shift(1,t.index)):t.theme!=null?(s.write_shift(1,6),s.write_shift(1,t.theme)):(s.write_shift(1,5),s.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),s.write_shift(2,r),!t.rgb||t.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var a=t.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),s.write_shift(1,parseInt(a.slice(0,2),16)),s.write_shift(1,parseInt(a.slice(2,4),16)),s.write_shift(1,parseInt(a.slice(4,6),16)),s.write_shift(1,255)}return s}function $L(t){var s=t.read_shift(1);t.l++;var r={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return r}function UL(t,s){s||(s=Ne(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return s.write_shift(1,r),s.write_shift(1,0),s}function hk(t,s){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=t.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function HL(t){return hk(t,1)}function WL(t){return hk(t,2)}var Ey=2,Ra=3,Rm=11,Cw=12,J0=19,Fm=64,VL=65,zL=71,GL=4108,qL=4126,Lr=80,fk=81,YL=[Lr,fk],ap={1:{n:"CodePage",t:Ey},2:{n:"Category",t:Lr},3:{n:"PresentationFormat",t:Lr},4:{n:"ByteCount",t:Ra},5:{n:"LineCount",t:Ra},6:{n:"ParagraphCount",t:Ra},7:{n:"SlideCount",t:Ra},8:{n:"NoteCount",t:Ra},9:{n:"HiddenCount",t:Ra},10:{n:"MultimediaClipCount",t:Ra},11:{n:"ScaleCrop",t:Rm},12:{n:"HeadingPairs",t:GL},13:{n:"TitlesOfParts",t:qL},14:{n:"Manager",t:Lr},15:{n:"Company",t:Lr},16:{n:"LinksUpToDate",t:Rm},17:{n:"CharacterCount",t:Ra},19:{n:"SharedDoc",t:Rm},22:{n:"HyperlinksChanged",t:Rm},23:{n:"AppVersion",t:Ra,p:"version"},24:{n:"DigSig",t:VL},26:{n:"ContentType",t:Lr},27:{n:"ContentStatus",t:Lr},28:{n:"Language",t:Lr},29:{n:"Version",t:Lr},255:{},2147483648:{n:"Locale",t:J0},2147483651:{n:"Behavior",t:J0},1919054434:{}},np={1:{n:"CodePage",t:Ey},2:{n:"Title",t:Lr},3:{n:"Subject",t:Lr},4:{n:"Author",t:Lr},5:{n:"Keywords",t:Lr},6:{n:"Comments",t:Lr},7:{n:"Template",t:Lr},8:{n:"LastAuthor",t:Lr},9:{n:"RevNumber",t:Lr},10:{n:"EditTime",t:Fm},11:{n:"LastPrinted",t:Fm},12:{n:"CreatedDate",t:Fm},13:{n:"ModifiedDate",t:Fm},14:{n:"PageCount",t:Ra},15:{n:"WordCount",t:Ra},16:{n:"CharCount",t:Ra},17:{n:"Thumbnail",t:zL},18:{n:"Application",t:Lr},19:{n:"DocSecurity",t:Ra},255:{},2147483648:{n:"Locale",t:J0},2147483651:{n:"Behavior",t:J0},1919054434:{}},kw={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},KL=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function XL(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var JL=XL([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Zl=zs(JL),Ki={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},gk={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ip={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Dm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Py(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function QL(t){var s=Py();if(!t||!t.match)return s;var r={};if((t.match(wa)||[]).forEach(function(a){var n=Et(a);switch(n[0].replace(oL,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":s[ip[n.ContentType]]!==void 0&&s[ip[n.ContentType]].push(n.PartName);break}}),s.xmlns!==kr.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=r,delete s.calcchains,s}function pk(t,s){var r=Q9(ip),a=[],n;a[a.length]=hr,a[a.length]=$e("Types",null,{xmlns:kr.CT,"xmlns:xsd":kr.xsd,"xmlns:xsi":kr.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return $e("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){t[c]&&t[c].length>0&&(n=t[c][0],a[a.length]=$e("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:Dm[c][s.bookType]||Dm[c].xlsx}))},l=function(c){(t[c]||[]).forEach(function(u){a[a.length]=$e("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Dm[c][s.bookType]||Dm[c].xlsx})})},o=function(c){(t[c]||[]).forEach(function(u){a[a.length]=$e("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Vt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function xu(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Ud(t,s){var r={"!id":{}};if(!t)return r;s.charAt(0)!=="/"&&(s="/"+s);var a={};return(t.match(wa)||[]).forEach(function(n){var i=Et(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Ad(i.Target,s);r[o]=l,a[i.Id]=l}}),r["!id"]=a,r}function mc(t){var s=[hr,$e("Relationships",null,{xmlns:kr.RELS})];return or(t["!id"]).forEach(function(r){s[s.length]=$e("Relationship",null,t["!id"][r])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function bs(t,s,r,a,n,i){if(n||(n={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),s<0)for(s=t["!idx"];t["!id"]["rId"+s];++s);if(t["!idx"]=s+1,n.Id="rId"+s,n.Type=a,n.Target=r,[Vt.HLINK,Vt.XPATH,Vt.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),t["!id"][n.Id])throw new Error("Cannot rewrite rId "+s);return t["!id"][n.Id]=n,t[("/"+n.Target).replace("//","/")]=n,s}var ZL="application/vnd.oasis.opendocument.spreadsheet";function e$(t,s){for(var r=by(t),a,n;a=mu.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=Et(a[0],!1),n.path=="/"&&n.type!==ZL)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw a}}function t$(t){var s=[hr];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)s.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function Ew(t,s,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function s$(t,s){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function r$(t){var s=[hr];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)s.push(Ew(t[r][0],t[r][1])),s.push(s$("",t[r][0]));return s.push(Ew("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function bk(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+W0.version+"</meta:generator></office:meta></office:document-meta>"}var jn=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],a$=function(){for(var t=new Array(jn.length),s=0;s<jn.length;++s){var r=jn[s],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[s]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return t}();function yk(t){var s={};t=ks(t);for(var r=0;r<jn.length;++r){var a=jn[r],n=t.match(a$[r]);n!=null&&n.length>0&&(s[a[1]]=Xt(n[1])),a[2]==="date"&&s[a[1]]&&(s[a[1]]=Vs(s[a[1]]))}return s}function Pf(t,s,r,a,n){n[t]!=null||s==null||s===""||(n[t]=s,s=vs(s),a[a.length]=r?$e(t,s,r):ta(t,s))}function vk(t,s){var r=s||{},a=[hr,$e("cp:coreProperties",null,{"xmlns:cp":kr.CORE_PROPS,"xmlns:dc":kr.dc,"xmlns:dcterms":kr.dcterms,"xmlns:dcmitype":kr.dcmitype,"xmlns:xsi":kr.xsi})],n={};if(!t&&!r.Props)return a.join("");t&&(t.CreatedDate!=null&&Pf("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:sp(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n),t.ModifiedDate!=null&&Pf("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:sp(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n));for(var i=0;i!=jn.length;++i){var l=jn[i],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:t?t[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Pf(l[0],o,null,a,n)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var eo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],jk=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function wk(t,s,r,a){var n=[];if(typeof t=="string")n=pw(t,a);else for(var i=0;i<t.length;++i)n=n.concat(t[i].map(function(d){return{v:d}}));var l=typeof s=="string"?pw(s,a).map(function(d){return d.v}):s,o=0,c=0;if(l.length>0)for(var u=0;u!==n.length;u+=2){switch(c=+n[u+1].v,n[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function n$(t,s,r){var a={};return s||(s={}),t=ks(t),eo.forEach(function(n){var i=(t.match(du(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=Xt(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(a[n[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&wk(a.HeadingPairs,a.TitlesOfParts,s,r),s}function Nk(t){var s=[],r=$e;return t||(t={}),t.Application="SheetJS",s[s.length]=hr,s[s.length]=$e("Properties",null,{xmlns:kr.EXT_PROPS,"xmlns:vt":kr.vt}),eo.forEach(function(a){if(t[a[1]]!==void 0){var n;switch(a[2]){case"string":n=vs(String(t[a[1]]));break;case"bool":n=t[a[1]]?"true":"false";break}n!==void 0&&(s[s.length]=r(a[0],n))}}),s[s.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(a){return"<vt:lpstr>"+vs(a)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var i$=/<[^>]+>[^<]*/g;function l$(t,s){var r={},a="",n=t.match(i$);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=Et(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Xt(o.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=Xt(d);break;case"bool":r[a]=Hs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(d);break;case"filetime":case"date":r[a]=Vs(d);break;case"cy":case"error":r[a]=Xt(d);break;default:if(u.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,u,c)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return r}function Sk(t){var s=[hr,$e("Properties",null,{xmlns:kr.CUST_PROPS,"xmlns:vt":kr.vt})];if(!t)return s.join("");var r=1;return or(t).forEach(function(n){++r,s[s.length]=$e("property",gL(t[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:vs(n)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var lp={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Tf;function o$(t,s,r){Tf||(Tf=eh(lp)),s=Tf[s]||s,t[s]=r}function c$(t,s){var r=[];return or(lp).map(function(a){for(var n=0;n<jn.length;++n)if(jn[n][1]==a)return jn[n];for(n=0;n<eo.length;++n)if(eo[n][1]==a)return eo[n];throw a}).forEach(function(a){if(t[a[1]]!=null){var n=s&&s.Props&&s.Props[a[1]]!=null?s.Props[a[1]]:t[a[1]];switch(a[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),r.push(ta(lp[a[1]]||a[1],n))}}),$e("DocumentProperties",r.join(""),{xmlns:qa.o})}function d$(t,s){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",n=[];return t&&or(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)){for(var l=0;l<jn.length;++l)if(i==jn[l][1])return;for(l=0;l<eo.length;++l)if(i==eo[l][1])return;for(l=0;l<r.length;++l)if(i==r[l])return;var o=t[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),n.push($e(xw(i),o,{"dt:dt":c}))}}),s&&or(s).forEach(function(i){if(Object.prototype.hasOwnProperty.call(s,i)&&!(t&&Object.prototype.hasOwnProperty.call(t,i))){var l=s[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),n.push($e(xw(i),l,{"dt:dt":o}))}}),"<"+a+' xmlns="'+qa.o+'">'+n.join("")+"</"+a+">"}function Ty(t){var s=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function u$(t){var s=typeof t=="string"?new Date(Date.parse(t)):t,r=s.getTime()/1e3+11644473600,a=r%Math.pow(2,32),n=(r-a)/Math.pow(2,32);a*=1e7,n*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),n+=i);var l=Ne(8);return l.write_shift(4,a),l.write_shift(4,n),l}function Ck(t,s,r){var a=t.l,n=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-a&3;)++t.l;return n}function kk(t,s,r){var a=t.read_shift(0,"lpwstr");return a}function Ek(t,s,r){return s===31?kk(t):Ck(t,s,r)}function op(t,s,r){return Ek(t,s,r===!1?0:4)}function m$(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Ek(t,s,0)}function x$(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a){var n=t.l;r[a]=t.read_shift(0,"lpwstr").replace(Ta,""),t.l-n&2&&(t.l+=2)}return r}function h$(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a)r[a]=t.read_shift(0,"lpstr-cp").replace(Ta,"");return r}function f$(t){var s=t.l,r=Q0(t,fk);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var a=Q0(t,Ra);return[r,a]}function g$(t){for(var s=t.read_shift(4),r=[],a=0;a<s/2;++a)r.push(f$(t));return r}function Pw(t,s){for(var r=t.read_shift(4),a={},n=0;n!=r;++n){var i=t.read_shift(4),l=t.read_shift(4);a[i]=t.read_shift(l,s===1200?"utf16le":"utf8").replace(Ta,"").replace(_d,"!"),s===1200&&l%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),a}function Pk(t){var s=t.read_shift(4),r=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),r}function p$(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function Q0(t,s,r){var a=t.read_shift(2),n,i=r||{};if(t.l+=2,s!==Cw&&a!==s&&YL.indexOf(s)===-1&&!((s&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+s+" saw "+a);switch(s===Cw?a:s){case 2:return n=t.read_shift(2,"i"),i.raw||(t.l+=2),n;case 3:return n=t.read_shift(4,"i"),n;case 11:return t.read_shift(4)!==0;case 19:return n=t.read_shift(4),n;case 30:return Ck(t,a,4).replace(Ta,"");case 31:return kk(t);case 64:return Ty(t);case 65:return Pk(t);case 71:return p$(t);case 80:return op(t,a,!i.raw).replace(Ta,"");case 81:return m$(t,a).replace(Ta,"");case 4108:return g$(t);case 4126:case 4127:return a==4127?x$(t):h$(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+a)}}function Tw(t,s){var r=Ne(4),a=Ne(4);switch(r.write_shift(4,t==80?31:t),t){case 3:a.write_shift(-4,s);break;case 5:a=Ne(8),a.write_shift(8,s,"f");break;case 11:a.write_shift(4,s?1:0);break;case 64:a=u$(s);break;case 31:case 80:for(a=Ne(4+2*(s.length+1)+(s.length%2?0:2)),a.write_shift(4,s.length+1),a.write_shift(0,s,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}return $r([r,a])}function _w(t,s){var r=t.l,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0,o=0,c=-1,u={};for(l=0;l!=n;++l){var d=t.read_shift(4),m=t.read_shift(4);i[l]=[d,m+r]}i.sort(function(v,N){return v[1]-N[1]});var x={};for(l=0;l!=n;++l){if(t.l!==i[l][1]){var g=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:t.l+2===i[l][1]&&(t.l+=2,g=!1);break;case 80:t.l<=i[l][1]&&(t.l=i[l][1],g=!1);break;case 4108:t.l<=i[l][1]&&(t.l=i[l][1],g=!1);break}if((!s||l==0)&&t.l<=i[l][1]&&(g=!1,t.l=i[l][1]),g)throw new Error("Read Error: Expected address "+i[l][1]+" at "+t.l+" :"+l)}if(s){var p=s[i[l][0]];if(x[p.n]=Q0(t,p.t,{raw:!0}),p.p==="version"&&(x[p.n]=String(x[p.n]>>16)+"."+("0000"+String(x[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(x[p.n]){case 0:x[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Rn(o=x[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+x[p.n])}}else if(i[l][0]===1){if(o=x.CodePage=Q0(t,Ey),Rn(o),c!==-1){var f=t.l;t.l=i[c][1],u=Pw(t,o),t.l=f}}else if(i[l][0]===0){if(o===0){c=l,t.l=i[l+1][1];continue}u=Pw(t,o)}else{var b=u[i[l][0]],y;switch(t[t.l]){case 65:t.l+=4,y=Pk(t);break;case 30:t.l+=4,y=op(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,y=op(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,y=t.read_shift(4,"i");break;case 19:t.l+=4,y=t.read_shift(4);break;case 5:t.l+=4,y=t.read_shift(8,"f");break;case 11:t.l+=4,y=dr(t,4);break;case 64:t.l+=4,y=Vs(Ty(t));break;default:throw new Error("unparsed value: "+t[t.l])}x[b]=y}}return t.l=r+a,x}var Tk=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function b$(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Aw(t,s,r){var a=Ne(8),n=[],i=[],l=8,o=0,c=Ne(8),u=Ne(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),n.push(u),l+=8+c.length,!s){u=Ne(8),u.write_shift(4,0),n.unshift(u);var d=[Ne(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var m=t[o][0];for(c=Ne(8+2*(m.length+1)+(m.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,m.length+1),c.write_shift(0,m,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=$r(d),i.unshift(c),l+=8+c.length}for(o=0;o<t.length;++o)if(!(s&&!s[t[o][0]])&&!(Tk.indexOf(t[o][0])>-1||jk.indexOf(t[o][0])>-1)&&t[o][1]!=null){var x=t[o][1],g=0;if(s){g=+s[t[o][0]];var p=r[g];if(p.p=="version"&&typeof x=="string"){var f=x.split(".");x=(+f[0]<<16)+(+f[1]||0)}c=Tw(p.t,x)}else{var b=b$(x);b==-1&&(b=31,x=String(x)),c=Tw(b,x)}i.push(c),u=Ne(8),u.write_shift(4,s?g:2+o),n.push(u),l+=8+c.length}var y=8*(i.length+1);for(o=0;o<i.length;++o)n[o].write_shift(4,y),y+=i[o].length;return a.write_shift(4,l),a.write_shift(4,i.length),$r([a].concat(n).concat(i))}function Rw(t,s,r){var a=t.content;if(!a)return{};Jr(a,0);var n,i,l,o,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),d=a.read_shift(16);if(d!==lt.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=a.read_shift(16),o=a.read_shift(4),n===1&&o!==a.l)throw new Error("Length mismatch: "+o+" !== "+a.l);n===2&&(l=a.read_shift(16),c=a.read_shift(4));var m=_w(a,s),x={SystemIdentifier:u};for(var g in m)x[g]=m[g];if(x.FMTID=i,n===1)return x;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var p;try{p=_w(a,null)}catch{}for(g in p)x[g]=p[g];return x.FMTID=[i,l],x}function Fw(t,s,r,a,n,i){var l=Ne(n?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,lt.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,n?2:1),l.write_shift(16,s,"hex"),l.write_shift(4,n?68:48);var c=Aw(t,r,a);if(o.push(c),n){var u=Aw(n,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+c.length),o.push(u)}return $r(o)}function rl(t,s){return t.read_shift(s),null}function y$(t,s){s||(s=Ne(t));for(var r=0;r<t;++r)s.write_shift(1,0);return s}function v$(t,s,r){for(var a=[],n=t.l+s;t.l<n;)a.push(r(t,n-t.l));if(n!==t.l)throw new Error("Slurp error");return a}function dr(t,s){return t.read_shift(s)===1}function ka(t,s){return s||(s=Ne(2)),s.write_shift(2,+!!t),s}function br(t){return t.read_shift(2,"u")}function pn(t,s){return s||(s=Ne(2)),s.write_shift(2,t),s}function _k(t,s){return v$(t,s,br)}function j$(t){var s=t.read_shift(1),r=t.read_shift(1);return r===1?s:s===1}function Ak(t,s,r){return r||(r=Ne(2)),r.write_shift(1,s=="e"?+t:+!!t),r.write_shift(1,s=="e"?1:0),r}function Xu(t,s,r){var a=t.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var l=a?t.read_shift(a,n):"";return l}function w$(t){var s=t.read_shift(2),r=t.read_shift(1),a=r&4,n=r&8,i=1+(r&1),l=0,o,c={};n&&(l=t.read_shift(2)),a&&(o=t.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",d=s===0?"":t.read_shift(s,u);return n&&(t.l+=4*l),a&&(t.l+=o),c.t=d,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function N$(t){var s=t.t||"",r=Ne(3);r.write_shift(2,s.length),r.write_shift(1,1);var a=Ne(2*s.length);a.write_shift(2*s.length,s,"utf16le");var n=[r,a];return $r(n)}function po(t,s,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(s,"cpstr");if(r.biff>=12)return t.read_shift(s,"dbcs-cont")}var n=t.read_shift(1);return n===0?a=t.read_shift(s,"sbcs-cont"):a=t.read_shift(s,"dbcs-cont"),a}function Ju(t,s,r){var a=t.read_shift(r&&r.biff==2?1:2);return a===0?(t.l++,""):po(t,a,r)}function Po(t,s,r){if(r.biff>5)return Ju(t,s,r);var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Rk(t,s,r){return r||(r=Ne(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function S$(t){var s=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[s,r]}function C$(t){var s=t.read_shift(4),r=t.l,a=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),t.l=r);var n=t.read_shift((a?s-24:s)>>1,"utf16le").replace(Ta,"");return a&&(t.l+=24),n}function k$(t){for(var s=t.read_shift(2),r="";s-- >0;)r+="../";var a=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=t.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=t.read_shift(i>>1,"utf16le").replace(Ta,"");return r+l}function E$(t,s){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return C$(t);case"0303000000000000c000000000000046":return k$(t);default:throw new Error("Unsupported Moniker "+r)}}function Im(t){var s=t.read_shift(4),r=s>0?t.read_shift(s,"utf16le").replace(Ta,""):"";return r}function Dw(t,s){s||(s=Ne(6+t.length*2)),s.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)s.write_shift(2,t.charCodeAt(r));return s.write_shift(2,0),s}function P$(t,s){var r=t.l+s,a=t.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=t.read_shift(2);t.l+=2;var i,l,o,c,u="",d,m;n&16&&(i=Im(t,r-t.l)),n&128&&(l=Im(t,r-t.l)),(n&257)===257&&(o=Im(t,r-t.l)),(n&257)===1&&(c=E$(t,r-t.l)),n&8&&(u=Im(t,r-t.l)),n&32&&(d=t.read_shift(16)),n&64&&(m=Ty(t)),t.l=r;var x=l||o||c||"";x&&u&&(x+="#"+u),x||(x="#"+u),n&2&&x.charAt(0)=="/"&&x.charAt(1)!="/"&&(x="file://"+x);var g={Target:x};return d&&(g.guid=d),m&&(g.time=m),i&&(g.Tooltip=i),g}function T$(t){var s=Ne(512),r=0,a=t.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var n=a.indexOf("#"),i=n>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}s.write_shift(4,2),s.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)s.write_shift(4,l[r]);if(i==28)a=a.slice(1),Dw(a,s);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)s.write_shift(1,parseInt(l[r],16));var o=n>-1?a.slice(0,n):a;for(s.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)s.write_shift(2,o.charCodeAt(r));s.write_shift(2,0),i&8&&Dw(n>-1?a.slice(n+1):"",s)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)s.write_shift(1,parseInt(l[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(s.write_shift(2,c),s.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)s.write_shift(1,a.charCodeAt(r+3*c)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),r=0;r<6;++r)s.write_shift(4,0)}return s.slice(0,s.l)}function Fk(t){var s=t.read_shift(1),r=t.read_shift(1),a=t.read_shift(1),n=t.read_shift(1);return[s,r,a,n]}function Dk(t,s){var r=Fk(t);return r[3]=0,r}function Ni(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return{r:s,c:r,ixfe:a}}function bo(t,s,r,a){return a||(a=Ne(6)),a.write_shift(2,t),a.write_shift(2,s),a.write_shift(2,r||0),a}function _$(t){var s=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:s,flags:r}}function A$(t,s,r){return s===0?"":Po(t,s,r)}function R$(t,s,r){var a=r.biff>8?4:2,n=t.read_shift(a),i=t.read_shift(a,"i"),l=t.read_shift(a,"i");return[n,i,l]}function Ik(t){var s=t.read_shift(2),r=ky(t);return[s,r]}function F$(t,s,r){t.l+=4,s-=4;var a=t.l+s,n=Xu(t,s,r),i=t.read_shift(2);if(a-=t.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return t.l+=i,n}function rh(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2);return{s:{c:a,r:s},e:{c:n,r}}}function Ok(t,s){return s||(s=Ne(8)),s.write_shift(2,t.s.r),s.write_shift(2,t.e.r),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c),s}function Mk(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(1),n=t.read_shift(1);return{s:{c:a,r:s},e:{c:n,r}}}var D$=Mk;function Bk(t){t.l+=4;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return t.l+=12,[r,s,a]}function I$(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function O$(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function ia(t){t.l+=2,t.l+=t.read_shift(2)}var M$={0:ia,4:ia,5:ia,6:ia,7:O$,8:ia,9:ia,10:ia,11:ia,12:ia,13:I$,14:ia,15:ia,16:ia,17:ia,18:ia,19:ia,20:ia,21:Bk};function B$(t,s){for(var r=t.l+s,a=[];t.l<r;){var n=t.read_shift(2);t.l-=2;try{a.push(M$[n](t,r-t.l))}catch{return t.l=r,a}}return t.l!=r&&(t.l=r),a}function Om(t,s){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),s-=2,s>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(s),r}function _y(t,s,r){var a=1536,n=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,n=8;break;case"biff4":a=4,n=6;break;case"biff3":a=3,n=6;break;case"biff2":a=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ne(n);return i.write_shift(2,a),i.write_shift(2,s),n>4&&i.write_shift(2,29282),n>6&&i.write_shift(2,1997),n>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function L$(t,s){return s===0||t.read_shift(2),1200}function $$(t,s,r){if(r.enc)return t.l+=s,"";var a=t.l,n=Po(t,0,r);return t.read_shift(s+a-t.l),n}function U$(t,s){var r=!s||s.biff==8,a=Ne(r?112:54);for(a.write_shift(s.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function H$(t,s,r){var a=r&&r.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function W$(t,s,r){var a=t.read_shift(4),n=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=Xu(t,0,r);return l.length===0&&(l="Sheet1"),{pos:a,hs:n,dt:i,name:l}}function V$(t,s){var r=!s||s.biff>=8?2:1,a=Ne(8+r*t.name.length);a.write_shift(4,t.pos),a.write_shift(1,t.hs||0),a.write_shift(1,t.dt),a.write_shift(1,t.name.length),s.biff>=8&&a.write_shift(1,1),a.write_shift(r*t.name.length,t.name,s.biff<8?"sbcs":"utf16le");var n=a.slice(0,a.l);return n.l=a.l,n}function z$(t,s){for(var r=t.l+s,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0;l!=n&&t.l<r;++l)i.push(w$(t));return i.Count=a,i.Unique=n,i}function G$(t,s){var r=Ne(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var a=[],n=0;n<t.length;++n)a[n]=N$(t[n]);var i=$r([r].concat(a));return i.parts=[r.length].concat(a.map(function(l){return l.length})),i}function q$(t,s){var r={};return r.dsst=t.read_shift(2),t.l+=s-2,r}function Y$(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var r=t.read_shift(2);t.l+=4;var a=t.read_shift(1);return t.l+=3,a&7&&(s.level=a&7),a&32&&(s.hidden=!0),a&64&&(s.hpt=r/20),s}function K$(t){var s=_$(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var r=t.read_shift(4);return r!==0}function X$(t){return t.read_shift(2),t.read_shift(4)}function Iw(t,s,r){var a=0;r&&r.biff==2||(a=t.read_shift(2));var n=t.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function J$(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[s,r],Dim:[a,n],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:u}}function Q$(){var t=Ne(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Z$(t,s,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=t.read_shift(2);return{RTL:a&64}}function e7(t){var s=Ne(18),r=1718;return t&&t.RTL&&(r|=64),s.write_shift(2,r),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function t7(){}function s7(t,s,r){var a={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return a.name=Xu(t,0,r),a}function r7(t,s){var r=t.name||"Arial",a=s&&s.biff==5,n=a?15+r.length:16+2*r.length,i=Ne(n);return i.write_shift(2,t.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function a7(t){var s=Ni(t);return s.isst=t.read_shift(4),s}function n7(t,s,r,a){var n=Ne(10);return bo(t,s,a,n),n.write_shift(4,r),n}function i7(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=t.l+s,n=Ni(t);r.biff==2&&t.l++;var i=Ju(t,a-t.l,r);return n.val=i,n}function l7(t,s,r,a,n){var i=!n||n.biff==8,l=Ne(8+ +i+(1+i)*r.length);return bo(t,s,a,l),l.write_shift(2,r.length),i&&l.write_shift(1,1),l.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),l}function o7(t,s,r){var a=t.read_shift(2),n=Po(t,0,r);return[a,n]}function c7(t,s,r,a){var n=r&&r.biff==5;a||(a=Ne(n?3+s.length:5+2*s.length)),a.write_shift(2,t),a.write_shift(n?1:2,s.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*s.length,s,n?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var d7=Po;function Ow(t,s,r){var a=t.l+s,n=r.biff==8||!r.biff?4:2,i=t.read_shift(n),l=t.read_shift(n),o=t.read_shift(2),c=t.read_shift(2);return t.l=a,{s:{r:i,c:o},e:{r:l,c}}}function u7(t,s){var r=s.biff==8||!s.biff?4:2,a=Ne(2*r+6);return a.write_shift(r,t.s.r),a.write_shift(r,t.e.r+1),a.write_shift(2,t.s.c),a.write_shift(2,t.e.c+1),a.write_shift(2,0),a}function m7(t){var s=t.read_shift(2),r=t.read_shift(2),a=Ik(t);return{r:s,c:r,ixfe:a[0],rknum:a[1]}}function x7(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(Ik(t));if(t.l!==r)throw new Error("MulRK read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:l,rkrec:i}}function h7(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:l,ixfe:i}}function f7(t,s,r,a){var n={},i=t.read_shift(4),l=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return n.patternType=KL[o>>26],a.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function g7(t,s,r){var a={};return a.ifnt=t.read_shift(2),a.numFmtId=t.read_shift(2),a.flags=t.read_shift(2),a.fStyle=a.flags>>2&1,s-=6,a.data=f7(t,s,a.fStyle,r),a}function Mw(t,s,r,a){var n=r&&r.biff==5;a||(a=Ne(n?16:20)),a.write_shift(2,0),t.style?(a.write_shift(2,t.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,t.numFmtId||0),a.write_shift(2,s<<4));var i=0;return t.numFmtId>0&&n&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),n||a.write_shift(4,0),a.write_shift(2,0),a}function p7(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function b7(t){var s=Ne(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function Bw(t,s,r){var a=Ni(t);(r.biff==2||s==9)&&++t.l;var n=j$(t);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function y7(t,s,r,a,n,i){var l=Ne(8);return bo(t,s,a,l),Ak(r,i,l),l}function v7(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=Ni(t),n=ha(t);return a.val=n,a}function j7(t,s,r,a){var n=Ne(14);return bo(t,s,a,n),go(r,n),n}var Lw=A$;function w7(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=po(t,i),o=[];a>t.l;)o.push(Ju(t));return[i,n,l,o]}function $w(t,s,r){var a=t.read_shift(2),n,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=F$(t,s-2,r)),i.body=n||t.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var N7=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Uw(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=po(t,l,r);n&32&&(u=N7[u.charCodeAt(0)]);var d=a-t.l;r&&r.biff==2&&--d;var m=a==t.l||o===0||!(d>0)?[]:BV(t,d,r,o);return{chKey:i,Name:u,itab:c,rgce:m}}function Lk(t,s,r){if(r.biff<8)return S7(t,s,r);for(var a=[],n=t.l+s,i=t.read_shift(r.biff>8?4:2);i--!==0;)a.push(R$(t,r.biff>8?12:6,r));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return a}function S7(t,s,r){t[t.l+1]==3&&t[t.l]++;var a=Xu(t,s,r);return a.charCodeAt(0)==3?a.slice(1):a}function C7(t,s,r){if(r.biff<8){t.l+=s;return}var a=t.read_shift(2),n=t.read_shift(2),i=po(t,a,r),l=po(t,n,r);return[i,l]}function k7(t,s,r){var a=Mk(t);t.l++;var n=t.read_shift(1);return s-=8,[LV(t,s,r),n,a]}function Hw(t,s,r){var a=D$(t);switch(r.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[a,OV(t,s,r)]}function E7(t){var s=t.read_shift(4)!==0,r=t.read_shift(4)!==0,a=t.read_shift(4);return[s,r,a]}function P7(t,s,r){if(!(r.biff<8)){var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=Po(t,0,r);return r.biff<8&&t.read_shift(1),[{r:a,c:n},o,l,i]}}function T7(t,s,r){return P7(t,s,r)}function _7(t,s){for(var r=[],a=t.read_shift(2);a--;)r.push(rh(t));return r}function A7(t){var s=Ne(2+t.length*8);s.write_shift(2,t.length);for(var r=0;r<t.length;++r)Ok(t[r],s);return s}function R7(t,s,r){if(r&&r.biff<8)return D7(t,s,r);var a=Bk(t),n=B$(t,s-22,a[1]);return{cmo:a,ft:n}}var F7={8:function(t,s){var r=t.l+s;t.l+=10;var a=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var n=t.read_shift(1);return t.l+=n,t.l=r,{fmt:a}}};function D7(t,s,r){t.l+=4;var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var l=[];return l.push((F7[a]||va)(t,s,r)),{cmo:[n,a,i],ft:l}}function I7(t,s,r){var a=t.l,n="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:l=S$(t,6,r);var o=t.read_shift(2);t.read_shift(2),br(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-a!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],m=po(t,t.lens[u+1]-t.lens[u]-1);if(n+=m,n.length>=(d?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return t.l=a+s,{t:n}}catch{return t.l=a+s,{t:n}}}function O7(t,s){var r=rh(t);t.l+=16;var a=P$(t,s-24);return[r,a]}function M7(t){var s=Ne(24),r=tr(t[0]);s.write_shift(2,r.r),s.write_shift(2,r.r),s.write_shift(2,r.c),s.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)s.write_shift(1,parseInt(a[n],16));return $r([s,T$(t[1])])}function B7(t,s){t.read_shift(2);var r=rh(t),a=t.read_shift((s-10)/2,"dbcs-cont");return a=a.replace(Ta,""),[r,a]}function L7(t){var s=t[1].Tooltip,r=Ne(10+2*(s.length+1));r.write_shift(2,2048);var a=tr(t[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var n=0;n<s.length;++n)r.write_shift(2,s.charCodeAt(n));return r.write_shift(2,0),r}function $7(t){var s=[0,0],r;return r=t.read_shift(2),s[0]=kw[r]||r,r=t.read_shift(2),s[1]=kw[r]||r,s}function U7(t){return t||(t=Ne(4)),t.write_shift(2,1),t.write_shift(2,1),t}function H7(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Dk(t));return r}function W7(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Dk(t));return r}function V7(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function $k(t,s,r){if(!r.cellStyles)return va(t,s);var a=r&&r.biff>=12?4:2,n=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(a),o=t.read_shift(a),c=t.read_shift(2);a==2&&(t.l+=2);var u={s:n,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function z7(t,s){var r=Ne(12);r.write_shift(2,s),r.write_shift(2,s),r.write_shift(2,t.width*256),r.write_shift(2,0);var a=0;return t.hidden&&(a|=1),r.write_shift(1,a),a=t.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function G7(t,s){var r={};return s<32||(t.l+=16,r.header=ha(t),r.footer=ha(t),t.l+=2),r}function q7(t,s,r){var a={area:!1};if(r.biff!=5)return t.l+=s,a;var n=t.read_shift(1);return t.l+=3,n&16&&(a.area=!0),a}function Y7(t){for(var s=Ne(2*t),r=0;r<t;++r)s.write_shift(2,r+1);return s}var K7=Ni,X7=_k,J7=Ju;function Q7(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n={fmt:s,env:r,len:a,data:t.slice(t.l,t.l+a)};return t.l+=a,n}function Z7(t,s,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=Ni(t);++t.l;var n=Po(t,s-7,r);return a.t="str",a.val=n,a}function eU(t){var s=Ni(t);++t.l;var r=ha(t);return s.t="n",s.val=r,s}function tU(t,s,r){var a=Ne(15);return tm(a,t,s),a.write_shift(8,r,"f"),a}function sU(t){var s=Ni(t);++t.l;var r=t.read_shift(2);return s.t="n",s.val=r,s}function rU(t,s,r){var a=Ne(9);return tm(a,t,s),a.write_shift(2,r),a}function aU(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function nU(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function iU(t,s,r){var a=t.l+s,n=Ni(t),i=t.read_shift(2),l=po(t,i,r);return t.l=a,n.t="str",n.val=l,n}var lU=[2,3,48,49,131,139,140,245],cp=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=eh({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=vl(1);switch(c.type){case"base64":d=Ka(tn(o));break;case"binary":d=Ka(o);break;case"buffer":case"array":d=o;break}Jr(d,0);var m=d.read_shift(1),x=!!(m&136),g=!1,p=!1;switch(m){case 2:break;case 3:break;case 48:g=!0,x=!0;break;case 49:g=!0,x=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var f=0,b=521;m==2&&(f=d.read_shift(2)),d.l+=3,m!=2&&(f=d.read_shift(4)),f>1048576&&(f=1e6),m!=2&&(b=d.read_shift(2));var y=d.read_shift(2),v=c.codepage||1252;m!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(v=t[d[d.l]]),d.l+=1,d.l+=2),p&&(d.l+=36);for(var N=[],S={},w=Math.min(d.length,m==2?521:b-10-(g?264:0)),C=p?32:11;d.l<w&&d[d.l]!=13;)switch(S={},S.name=lu.utils.decode(v,d.slice(d.l,d.l+C)).replace(/[\u0000\r\n].*$/g,""),d.l+=C,S.type=String.fromCharCode(d.read_shift(1)),m!=2&&!p&&(S.offset=d.read_shift(4)),S.len=d.read_shift(1),m==2&&(S.offset=d.read_shift(2)),S.dec=d.read_shift(1),S.name.length&&N.push(S),m!=2&&(d.l+=p?13:14),S.type){case"B":(!g||S.len!=8)&&c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var j=0,k=0;for(u[0]=[],k=0;k!=N.length;++k)u[0][k]=N[k].name;for(;f-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++j]=[],k=0,k=0;k!=N.length;++k){var E=d.slice(d.l,d.l+N[k].len);d.l+=N[k].len,Jr(E,0);var R=lu.utils.decode(v,E);switch(N[k].type){case"C":R.trim().length&&(u[j][k]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[j][k]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[j][k]=R;break;case"F":u[j][k]=parseFloat(R.trim());break;case"+":case"I":u[j][k]=p?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[j][k]=!0;break;case"N":case"F":u[j][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[j][k]="##MEMO##"+(p?parseInt(R.trim(),10):E.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[j][k]=+R||0);break;case"@":u[j][k]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[j][k]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[j][k]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][k]=-E.read_shift(-8,"f");break;case"B":if(g&&N[k].len==8){u[j][k]=E.read_shift(8,"f");break}case"G":case"P":E.l+=N[k].len;break;case"0":if(N[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[k].type)}}}if(m!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=N,u}function a(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Xc(r(o,u),u);return d["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,d}function n(o,c){try{return Dl(a(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var u=c||{};if(+u.codepage>=0&&Rn(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ba(),m=sx(o,{header:1,raw:!0,cellDates:!0}),x=m[0],g=m.slice(1),p=o["!cols"]||[],f=0,b=0,y=0,v=1;for(f=0;f<x.length;++f){if(((p[f]||{}).DBF||{}).name){x[f]=p[f].DBF.name,++y;continue}if(x[f]!=null){if(++y,typeof x[f]=="number"&&(x[f]=x[f].toString(10)),typeof x[f]!="string")throw new Error("DBF Invalid column name "+x[f]+" |"+typeof x[f]+"|");if(x.indexOf(x[f])!==f){for(b=0;b<1024;++b)if(x.indexOf(x[f]+"_"+b)==-1){x[f]+="_"+b;break}}}}var N=es(o["!ref"]),S=[],w=[],C=[];for(f=0;f<=N.e.c-N.s.c;++f){var j="",k="",E=0,R=[];for(b=0;b<g.length;++b)g[b][f]!=null&&R.push(g[b][f]);if(R.length==0||x[f]==null){S[f]="?";continue}for(b=0;b<R.length;++b){switch(typeof R[b]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=R[b]instanceof Date?"D":"C";break;default:k="C"}E=Math.max(E,String(R[b]).length),j=j&&j!=k?"C":k}E>250&&(E=250),k=((p[f]||{}).DBF||{}).type,k=="C"&&p[f].DBF.len>E&&(E=p[f].DBF.len),j=="B"&&k=="N"&&(j="N",C[f]=p[f].DBF.dec,E=p[f].DBF.len),w[f]=j=="C"||k=="N"?E:i[j]||0,v+=w[f],S[f]=j}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,g.length),D.write_shift(2,296+32*y),D.write_shift(2,v),f=0;f<4;++f)D.write_shift(4,0);for(D.write_shift(4,0|(+s[T4]||3)<<8),f=0,b=0;f<x.length;++f)if(x[f]!=null){var P=d.next(32),T=(x[f].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,T,"sbcs"),P.write_shift(1,S[f]=="?"?"C":S[f],"sbcs"),P.write_shift(4,b),P.write_shift(1,w[f]||i[S[f]]||0),P.write_shift(1,C[f]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),b+=w[f]||i[S[f]]||0}var B=d.next(264);for(B.write_shift(4,13),f=0;f<65;++f)B.write_shift(4,0);for(f=0;f<g.length;++f){var F=d.next(v);for(F.write_shift(1,0),b=0;b<x.length;++b)if(x[b]!=null)switch(S[b]){case"L":F.write_shift(1,g[f][b]==null?63:g[f][b]?84:70);break;case"B":F.write_shift(8,g[f][b]||0,"f");break;case"N":var L="0";for(typeof g[f][b]=="number"&&(L=g[f][b].toFixed(C[b]||0)),y=0;y<w[b]-L.length;++y)F.write_shift(1,32);F.write_shift(1,L,"sbcs");break;case"D":g[f][b]?(F.write_shift(4,("0000"+g[f][b].getFullYear()).slice(-4),"sbcs"),F.write_shift(2,("00"+(g[f][b].getMonth()+1)).slice(-2),"sbcs"),F.write_shift(2,("00"+g[f][b].getDate()).slice(-2),"sbcs")):F.write_shift(8,"00000000","sbcs");break;case"C":var I=String(g[f][b]!=null?g[f][b]:"").slice(0,w[b]);for(F.write_shift(1,I,"sbcs"),y=0;y<w[b]-I.length;++y)F.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:n,to_sheet:a,from_sheet:l}}(),Uk=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+or(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(x,g){var p=t[g];return typeof p=="number"?Zj(p):p},a=function(x,g,p){var f=g.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return f==59?x:Zj(f)};t["|"]=254;function n(x,g){switch(g.type){case"base64":return i(tn(x),g);case"binary":return i(x,g);case"buffer":return i(Ht&&Buffer.isBuffer(x)?x.toString("binary"):Fl(x),g);case"array":return i(fo(x),g)}throw new Error("Unrecognized type "+g.type)}function i(x,g){var p=x.split(/[\n\r]+/),f=-1,b=-1,y=0,v=0,N=[],S=[],w=null,C={},j=[],k=[],E=[],R=0,D;for(+g.codepage>=0&&Rn(+g.codepage);y!==p.length;++y){R=0;var P=p[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(s,r),T=P.replace(/;;/g,"\0").split(";").map(function(O){return O.replace(/\u0000/g,";")}),B=T[0],F;if(P.length>0)switch(B){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":T[1].charAt(0)=="P"&&S.push(P.slice(3).replace(/;;/g,";"));break;case"C":var L=!1,I=!1,V=!1,_=!1,G=-1,U=-1;for(v=1;v<T.length;++v)switch(T[v].charAt(0)){case"A":break;case"X":b=parseInt(T[v].slice(1))-1,I=!0;break;case"Y":for(f=parseInt(T[v].slice(1))-1,I||(b=0),D=N.length;D<=f;++D)N[D]=[];break;case"K":F=T[v].slice(1),F.charAt(0)==='"'?F=F.slice(1,F.length-1):F==="TRUE"?F=!0:F==="FALSE"?F=!1:isNaN(In(F))?isNaN(Sc(F).getDate())||(F=Vs(F)):(F=In(F),w!==null&&Yc(w)&&(F=sh(F))),L=!0;break;case"E":_=!0;var A=xc(T[v].slice(1),{r:f,c:b});N[f][b]=[N[f][b],A];break;case"S":V=!0,N[f][b]=[N[f][b],"S5S"];break;case"G":break;case"R":G=parseInt(T[v].slice(1))-1;break;case"C":U=parseInt(T[v].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}if(L&&(N[f][b]&&N[f][b].length==2?N[f][b][0]=F:N[f][b]=F,w=null),V){if(_)throw new Error("SYLK shared formula cannot have own formula");var q=G>-1&&N[G][U];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");N[f][b][1]=n5(q[1],{r:f-G,c:b-U})}break;case"F":var Y=0;for(v=1;v<T.length;++v)switch(T[v].charAt(0)){case"X":b=parseInt(T[v].slice(1))-1,++Y;break;case"Y":for(f=parseInt(T[v].slice(1))-1,D=N.length;D<=f;++D)N[D]=[];break;case"M":R=parseInt(T[v].slice(1))/20;break;case"F":break;case"G":break;case"P":w=S[parseInt(T[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=T[v].slice(1).split(" "),D=parseInt(E[0],10);D<=parseInt(E[1],10);++D)R=parseInt(E[2],10),k[D-1]=R===0?{hidden:!0}:{wch:R},jl(k[D-1]);break;case"C":b=parseInt(T[v].slice(1))-1,k[b]||(k[b]={});break;case"R":f=parseInt(T[v].slice(1))-1,j[f]||(j[f]={}),R>0?(j[f].hpt=R,j[f].hpx=kc(R)):R===0&&(j[f].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}Y<1&&(w=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}}return j.length>0&&(C["!rows"]=j),k.length>0&&(C["!cols"]=k),g&&g.sheetRows&&(N=N.slice(0,g.sheetRows)),[N,C]}function l(x,g){var p=n(x,g),f=p[0],b=p[1],y=Xc(f,g);return or(b).forEach(function(v){y[v]=b[v]}),y}function o(x,g){return Dl(l(x,g),g)}function c(x,g,p,f){var b="C;Y"+(p+1)+";X"+(f+1)+";K";switch(x.t){case"n":b+=x.v||0,x.f&&!x.F&&(b+=";E"+Oy(x.f,{r:p,c:f}));break;case"b":b+=x.v?"TRUE":"FALSE";break;case"e":b+=x.w||x.v;break;case"d":b+='"'+(x.w||x.v)+'"';break;case"s":b+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(x,g){g.forEach(function(p,f){var b="F;W"+(f+1)+" "+(f+1)+" ";p.hidden?b+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=fu(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=gu(p.wpx)),typeof p.wch=="number"&&(b+=Math.round(p.wch))),b.charAt(b.length-1)!=" "&&x.push(b)})}function d(x,g){g.forEach(function(p,f){var b="F;";p.hidden?b+="M0;":p.hpt?b+="M"+20*p.hpt+";":p.hpx&&(b+="M"+20*pu(p.hpx)+";"),b.length>2&&x.push(b+"R"+(f+1))})}function m(x,g){var p=["ID;PWXL;N;E"],f=[],b=es(x["!ref"]),y,v=Array.isArray(x),N=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),x["!cols"]&&u(p,x["!cols"]),x["!rows"]&&d(p,x["!rows"]),p.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var S=b.s.r;S<=b.e.r;++S)for(var w=b.s.c;w<=b.e.c;++w){var C=yt({r:S,c:w});y=v?(x[S]||[])[w]:x[C],!(!y||y.v==null&&(!y.f||y.F))&&f.push(c(y,x,S,w))}return p.join(N)+N+f.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:l,from_sheet:m}}(),Hk=function(){function t(i,l){switch(l.type){case"base64":return s(tn(i),l);case"binary":return s(i,l);case"buffer":return s(Ht&&Buffer.isBuffer(i)?i.toString("binary"):Fl(i),l);case"array":return s(fo(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var o=i.split(`
`),c=-1,u=-1,d=0,m=[];d!==o.length;++d){if(o[d].trim()==="BOT"){m[++c]=[],u=0;continue}if(!(c<0)){var x=o[d].trim().split(","),g=x[0],p=x[1];++d;for(var f=o[d]||"";(f.match(/["]/g)||[]).length&1&&d<o.length-1;)f+=`
`+o[++d];switch(f=f.trim(),+g){case-1:if(f==="BOT"){m[++c]=[],u=0;continue}else if(f!=="EOD")throw new Error("Unrecognized DIF special command "+f);break;case 0:f==="TRUE"?m[c][u]=!0:f==="FALSE"?m[c][u]=!1:isNaN(In(p))?isNaN(Sc(p).getDate())?m[c][u]=p:m[c][u]=Vs(p):m[c][u]=In(p),++u;break;case 1:f=f.slice(1,f.length-1),f=f.replace(/""/g,'"'),f&&f.match(/^=".*"$/)&&(f=f.slice(2,-1)),m[c][u++]=f!==""?f:null;break}if(f==="EOD")break}}return l&&l.sheetRows&&(m=m.slice(0,l.sheetRows)),m}function r(i,l){return Xc(t(i,l),l)}function a(i,l){return Dl(r(i,l),l)}var n=function(){var i=function(c,u,d,m,x){c.push(u),c.push(d+","+m),c.push('"'+x.replace(/"/g,'""')+'"')},l=function(c,u,d,m){c.push(u+","+d),c.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(c){var u=[],d=es(c["!ref"]),m,x=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){l(u,-1,0,"BOT");for(var p=d.s.c;p<=d.e.c;++p){var f=yt({r:g,c:p});if(m=x?(c[g]||[])[p]:c[f],!m){l(u,1,0,"");continue}switch(m.t){case"n":var b=m.w;!b&&m.v!=null&&(b=m.v),b==null?m.f&&!m.F?l(u,1,0,"="+m.f):l(u,1,0,""):l(u,0,b,"V");break;case"b":l(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":l(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=wn(m.z||bt[14],_r(Vs(m.v)))),l(u,0,m.w,"V");break;default:l(u,1,0,"")}}}l(u,-1,0,"EOD");var y=`\r
`,v=u.join(y);return v}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),Wk=function(){function t(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,x){for(var g=m.split(`
`),p=-1,f=-1,b=0,y=[];b!==g.length;++b){var v=g[b].trim().split(":");if(v[0]==="cell"){var N=tr(v[1]);if(y.length<=N.r)for(p=y.length;p<=N.r;++p)y[p]||(y[p]=[]);switch(p=N.r,f=N.c,v[2]){case"t":y[p][f]=t(v[3]);break;case"v":y[p][f]=+v[3];break;case"vtf":var S=v[v.length-1];case"vtc":switch(v[3]){case"nl":y[p][f]=!!+v[4];break;default:y[p][f]=+v[4];break}v[2]=="vtf"&&(y[p][f]=[y[p][f],S])}}}return x&&x.sheetRows&&(y=y.slice(0,x.sheetRows)),y}function a(m,x){return Xc(r(m,x),x)}function n(m,x){return Dl(a(m,x),x)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var x=[],g=[],p,f="",b=$a(m["!ref"]),y=Array.isArray(m),v=b.s.r;v<=b.e.r;++v)for(var N=b.s.c;N<=b.e.c;++N)if(f=yt({r:v,c:N}),p=y?(m[v]||[])[N]:m[f],!(!p||p.v==null||p.t==="z")){switch(g=["cell",f,"t"],p.t){case"s":case"str":g.push(s(p.v));break;case"n":p.f?(g[2]="vtf",g[3]="n",g[4]=p.v,g[5]=s(p.f)):(g[2]="v",g[3]=p.v);break;case"b":g[2]="vt"+(p.f?"f":"c"),g[3]="nl",g[4]=p.v?"1":"0",g[5]=s(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var S=_r(Vs(p.v));g[2]="vtc",g[3]="nd",g[4]=""+S,g[5]=p.w||wn(p.z||bt[14],S);break;case"e":continue}x.push(g.join(":"))}return x.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function d(m){return[i,l,o,l,u(m),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:d}}(),Cc=function(){function t(d,m,x,g,p){p.raw?m[x][g]=d:d===""||(d==="TRUE"?m[x][g]=!0:d==="FALSE"?m[x][g]=!1:isNaN(In(d))?isNaN(Sc(d).getDate())?m[x][g]=d:m[x][g]=Vs(d):m[x][g]=In(d))}function s(d,m){var x=m||{},g=[];if(!d||d.length===0)return g;for(var p=d.split(/[\r\n]/),f=p.length-1;f>=0&&p[f].length===0;)--f;for(var b=10,y=0,v=0;v<=f;++v)y=p[v].indexOf(" "),y==-1?y=p[v].length:y++,b=Math.max(b,y);for(v=0;v<=f;++v){g[v]=[];var N=0;for(t(p[v].slice(0,b).trim(),g,v,N,x),N=1;N<=(p[v].length-b)/10+1;++N)t(p[v].slice(b+(N-1)*10,b+N*10).trim(),g,v,N,x)}return x.sheetRows&&(g=g.slice(0,x.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(d){for(var m={},x=!1,g=0,p=0;g<d.length;++g)(p=d.charCodeAt(g))==34?x=!x:!x&&p in r&&(m[p]=(m[p]||0)+1);p=[];for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&p.push([m[g],g]);if(!p.length){m=a;for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&p.push([m[g],g])}return p.sort(function(f,b){return f[0]-b[0]||a[f[1]]-a[b[1]]}),r[p.pop()[1]]||44}function i(d,m){var x=m||{},g="",p=x.dense?[]:{},f={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=n(d.slice(0,1024)):x&&x.FS?g=x.FS:g=n(d.slice(0,1024));var b=0,y=0,v=0,N=0,S=0,w=g.charCodeAt(0),C=!1,j=0,k=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=x.dateNF!=null?q9(x.dateNF):null;function R(){var D=d.slice(N,S),P={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)P.t="z";else if(x.raw)P.t="s",P.v=D;else if(D.trim().length===0)P.t="s",P.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(P.t="s",P.v=D.slice(2,-1).replace(/""/g,'"')):wW(D)?(P.t="n",P.f=D.slice(1)):(P.t="s",P.v=D);else if(D=="TRUE")P.t="b",P.v=!0;else if(D=="FALSE")P.t="b",P.v=!1;else if(!isNaN(v=In(D)))P.t="n",x.cellText!==!1&&(P.w=D),P.v=v;else if(!isNaN(Sc(D).getDate())||E&&D.match(E)){P.z=x.dateNF||bt[14];var T=0;E&&D.match(E)&&(D=Y9(D,x.dateNF,D.match(E)||[]),T=1),x.cellDates?(P.t="d",P.v=Vs(D,T)):(P.t="n",P.v=_r(Vs(D,T))),x.cellText!==!1&&(P.w=wn(P.z,P.v instanceof Date?_r(P.v):P.v)),x.cellNF||delete P.z}else P.t="s",P.v=D;if(P.t=="z"||(x.dense?(p[b]||(p[b]=[]),p[b][y]=P):p[yt({c:y,r:b})]=P),N=S+1,k=d.charCodeAt(N),f.e.c<y&&(f.e.c=y),f.e.r<b&&(f.e.r=b),j==w)++y;else if(y=0,++b,x.sheetRows&&x.sheetRows<=b)return!0}e:for(;S<d.length;++S)switch(j=d.charCodeAt(S)){case 34:k===34&&(C=!C);break;case w:case 10:case 13:if(!C&&R())break e;break}return S-N>0&&R(),p["!ref"]=Ot(f),p}function l(d,m){return!(m&&m.PRN)||m.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,m):Xc(s(d,m),m)}function o(d,m){var x="",g=m.type=="string"?[0,0,0,0]:Vy(d,m);switch(m.type){case"base64":x=tn(d);break;case"binary":x=d;break;case"buffer":m.codepage==65001?x=d.toString("utf8"):m.codepage&&typeof lu<"u"||(x=Ht&&Buffer.isBuffer(d)?d.toString("binary"):Fl(d));break;case"array":x=fo(d);break;case"string":x=d;break;default:throw new Error("Unrecognized type "+m.type)}return g[0]==239&&g[1]==187&&g[2]==191?x=ks(x.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?x=ks(x):m.type=="binary"&&typeof lu<"u",x.slice(0,19)=="socialcalc:version:"?Wk.to_sheet(m.type=="string"?x:ks(x),m):l(x,m)}function c(d,m){return Dl(o(d,m),m)}function u(d){for(var m=[],x=es(d["!ref"]),g,p=Array.isArray(d),f=x.s.r;f<=x.e.r;++f){for(var b=[],y=x.s.c;y<=x.e.c;++y){var v=yt({r:f,c:y});if(g=p?(d[f]||[])[y]:d[v],!g||g.v==null){b.push("          ");continue}for(var N=(g.w||(Vi(g),g.w)||"").slice(0,10);N.length<10;)N+=" ";b.push(N+(y===0?" ":""))}m.push(b.join(""))}return m.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function oU(t,s){var r=s||{},a=!!r.WTF;r.WTF=!0;try{var n=Uk.to_workbook(t,r);return r.WTF=a,n}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Cc.to_workbook(t,s)}}var to=function(){function t(A,q,Y){if(A){Jr(A,A.l||0);for(var O=Y.Enum||G;A.l<A.length;){var W=A.read_shift(2),z=O[W]||O[65535],H=A.read_shift(2),Q=A.l+H,J=z.f&&z.f(A,H,Y);if(A.l=Q,q(J,z,W))return}}}function s(A,q){switch(q.type){case"base64":return r(Ka(tn(A)),q);case"binary":return r(Ka(A),q);case"buffer":case"array":return r(A,q)}throw"Unsupported type "+q.type}function r(A,q){if(!A)return A;var Y=q||{},O=Y.dense?[]:{},W="Sheet1",z="",H=0,Q={},J=[],ie=[],K={s:{r:0,c:0},e:{r:0,c:0}},oe=Y.sheetRows||0;if(A[2]==0&&(A[3]==8||A[3]==9)&&A.length>=16&&A[14]==5&&A[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(A[2]==2)Y.Enum=G,t(A,function(ye,We,fe){switch(fe){case 0:Y.vers=ye,ye>=4096&&(Y.qpro=!0);break;case 6:K=ye;break;case 204:ye&&(z=ye);break;case 222:z=ye;break;case 15:case 51:Y.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:fe==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=Y.dateNF||bt[14],Y.cellDates&&(ye[1].t="d",ye[1].v=sh(ye[1].v))),Y.qpro&&ye[3]>H&&(O["!ref"]=Ot(K),Q[W]=O,J.push(W),O=Y.dense?[]:{},K={s:{r:0,c:0},e:{r:0,c:0}},H=ye[3],W=z||"Sheet"+(H+1),z="");var Fe=Y.dense?(O[ye[0].r]||[])[ye[0].c]:O[yt(ye[0])];if(Fe){Fe.t=ye[1].t,Fe.v=ye[1].v,ye[1].z!=null&&(Fe.z=ye[1].z),ye[1].f!=null&&(Fe.f=ye[1].f);break}Y.dense?(O[ye[0].r]||(O[ye[0].r]=[]),O[ye[0].r][ye[0].c]=ye[1]):O[yt(ye[0])]=ye[1];break}},Y);else if(A[2]==26||A[2]==14)Y.Enum=U,A[2]==14&&(Y.qpro=!0,A.l=0),t(A,function(ye,We,fe){switch(fe){case 204:W=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>H&&(O["!ref"]=Ot(K),Q[W]=O,J.push(W),O=Y.dense?[]:{},K={s:{r:0,c:0},e:{r:0,c:0}},H=ye[3],W="Sheet"+(H+1)),oe>0&&ye[0].r>=oe)break;Y.dense?(O[ye[0].r]||(O[ye[0].r]=[]),O[ye[0].r][ye[0].c]=ye[1]):O[yt(ye[0])]=ye[1],K.e.c<ye[0].c&&(K.e.c=ye[0].c),K.e.r<ye[0].r&&(K.e.r=ye[0].r);break;case 27:ye[14e3]&&(ie[ye[14e3][0]]=ye[14e3][1]);break;case 1537:ie[ye[0]]=ye[1],ye[0]==H&&(W=ye[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+A[2]);if(O["!ref"]=Ot(K),Q[z||W]=O,J.push(z||W),!ie.length)return{SheetNames:J,Sheets:Q};for(var le={},Se=[],Ee=0;Ee<ie.length;++Ee)Q[J[Ee]]?(Se.push(ie[Ee]||J[Ee]),le[ie[Ee]]=Q[ie[Ee]]||Q[J[Ee]]):(Se.push(ie[Ee]),le[ie[Ee]]={"!ref":"A1"});return{SheetNames:Se,Sheets:le}}function a(A,q){var Y=q||{};if(+Y.codepage>=0&&Rn(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var O=Ba(),W=es(A["!ref"]),z=Array.isArray(A),H=[];Ue(O,0,i(1030)),Ue(O,6,c(W));for(var Q=Math.min(W.e.r,8191),J=W.s.r;J<=Q;++J)for(var ie=mr(J),K=W.s.c;K<=W.e.c;++K){J===W.s.r&&(H[K]=er(K));var oe=H[K]+ie,le=z?(A[J]||[])[K]:A[oe];if(!(!le||le.t=="z"))if(le.t=="n")(le.v|0)==le.v&&le.v>=-32768&&le.v<=32767?Ue(O,13,g(J,K,le.v)):Ue(O,14,f(J,K,le.v));else{var Se=Vi(le);Ue(O,15,m(J,K,Se.slice(0,239)))}}return Ue(O,1),O.end()}function n(A,q){var Y=q||{};if(+Y.codepage>=0&&Rn(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var O=Ba();Ue(O,0,l(A));for(var W=0,z=0;W<A.SheetNames.length;++W)(A.Sheets[A.SheetNames[W]]||{})["!ref"]&&Ue(O,27,_(A.SheetNames[W],z++));var H=0;for(W=0;W<A.SheetNames.length;++W){var Q=A.Sheets[A.SheetNames[W]];if(!(!Q||!Q["!ref"])){for(var J=es(Q["!ref"]),ie=Array.isArray(Q),K=[],oe=Math.min(J.e.r,8191),le=J.s.r;le<=oe;++le)for(var Se=mr(le),Ee=J.s.c;Ee<=J.e.c;++Ee){le===J.s.r&&(K[Ee]=er(Ee));var ye=K[Ee]+Se,We=ie?(Q[le]||[])[Ee]:Q[ye];if(!(!We||We.t=="z"))if(We.t=="n")Ue(O,23,R(le,Ee,H,We.v));else{var fe=Vi(We);Ue(O,22,j(le,Ee,H,fe.slice(0,239)))}}++H}}return Ue(O,1),O.end()}function i(A){var q=Ne(2);return q.write_shift(2,A),q}function l(A){var q=Ne(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var Y=0,O=0,W=0,z=0;z<A.SheetNames.length;++z){var H=A.SheetNames[z],Q=A.Sheets[H];if(!(!Q||!Q["!ref"])){++W;var J=$a(Q["!ref"]);Y<J.e.r&&(Y=J.e.r),O<J.e.c&&(O=J.e.c)}}return Y>8191&&(Y=8191),q.write_shift(2,Y),q.write_shift(1,W),q.write_shift(1,O),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function o(A,q,Y){var O={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&Y.qpro?(O.s.c=A.read_shift(1),A.l++,O.s.r=A.read_shift(2),O.e.c=A.read_shift(1),A.l++,O.e.r=A.read_shift(2),O):(O.s.c=A.read_shift(2),O.s.r=A.read_shift(2),q==12&&Y.qpro&&(A.l+=2),O.e.c=A.read_shift(2),O.e.r=A.read_shift(2),q==12&&Y.qpro&&(A.l+=2),O.s.c==65535&&(O.s.c=O.e.c=O.s.r=O.e.r=0),O)}function c(A){var q=Ne(8);return q.write_shift(2,A.s.c),q.write_shift(2,A.s.r),q.write_shift(2,A.e.c),q.write_shift(2,A.e.r),q}function u(A,q,Y){var O=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(O[0].c=A.read_shift(1),O[3]=A.read_shift(1),O[0].r=A.read_shift(2),A.l+=2):(O[2]=A.read_shift(1),O[0].c=A.read_shift(2),O[0].r=A.read_shift(2)),O}function d(A,q,Y){var O=A.l+q,W=u(A,q,Y);if(W[1].t="s",Y.vers==20768){A.l++;var z=A.read_shift(1);return W[1].v=A.read_shift(z,"utf8"),W}return Y.qpro&&A.l++,W[1].v=A.read_shift(O-A.l,"cstr"),W}function m(A,q,Y){var O=Ne(7+Y.length);O.write_shift(1,255),O.write_shift(2,q),O.write_shift(2,A),O.write_shift(1,39);for(var W=0;W<O.length;++W){var z=Y.charCodeAt(W);O.write_shift(1,z>=128?95:z)}return O.write_shift(1,0),O}function x(A,q,Y){var O=u(A,q,Y);return O[1].v=A.read_shift(2,"i"),O}function g(A,q,Y){var O=Ne(7);return O.write_shift(1,255),O.write_shift(2,q),O.write_shift(2,A),O.write_shift(2,Y,"i"),O}function p(A,q,Y){var O=u(A,q,Y);return O[1].v=A.read_shift(8,"f"),O}function f(A,q,Y){var O=Ne(13);return O.write_shift(1,255),O.write_shift(2,q),O.write_shift(2,A),O.write_shift(8,Y,"f"),O}function b(A,q,Y){var O=A.l+q,W=u(A,q,Y);if(W[1].v=A.read_shift(8,"f"),Y.qpro)A.l=O;else{var z=A.read_shift(2);S(A.slice(A.l,A.l+z),W),A.l+=z}return W}function y(A,q,Y){var O=q&32768;return q&=-32769,q=(O?A:0)+(q>=8192?q-16384:q),(O?"":"$")+(Y?er(q):mr(q))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(A,q){Jr(A,0);for(var Y=[],O=0,W="",z="",H="",Q="";A.l<A.length;){var J=A[A.l++];switch(J){case 0:Y.push(A.read_shift(8,"f"));break;case 1:z=y(q[0].c,A.read_shift(2),!0),W=y(q[0].r,A.read_shift(2),!1),Y.push(z+W);break;case 2:{var ie=y(q[0].c,A.read_shift(2),!0),K=y(q[0].r,A.read_shift(2),!1);z=y(q[0].c,A.read_shift(2),!0),W=y(q[0].r,A.read_shift(2),!1),Y.push(ie+K+":"+z+W)}break;case 3:if(A.l<A.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(A.read_shift(2));break;case 6:{for(var oe="";J=A[A.l++];)oe+=String.fromCharCode(J);Y.push('"'+oe.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:Q=Y.pop(),H=Y.pop(),Y.push(["AND","OR"][J-20]+"("+H+","+Q+")");break;default:if(J<32&&N[J])Q=Y.pop(),H=Y.pop(),Y.push(H+N[J]+Q);else if(v[J]){if(O=v[J][1],O==69&&(O=A[A.l++]),O>Y.length){console.error("WK1 bad formula parse 0x"+J.toString(16)+":|"+Y.join("|")+"|");return}var le=Y.slice(-O);Y.length-=O,Y.push(v[J][0]+"("+le.join(",")+")")}else return J<=7?console.error("WK1 invalid opcode "+J.toString(16)):J<=24?console.error("WK1 unsupported op "+J.toString(16)):J<=30?console.error("WK1 invalid opcode "+J.toString(16)):J<=115?console.error("WK1 unsupported function opcode "+J.toString(16)):console.error("WK1 unrecognized opcode "+J.toString(16))}}Y.length==1?q[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function w(A){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=A.read_shift(2),q[3]=A[A.l++],q[0].c=A[A.l++],q}function C(A,q){var Y=w(A);return Y[1].t="s",Y[1].v=A.read_shift(q-4,"cstr"),Y}function j(A,q,Y,O){var W=Ne(6+O.length);W.write_shift(2,A),W.write_shift(1,Y),W.write_shift(1,q),W.write_shift(1,39);for(var z=0;z<O.length;++z){var H=O.charCodeAt(z);W.write_shift(1,H>=128?95:H)}return W.write_shift(1,0),W}function k(A,q){var Y=w(A);Y[1].v=A.read_shift(2);var O=Y[1].v>>1;if(Y[1].v&1)switch(O&7){case 0:O=(O>>3)*5e3;break;case 1:O=(O>>3)*500;break;case 2:O=(O>>3)/20;break;case 3:O=(O>>3)/200;break;case 4:O=(O>>3)/2e3;break;case 5:O=(O>>3)/2e4;break;case 6:O=(O>>3)/16;break;case 7:O=(O>>3)/64;break}return Y[1].v=O,Y}function E(A,q){var Y=w(A),O=A.read_shift(4),W=A.read_shift(4),z=A.read_shift(2);if(z==65535)return O===0&&W===3221225472?(Y[1].t="e",Y[1].v=15):O===0&&W===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var H=z&32768;return z=(z&32767)-16446,Y[1].v=(1-H*2)*(W*Math.pow(2,z+32)+O*Math.pow(2,z)),Y}function R(A,q,Y,O){var W=Ne(14);if(W.write_shift(2,A),W.write_shift(1,Y),W.write_shift(1,q),O==0)return W.write_shift(4,0),W.write_shift(4,0),W.write_shift(2,65535),W;var z=0,H=0,Q=0,J=0;return O<0&&(z=1,O=-O),H=Math.log2(O)|0,O/=Math.pow(2,H-31),J=O>>>0,J&2147483648||(O/=2,++H,J=O>>>0),O-=J,J|=2147483648,J>>>=0,O*=Math.pow(2,32),Q=O>>>0,W.write_shift(4,Q),W.write_shift(4,J),H+=16383+(z?32768:0),W.write_shift(2,H),W}function D(A,q){var Y=E(A);return A.l+=q-14,Y}function P(A,q){var Y=w(A),O=A.read_shift(4);return Y[1].v=O>>6,Y}function T(A,q){var Y=w(A),O=A.read_shift(8,"f");return Y[1].v=O,Y}function B(A,q){var Y=T(A);return A.l+=q-10,Y}function F(A,q){return A[A.l+q-1]==0?A.read_shift(q,"cstr"):""}function L(A,q){var Y=A[A.l++];Y>q-1&&(Y=q-1);for(var O="";O.length<Y;)O+=String.fromCharCode(A[A.l++]);return O}function I(A,q,Y){if(!(!Y.qpro||q<21)){var O=A.read_shift(1);A.l+=17,A.l+=1,A.l+=2;var W=A.read_shift(q-21,"cstr");return[O,W]}}function V(A,q){for(var Y={},O=A.l+q;A.l<O;){var W=A.read_shift(2);if(W==14e3){for(Y[W]=[0,""],Y[W][0]=A.read_shift(2);A[A.l];)Y[W][1]+=String.fromCharCode(A[A.l]),A.l++;A.l++}}return Y}function _(A,q){var Y=Ne(5+A.length);Y.write_shift(2,14e3),Y.write_shift(2,q);for(var O=0;O<A.length;++O){var W=A.charCodeAt(O);Y[Y.l++]=W>127?95:W}return Y[Y.l++]=0,Y}var G={0:{n:"BOF",f:br},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:F},222:{n:"SHEETNAMELP",f:L},65535:{n:""}},U={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:C},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:T},40:{n:"FORMULA28",f:B},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:F},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:I},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:s}}();function cU(t){var s={},r=t.match(wa),a=0,n=!1;if(r)for(;a!=r.length;++a){var i=Et(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=ly[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var dU=function(){var t=du("t"),s=du("rPr");function r(i){var l=i.match(t);if(!l)return{t:"s",v:""};var o={t:"s",v:Xt(l[1])},c=i.match(s);return c&&(o.s=cU(c[1])),o}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(n).map(r).filter(function(o){return o.v})}}(),uU=function(){var s=/(\r\n|\n)/g;function r(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),n}function a(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),mU=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xU=/<(?:\w+:)?r>/,hU=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Ay(t,s){var r=s?s.cellHTML:!0,a={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Xt(ks(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=ks(t),r&&(a.h=py(a.t))):t.match(xU)&&(a.r=ks(t),a.t=Xt(ks((t.replace(hU,"").match(mU)||[]).join("").replace(wa,""))),r&&(a.h=uU(dU(a.r)))),a):{t:""}}var fU=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,gU=/<(?:\w+:)?(?:si|sstItem)>/g,pU=/<\/(?:\w+:)?(?:si|sstItem)>/;function bU(t,s){var r=[],a="";if(!t)return r;var n=t.match(fU);if(n){a=n[2].replace(gU,"").split(pU);for(var i=0;i!=a.length;++i){var l=Ay(a[i].trim(),s);l!=null&&(r[r.length]=l)}n=Et(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}var yU=/^\s|\s$|[\t\n\r]/;function Vk(t,s){if(!s.bookSST)return"";var r=[hr];r[r.length]=$e("sst",null,{xmlns:No[0],count:t.Count,uniqueCount:t.Unique});for(var a=0;a!=t.length;++a)if(t[a]!=null){var n=t[a],i="<si>";n.r?i+=n.r:(i+="<t",n.t||(n.t=""),n.t.match(yU)&&(i+=' xml:space="preserve"'),i+=">"+vs(n.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function vU(t){return[t.read_shift(4),t.read_shift(4)]}function jU(t,s){var r=[],a=!1;return Yi(t,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||s.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function wU(t,s){return s||(s=Ne(8)),s.write_shift(4,t.Count),s.write_shift(4,t.Unique),s}var NU=FL;function SU(t){var s=Ba();_e(s,159,wU(t));for(var r=0;r<t.length;++r)_e(s,19,NU(t[r]));return _e(s,160),s.end()}function zk(t){for(var s=[],r=t.split(""),a=0;a<r.length;++a)s[a]=r[a].charCodeAt(0);return s}function Ii(t,s){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),r}function CU(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=Ii(t,4),s.U=Ii(t,4),s.W=Ii(t,4),s}function kU(t){for(var s=t.read_shift(4),r=t.l+s-4,a={},n=t.read_shift(4),i=[];n-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(a.name=t.read_shift(0,"lpp4"),a.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return a}function EU(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(kU(t));return s}function PU(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function TU(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=Ii(t,4),s.U=Ii(t,4),s.W=Ii(t,4),s}function _U(t){var s=TU(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function Gk(t,s){var r=t.l+s,a={};a.Flags=t.read_shift(4)&63,t.l+=4,a.AlgID=t.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=t.read_shift(4),a.KeySize=t.read_shift(4),a.ProviderType=t.read_shift(4),t.l+=8,a.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,a}function qk(t,s){var r={},a=t.l+s;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,a),t.l=a,r}function AU(t){var s=Ii(t);switch(s.Minor){case 2:return[s.Minor,RU(t)];case 3:return[s.Minor,FU()];case 4:return[s.Minor,DU(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function RU(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),a=Gk(t,r),n=qk(t,t.length-t.l);return{t:"Std",h:a,v:n}}function FU(){throw new Error("File is password-protected: ECMA-376 Extensible")}function DU(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),a={};return r.replace(wa,function(i){var l=Et(i);switch(wi(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(o){a[o]=l[o]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function IU(t,s){var r={},a=r.EncryptionVersionInfo=Ii(t,4);if(s-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=t.read_shift(4),s-=4;var n=t.read_shift(4);return s-=4,r.EncryptionHeader=Gk(t,n),s-=n,r.EncryptionVerifier=qk(t,s),r}function OU(t){var s={},r=s.EncryptionVersionInfo=Ii(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function Ry(t){var s=0,r,a=zk(t),n=a.length+1,i,l,o,c,u;for(r=vl(n),r[0]=a.length,i=1;i!=n;++i)r[i]=a[i-1];for(i=n-1;i>=0;--i)l=r[i],o=s&16384?1:0,c=s<<1&32767,u=o|c,s=u^l;return s^52811}var Yk=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},n=function(l,o){return a(l^o)},i=function(l){for(var o=s[l.length-1],c=104,u=l.length-1;u>=0;--u)for(var d=l[u],m=0;m!=7;++m)d&64&&(o^=r[c]),d*=2,--c;return o};return function(l){for(var o=zk(l),c=i(o),u=o.length,d=vl(16),m=0;m!=16;++m)d[m]=0;var x,g,p;for((u&1)===1&&(x=c>>8,d[u]=n(t[0],x),--u,x=c&255,g=o[o.length-1],d[u]=n(g,x));u>0;)--u,x=c>>8,d[u]=n(o[u],x),--u,x=c&255,d[u]=n(o[u],x);for(u=15,p=15-o.length;p>0;)x=c>>8,d[u]=n(t[p],x),--u,--p,x=c&255,d[u]=n(o[u],x),--u,--p;return d}}(),MU=function(t,s,r,a,n){n||(n=s),a||(a=Yk(t));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=a[r],l=(l>>5|l<<3)&255,n[i]=l,++r;return[n,r,a]},BU=function(t){var s=0,r=Yk(t);return function(a){var n=MU("",a,s,r);return s=n[1],n[0]}};function LU(t,s,r,a){var n={key:br(t),verificationBytes:br(t)};return r.password&&(n.verifier=Ry(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=BU(r.password)),n}function $U(t,s,r){var a=r||{};return a.Info=t.read_shift(2),t.l-=2,a.Info===1?a.Data=OU(t):a.Data=IU(t,s),a}function UU(t,s,r){var a={Type:r.biff>=8?t.read_shift(2):0};return a.Type?$U(t,s-2,a):LU(t,r.biff>=8?s:s-2,r,a),a}var Kk=function(){function t(n,i){switch(i.type){case"base64":return s(tn(n),i);case"binary":return s(n,i);case"buffer":return s(Ht&&Buffer.isBuffer(n)?n.toString("binary"):Fl(n),i);case"array":return s(fo(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},o=l.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,m){Array.isArray(o)&&(o[m]=[]);for(var x=/\\\w+\b/g,g=0,p,f=-1;p=x.exec(d);){switch(p[0]){case"\\cell":var b=d.slice(g,x.lastIndex-p[0].length);if(b[0]==" "&&(b=b.slice(1)),++f,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[m][f]=y:o[yt({r:m,c:f})]=y}break}g=x.lastIndex}f>u.e.c&&(u.e.c=f)}),o["!ref"]=Ot(u),o}function r(n,i){return Dl(t(n,i),i)}function a(n){for(var i=["{\\rtf1\\ansi"],l=es(n["!ref"]),o,c=Array.isArray(n),u=l.s.r;u<=l.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=l.s.c;d<=l.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=l.s.c;d<=l.e.c;++d){var m=yt({r:u,c:d});o=c?(n[u]||[])[d]:n[m],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Vi(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:a}}();function HU(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function hu(t){for(var s=0,r=1;s!=3;++s)r=r*256+(t[s]>255?255:t[s]<0?0:t[s]);return r.toString(16).toUpperCase().slice(1)}function WU(t){var s=t[0]/255,r=t[1]/255,a=t[2]/255,n=Math.max(s,r,a),i=Math.min(s,r,a),l=n-i;if(l===0)return[0,0,s];var o=0,c=0,u=n+i;switch(c=l/(u>1?2-u:u),n){case s:o=((r-a)/l+6)%6;break;case r:o=(a-s)/l+2;break;case a:o=(s-r)/l+4;break}return[o/6,c,u/2]}function VU(t){var s=t[0],r=t[1],a=t[2],n=r*2*(a<.5?a:1-a),i=a-n/2,l=[i,i,i],o=6*s,c;if(r!==0)switch(o|0){case 0:case 6:c=n*o,l[0]+=n,l[1]+=c;break;case 1:c=n*(2-o),l[0]+=c,l[1]+=n;break;case 2:c=n*(o-2),l[1]+=n,l[2]+=c;break;case 3:c=n*(4-o),l[1]+=c,l[2]+=n;break;case 4:c=n*(o-4),l[2]+=n,l[0]+=c;break;case 5:c=n*(6-o),l[2]+=c,l[0]+=n;break}for(var u=0;u!=3;++u)l[u]=Math.round(l[u]*255);return l}function Z0(t,s){if(s===0)return t;var r=WU(HU(t));return s<0?r[2]=r[2]*(1+s):r[2]=1-(1-r[2])*(1-s),hu(VU(r))}var Xk=6,zU=15,GU=1,ua=Xk;function fu(t){return Math.floor((t+Math.round(128/ua)/256)*ua)}function gu(t){return Math.floor((t-5)/ua*100+.5)/100}function ex(t){return Math.round((t*ua+5)/ua*256)/256}function _f(t){return ex(gu(fu(t)))}function Fy(t){var s=Math.abs(t-_f(t)),r=ua;if(s>.005)for(ua=GU;ua<zU;++ua)Math.abs(t-_f(t))<=s&&(s=Math.abs(t-_f(t)),r=ua);ua=r}function jl(t){t.width?(t.wpx=fu(t.width),t.wch=gu(t.wpx),t.MDW=ua):t.wpx?(t.wch=gu(t.wpx),t.width=ex(t.wch),t.MDW=ua):typeof t.wch=="number"&&(t.width=ex(t.wch),t.wpx=fu(t.width),t.MDW=ua),t.customWidth&&delete t.customWidth}var qU=96,Jk=qU;function pu(t){return t*96/Jk}function kc(t){return t*Jk/96}var YU={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function KU(t,s,r,a){s.Borders=[];var n={},i=!1;(t[0].match(wa)||[]).forEach(function(l){var o=Et(l);switch(wi(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=Hs(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=Hs(o.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function XU(t,s,r,a){s.Fills=[];var n={},i=!1;(t[0].match(wa)||[]).forEach(function(l){var o=Et(l);switch(wi(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function JU(t,s,r,a){s.Fonts=[];var n={},i=!1;(t[0].match(wa)||[]).forEach(function(l){var o=Et(l);switch(wi(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=ks(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?Hs(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?Hs(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?Hs(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?Hs(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?Hs(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?Hs(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?Hs(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=ly[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=Hs(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var c=Zl[n.color.index];n.color.index==81&&(c=Zl[1]),c||(c=Zl[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=Z0(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function QU(t,s,r){s.NumberFmt=[];for(var a=or(bt),n=0;n<a.length;++n)s.NumberFmt[a[n]]=bt[a[n]];var i=t[0].match(wa);if(i)for(n=0;n<i.length;++n){var l=Et(i[n]);switch(wi(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Xt(ks(l.formatCode)),c=parseInt(l.numFmtId,10);if(s.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&s.NumberFmt[c]!=null;--c);s.NumberFmt[c]=o}Di(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function ZU(t){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)t[a]!=null&&(s[s.length]=$e("numFmt",null,{numFmtId:a,formatCode:vs(t[a])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=$e("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}var Mm=["numFmtId","fillId","fontId","borderId","xfId"],Bm=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function eH(t,s,r){s.CellXf=[];var a,n=!1;(t[0].match(wa)||[]).forEach(function(i){var l=Et(i),o=0;switch(wi(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],o=0;o<Mm.length;++o)a[Mm[o]]&&(a[Mm[o]]=parseInt(a[Mm[o]],10));for(o=0;o<Bm.length;++o)a[Bm[o]]&&(a[Bm[o]]=Hs(a[Bm[o]]));if(s.NumberFmt&&a.numFmtId>392){for(o=392;o>60;--o)if(s.NumberFmt[a.numFmtId]==s.NumberFmt[o]){a.numFmtId=o;break}}s.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=Hs(l.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function tH(t){var s=[];return s[s.length]=$e("cellXfs",null),t.forEach(function(r){s[s.length]=$e("xf",null,r)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=$e("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}var sH=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=o.match(s))&&QU(m,d,u),(m=o.match(n))&&JU(m,d,c,u),(m=o.match(a))&&XU(m,d,c,u),(m=o.match(i))&&KU(m,d,c,u),(m=o.match(r))&&eH(m,d,u),d}}();function Qk(t,s){var r=[hr,$e("styleSheet",null,{xmlns:No[0],"xmlns:vt":kr.vt})],a;return t.SSF&&(a=ZU(t.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=tH(s.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function rH(t,s){var r=t.read_shift(2),a=ba(t);return[r,a]}function aH(t,s,r){r||(r=Ne(6+4*s.length)),r.write_shift(2,t),Hr(s,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function nH(t,s,r){var a={};a.sz=t.read_shift(2)/20;var n=$L(t);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var i=t.read_shift(2);switch(i===700&&(a.bold=1),t.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=t.read_shift(1);l!=0&&(a.underline=l);var o=t.read_shift(1);o>0&&(a.family=o);var c=t.read_shift(1);switch(c>0&&(a.charset=c),t.l++,a.color=LL(t),t.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=ba(t),a}function iH(t,s){s||(s=Ne(25+4*32)),s.write_shift(2,t.sz*20),UL(t,s),s.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),s.write_shift(2,r),s.write_shift(1,t.underline||0),s.write_shift(1,t.family||0),s.write_shift(1,t.charset||0),s.write_shift(1,0),X0(t.color,s);var a=0;return a=2,s.write_shift(1,a),Hr(t.name,s),s.length>s.l?s.slice(0,s.l):s}var lH=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Af,oH=va;function Ww(t,s){s||(s=Ne(4*3+8*7+16*1)),Af||(Af=eh(lH));var r=Af[t.patternType];r==null&&(r=40),s.write_shift(4,r);var a=0;if(r!=40)for(X0({auto:1},s),X0({auto:1},s);a<12;++a)s.write_shift(4,0);else{for(;a<4;++a)s.write_shift(4,0);for(;a<12;++a)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function cH(t,s){var r=t.l+s,a=t.read_shift(2),n=t.read_shift(2);return t.l=r,{ixfe:a,numFmtId:n}}function Zk(t,s,r){r||(r=Ne(16)),r.write_shift(2,s||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function gd(t,s){return s||(s=Ne(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var dH=va;function uH(t,s){return s||(s=Ne(51)),s.write_shift(1,0),gd(null,s),gd(null,s),gd(null,s),gd(null,s),gd(null,s),s.length>s.l?s.slice(0,s.l):s}function mH(t,s){return s||(s=Ne(12+4*10)),s.write_shift(4,t.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),K0(t.name||"",s),s.length>s.l?s.slice(0,s.l):s}function xH(t,s,r){var a=Ne(2052);return a.write_shift(4,t),K0(s,a),K0(r,a),a.length>a.l?a.slice(0,a.l):a}function hH(t,s,r){var a={};a.NumberFmt=[];for(var n in bt)a.NumberFmt[n]=bt[n];a.CellXf=[],a.Fonts=[];var i=[],l=!1;return Yi(t,function(c,u,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],Di(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(c.color.rgb=Z0(s.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(d),l=!0;break;case 38:i.pop(),l=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function fH(t,s){if(s){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)s[n]!=null&&++r}),r!=0&&(_e(t,615,On(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)s[n]!=null&&_e(t,44,aH(n,s[n]))}),_e(t,616))}}function gH(t){var s=1;_e(t,611,On(s)),_e(t,43,iH({sz:12,color:{theme:1},name:"Calibri",family:2})),_e(t,612)}function pH(t){var s=2;_e(t,603,On(s)),_e(t,45,Ww({patternType:"none"})),_e(t,45,Ww({patternType:"gray125"})),_e(t,604)}function bH(t){var s=1;_e(t,613,On(s)),_e(t,46,uH()),_e(t,614)}function yH(t){var s=1;_e(t,626,On(s)),_e(t,47,Zk({numFmtId:0},65535)),_e(t,627)}function vH(t,s){_e(t,617,On(s.length)),s.forEach(function(r){_e(t,47,Zk(r,0))}),_e(t,618)}function jH(t){var s=1;_e(t,619,On(s)),_e(t,48,mH({xfId:0,name:"Normal"})),_e(t,620)}function wH(t){var s=0;_e(t,505,On(s)),_e(t,506)}function NH(t){var s=0;_e(t,508,xH(s,"TableStyleMedium9","PivotStyleMedium4")),_e(t,509)}function SH(t,s){var r=Ba();return _e(r,278),fH(r,t.SSF),gH(r),pH(r),bH(r),yH(r),vH(r,s.cellXfs),jH(r),wH(r),NH(r),_e(r,279),r.end()}var CH=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function kH(t,s,r){s.themeElements.clrScheme=[];var a={};(t[0].match(wa)||[]).forEach(function(n){var i=Et(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[CH.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function EH(){}function PH(){}var TH=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,_H=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,AH=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function RH(t,s,r){s.themeElements={};var a;[["clrScheme",TH,kH],["fontScheme",_H,EH],["fmtScheme",AH,PH]].forEach(function(n){if(!(a=t.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,s,r)})}var FH=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function e5(t,s){(!t||t.length===0)&&(t=Dy());var r,a={};if(!(r=t.match(FH)))throw new Error("themeElements not found in theme");return RH(r[0],a,s),a.raw=t,a}function Dy(t,s){if(s&&s.themeXLSX)return s.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[hr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function DH(t,s,r){var a=t.l+s,n=t.read_shift(4);if(n!==124226){if(!r.cellStyles){t.l=a;return}var i=t.slice(t.l);t.l=a;var l;try{l=G4(i,{type:"array"})}catch{return}var o=Xa(l,"theme/theme/theme1.xml",!0);if(o)return e5(o,r)}}function IH(t){return t.read_shift(4)}function OH(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=MH(t,4);break;case 2:s.xclrValue=Fk(t);break;case 3:s.xclrValue=IH(t);break;case 4:t.l+=4;break}return t.l+=8,s}function MH(t,s){return va(t,s)}function BH(t,s){return va(t,s)}function LH(t){var s=t.read_shift(2),r=t.read_shift(2)-4,a=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=OH(t);break;case 6:a[1]=BH(t,r);break;case 14:case 15:a[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+r)}return a}function $H(t,s){var r=t.l+s;t.l+=2;var a=t.read_shift(2);t.l+=2;for(var n=t.read_shift(2),i=[];n-- >0;)i.push(LH(t,r-t.l));return{ixfe:a,ext:i}}function UH(t,s){s.forEach(function(r){switch(r[0]){}})}function HH(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:ba(t)}}function WH(t){var s=Ne(12+2*t.name.length);return s.write_shift(4,t.flags),s.write_shift(4,t.version),Hr(t.name,s),s.slice(0,s.l)}function VH(t){for(var s=[],r=t.read_shift(4);r-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function zH(t){var s=Ne(4+8*t.length);s.write_shift(4,t.length);for(var r=0;r<t.length;++r)s.write_shift(4,t[r][0]),s.write_shift(4,t[r][1]);return s}function GH(t,s){var r=Ne(8+2*s.length);return r.write_shift(4,t),Hr(s,r),r.slice(0,r.l)}function qH(t){return t.l+=4,t.read_shift(4)!=0}function YH(t,s){var r=Ne(8);return r.write_shift(4,t),r.write_shift(4,1),r}function KH(t,s,r){var a={Types:[],Cell:[],Value:[]},n=r||{},i=[],l=!1,o=2;return Yi(t,function(c,u,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(m){o==1?a.Cell.push({type:a.Types[m[0]-1].name,index:m[1]}):o==0&&a.Value.push({type:a.Types[m[0]-1].name,index:m[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(d),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!u.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function XH(){var t=Ba();return _e(t,332),_e(t,334,On(1)),_e(t,335,WH({name:"XLDAPR",version:12e4,flags:3496657072})),_e(t,336),_e(t,339,GH(1,"XLDAPR")),_e(t,52),_e(t,35,On(514)),_e(t,4096,On(0)),_e(t,4097,pn(1)),_e(t,36),_e(t,53),_e(t,340),_e(t,337,YH(1)),_e(t,51,zH([[1,0]])),_e(t,338),_e(t,333),t.end()}function JH(t,s,r){var a={Types:[],Cell:[],Value:[]};if(!t)return a;var n=!1,i=2,l;return t.replace(wa,function(o){var c=Et(o);switch(wi(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==c.name&&(l=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),a}function t5(){var t=[hr];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function QH(t){var s=[];if(!t)return s;var r=1;return(t.match(wa)||[]).forEach(function(a){var n=Et(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,s.push(n);break}}),s}function ZH(t){var s={};s.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),s.r=yt(r);var a=t.read_shift(1);return a&2&&(s.l="1"),a&8&&(s.a="1"),s}function eW(t,s,r){var a=[];return Yi(t,function(i,l,o){switch(o){case 63:a.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function tW(t,s,r,a){if(!t)return t;var n=a||{},i=!1;Yi(t,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},n)}function sW(t,s){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][r].Target}var tc=1024;function s5(t,s){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),n=[$e("xml",null,{"xmlns:v":qa.v,"xmlns:o":qa.o,"xmlns:x":qa.x,"xmlns:mv":qa.mv}).replace(/\/>/,">"),$e("o:shapelayout",$e("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),$e("v:shapetype",[$e("v:stroke",null,{joinstyle:"miter"}),$e("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];tc<t*1e3;)tc+=1e3;return s.forEach(function(i){var l=tr(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?$e("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=$e("v:fill",c,o),d={on:"t",obscured:"t"};++tc,n=n.concat(["<v:shape"+uu({id:"_x0000_s"+tc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,$e("v:shadow",null,d),$e("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ta("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),ta("x:AutoFill","False"),ta("x:Row",String(l.r)),ta("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function Vw(t,s,r,a){var n=Array.isArray(t),i;s.forEach(function(l){var o=tr(l.ref);if(n?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[l.ref],!i){i={t:"z"},n?t[o.r][o.c]=i:t[l.ref]=i;var c=es(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Ot(c);u!==t["!ref"]&&(t["!ref"]=u)}i.c||(i.c=[]);var d={a:l.author,t:l.t,r:l.r,T:r};l.h&&(d.h=l.h);for(var m=i.c.length-1;m>=0;--m){if(!r&&i.c[m].T)return;r&&!i.c[m].T&&i.c.splice(m,1)}if(r&&a){for(m=0;m<a.length;++m)if(d.a==a[m].id){d.a=a[m].name||d.a;break}}i.c.push(d)})}function rW(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Et(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=tr(c.ref);if(!(s.sheetRows&&s.sheetRows<=d.r)){var m=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),x=!!m&&!!m[1]&&Ay(m[1])||{r:"",t:"",h:""};u.r=x.r,x.r=="<t></t>"&&(x.t=x.h=""),u.t=(x.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(u.h=x.h),a.push(u)}}}}),a}function r5(t){var s=[hr,$e("comments",null,{xmlns:No[0]})],r=[];return s.push("<authors>"),t.forEach(function(a){a[1].forEach(function(n){var i=vs(n.a);r.indexOf(i)==-1&&(r.push(i),s.push("<author>"+i+"</author>")),n.T&&n.ID&&r.indexOf("tc="+n.ID)==-1&&(r.push("tc="+n.ID),s.push("<author>tc="+n.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),t.forEach(function(a){var n=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?n=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(n=r.indexOf(vs(c.a))),i.push(c.t||"")}),s.push('<comment ref="'+a[0]+'" authorId="'+n+'"><text>'),i.length<=1)s.push(ta("t",vs(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;s.push(ta("t",vs(l)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function aW(t,s){var r=[],a=!1,n={},i=0;return t.replace(wa,function(o,c){var u=Et(o);switch(wi(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":n.t=t.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function nW(t,s,r){var a=[hr,$e("ThreadedComments",null,{xmlns:kr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(n){var i="";(n[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&s.indexOf(l.a)==-1&&s.push(l.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,l.ID=c.id,l.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(l.a)).slice(-12)+"}"),a.push($e("threadedComment",ta("text",l.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function iW(t,s){var r=[],a=!1;return t.replace(wa,function(i){var l=Et(i);switch(wi(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function lW(t){var s=[hr,$e("personList",null,{xmlns:kr.TCMNT,"xmlns:x":No[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,a){s.push($e("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),s.push("</personList>"),s.join("")}function oW(t){var s={};s.iauthor=t.read_shift(4);var r=Eo(t);return s.rfx=r.s,s.ref=yt(r.s),t.l+=16,s}function cW(t,s){return s==null&&(s=Ne(36)),s.write_shift(4,t[1].iauthor),Jc(t[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var dW=ba;function uW(t){return Hr(t.slice(0,54))}function mW(t,s){var r=[],a=[],n={},i=!1;return Yi(t,function(o,c,u){switch(u){case 632:a.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function xW(t){var s=Ba(),r=[];return _e(s,628),_e(s,630),t.forEach(function(a){a[1].forEach(function(n){r.indexOf(n.a)>-1||(r.push(n.a.slice(0,54)),_e(s,632,uW(n.a)))})}),_e(s,631),_e(s,633),t.forEach(function(a){a[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var i={s:tr(a[0]),e:tr(a[0])};_e(s,635,cW([i,n])),n.t&&n.t.length>0&&_e(s,637,IL(n)),_e(s,636),delete n.iauthor})}),_e(s,634),_e(s,629),s.end()}var hW="application/vnd.ms-office.vbaProject";function fW(t){var s=lt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");lt.utils.cfb_add(s,n,t.FileIndex[a].content)}}),lt.write(s)}function gW(t,s){s.FullPaths.forEach(function(r,a){if(a!=0){var n=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&lt.utils.cfb_add(t,n,s.FileIndex[a].content)}})}var a5=["xlsb","xlsm","xlam","biff8","xla"];function pW(){return{"!type":"dialog"}}function bW(){return{"!type":"dialog"}}function yW(){return{"!type":"macro"}}function vW(){return{"!type":"macro"}}var xc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function r(a,n,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=l.length>0?parseInt(l,10)|0:0;return o?d+=s.c:--d,c?u+=s.r:--u,n+(o?"":"$")+er(d)+(c?"":"$")+mr(u)}return function(n,i){return s=i,n.replace(t,r)}}(),Iy=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Oy=function(){return function(s,r){return s.replace(Iy,function(a,n,i,l,o,c){var u=wy(l)-(i?0:r.c),d=jy(c)-(o?0:r.r),m=d==0?"":o?d+1:"["+d+"]",x=u==0?"":i?u+1:"["+u+"]";return n+"R"+m+"C"+x})}}();function n5(t,s){return t.replace(Iy,function(r,a,n,i,l,o){return a+(n=="$"?n+i:er(wy(i)+s.c))+(l=="$"?l+o:mr(jy(o)+s.r))})}function jW(t,s,r){var a=$a(s),n=a.s,i=tr(r),l={r:i.r-n.r,c:i.c-n.c};return n5(t,l)}function wW(t){return t.length!=1}function zw(t){return t.replace(/_xlfn\./g,"")}function fr(t){t.l+=1}function wl(t,s){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function i5(t,s,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return l5(t);r.biff==12&&(a=4)}var n=t.read_shift(a),i=t.read_shift(a),l=wl(t),o=wl(t);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function l5(t){var s=wl(t),r=wl(t),a=t.read_shift(1),n=t.read_shift(1);return{s:{r:s[0],c:a,cRel:s[1],rRel:s[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function NW(t,s,r){if(r.biff<8)return l5(t);var a=t.read_shift(r.biff==12?4:2),n=t.read_shift(r.biff==12?4:2),i=wl(t),l=wl(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function o5(t,s,r){if(r&&r.biff>=2&&r.biff<=5)return SW(t);var a=t.read_shift(r&&r.biff==12?4:2),n=wl(t);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function SW(t){var s=wl(t),r=t.read_shift(1);return{r:s[0],c:r,cRel:s[1],rRel:s[2]}}function CW(t){var s=t.read_shift(2),r=t.read_shift(2);return{r:s,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function kW(t,s,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return EW(t);var n=t.read_shift(a>=12?4:2),i=t.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function EW(t){var s=t.read_shift(2),r=t.read_shift(1),a=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,a==1&&s>=8192&&(s=s-16384),n==1&&r>=128&&(r=r-256),{r:s,c:r,cRel:n,rRel:a}}function PW(t,s,r){var a=(t[t.l++]&96)>>5,n=i5(t,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function TW(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var l=i5(t,i,r);return[a,n,l]}function _W(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function AW(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[a,n]}function RW(t,s,r){var a=(t[t.l++]&96)>>5,n=NW(t,s-1,r);return[a,n]}function FW(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[a]}function Gw(t){var s=t[t.l+1]&1,r=1;return t.l+=4,[s,r]}function DW(t,s,r){t.l+=2;for(var a=t.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=a;++i)n.push(t.read_shift(r&&r.biff==2?1:2));return n}function IW(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function OW(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function MW(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function BW(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[a]}function c5(t){var s=t.read_shift(1),r=t.read_shift(1);return[s,r]}function LW(t){return t.read_shift(2),c5(t)}function $W(t){return t.read_shift(2),c5(t)}function UW(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=o5(t,0,r);return[a,n]}function HW(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=kW(t,0,r);return[a,n]}function WW(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=o5(t,0,r);return[a,n,i]}function VW(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(r&&r.biff<=3?1:2);return[qV[n],m5[n],a]}function zW(t,s,r){var a=t[t.l++],n=t.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,t.read_shift(1)]:GW(t);return[n,(i[0]===0?m5:GV)[i[1]]]}function GW(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function qW(t,s,r){t.l+=r&&r.biff==2?3:4}function YW(t,s,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var a=t.read_shift(2),n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function KW(t){return t.l++,Ki[t.read_shift(1)]}function XW(t){return t.l++,t.read_shift(2)}function JW(t){return t.l++,t.read_shift(1)!==0}function QW(t){return t.l++,ha(t)}function ZW(t,s,r){return t.l++,Xu(t,s-1,r)}function eV(t,s){var r=[t.read_shift(1)];if(s==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=dr(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:r[1]=Ki[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ha(t);break;case 2:r[1]=Po(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function tV(t,s,r){for(var a=t.read_shift(r.biff==12?4:2),n=[],i=0;i!=a;++i)n.push((r.biff==12?Eo:rh)(t));return n}function sV(t,s,r){var a=0,n=0;r.biff==12?(a=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),a=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=eV(t,r.biff);return l}function rV(t,s,r){var a=t.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=t.read_shift(n);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[a,0,i]}function aV(t,s,r){if(r.biff==5)return nV(t);var a=t.read_shift(1)>>>5&3,n=t.read_shift(2),i=t.read_shift(4);return[a,n,i]}function nV(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var a=t.read_shift(2);return t.l+=12,[s,r,a]}function iV(t,s,r){var a=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function lV(t,s,r){var a=t.read_shift(1)>>>5&3,n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function oV(t,s,r){var a=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[a]}function cV(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[a,n]}var dV=va,uV=va,mV=va;function Qu(t,s,r){return t.l+=2,[CW(t)]}function My(t){return t.l+=6,[]}var xV=Qu,hV=My,fV=My,gV=Qu;function d5(t){return t.l+=2,[br(t),t.read_shift(2)&1]}var pV=Qu,bV=d5,yV=My,vV=Qu,jV=Qu,wV=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function NV(t){t.l+=2;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n=t.read_shift(2),i=t.read_shift(2),l=wV[r>>2&31];return{ixti:s,coltype:r&3,rt:l,idx:a,c:n,C:i}}function SV(t){return t.l+=2,[t.read_shift(4)]}function CV(t,s,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function kV(t,s,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function EV(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function PV(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function TV(t){return t.l+=4,[0,0]}var qw={1:{n:"PtgExp",f:YW},2:{n:"PtgTbl",f:mV},3:{n:"PtgAdd",f:fr},4:{n:"PtgSub",f:fr},5:{n:"PtgMul",f:fr},6:{n:"PtgDiv",f:fr},7:{n:"PtgPower",f:fr},8:{n:"PtgConcat",f:fr},9:{n:"PtgLt",f:fr},10:{n:"PtgLe",f:fr},11:{n:"PtgEq",f:fr},12:{n:"PtgGe",f:fr},13:{n:"PtgGt",f:fr},14:{n:"PtgNe",f:fr},15:{n:"PtgIsect",f:fr},16:{n:"PtgUnion",f:fr},17:{n:"PtgRange",f:fr},18:{n:"PtgUplus",f:fr},19:{n:"PtgUminus",f:fr},20:{n:"PtgPercent",f:fr},21:{n:"PtgParen",f:fr},22:{n:"PtgMissArg",f:fr},23:{n:"PtgStr",f:ZW},26:{n:"PtgSheet",f:CV},27:{n:"PtgEndSheet",f:kV},28:{n:"PtgErr",f:KW},29:{n:"PtgBool",f:JW},30:{n:"PtgInt",f:XW},31:{n:"PtgNum",f:QW},32:{n:"PtgArray",f:FW},33:{n:"PtgFunc",f:VW},34:{n:"PtgFuncVar",f:zW},35:{n:"PtgName",f:rV},36:{n:"PtgRef",f:UW},37:{n:"PtgArea",f:PW},38:{n:"PtgMemArea",f:iV},39:{n:"PtgMemErr",f:dV},40:{n:"PtgMemNoMem",f:uV},41:{n:"PtgMemFunc",f:lV},42:{n:"PtgRefErr",f:oV},43:{n:"PtgAreaErr",f:_W},44:{n:"PtgRefN",f:HW},45:{n:"PtgAreaN",f:RW},46:{n:"PtgMemAreaN",f:EV},47:{n:"PtgMemNoMemN",f:PV},57:{n:"PtgNameX",f:aV},58:{n:"PtgRef3d",f:WW},59:{n:"PtgArea3d",f:TW},60:{n:"PtgRefErr3d",f:cV},61:{n:"PtgAreaErr3d",f:AW},255:{}},_V={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},AV={1:{n:"PtgElfLel",f:d5},2:{n:"PtgElfRw",f:vV},3:{n:"PtgElfCol",f:xV},6:{n:"PtgElfRwV",f:jV},7:{n:"PtgElfColV",f:gV},10:{n:"PtgElfRadical",f:pV},11:{n:"PtgElfRadicalS",f:yV},13:{n:"PtgElfColS",f:hV},15:{n:"PtgElfColSV",f:fV},16:{n:"PtgElfRadicalLel",f:bV},25:{n:"PtgList",f:NV},29:{n:"PtgSxName",f:SV},255:{}},RV={0:{n:"PtgAttrNoop",f:TV},1:{n:"PtgAttrSemi",f:BW},2:{n:"PtgAttrIf",f:OW},4:{n:"PtgAttrChoose",f:DW},8:{n:"PtgAttrGoto",f:IW},16:{n:"PtgAttrSum",f:qW},32:{n:"PtgAttrBaxcel",f:Gw},33:{n:"PtgAttrBaxcel",f:Gw},64:{n:"PtgAttrSpace",f:LW},65:{n:"PtgAttrSpaceSemi",f:$W},128:{n:"PtgAttrIfError",f:MW},255:{}};function Zu(t,s,r,a){if(a.biff<8)return va(t,s);for(var n=t.l+s,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=sV(t,0,a),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=tV(t,r[l][1],a),i.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=t.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return s=n-t.l,s!==0&&i.push(va(t,s)),i}function em(t,s,r){for(var a=t.l+s,n,i,l=[];a!=t.l;)s=a-t.l,i=t[t.l],n=qw[i]||qw[_V[i]],(i===24||i===25)&&(n=(i===24?AV:RV)[t[t.l+1]]),!n||!n.f?va(t,s):l.push([n.n,n.f(t,s,r)]);return l}function FV(t){for(var s=[],r=0;r<t.length;++r){for(var a=t[r],n=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var DV={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function IV(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function u5(t,s,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var a=t.XTI[s];if(r.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(t[a[0]][0]){case 357:return n=a[1]==-1?"#REF":t.SheetNames[a[1]],a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[a[0]][0];case 355:default:return"SH33TJSSRC"+t[a[0]][0]}switch(t[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":t.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 14849:return t[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[a[0]][0][3]?(n=a[1]==-1?"#REF":t[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+t[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function Yw(t,s,r){var a=u5(t,s,r);return a=="#REF"?a:IV(a,r)}function da(t,s,r,a,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},o=[],c,u,d,m=0,x=0,g,p="";if(!t[0]||!t[0][0])return"";for(var f=-1,b="",y=0,v=t[0].length;y<v;++y){var N=t[0][y];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),f>=0){switch(t[0][f][1][0]){case 0:b=ir(" ",t[0][f][1][1]);break;case 1:b=ir("\r",t[0][f][1][1]);break;default:if(b="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}u=u+b,f=-1}o.push(u+DV[N[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ld(N[1][1],l,n),o.push($d(d,i));break;case"PtgRefN":d=r?Ld(N[1][1],r,n):N[1][1],o.push($d(d,i));break;case"PtgRef3d":m=N[1][1],d=Ld(N[1][2],l,n),p=Yw(a,m,n),o.push(p+"!"+$d(d,i));break;case"PtgFunc":case"PtgFuncVar":var S=N[1][0],w=N[1][1];S||(S=0),S&=127;var C=S==0?[]:o.slice(-S);o.length-=S,w==="User"&&(w=C.shift()),o.push(w+"("+C.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":g=Nw(N[1][1],r?{s:r}:l,n),o.push(Ef(g,n));break;case"PtgArea":g=Nw(N[1][1],l,n),o.push(Ef(g,n));break;case"PtgArea3d":m=N[1][1],g=N[1][2],p=Yw(a,m,n),o.push(p+"!"+Ef(g,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=N[1][2];var j=(a.names||[])[x-1]||(a[0]||[])[x],k=j?j.Name:"SH33TJSNAME"+String(x);k&&k.slice(0,6)=="_xlfn."&&!n.xlfn&&(k=k.slice(6)),o.push(k);break;case"PtgNameX":var E=N[1][1];x=N[1][2];var R;if(n.biff<=5)E<0&&(E=-E),a[E]&&(R=a[E][x]);else{var D="";if(((a[E]||[])[0]||[])[0]==14849||(((a[E]||[])[0]||[])[0]==1025?a[E][x]&&a[E][x].itab>0&&(D=a.SheetNames[a[E][x].itab-1]+"!"):D=a.SheetNames[x-1]+"!"),a[E]&&a[E][x])D+=a[E][x].Name;else if(a[0]&&a[0][x])D+=a[0][x].Name;else{var P=(u5(a,E,n)||"").split(";;");P[x-1]?D=P[x-1]:D+="SH33TJSERRX"}o.push(D);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var T="(",B=")";if(f>=0){switch(b="",t[0][f][1][0]){case 2:T=ir(" ",t[0][f][1][1])+T;break;case 3:T=ir("\r",t[0][f][1][1])+T;break;case 4:B=ir(" ",t[0][f][1][1])+B;break;case 5:B=ir("\r",t[0][f][1][1])+B;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}f=-1}o.push(T+o.pop()+B);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:N[1][1],r:N[1][0]};var F={c:r.c,r:r.r};if(a.sharedf[yt(d)]){var L=a.sharedf[yt(d)];o.push(da(L,l,F,a,n))}else{var I=!1;for(c=0;c!=a.arrayf.length;++c)if(u=a.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(da(u[1],l,F,a,n)),I=!0;break}I||o.push(N[1])}break;case"PtgArray":o.push("{"+FV(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&f>=0&&V.indexOf(t[0][y][0])==-1){N=t[0][f];var _=!0;switch(N[1][0]){case 4:_=!1;case 0:b=ir(" ",N[1][1]);break;case 5:_=!1;case 1:b=ir("\r",N[1][1]);break;default:if(b="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((_?b:"")+o.pop()+(_?"":b)),f=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function OV(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],va(t,s-2)];var o=em(t,l,r);return s!==l+n&&(i=Zu(t,s-l-n,o,r)),t.l=a,[o,i]}function MV(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],va(t,s-2)];var o=em(t,l,r);return s!==l+n&&(i=Zu(t,s-l-n,o,r)),t.l=a,[o,i]}function BV(t,s,r,a){var n=t.l+s,i=em(t,a,r),l;return n!==t.l&&(l=Zu(t,n-t.l,i,r)),[i,l]}function LV(t,s,r){var a=t.l+s,n,i=t.read_shift(2),l=em(t,i,r);return i==65535?[[],va(t,s-2)]:(s!==i+2&&(n=Zu(t,a-i-2,l,r)),[l,n])}function $V(t){var s;if(Ri(t,t.l+6)!==65535)return[ha(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function UV(t){if(t==null){var s=Ne(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof t=="number")return go(t);return go(0)}function Rf(t,s,r){var a=t.l+s,n=Ni(t);r.biff==2&&++t.l;var i=$V(t),l=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=MV(t,a-t.l,r);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function HV(t,s,r,a,n){var i=bo(s,r,n),l=UV(t.v),o=Ne(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Ne(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var m=$r([i,l,o,u]);return m}function ah(t,s,r){var a=t.read_shift(4),n=em(t,a,r),i=t.read_shift(4),l=i>0?Zu(t,i,n,r):null;return[n,l]}var WV=ah,nh=ah,VV=ah,zV=ah,GV={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},m5={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qV={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Kw(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function YV(t){var s="of:="+t.replace(Iy,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function Ff(t){var s=t.split(":"),r=s[0].split(".")[0];return[r,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}function KV(t){return t.replace(/\./,"!")}var Hd={},hc={},Wd=typeof Map<"u";function By(t,s,r){var a=0,n=t.length;if(r){if(Wd?r.has(s):Object.prototype.hasOwnProperty.call(r,s)){for(var i=Wd?r.get(s):r[s];a<i.length;++a)if(t[i[a]].t===s)return t.Count++,i[a]}}else for(;a<n;++a)if(t[a].t===s)return t.Count++,a;return t[n]={t:s},t.Count++,t.Unique++,r&&(Wd?(r.has(s)||r.set(s,[]),r.get(s).push(n)):(Object.prototype.hasOwnProperty.call(r,s)||(r[s]=[]),r[s].push(n))),n}function ih(t,s){var r={min:t+1,max:t+1},a=-1;return s.MDW&&(ua=s.MDW),s.width!=null?r.customWidth=1:s.wpx!=null?a=gu(s.wpx):s.wch!=null&&(a=s.wch),a>-1?(r.width=ex(a),r.customWidth=1):s.width!=null&&(r.width=s.width),s.hidden&&(r.hidden=!0),s.level!=null&&(r.outlineLevel=r.level=s.level),r}function so(t,s){if(t){var r=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Il(t,s,r){var a=r.revssf[s.z!=null?s.z:"General"],n=60,i=t.length;if(a==null&&r.ssf){for(;n<392;++n)if(r.ssf[n]==null){Di(s.z,n),r.ssf[n]=s.z,r.revssf[s.z]=a=n;break}}for(n=0;n!=i;++n)if(t[n].numFmtId===a)return n;return t[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function x5(t,s,r,a,n,i){try{a.cellNF&&(t.z=bt[s])}catch(o){if(a.WTF)throw o}if(!(t.t==="z"&&!a.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Vs(t.v)),(!a||a.cellText!==!1)&&t.t!=="z")try{if(bt[s]==null&&Di(G9[s]||"General",s),t.t==="e")t.w=t.w||Ki[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=cu(t.v);else if(t.t==="d"){var l=_r(t.v);(l|0)===l?t.w=l.toString(10):t.w=cu(l)}else{if(t.v===void 0)return"";t.w=ho(t.v,hc)}else t.t==="d"?t.w=wn(s,_r(t.v),hc):t.w=wn(s,t.v,hc)}catch(o){if(a.WTF)throw o}if(a.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Z0(n.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),a.WTF&&(t.s.fgColor.raw_rgb=n.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Z0(n.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),a.WTF&&(t.s.bgColor.raw_rgb=n.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(a.WTF&&i.Fills)throw o}}}function XV(t,s,r){if(t&&t["!ref"]){var a=es(t["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function JV(t,s){var r=es(s);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Ot(r))}var QV=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ZV=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ez=/<(?:\w:)?hyperlink [^>]*>/mg,tz=/"(\w*:\w*)"/,sz=/<(?:\w:)?col\b[^>]*[\/]?>/g,rz=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,az=/<(?:\w:)?pageMargins[^>]*\/>/g,h5=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,nz=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,iz=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function lz(t,s,r,a,n,i,l){if(!t)return t;a||(a={"!id":{}});var o=s.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",m=t.match(ZV);m?(u=t.slice(0,m.index),d=t.slice(m.index+m[0].length)):u=d=t;var x=u.match(h5);x?Ly(x[0],o,n,r):(x=u.match(nz))&&cz(x[0],x[1]||"",o,n,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var p=u.slice(g,g+50).match(tz);p&&JV(o,p[1])}var f=u.match(iz);f&&f[1]&&wz(f[1],n);var b=[];if(s.cellStyles){var y=u.match(sz);y&&pz(b,y)}m&&Cz(m[1],o,s,c,i,l);var v=d.match(rz);v&&(o["!autofilter"]=yz(v[0]));var N=[],S=d.match(QV);if(S)for(g=0;g!=S.length;++g)N[g]=es(S[g].slice(S[g].indexOf('"')+1));var w=d.match(ez);w&&hz(o,w,a);var C=d.match(az);if(C&&(o["!margins"]=fz(Et(C[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Ot(c)),s.sheetRows>0&&o["!ref"]){var j=es(o["!ref"]);s.sheetRows<=+j.e.r&&(j.e.r=s.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Ot(j))}return b.length>0&&(o["!cols"]=b),N.length>0&&(o["!merges"]=N),o}function oz(t){if(t.length===0)return"";for(var s='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)s+='<mergeCell ref="'+Ot(t[r])+'"/>';return s+"</mergeCells>"}function Ly(t,s,r,a){var n=Et(t);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=Xt(ks(n.codeName)))}function cz(t,s,r,a,n){Ly(t.slice(0,t.indexOf(">")),r,a,n)}function dz(t,s,r,a,n){var i=!1,l={},o=null;if(a.bookType!=="xlsx"&&s.vbaraw){var c=s.SheetNames[r];try{s.Workbook&&(c=s.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,l.codeName=ii(vs(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+$e("outlinePr",null,u)}!i&&!o||(n[n.length]=$e("sheetPr",o,l))}var uz=["objects","scenarios","selectLockedCells","selectUnlockedCells"],mz=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xz(t){var s={sheet:1};return uz.forEach(function(r){t[r]!=null&&t[r]&&(s[r]="1")}),mz.forEach(function(r){t[r]!=null&&!t[r]&&(s[r]="0")}),t.password&&(s.password=Ry(t.password).toString(16).toUpperCase()),$e("sheetProtection",null,s)}function hz(t,s,r){for(var a=Array.isArray(t),n=0;n!=s.length;++n){var i=Et(ks(s[n]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+Xt(i.location))):(i.Target="#"+Xt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=es(i.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=yt({c:u,r:c});a?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=i):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=i)}}}function fz(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(s[r]=parseFloat(t[r]))}),s}function gz(t){return so(t),$e("pageMargins",null,t)}function pz(t,s){for(var r=!1,a=0;a!=s.length;++a){var n=Et(s[a],!0);n.hidden&&(n.hidden=Hs(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,Fy(n.width)),jl(n);i<=l;)t[i++]=zs(n)}}function bz(t,s){for(var r=["<cols>"],a,n=0;n!=s.length;++n)(a=s[n])&&(r[r.length]=$e("col",null,ih(n,a)));return r[r.length]="</cols>",r.join("")}function yz(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}function vz(t,s,r,a){var n=typeof t.ref=="string"?t.ref:Ot(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=$a(n);l.s.r==l.e.r&&(l.e.r=$a(s["!ref"]).e.r,n=Ot(l));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+n;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+n}),$e("autoFilter",null,{ref:n})}var jz=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function wz(t,s){s.Views||(s.Views=[{}]),(t.match(jz)||[]).forEach(function(r,a){var n=Et(r);s.Views[a]||(s.Views[a]={}),+n.zoomScale&&(s.Views[a].zoom=+n.zoomScale),Hs(n.rightToLeft)&&(s.Views[a].RTL=!0)})}function Nz(t,s,r,a){var n={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),$e("sheetViews",$e("sheetView",null,n),{})}function Sz(t,s,r,a){if(t.c&&r["!comments"].push([s,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var n="",i=t.t,l=t.v;if(t.t!=="z")switch(t.t){case"b":n=t.v?"1":"0";break;case"n":n=""+t.v;break;case"e":n=Ki[t.v];break;case"d":a&&a.cellDates?n=Vs(t.v,-1).toISOString():(t=zs(t),t.t="n",n=""+(t.v=_r(Vs(t.v)))),typeof t.z>"u"&&(t.z=bt[14]);break;default:n=t.v;break}var o=ta("v",vs(n)),c={r:s},u=Il(a.cellXfs,t,a);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){o=ta("v",""+By(a.Strings,t.v,a.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=i&&(t.t=i,t.v=l),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,s.length)==s?{t:"array",ref:t.F}:null;o=$e("f",vs(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([s,t.l]),t.D&&(c.cm=1),$e("c",o,c)}var Cz=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=du("v"),l=du("f");return function(c,u,d,m,x,g){for(var p=0,f="",b=[],y=[],v=0,N=0,S=0,w="",C,j,k=0,E=0,R,D,P=0,T=0,B=Array.isArray(g.CellXf),F,L=[],I=[],V=Array.isArray(u),_=[],G={},U=!1,A=!!d.sheetStubs,q=c.split(s),Y=0,O=q.length;Y!=O;++Y){f=q[Y].trim();var W=f.length;if(W!==0){var z=0;e:for(p=0;p<W;++p)switch(f[p]){case">":if(f[p-1]!="/"){++p;break e}if(d&&d.cellStyles){if(j=Et(f.slice(z,p),!0),k=j.r!=null?parseInt(j.r,10):k+1,E=-1,d.sheetRows&&d.sheetRows<k)continue;G={},U=!1,j.ht&&(U=!0,G.hpt=parseFloat(j.ht),G.hpx=kc(G.hpt)),j.hidden=="1"&&(U=!0,G.hidden=!0),j.outlineLevel!=null&&(U=!0,G.level=+j.outlineLevel),U&&(_[k-1]=G)}break;case"<":z=p;break}if(z>=p)break;if(j=Et(f.slice(z,p),!0),k=j.r!=null?parseInt(j.r,10):k+1,E=-1,!(d.sheetRows&&d.sheetRows<k)){m.s.r>k-1&&(m.s.r=k-1),m.e.r<k-1&&(m.e.r=k-1),d&&d.cellStyles&&(G={},U=!1,j.ht&&(U=!0,G.hpt=parseFloat(j.ht),G.hpx=kc(G.hpt)),j.hidden=="1"&&(U=!0,G.hidden=!0),j.outlineLevel!=null&&(U=!0,G.level=+j.outlineLevel),U&&(_[k-1]=G)),b=f.slice(p).split(t);for(var H=0;H!=b.length&&b[H].trim().charAt(0)=="<";++H);for(b=b.slice(H),p=0;p!=b.length;++p)if(f=b[p].trim(),f.length!==0){if(y=f.match(r),v=p,N=0,S=0,f="<c "+(f.slice(0,1)=="<"?">":"")+f,y!=null&&y.length===2){for(v=0,w=y[1],N=0;N!=w.length&&!((S=w.charCodeAt(N)-64)<1||S>26);++N)v=26*v+S;--v,E=v}else++E;for(N=0;N!=f.length&&f.charCodeAt(N)!==62;++N);if(++N,j=Et(f.slice(0,N),!0),j.r||(j.r=yt({r:k-1,c:E})),w=f.slice(N),C={t:""},(y=w.match(i))!=null&&y[1]!==""&&(C.v=Xt(y[1])),d.cellFormula){if((y=w.match(l))!=null&&y[1]!==""){if(C.f=Xt(ks(y[1])).replace(/\r\n/g,`
`),d.xlfn||(C.f=zw(C.f)),y[0].indexOf('t="array"')>-1)C.F=(w.match(n)||[])[1],C.F.indexOf(":")>-1&&L.push([es(C.F),C.F]);else if(y[0].indexOf('t="shared"')>-1){D=Et(y[0]);var Q=Xt(ks(y[1]));d.xlfn||(Q=zw(Q)),I[parseInt(D.si,10)]=[D,Q,j.r]}}else(y=w.match(/<f[^>]*\/>/))&&(D=Et(y[0]),I[D.si]&&(C.f=jW(I[D.si][1],I[D.si][2],j.r)));var J=tr(j.r);for(N=0;N<L.length;++N)J.r>=L[N][0].s.r&&J.r<=L[N][0].e.r&&J.c>=L[N][0].s.c&&J.c<=L[N][0].e.c&&(C.F=L[N][1])}if(j.t==null&&C.v===void 0)if(C.f||C.F)C.v=0,C.t="n";else if(A)C.t="z";else continue;else C.t=j.t||"n";switch(m.s.c>E&&(m.s.c=E),m.e.c<E&&(m.e.c=E),C.t){case"n":if(C.v==""||C.v==null){if(!A)continue;C.t="z"}else C.v=parseFloat(C.v);break;case"s":if(typeof C.v>"u"){if(!A)continue;C.t="z"}else R=Hd[parseInt(C.v,10)],C.v=R.t,C.r=R.r,d.cellHTML&&(C.h=R.h);break;case"str":C.t="s",C.v=C.v!=null?ks(C.v):"",d.cellHTML&&(C.h=py(C.v));break;case"inlineStr":y=w.match(a),C.t="s",y!=null&&(R=Ay(y[1]))?(C.v=R.t,d.cellHTML&&(C.h=R.h)):C.v="";break;case"b":C.v=Hs(C.v);break;case"d":d.cellDates?C.v=Vs(C.v,1):(C.v=_r(Vs(C.v,1)),C.t="n");break;case"e":(!d||d.cellText!==!1)&&(C.w=C.v),C.v=gk[C.v];break}if(P=T=0,F=null,B&&j.s!==void 0&&(F=g.CellXf[j.s],F!=null&&(F.numFmtId!=null&&(P=F.numFmtId),d.cellStyles&&F.fillId!=null&&(T=F.fillId))),x5(C,P,T,d,x,g),d.cellDates&&B&&C.t=="n"&&Yc(bt[P])&&(C.t="d",C.v=sh(C.v)),j.cm&&d.xlmeta){var ie=(d.xlmeta.Cell||[])[+j.cm-1];ie&&ie.type=="XLDAPR"&&(C.D=!0)}if(V){var K=tr(j.r);u[K.r]||(u[K.r]=[]),u[K.r][K.c]=C}else u[j.r]=C}}}}_.length>0&&(u["!rows"]=_)}}();function kz(t,s,r,a){var n=[],i=[],l=es(t["!ref"]),o="",c,u="",d=[],m=0,x=0,g=t["!rows"],p=Array.isArray(t),f={r:u},b,y=-1;for(x=l.s.c;x<=l.e.c;++x)d[x]=er(x);for(m=l.s.r;m<=l.e.r;++m){for(i=[],u=mr(m),x=l.s.c;x<=l.e.c;++x){c=d[x]+u;var v=p?(t[m]||[])[x]:t[c];v!==void 0&&(o=Sz(v,c,t,s))!=null&&i.push(o)}(i.length>0||g&&g[m])&&(f={r:u},g&&g[m]&&(b=g[m],b.hidden&&(f.hidden=1),y=-1,b.hpx?y=pu(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(f.ht=y,f.customHeight=1),b.level&&(f.outlineLevel=b.level)),n[n.length]=$e("row",i.join(""),f))}if(g)for(;m<g.length;++m)g&&g[m]&&(f={r:m+1},b=g[m],b.hidden&&(f.hidden=1),y=-1,b.hpx?y=pu(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(f.ht=y,f.customHeight=1),b.level&&(f.outlineLevel=b.level),n[n.length]=$e("row","",f));return n.join("")}function f5(t,s,r,a){var n=[hr,$e("worksheet",null,{xmlns:No[0],"xmlns:r":kr.r})],i=r.SheetNames[t],l=0,o="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=es(u);if(d.e.c>16383||d.e.r>1048575){if(s.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Ot(d)}a||(a={}),c["!comments"]=[];var m=[];dz(c,r,t,s,n),n[n.length]=$e("dimension",null,{ref:u}),n[n.length]=Nz(c,s,t,r),s.sheetFormat&&(n[n.length]=$e("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=bz(c,c["!cols"])),n[l=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=kz(c,s),o.length>0&&(n[n.length]=o)),n.length>l+1&&(n[n.length]="</sheetData>",n[l]=n[l].replace("/>",">")),c["!protect"]&&(n[n.length]=xz(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=vz(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=oz(c["!merges"]));var x=-1,g,p=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(f){f[1].Target&&(g={ref:f[0]},f[1].Target.charAt(0)!="#"&&(p=bs(a,-1,vs(f[1].Target).replace(/#.*$/,""),Vt.HLINK),g["r:id"]="rId"+p),(x=f[1].Target.indexOf("#"))>-1&&(g.location=vs(f[1].Target.slice(x+1))),f[1].Tooltip&&(g.tooltip=vs(f[1].Tooltip)),n[n.length]=$e("hyperlink",null,g))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=gz(c["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(n[n.length]=ta("ignoredErrors",$e("ignoredError",null,{numberStoredAsText:1,sqref:u}))),m.length>0&&(p=bs(a,-1,"../drawings/drawing"+(t+1)+".xml",Vt.DRAW),n[n.length]=$e("drawing",null,{"r:id":"rId"+p}),c["!drawing"]=m),c["!comments"].length>0&&(p=bs(a,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Vt.VML),n[n.length]=$e("legacyDrawing",null,{"r:id":"rId"+p}),c["!legacy"]=p),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function Ez(t,s){var r={},a=t.l+s;r.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}function Pz(t,s,r){var a=Ne(145),n=(r["!rows"]||[])[t]||{};a.write_shift(4,t),a.write_shift(4,0);var i=320;n.hpx?i=pu(n.hpx)*20:n.hpt&&(i=n.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var l=0;n.level&&(l|=n.level),n.hidden&&(l|=16),(n.hpx||n.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var o=0,c=a.l;a.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(s.s.c>d+1<<10||s.e.c<d<<10)){for(var m=-1,x=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var p=Array.isArray(r)?(r[u.r]||[])[u.c]:r[yt(u)];p&&(m<0&&(m=g),x=g)}m<0||(++o,a.write_shift(4,m),a.write_shift(4,x))}var f=a.l;return a.l=c,a.write_shift(4,o),a.l=f,a.length>a.l?a.slice(0,a.l):a}function Tz(t,s,r,a){var n=Pz(a,r,s);(n.length>17||(s["!rows"]||[])[a])&&_e(t,0,n)}var _z=Eo,Az=Jc;function Rz(){}function Fz(t,s){var r={},a=t[t.l];return++t.l,r.above=!(a&64),r.left=!(a&128),t.l+=18,r.name=OL(t),r}function Dz(t,s,r){r==null&&(r=Ne(84+4*t.length));var a=192;s&&(s.above&&(a&=-65),s.left&&(a&=-129)),r.write_shift(1,a);for(var n=1;n<3;++n)r.write_shift(1,0);return X0({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),uk(t,r),r.slice(0,r.l)}function Iz(t){var s=Cn(t);return[s]}function Oz(t,s,r){return r==null&&(r=Ne(8)),So(s,r)}function Mz(t){var s=Co(t);return[s]}function Bz(t,s,r){return r==null&&(r=Ne(4)),ko(s,r)}function Lz(t){var s=Cn(t),r=t.read_shift(1);return[s,r,"b"]}function $z(t,s,r){return r==null&&(r=Ne(9)),So(s,r),r.write_shift(1,t.v?1:0),r}function Uz(t){var s=Co(t),r=t.read_shift(1);return[s,r,"b"]}function Hz(t,s,r){return r==null&&(r=Ne(5)),ko(s,r),r.write_shift(1,t.v?1:0),r}function Wz(t){var s=Cn(t),r=t.read_shift(1);return[s,r,"e"]}function Vz(t,s,r){return r==null&&(r=Ne(9)),So(s,r),r.write_shift(1,t.v),r}function zz(t){var s=Co(t),r=t.read_shift(1);return[s,r,"e"]}function Gz(t,s,r){return r==null&&(r=Ne(8)),ko(s,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function qz(t){var s=Cn(t),r=t.read_shift(4);return[s,r,"s"]}function Yz(t,s,r){return r==null&&(r=Ne(12)),So(s,r),r.write_shift(4,s.v),r}function Kz(t){var s=Co(t),r=t.read_shift(4);return[s,r,"s"]}function Xz(t,s,r){return r==null&&(r=Ne(8)),ko(s,r),r.write_shift(4,s.v),r}function Jz(t){var s=Cn(t),r=ha(t);return[s,r,"n"]}function Qz(t,s,r){return r==null&&(r=Ne(16)),So(s,r),go(t.v,r),r}function g5(t){var s=Co(t),r=ha(t);return[s,r,"n"]}function Zz(t,s,r){return r==null&&(r=Ne(12)),ko(s,r),go(t.v,r),r}function eG(t){var s=Cn(t),r=ky(t);return[s,r,"n"]}function tG(t,s,r){return r==null&&(r=Ne(12)),So(s,r),mk(t.v,r),r}function sG(t){var s=Co(t),r=ky(t);return[s,r,"n"]}function rG(t,s,r){return r==null&&(r=Ne(8)),ko(s,r),mk(t.v,r),r}function aG(t){var s=Cn(t),r=Ny(t);return[s,r,"is"]}function nG(t){var s=Cn(t),r=ba(t);return[s,r,"str"]}function iG(t,s,r){return r==null&&(r=Ne(12+4*t.v.length)),So(s,r),Hr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function lG(t){var s=Co(t),r=ba(t);return[s,r,"str"]}function oG(t,s,r){return r==null&&(r=Ne(8+4*t.v.length)),ko(s,r),Hr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function cG(t,s,r){var a=t.l+s,n=Cn(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"b"];if(r.cellFormula){t.l+=2;var o=nh(t,a-t.l,r);l[3]=da(o,null,n,r.supbooks,r)}else t.l=a;return l}function dG(t,s,r){var a=t.l+s,n=Cn(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"e"];if(r.cellFormula){t.l+=2;var o=nh(t,a-t.l,r);l[3]=da(o,null,n,r.supbooks,r)}else t.l=a;return l}function uG(t,s,r){var a=t.l+s,n=Cn(t);n.r=r["!row"];var i=ha(t),l=[n,i,"n"];if(r.cellFormula){t.l+=2;var o=nh(t,a-t.l,r);l[3]=da(o,null,n,r.supbooks,r)}else t.l=a;return l}function mG(t,s,r){var a=t.l+s,n=Cn(t);n.r=r["!row"];var i=ba(t),l=[n,i,"str"];if(r.cellFormula){t.l+=2;var o=nh(t,a-t.l,r);l[3]=da(o,null,n,r.supbooks,r)}else t.l=a;return l}var xG=Eo,hG=Jc;function fG(t,s){return s==null&&(s=Ne(4)),s.write_shift(4,t),s}function gG(t,s){var r=t.l+s,a=Eo(t),n=Sy(t),i=ba(t),l=ba(t),o=ba(t);t.l=r;var c={rfx:a,relId:n,loc:i,display:o};return l&&(c.Tooltip=l),c}function pG(t,s){var r=Ne(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Jc({s:tr(t[0]),e:tr(t[0])},r),Cy("rId"+s,r);var a=t[1].Target.indexOf("#"),n=a==-1?"":t[1].Target.slice(a+1);return Hr(n||"",r),Hr(t[1].Tooltip||"",r),Hr("",r),r.slice(0,r.l)}function bG(){}function yG(t,s,r){var a=t.l+s,n=xk(t),i=t.read_shift(1),l=[n];if(l[2]=i,r.cellFormula){var o=WV(t,a-t.l,r);l[1]=o}else t.l=a;return l}function vG(t,s,r){var a=t.l+s,n=Eo(t),i=[n];if(r.cellFormula){var l=zV(t,a-t.l,r);i[1]=l,t.l=a}else t.l=a;return i}function jG(t,s,r){r==null&&(r=Ne(18));var a=ih(t,s);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var n=0;return s.hidden&&(n|=1),typeof a.width=="number"&&(n|=2),s.level&&(n|=s.level<<8),r.write_shift(2,n),r}var p5=["left","right","top","bottom","header","footer"];function wG(t){var s={};return p5.forEach(function(r){s[r]=ha(t)}),s}function NG(t,s){return s==null&&(s=Ne(6*8)),so(t),p5.forEach(function(r){go(t[r],s)}),s}function SG(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function CG(t,s,r){r==null&&(r=Ne(30));var a=924;return(((s||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function kG(t){var s=Ne(24);return s.write_shift(4,4),s.write_shift(4,1),Jc(t,s),s}function EG(t,s){return s==null&&(s=Ne(16*4+2)),s.write_shift(2,t.password?Ry(t.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?s.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):s.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),s}function PG(){}function TG(){}function _G(t,s,r,a,n,i,l){if(!t)return t;var o=s||{};a||(a={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,x=!1,g,p,f,b,y,v,N,S,w,C=[];o.biff=12,o["!row"]=0;var j=0,k=!1,E=[],R={},D=o.supbooks||n.supbooks||[[]];if(D.sharedf=R,D.arrayf=E,D.SheetNames=n.SheetNames||n.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=D,n.Names))for(var P=0;P<n.Names.length;++P)D[0][P+1]=n.Names[P];var T=[],B=[],F=!1;bu[16]={n:"BrtShortReal",f:g5};var L;if(Yi(t,function(_,G,U){if(!x)switch(U){case 148:u=_;break;case 0:g=_,o.sheetRows&&o.sheetRows<=g.r&&(x=!0),S=mr(b=g.r),o["!row"]=g.r,(_.hidden||_.hpt||_.level!=null)&&(_.hpt&&(_.hpx=kc(_.hpt)),B[_.r]=_);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:_[2]},_[2]){case"n":p.v=_[1];break;case"s":N=Hd[_[1]],p.v=N.t,p.r=N.r;break;case"b":p.v=!!_[1];break;case"e":p.v=_[1],o.cellText!==!1&&(p.w=Ki[p.v]);break;case"str":p.t="s",p.v=_[1];break;case"is":p.t="s",p.v=_[1].t;break}if((f=l.CellXf[_[0].iStyleRef])&&x5(p,f.numFmtId,null,o,i,l),y=_[0].c==-1?y+1:_[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=p):c[er(y)+S]=p,o.cellFormula){for(k=!1,j=0;j<E.length;++j){var A=E[j];g.r>=A[0].s.r&&g.r<=A[0].e.r&&y>=A[0].s.c&&y<=A[0].e.c&&(p.F=Ot(A[0]),k=!0)}!k&&_.length>3&&(p.f=_[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>y&&(d.s.c=y),d.e.r<g.r&&(d.e.r=g.r),d.e.c<y&&(d.e.c=y),o.cellDates&&f&&p.t=="n"&&Yc(bt[f.numFmtId])){var q=Kl(p.v);q&&(p.t="d",p.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}L&&(L.type=="XLDAPR"&&(p.D=!0),L=void 0);break;case 1:case 12:if(!o.sheetStubs||m)break;p={t:"z",v:void 0},y=_[0].c==-1?y+1:_[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=p):c[er(y)+S]=p,d.s.r>g.r&&(d.s.r=g.r),d.s.c>y&&(d.s.c=y),d.e.r<g.r&&(d.e.r=g.r),d.e.c<y&&(d.e.c=y),L&&(L.type=="XLDAPR"&&(p.D=!0),L=void 0);break;case 176:C.push(_);break;case 49:L=((o.xlmeta||{}).Cell||[])[_-1];break;case 494:var Y=a["!id"][_.relId];for(Y?(_.Target=Y.Target,_.loc&&(_.Target+="#"+_.loc),_.Rel=Y):_.relId==""&&(_.Target="#"+_.loc),b=_.rfx.s.r;b<=_.rfx.e.r;++b)for(y=_.rfx.s.c;y<=_.rfx.e.c;++y)o.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=_):(v=yt({c:y,r:b}),c[v]||(c[v]={t:"z",v:void 0}),c[v].l=_);break;case 426:if(!o.cellFormula)break;E.push(_),w=o.dense?c[b][y]:c[er(y)+S],w.f=da(_[1],d,{r:g.r,c:y},D,o),w.F=Ot(_[0]);break;case 427:if(!o.cellFormula)break;R[yt(_[0].s)]=_[1],w=o.dense?c[b][y]:c[er(y)+S],w.f=da(_[1],d,{r:g.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;_.e>=_.s;)T[_.e--]={width:_.w/256,hidden:!!(_.flags&1),level:_.level},F||(F=!0,Fy(_.w/256)),jl(T[_.e+1]);break;case 161:c["!autofilter"]={ref:Ot(_)};break;case 476:c["!margins"]=_;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),_.name&&(n.Sheets[r].CodeName=_.name),(_.above||_.left)&&(c["!outline"]={above:_.above,left:_.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),_.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!G.T){if(!m||o.WTF)throw new Error("Unexpected record 0x"+U.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Ot(u||d)),o.sheetRows&&c["!ref"]){var I=es(c["!ref"]);o.sheetRows<=+I.e.r&&(I.e.r=o.sheetRows-1,I.e.r>d.e.r&&(I.e.r=d.e.r),I.e.r<I.s.r&&(I.s.r=I.e.r),I.e.c>d.e.c&&(I.e.c=d.e.c),I.e.c<I.s.c&&(I.s.c=I.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Ot(I))}return C.length>0&&(c["!merges"]=C),T.length>0&&(c["!cols"]=T),B.length>0&&(c["!rows"]=B),c}function AG(t,s,r,a,n,i,l){if(s.v===void 0)return!1;var o="";switch(s.t){case"b":o=s.v?"1":"0";break;case"d":s=zs(s),s.z=s.z||bt[14],s.v=_r(Vs(s.v)),s.t="n";break;case"n":case"e":o=""+s.v;break;default:o=s.v;break}var c={r,c:a};switch(c.s=Il(n.cellXfs,s,n),s.l&&i["!links"].push([yt(c),s.l]),s.c&&i["!comments"].push([yt(c),s.c]),s.t){case"s":case"str":return n.bookSST?(o=By(n.Strings,s.v,n.revStrings),c.t="s",c.v=o,l?_e(t,18,Xz(s,c)):_e(t,7,Yz(s,c))):(c.t="str",l?_e(t,17,oG(s,c)):_e(t,6,iG(s,c))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?l?_e(t,13,rG(s,c)):_e(t,2,tG(s,c)):l?_e(t,16,Zz(s,c)):_e(t,5,Qz(s,c)),!0;case"b":return c.t="b",l?_e(t,15,Hz(s,c)):_e(t,4,$z(s,c)),!0;case"e":return c.t="e",l?_e(t,14,Gz(s,c)):_e(t,3,Vz(s,c)),!0}return l?_e(t,12,Bz(s,c)):_e(t,1,Oz(s,c)),!0}function RG(t,s,r,a){var n=es(s["!ref"]||"A1"),i,l="",o=[];_e(t,145);var c=Array.isArray(s),u=n.e.r;s["!rows"]&&(u=Math.max(n.e.r,s["!rows"].length-1));for(var d=n.s.r;d<=u;++d){l=mr(d),Tz(t,s,n,d);var m=!1;if(d<=n.e.r)for(var x=n.s.c;x<=n.e.c;++x){d===n.s.r&&(o[x]=er(x)),i=o[x]+l;var g=c?(s[d]||[])[x]:s[i];if(!g){m=!1;continue}m=AG(t,g,d,x,a,s,m)}}_e(t,146)}function FG(t,s){!s||!s["!merges"]||(_e(t,177,fG(s["!merges"].length)),s["!merges"].forEach(function(r){_e(t,176,hG(r))}),_e(t,178))}function DG(t,s){!s||!s["!cols"]||(_e(t,390),s["!cols"].forEach(function(r,a){r&&_e(t,60,jG(a,r))}),_e(t,391))}function IG(t,s){!s||!s["!ref"]||(_e(t,648),_e(t,649,kG(es(s["!ref"]))),_e(t,650))}function OG(t,s,r){s["!links"].forEach(function(a){if(a[1].Target){var n=bs(r,-1,a[1].Target.replace(/#.*$/,""),Vt.HLINK);_e(t,494,pG(a,n))}}),delete s["!links"]}function MG(t,s,r,a){if(s["!comments"].length>0){var n=bs(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Vt.VML);_e(t,551,Cy("rId"+n)),s["!legacy"]=n}}function BG(t,s,r,a){if(s["!autofilter"]){var n=s["!autofilter"],i=typeof n.ref=="string"?n.ref:Ot(n.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=$a(i);o.s.r==o.e.r&&(o.e.r=$a(s["!ref"]).e.r,i=Ot(o));for(var c=0;c<l.length;++c){var u=l[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),_e(t,161,Jc(es(i))),_e(t,162)}}function LG(t,s,r){_e(t,133),_e(t,137,CG(s,r)),_e(t,138),_e(t,134)}function $G(t,s){s["!protect"]&&_e(t,535,EG(s["!protect"]))}function UG(t,s,r,a){var n=Ba(),i=r.SheetNames[t],l=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var c=es(l["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(s.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],_e(n,129),(r.vbaraw||l["!outline"])&&_e(n,147,Dz(o,l["!outline"])),_e(n,148,Az(c)),LG(n,l,r.Workbook),DG(n,l),RG(n,l,t,s),$G(n,l),BG(n,l,r,t),FG(n,l),OG(n,l,a),l["!margins"]&&_e(n,476,NG(l["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&IG(n,l),MG(n,l,t,a),_e(n,130),n.end()}function HG(t){var s=[],r=t.match(/^<c:numCache>/),a;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=r?+l[2]:l[2])});var n=Xt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[s,n,a]}function WG(t,s,r,a,n,i){var l=i||{"!type":"chart"};if(!t)return i;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var x=HG(m);d.s.r=d.s.c=0,d.e.c=o,u=er(o),x[0].forEach(function(g,p){l[u+mr(p)]={t:"n",v:g,z:x[1]},c=p}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(l["!ref"]=Ot(d)),l}function VG(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=t.match(h5);return o&&Ly(o[0],i,n,r),(l=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function zG(t,s){t.l+=10;var r=ba(t);return{name:r}}function GG(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Yi(t,function(c,u,d){switch(d){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},s),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var $y=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],qG=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],YG=[],KG=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Xw(t,s){for(var r=0;r!=t.length;++r)for(var a=t[r],n=0;n!=s.length;++n){var i=s[n];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Hs(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function Jw(t,s){for(var r=0;r!=s.length;++r){var a=s[r];if(t[a[0]]==null)t[a[0]]=a[1];else switch(a[2]){case"bool":typeof t[a[0]]=="string"&&(t[a[0]]=Hs(t[a[0]]));break;case"int":typeof t[a[0]]=="string"&&(t[a[0]]=parseInt(t[a[0]],10));break}}}function b5(t){Jw(t.WBProps,$y),Jw(t.CalcPr,KG),Xw(t.WBView,qG),Xw(t.Sheets,YG),hc.date1904=Hs(t.WBProps.date1904)}function XG(t){return!t.Workbook||!t.Workbook.WBProps?"false":Hs(t.Workbook.WBProps.date1904)?"true":"false"}var JG="][*?/\\".split("");function y5(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return JG.forEach(function(a){if(t.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function QG(t,s,r){t.forEach(function(a,n){y5(a);for(var i=0;i<n;++i)if(a==t[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var l=s&&s[n]&&s[n].CodeName||a;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function ZG(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var s=t.Workbook&&t.Workbook.Sheets||[];QG(t.SheetNames,s,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)XV(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var eq=/<\w+:workbook/;function tq(t,s){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",i={},l=0;if(t.replace(wa,function(c,u){var d=Et(c);switch(wi(d[0])){case"<?xml":break;case"<workbook":c.match(eq)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[n];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":$y.forEach(function(m){if(d[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=Hs(d[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(d[m[0]],10);break;default:r.WBProps[m[0]]=d[m[0]]}}),d.codeName&&(r.WBProps.CodeName=ks(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Xt(ks(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=ks(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),Hs(d.hidden||"0")&&(i.Hidden=!0),l=u+c.length;break;case"</definedName>":i.Ref=Xt(ks(t.slice(l,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&s.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),No.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return b5(r),r}function v5(t){var s=[hr];s[s.length]=$e("workbook",null,{xmlns:No[0],"xmlns:r":kr.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&($y.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(a[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(a.codeName=t.Workbook.WBProps.CodeName,delete a.CodeName)),s[s.length]=$e("workbookPr",null,a);var n=t.Workbook&&t.Workbook.Sheets||[],i=0;if(n&&n[0]&&n[0].Hidden){for(s[s.length]="<bookViews>",i=0;i!=t.SheetNames.length&&!(!n[i]||!n[i].Hidden);++i);i==t.SheetNames.length&&(i=0),s[s.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",i=0;i!=t.SheetNames.length;++i){var l={name:vs(t.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),n[i])switch(n[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}s[s.length]=$e("sheet",null,l)}return s[s.length]="</sheets>",r&&(s[s.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(s[s.length]=$e("definedName",vs(o.Ref),c))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function sq(t,s){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=rp(t),r.name=ba(t),r}function rq(t,s){return s||(s=Ne(127)),s.write_shift(4,t.Hidden),s.write_shift(4,t.iTabID),Cy(t.strRelID,s),Hr(t.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function aq(t,s){var r={},a=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var n=s>8?ba(t):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function nq(t,s){s||(s=Ne(72));var r=0;return t&&t.filterPrivacy&&(r|=8),s.write_shift(4,r),s.write_shift(4,0),uk(t&&t.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function iq(t,s){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=s-8,r}function lq(t,s,r){var a=t.l+s;t.l+=4,t.l+=1;var n=t.read_shift(4),i=ML(t),l=VV(t,0,r),o=Sy(t);t.l=a;var c={Name:i,Ptg:l};return n<268435455&&(c.Sheet=n),o&&(c.Comment=o),c}function oq(t,s){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],bu[16]={n:"BrtFRTArchID$",f:iq},Yi(t,function(c,u,d){switch(d){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(s.SID=c.Sheet),c.Ref=da(c.Ptg,null,null,l,s),delete s.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([d,c]):l[0]=[d,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(d),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!u.T){if(!n||s.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},s),b5(r),r.Names=i,r.supbooks=l,r}function cq(t,s){_e(t,143);for(var r=0;r!=s.SheetNames.length;++r){var a=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[r]&&s.Workbook.Sheets[r].Hidden||0,n={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:s.SheetNames[r]};_e(t,156,rq(n))}_e(t,144)}function dq(t,s){s||(s=Ne(127));for(var r=0;r!=4;++r)s.write_shift(4,0);return Hr("SheetJS",s),Hr(W0.version,s),Hr(W0.version,s),Hr("7262",s),s.length>s.l?s.slice(0,s.l):s}function uq(t,s){s||(s=Ne(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,t),s.write_shift(4,t);var r=120;return s.write_shift(1,r),s.length>s.l?s.slice(0,s.l):s}function mq(t,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var r=s.Workbook.Sheets,a=0,n=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&n==-1?n=a:r[a].Hidden==1&&i==-1&&(i=a);i>n||(_e(t,135),_e(t,158,uq(n)),_e(t,136))}}function xq(t,s){var r=Ba();return _e(r,131),_e(r,128,dq()),_e(r,153,nq(t.Workbook&&t.Workbook.WBProps||null)),mq(r,t),cq(r,t),_e(r,132),r.end()}function hq(t,s,r){return s.slice(-4)===".bin"?oq(t,r):tq(t,r)}function fq(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?_G(t,a,r,n,i,l,o):lz(t,a,r,n,i,l,o)}function gq(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?GG(t,a,r,n,i):VG(t,a,r,n,i)}function pq(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?yW():vW()}function bq(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?pW():bW()}function yq(t,s,r,a){return s.slice(-4)===".bin"?hH(t,r,a):sH(t,r,a)}function vq(t,s,r){return e5(t,r)}function jq(t,s,r){return s.slice(-4)===".bin"?jU(t,r):bU(t,r)}function wq(t,s,r){return s.slice(-4)===".bin"?mW(t,r):rW(t,r)}function Nq(t,s,r){return s.slice(-4)===".bin"?eW(t):QH(t)}function Sq(t,s,r,a){return r.slice(-4)===".bin"?tW(t,s,r,a):void 0}function Cq(t,s,r){return s.slice(-4)===".bin"?KH(t,s,r):JH(t,s,r)}function kq(t,s,r){return(s.slice(-4)===".bin"?xq:v5)(t)}function Eq(t,s,r,a,n){return(s.slice(-4)===".bin"?UG:f5)(t,r,a,n)}function Pq(t,s,r){return(s.slice(-4)===".bin"?SH:Qk)(t,r)}function Tq(t,s,r){return(s.slice(-4)===".bin"?SU:Vk)(t,r)}function _q(t,s,r){return(s.slice(-4)===".bin"?xW:r5)(t)}function Aq(t){return(t.slice(-4)===".bin"?XH:t5)()}var j5=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,w5=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function En(t,s){var r=t.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=t.match(j5),i,l,o,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(w5),(l=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),a[o]=i[2].slice(1,i[2].length-1));return a}function Rq(t){var s=t.split(/\s+/),r={};if(s.length===1)return r;var a=t.match(j5),n,i,l,o;if(a)for(o=0;o!=a.length;++o)n=a[o].match(w5),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),r[l]=n[2].slice(1,n[2].length-1));return r}var Vd;function Fq(t,s){var r=Vd[t]||Xt(t);return r==="General"?ho(s):wn(r,s)}function Dq(t,s,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Hs(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=Vs(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Xt(s)]=n}function Iq(t,s,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Ki[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=cu(t.v):t.w=ho(t.v):t.w=Fq(s||"General",t.v)}catch(i){if(r.WTF)throw i}try{var a=Vd[s]||s||"General";if(r.cellNF&&(t.z=a),r.cellDates&&t.t=="n"&&Yc(a)){var n=Kl(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function Oq(t,s,r){if(r.cellStyles&&s.Interior){var a=s.Interior;a.Pattern&&(a.patternType=YU[a.Pattern]||a.Pattern)}t[s.ID]=s}function Mq(t,s,r,a,n,i,l,o,c,u){var d="General",m=a.StyleID,x={};u=u||{};var g=[],p=0;for(m===void 0&&o&&(m=o.StyleID),m===void 0&&l&&(m=l.StyleID);i[m]!==void 0&&(i[m].nf&&(d=i[m].nf),i[m].Interior&&g.push(i[m].Interior),!!i[m].Parent);)m=i[m].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Hs(t);break;case"String":a.t="s",a.r=hw(Xt(t)),a.v=t.indexOf("<")>-1?Xt(s||t).replace(/<.*?>/g,""):a.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),a.v=(Vs(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=Xt(t):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+t),a.t||(a.t="n");break;case"Error":a.t="e",a.v=gk[t],u.cellText!==!1&&(a.w=t);break;default:t==""&&s==""?a.t="z":(a.t="s",a.v=hw(s||t));break}if(Iq(a,d,u),u.cellFormula!==!1)if(a.Formula){var f=Xt(a.Formula);f.charCodeAt(0)==61&&(f=f.slice(1)),a.f=xc(f,n),delete a.Formula,a.ArrayRange=="RC"?a.F=xc("RC:RC",n):a.ArrayRange&&(a.F=xc(a.ArrayRange,n),c.push([es(a.F),a.F]))}else for(p=0;p<c.length;++p)n.r>=c[p][0].s.r&&n.r<=c[p][0].e.r&&n.c>=c[p][0].s.c&&n.c<=c[p][0].e.c&&(a.F=c[p][1]);u.cellStyles&&(g.forEach(function(b){!x.patternType&&b.patternType&&(x.patternType=b.patternType)}),a.s=x),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Bq(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Df(t,s){var r=s||{};Kc();var a=Td(by(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=ks(a));var n=a.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=zs(r);return l.type="string",Cc.to_workbook(a,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(We){n.indexOf("<"+We)>=0&&(i=!0)}),i)return NY(a,r);Vd={"General Number":"General","General Date":bt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":bt[15],"Short Date":bt[14],"Long Time":bt[19],"Medium Time":bt[18],"Short Time":bt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:bt[2],Standard:bt[4],Percent:bt[10],Scientific:bt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},m=[],x=r.dense?[]:{},g="",p={},f={},b=En('<Data ss:Type="String">'),y=0,v=0,N=0,S={s:{r:2e6,c:2e6},e:{r:0,c:0}},w={},C={},j="",k=0,E=[],R={},D={},P=0,T=[],B=[],F={},L=[],I,V=!1,_=[],G=[],U={},A=0,q=0,Y={Sheets:[],WBProps:{date1904:!1}},O={};mu.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var W="";o=mu.exec(a);)switch(o[3]=(W=o[3]).toLowerCase()){case"data":if(W=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Mq(a.slice(y,o.index),j,b,c[c.length-1][0]=="comment"?F:p,{c:v,r:N},w,L[v],f,_,r):(j="",b=En(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(B.length>0&&(p.c=B),(!r.sheetRows||r.sheetRows>N)&&p.v!==void 0&&(r.dense?(x[N]||(x[N]=[]),x[N][v]=p):x[er(v)+mr(N)]=p),p.HRef&&(p.l={Target:Xt(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(A=v+(parseInt(p.MergeAcross,10)|0),q=N+(parseInt(p.MergeDown,10)|0),E.push({s:{c:v,r:N},e:{c:A,r:q}})),!r.sheetStubs)p.MergeAcross?v=A+1:++v;else if(p.MergeAcross||p.MergeDown){for(var z=v;z<=A;++z)for(var H=N;H<=q;++H)(z>v||H>N)&&(r.dense?(x[H]||(x[H]=[]),x[H][z]={t:"z"}):x[er(z)+mr(H)]={t:"z"});v=A+1}else++v;else p=Rq(o[0]),p.Index&&(v=+p.Index-1),v<S.s.c&&(S.s.c=v),v>S.e.c&&(S.e.c=v),o[0].slice(-2)==="/>"&&++v,B=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<S.s.r&&(S.s.r=N),N>S.e.r&&(S.e.r=N),o[0].slice(-2)==="/>"&&(f=En(o[0]),f.Index&&(N=+f.Index-1)),v=0,++N):(f=En(o[0]),f.Index&&(N=+f.Index-1),U={},(f.AutoFitHeight=="0"||f.Height)&&(U.hpx=parseInt(f.Height,10),U.hpt=pu(U.hpx),G[N]=U),f.Hidden=="1"&&(U.hidden=!0,G[N]=U));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));m.push(g),S.s.r<=S.e.r&&S.s.c<=S.e.c&&(x["!ref"]=Ot(S),r.sheetRows&&r.sheetRows<=S.e.r&&(x["!fullref"]=x["!ref"],S.e.r=r.sheetRows-1,x["!ref"]=Ot(S))),E.length&&(x["!merges"]=E),L.length>0&&(x["!cols"]=L),G.length>0&&(x["!rows"]=G),d[g]=x}else S={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=v=0,c.push([o[3],!1]),u=En(o[0]),g=Xt(u.Name),x=r.dense?[]:{},E=[],_=[],G=[],O={name:g,Hidden:0},Y.Sheets.push(O);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),L=[],V=!1}break;case"style":o[1]==="/"?Oq(w,C,r):C=En(o[0]);break;case"numberformat":C.nf=Xt(En(o[0]).Format||"General"),Vd[C.nf]&&(C.nf=Vd[C.nf]);for(var Q=0;Q!=392&&bt[Q]!=C.nf;++Q);if(Q==392){for(Q=57;Q!=392;++Q)if(bt[Q]==null){Di(C.nf,Q);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(I=En(o[0]),I.Hidden&&(I.hidden=!0,delete I.Hidden),I.Width&&(I.wpx=parseInt(I.Width,10)),!V&&I.wpx>10){V=!0,ua=Xk;for(var J=0;J<L.length;++J)L[J]&&jl(L[J])}V&&jl(I),L[I.Index-1||L.length]=I;for(var ie=0;ie<+I.Span;++ie)L[L.length]=zs(I);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var K=Et(o[0]),oe={Name:K.Name,Ref:xc(K.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(oe.Sheet=Y.Sheets.length-1),Y.Names.push(oe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?j+=a.slice(k,o.index):k=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;C.Interior=En(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?o$(R,W,a.slice(P,o.index)):P=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Bq(F),B.push(F)}else c.push([o[3],!1]),u=En(o[0]),F={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var le=En(o[0]);x["!autofilter"]={ref:xc(le.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return sN(a,r);var Se=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(a.slice(P,o.index)){case"SheetHidden":O.Hidden=1;break;case"SheetVeryHidden":O.Hidden=2;break}else P=o.index+o[0].length;break;case"header":x["!margins"]||so(x["!margins"]={},"xlml"),isNaN(+Et(o[0]).Margin)||(x["!margins"].header=+Et(o[0]).Margin);break;case"footer":x["!margins"]||so(x["!margins"]={},"xlml"),isNaN(+Et(o[0]).Margin)||(x["!margins"].footer=+Et(o[0]).Margin);break;case"pagemargins":var Ee=Et(o[0]);x["!margins"]||so(x["!margins"]={},"xlml"),isNaN(+Ee.Top)||(x["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(x["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(x["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(x["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Dq(D,W,T,a.slice(P,o.index)):(T=o,P=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=d),ye.SheetNames=m,ye.Workbook=Y,ye.SSF=zs(bt),ye.Props=R,ye.Custprops=D,ye}function dp(t,s){switch(Hy(s=s||{}),s.type||"base64"){case"base64":return Df(tn(t),s);case"binary":case"buffer":case"file":return Df(t,s);case"array":return Df(Fl(t),s)}}function Lq(t,s){var r=[];return t.Props&&r.push(c$(t.Props,s)),t.Custprops&&r.push(d$(t.Props,t.Custprops)),r.join("")}function $q(){return""}function Uq(t,s){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(a,n){var i=[];i.push($e("NumberFormat",null,{"ss:Format":vs(bt[a.numFmtId])}));var l={"ss:ID":"s"+(21+n)};r.push($e("Style",i.join(""),l))}),$e("Styles",r.join(""))}function N5(t){return $e("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Oy(t.Ref,{r:0,c:0})})}function Hq(t){if(!((t||{}).Workbook||{}).Names)return"";for(var s=t.Workbook.Names,r=[],a=0;a<s.length;++a){var n=s[a];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||r.push(N5(n)))}return $e("Names",r.join(""))}function Wq(t,s,r,a){if(!t||!((a||{}).Workbook||{}).Names)return"";for(var n=a.Workbook.Names,i=[],l=0;l<n.length;++l){var o=n[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(N5(o)))}return i.join("")}function Vq(t,s,r,a){if(!t)return"";var n=[];if(t["!margins"]&&(n.push("<PageSetup>"),t["!margins"].header&&n.push($e("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&n.push($e("Footer",null,{"x:Margin":t["!margins"].footer})),n.push($e("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),n.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)n.push($e("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&n.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),t["!protect"]&&(n.push(ta("ProtectContents","True")),t["!protect"].objects&&n.push(ta("ProtectObjects","True")),t["!protect"].scenarios&&n.push(ta("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?n.push(ta("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&n.push(ta("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){t["!protect"][l[0]]&&n.push("<"+l[1]+"/>")})),n.length==0?"":$e("WorksheetOptions",n.join(""),{xmlns:qa.x})}function zq(t){return t.map(function(s){var r=mL(s.t||""),a=$e("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return $e("Comment",a,{"ss:Author":s.a})}).join("")}function Gq(t,s,r,a,n,i,l){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+vs(Oy(t.f,l))),t.F&&t.F.slice(0,s.length)==s){var c=tr(t.F.slice(s.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==l.r?"":"["+(c.r-l.r)+"]")+"C"+(c.c==l.c?"":"["+(c.c-l.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=vs(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=vs(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=l.c||u[d].s.r!=l.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var m="",x="";switch(t.t){case"z":if(!a.sheetStubs)return"";break;case"n":m="Number",x=String(t.v);break;case"b":m="Boolean",x=t.v?"1":"0";break;case"e":m="Error",x=Ki[t.v];break;case"d":m="DateTime",x=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||bt[14]);break;case"s":m="String",x=uL(t.v||"");break}var g=Il(a.cellXfs,t,a);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=l.c+1;var p=t.v!=null?x:"",f=t.t=="z"?"":'<Data ss:Type="'+m+'">'+p+"</Data>";return(t.c||[]).length>0&&(f+=zq(t.c)),$e("Cell",f,o)}function qq(t,s){var r='<Row ss:Index="'+(t+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=kc(s.hpt)),s.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Yq(t,s,r,a){if(!t["!ref"])return"";var n=es(t["!ref"]),i=t["!merges"]||[],l=0,o=[];t["!cols"]&&t["!cols"].forEach(function(b,y){jl(b);var v=!!b.width,N=ih(y,b),S={"ss:Index":y+1};v&&(S["ss:Width"]=fu(N.width)),b.hidden&&(S["ss:Hidden"]="1"),o.push($e("Column",null,S))});for(var c=Array.isArray(t),u=n.s.r;u<=n.e.r;++u){for(var d=[qq(u,(t["!rows"]||[])[u])],m=n.s.c;m<=n.e.c;++m){var x=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>m)&&!(i[l].s.r>u)&&!(i[l].e.c<m)&&!(i[l].e.r<u)){(i[l].s.c!=m||i[l].s.r!=u)&&(x=!0);break}if(!x){var g={r:u,c:m},p=yt(g),f=c?(t[u]||[])[m]:t[p];d.push(Gq(f,p,t,s,r,a,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Kq(t,s,r){var a=[],n=r.SheetNames[t],i=r.Sheets[n],l=i?Wq(i,s,t,r):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=i?Yq(i,s,t,r):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(Vq(i,s,t,r)),a.join("")}function Xq(t,s){s||(s={}),t.SSF||(t.SSF=zs(bt)),t.SSF&&(Kc(),Zx(t.SSF),s.revssf=th(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF,s.cellXfs=[],Il(s.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Lq(t,s)),r.push($q()),r.push(""),r.push("");for(var a=0;a<t.SheetNames.length;++a)r.push($e("Worksheet",Kq(a,s,t),{"ss:Name":vs(t.SheetNames[a])}));return r[2]=Uq(t,s),r[3]=Hq(t),hr+$e("Workbook",r.join(""),{xmlns:qa.ss,"xmlns:o":qa.o,"xmlns:x":qa.x,"xmlns:ss":qa.ss,"xmlns:dt":qa.dt,"xmlns:html":qa.html})}function Jq(t){var s={},r=t.content;if(r.l=28,s.AnsiUserType=r.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=HL(r),r.length-r.l<=4)return s;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,s.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(s.UnicodeClipboardFormat=WL(r),a=r.read_shift(4),a==0||a>40))return s;r.l-=4,s.Reserved2=r.read_shift(0,"lpwstr")}var Qq=[60,1084,2066,2165,2175];function Zq(t,s,r,a,n){var i=a,l=[],o=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),r.l+=i;for(var c=Ri(r,r.l),u=up[c],d=0;u!=null&&Qq.indexOf(c)>-1;)i=Ri(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+i),l.push(o),r.l+=4+i,u=up[c=Ri(r,r.l)];var m=$r(l);Jr(m,0);var x=0;m.lens=[];for(var g=0;g<l.length;++g)m.lens.push(x),x+=l[g].length;if(m.length<a)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+m.length+" < "+a;return s.f(m,m.length,n)}function Zn(t,s,r){if(t.t!=="z"&&t.XF){var a=0;try{a=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=bt[a])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||Ki[t.v]:a===0||a=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=cu(t.v):t.w=ho(t.v):t.w=wn(a,t.v,{date1904:!!r,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&a&&t.t=="n"&&Yc(bt[a]||String(a))){var n=Kl(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Lm(t,s,r){return{v:t,ixfe:s,t:r}}function eY(t,s){var r={opts:{}},a={},n=s.dense?[]:{},i={},l={},o=null,c=[],u="",d={},m,x="",g,p,f,b,y={},v=[],N,S,w=[],C=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},k={},E=function(Pe){return Pe<8?Zl[Pe]:Pe<64&&C[Pe-8]||Zl[Pe]},R=function(Pe,ee,me){var Te=ee.XF.data;if(!(!Te||!Te.patternType||!me||!me.cellStyles)){ee.s={},ee.s.patternType=Te.patternType;var qe;(qe=hu(E(Te.icvFore)))&&(ee.s.fgColor={rgb:qe}),(qe=hu(E(Te.icvBack)))&&(ee.s.bgColor={rgb:qe})}},D=function(Pe,ee,me){if(!(U>1)&&!(me.sheetRows&&Pe.r>=me.sheetRows)){if(me.cellStyles&&ee.XF&&ee.XF.data&&R(Pe,ee,me),delete ee.ixfe,delete ee.XF,m=Pe,x=yt(Pe),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Pe.r<l.s.r&&(l.s.r=Pe.r),Pe.c<l.s.c&&(l.s.c=Pe.c),Pe.r+1>l.e.r&&(l.e.r=Pe.r+1),Pe.c+1>l.e.c&&(l.e.c=Pe.c+1),me.cellFormula&&ee.f){for(var Te=0;Te<v.length;++Te)if(!(v[Te][0].s.c>Pe.c||v[Te][0].s.r>Pe.r)&&!(v[Te][0].e.c<Pe.c||v[Te][0].e.r<Pe.r)){ee.F=Ot(v[Te][0]),(v[Te][0].s.c!=Pe.c||v[Te][0].s.r!=Pe.r)&&delete ee.f,ee.f&&(ee.f=""+da(v[Te][1],l,Pe,_,P));break}}me.dense?(n[Pe.r]||(n[Pe.r]=[]),n[Pe.r][Pe.c]=ee):n[x]=ee}},P={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(P.password=s.password);var T,B=[],F=[],L=[],I=[],V=!1,_=[];_.SheetNames=P.snames,_.sharedf=P.sharedf,_.arrayf=P.arrayf,_.names=[],_.XTI=[];var G=0,U=0,A=0,q=[],Y=[],O;P.codepage=1200,Rn(1200);for(var W=!1;t.l<t.length-1;){var z=t.l,H=t.read_shift(2);if(H===0&&G===10)break;var Q=t.l===t.length?0:t.read_shift(2),J=up[H];if(J&&J.f){if(s.bookSheets&&G===133&&H!==133)break;if(G=H,J.r===2||J.r==12){var ie=t.read_shift(2);if(Q-=2,!P.enc&&ie!==H&&((ie&255)<<8|ie>>8)!==H)throw new Error("rt mismatch: "+ie+"!="+H);J.r==12&&(t.l+=10,Q-=10)}var K={};if(H===10?K=J.f(t,Q,P):K=Zq(H,J,t,Q,P),U==0&&[9,521,1033,2057].indexOf(G)===-1)continue;switch(H){case 34:r.opts.Date1904=j.WBProps.date1904=K;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(P.enc||(t.l=0),P.enc=K,!s.password)throw new Error("File is password-protected");if(K.valid==null)throw new Error("Encryption scheme unsupported");if(!K.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=K;break;case 66:var oe=Number(K);switch(oe){case 21010:oe=1200;break;case 32768:oe=1e4;break;case 32769:oe=1252;break}Rn(P.codepage=oe),W=!0;break;case 317:P.rrtabid=K;break;case 25:P.winlocked=K;break;case 439:r.opts.RefreshAll=K;break;case 12:r.opts.CalcCount=K;break;case 16:r.opts.CalcDelta=K;break;case 17:r.opts.CalcIter=K;break;case 13:r.opts.CalcMode=K;break;case 14:r.opts.CalcPrecision=K;break;case 95:r.opts.CalcSaveRecalc=K;break;case 15:P.CalcRefMode=K;break;case 2211:r.opts.FullCalc=K;break;case 129:K.fDialog&&(n["!type"]="dialog"),K.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),K.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:w.push(K);break;case 430:_.push([K]),_[_.length-1].XTI=[];break;case 35:case 547:_[_.length-1].push(K);break;case 24:case 536:O={Name:K.Name,Ref:da(K.rgce,l,null,_,P)},K.itab>0&&(O.Sheet=K.itab-1),_.names.push(O),_[0]||(_[0]=[],_[0].XTI=[]),_[_.length-1].push(K),K.Name=="_xlnm._FilterDatabase"&&K.itab>0&&K.rgce&&K.rgce[0]&&K.rgce[0][0]&&K.rgce[0][0][0]=="PtgArea3d"&&(Y[K.itab-1]={ref:Ot(K.rgce[0][0][1][2])});break;case 22:P.ExternCount=K;break;case 23:_.length==0&&(_[0]=[],_[0].XTI=[]),_[_.length-1].XTI=_[_.length-1].XTI.concat(K),_.XTI=_.XTI.concat(K);break;case 2196:if(P.biff<8)break;O!=null&&(O.Comment=K[1]);break;case 18:n["!protect"]=K;break;case 19:K!==0&&P.WTF&&console.error("Password verifier: "+K);break;case 133:i[K.pos]=K,P.snames.push(K.name);break;case 10:{if(--U)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=Ot(l),s.sheetRows&&s.sheetRows<=l.e.r){var le=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=Ot(l),l.e.r=le}l.e.r++,l.e.c++}B.length>0&&(n["!merges"]=B),F.length>0&&(n["!objects"]=F),L.length>0&&(n["!cols"]=L),I.length>0&&(n["!rows"]=I),j.Sheets.push(k)}u===""?d=n:a[u]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[H]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[K.BIFFVer]||8),P.biffguess=K.BIFFVer==0,K.BIFFVer==0&&K.dt==4096&&(P.biff=5,W=!0,Rn(P.codepage=28591)),P.biff==8&&K.BIFFVer==0&&K.dt==16&&(P.biff=2),U++)break;if(n=s.dense?[]:{},P.biff<8&&!W&&(W=!0,Rn(P.codepage=s.codepage||1252)),P.biff<5||K.BIFFVer==0&&K.dt==4096){u===""&&(u="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:t.l-Q,name:u};i[Se.pos]=Se,P.snames.push(u)}else u=(i[z]||{name:""}).name;K.dt==32&&(n["!type"]="chart"),K.dt==64&&(n["!type"]="macro"),B=[],F=[],P.arrayf=v=[],L=[],I=[],V=!1,k={Hidden:(i[z]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[K.r]||[])[K.c]:n[yt({c:K.c,r:K.r})])&&++K.c,N={ixfe:K.ixfe,XF:w[K.ixfe]||{},v:K.val,t:"n"},A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:K.c,r:K.r},N,s);break;case 5:case 517:N={ixfe:K.ixfe,XF:w[K.ixfe],v:K.val,t:K.t},A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:K.c,r:K.r},N,s);break;case 638:N={ixfe:K.ixfe,XF:w[K.ixfe],v:K.rknum,t:"n"},A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:K.c,r:K.r},N,s);break;case 189:for(var Ee=K.c;Ee<=K.C;++Ee){var ye=K.rkrec[Ee-K.c][0];N={ixfe:ye,XF:w[ye],v:K.rkrec[Ee-K.c][1],t:"n"},A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:Ee,r:K.r},N,s)}break;case 6:case 518:case 1030:{if(K.val=="String"){o=K;break}if(N=Lm(K.val,K.cell.ixfe,K.tt),N.XF=w[N.ixfe],s.cellFormula){var We=K.formula;if(We&&We[0]&&We[0][0]&&We[0][0][0]=="PtgExp"){var fe=We[0][0][1][0],Fe=We[0][0][1][1],ce=yt({r:fe,c:Fe});y[ce]?N.f=""+da(K.formula,l,K.cell,_,P):N.F=((s.dense?(n[fe]||[])[Fe]:n[ce])||{}).F}else N.f=""+da(K.formula,l,K.cell,_,P)}A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D(K.cell,N,s),o=K}break;case 7:case 519:if(o)o.val=K,N=Lm(K,o.cell.ixfe,"s"),N.XF=w[N.ixfe],s.cellFormula&&(N.f=""+da(o.formula,l,o.cell,_,P)),A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D(o.cell,N,s),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(K);var Ce=yt(K[0].s);if(g=s.dense?(n[K[0].s.r]||[])[K[0].s.c]:n[Ce],s.cellFormula&&g){if(!o||!Ce||!g)break;g.f=""+da(K[1],l,K[0],_,P),g.F=Ot(K[0])}}break;case 1212:{if(!s.cellFormula)break;if(x){if(!o)break;y[yt(o.cell)]=K[0],g=s.dense?(n[o.cell.r]||[])[o.cell.c]:n[yt(o.cell)],(g||{}).f=""+da(K[0],l,m,_,P)}}break;case 253:N=Lm(c[K.isst].t,K.ixfe,"s"),c[K.isst].h&&(N.h=c[K.isst].h),N.XF=w[N.ixfe],A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:K.c,r:K.r},N,s);break;case 513:s.sheetStubs&&(N={ixfe:K.ixfe,XF:w[K.ixfe],t:"z"},A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:K.c,r:K.r},N,s));break;case 190:if(s.sheetStubs)for(var ze=K.c;ze<=K.C;++ze){var De=K.ixfe[ze-K.c];N={ixfe:De,XF:w[De],t:"z"},A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:ze,r:K.r},N,s)}break;case 214:case 516:case 4:N=Lm(K.val,K.ixfe,"s"),N.XF=w[N.ixfe],A>0&&(N.z=q[N.ixfe>>8&63]),Zn(N,s,r.opts.Date1904),D({c:K.c,r:K.r},N,s);break;case 0:case 512:U===1&&(l=K);break;case 252:c=K;break;case 1054:if(P.biff==4){q[A++]=K[1];for(var st=0;st<A+163&&bt[st]!=K[1];++st);st>=163&&Di(K[1],A+163)}else Di(K[1],K[0]);break;case 30:{q[A++]=K;for(var Xe=0;Xe<A+163&&bt[Xe]!=K;++Xe);Xe>=163&&Di(K,A+163)}break;case 229:B=B.concat(K);break;case 93:F[K.cmo[0]]=P.lastobj=K;break;case 438:P.lastobj.TxO=K;break;case 127:P.lastobj.ImData=K;break;case 440:for(b=K[0].s.r;b<=K[0].e.r;++b)for(f=K[0].s.c;f<=K[0].e.c;++f)g=s.dense?(n[b]||[])[f]:n[yt({c:f,r:b})],g&&(g.l=K[1]);break;case 2048:for(b=K[0].s.r;b<=K[0].e.r;++b)for(f=K[0].s.c;f<=K[0].e.c;++f)g=s.dense?(n[b]||[])[f]:n[yt({c:f,r:b})],g&&g.l&&(g.l.Tooltip=K[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;g=s.dense?(n[K[0].r]||[])[K[0].c]:n[yt(K[0])];var it=F[K[2]];g||(s.dense?(n[K[0].r]||(n[K[0].r]=[]),g=n[K[0].r][K[0].c]={t:"z"}):g=n[yt(K[0])]={t:"z"},l.e.r=Math.max(l.e.r,K[0].r),l.s.r=Math.min(l.s.r,K[0].r),l.e.c=Math.max(l.e.c,K[0].c),l.s.c=Math.min(l.s.c,K[0].c)),g.c||(g.c=[]),p={a:K[1],t:it.TxO.t},g.c.push(p)}break;case 2173:UH(w[K.ixfe],K.ext);break;case 125:{if(!P.cellStyles)break;for(;K.e>=K.s;)L[K.e--]={width:K.w/256,level:K.level||0,hidden:!!(K.flags&1)},V||(V=!0,Fy(K.w/256)),jl(L[K.e+1])}break;case 520:{var ft={};K.level!=null&&(I[K.r]=ft,ft.level=K.level),K.hidden&&(I[K.r]=ft,ft.hidden=!0),K.hpt&&(I[K.r]=ft,ft.hpt=K.hpt,ft.hpx=kc(K.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||so(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[H]]=K;break;case 161:n["!margins"]||so(n["!margins"]={}),n["!margins"].header=K.header,n["!margins"].footer=K.footer;break;case 574:K.RTL&&(j.Views[0].RTL=!0);break;case 146:C=K;break;case 2198:T=K;break;case 140:S=K;break;case 442:u?k.CodeName=K||k.name:j.WBProps.CodeName=K||"ThisWorkbook";break}}else J||console.error("Missing Info for XLS Record 0x"+H.toString(16)),t.l+=Q}return r.SheetNames=or(i).sort(function(be,Pe){return Number(be)-Number(Pe)}).map(function(be){return i[be].name}),s.bookSheets||(r.Sheets=a),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Y.forEach(function(be,Pe){r.Sheets[r.SheetNames[Pe]]["!autofilter"]=be}),r.Strings=c,r.SSF=zs(bt),P.enc&&(r.Encryption=P.enc),T&&(r.Themes=T),r.Metadata={},S!==void 0&&(r.Metadata.Country=S),_.names.length>0&&(j.Names=_.names),r.Workbook=j,r}var zd={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function tY(t,s,r){var a=lt.find(t,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=Rw(a,ap,zd.DSI);for(var i in n)s[i]=n[i]}catch(u){if(r.WTF)throw u}var l=lt.find(t,"/!SummaryInformation");if(l&&l.size>0)try{var o=Rw(l,np,zd.SI);for(var c in o)s[c]==null&&(s[c]=o[c])}catch(u){if(r.WTF)throw u}s.HeadingPairs&&s.TitlesOfParts&&(wk(s.HeadingPairs,s.TitlesOfParts,s,r),delete s.HeadingPairs,delete s.TitlesOfParts)}function sY(t,s){var r=[],a=[],n=[],i=0,l,o=ow(ap,"n"),c=ow(np,"n");if(t.Props)for(l=or(t.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?a:n).push([l[i],t.Props[l[i]]]);if(t.Custprops)for(l=or(t.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(t.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?a:n).push([l[i],t.Custprops[l[i]]]);var u=[];for(i=0;i<n.length;++i)Tk.indexOf(n[i][0])>-1||jk.indexOf(n[i][0])>-1||n[i][1]!=null&&u.push(n[i]);a.length&&lt.utils.cfb_add(s,"/SummaryInformation",Fw(a,zd.SI,c,np)),(r.length||u.length)&&lt.utils.cfb_add(s,"/DocumentSummaryInformation",Fw(r,zd.DSI,o,ap,u.length?u:null,zd.UDI))}function S5(t,s){s||(s={}),Hy(s),cy(),s.codepage&&oy(s.codepage);var r,a;if(t.FullPaths){if(lt.find(t,"/encryption"))throw new Error("File is password-protected");r=lt.find(t,"!CompObj"),a=lt.find(t,"/Workbook")||lt.find(t,"/Book")}else{switch(s.type){case"base64":t=Ka(tn(t));break;case"binary":t=Ka(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Jr(t,0),a={content:t}}var n,i;if(r&&Jq(r),s.bookProps&&!s.bookSheets)n={};else{var l=Ht?"buffer":"array";if(a&&a.content)n=eY(a.content,s);else if((i=lt.find(t,"PerfectOffice_MAIN"))&&i.content)n=to.to_workbook(i.content,(s.type=l,s));else if((i=lt.find(t,"NativeContent_MAIN"))&&i.content)n=to.to_workbook(i.content,(s.type=l,s));else throw(i=lt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&lt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=fW(t))}var o={};return t.FullPaths&&tY(t,o,s),n.Props=n.Custprops=o,s.bookFiles&&(n.cfb=t),n}function rY(t,s){var r=s||{},a=lt.utils.cfb_new({root:"R"}),n="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":n="/Workbook",r.biff=8;break;case"biff5":n="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return lt.utils.cfb_add(a,n,C5(t,r)),r.biff==8&&(t.Props||t.Custprops)&&sY(t,a),r.biff==8&&t.vbaraw&&gW(a,lt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),a}var bu={0:{f:Ez},1:{f:Iz},2:{f:eG},3:{f:Wz},4:{f:Lz},5:{f:Jz},6:{f:nG},7:{f:qz},8:{f:mG},9:{f:uG},10:{f:cG},11:{f:dG},12:{f:Mz},13:{f:sG},14:{f:zz},15:{f:Uz},16:{f:g5},17:{f:lG},18:{f:Kz},19:{f:Ny},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:lq},40:{},42:{},43:{f:nH},44:{f:rH},45:{f:oH},46:{f:dH},47:{f:cH},48:{},49:{f:_L},50:{},51:{f:VH},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:$k},62:{f:aG},63:{f:ZH},64:{f:PG},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:va,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:SG},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Fz},148:{f:_z,p:16},151:{f:bG},152:{},153:{f:aq},154:{},155:{},156:{f:sq},157:{},158:{},159:{T:1,f:vU},160:{T:-1},161:{T:1,f:Eo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xG},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:HH},336:{T:-1},337:{f:qH,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:rp},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Lk},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:yG},427:{f:vG},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wG},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Rz},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:gG},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:rp},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:dW},633:{T:1},634:{T:-1},635:{T:1,f:oW},636:{T:-1},637:{f:DL},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:zG},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:TG},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},up={6:{f:Rf},10:{f:rl},12:{f:br},13:{f:br},14:{f:dr},15:{f:dr},16:{f:ha},17:{f:dr},18:{f:dr},19:{f:br},20:{f:Lw},21:{f:Lw},23:{f:Lk},24:{f:Uw},25:{f:dr},26:{},27:{},28:{f:T7},29:{},34:{f:dr},35:{f:$w},38:{f:ha},39:{f:ha},40:{f:ha},41:{f:ha},42:{f:dr},43:{f:dr},47:{f:UU},49:{f:s7},51:{f:br},60:{},61:{f:J$},64:{f:dr},65:{f:t7},66:{f:br},77:{},80:{},81:{},82:{},85:{f:br},89:{},90:{},91:{},92:{f:$$},93:{f:R7},94:{},95:{f:dr},96:{},97:{},99:{f:dr},125:{f:$k},128:{f:p7},129:{f:H$},130:{f:br},131:{f:dr},132:{f:dr},133:{f:W$},134:{},140:{f:$7},141:{f:br},144:{},146:{f:W7},151:{},152:{},153:{},154:{},155:{},156:{f:br},157:{},158:{},160:{f:X7},161:{f:G7},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:x7},190:{f:h7},193:{f:rl},197:{},198:{},199:{},200:{},201:{},202:{f:dr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:br},220:{},221:{f:dr},222:{},224:{f:g7},225:{f:L$},226:{f:rl},227:{},229:{f:_7},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:z$},253:{f:a7},255:{f:q$},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_k},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:dr},353:{f:rl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:w7},431:{f:dr},432:{},433:{},434:{},437:{},438:{f:I7},439:{f:dr},440:{f:O7},441:{},442:{f:Ju},443:{},444:{f:br},445:{},446:{},448:{f:rl},449:{f:X$,r:2},450:{f:rl},512:{f:Ow},513:{f:K7},515:{f:v7},516:{f:i7},517:{f:Bw},519:{f:J7},520:{f:Y$},523:{},545:{f:Hw},549:{f:Iw},566:{},574:{f:Z$},638:{f:m7},659:{},1048:{},1054:{f:o7},1084:{},1212:{f:k7},2048:{f:B7},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Om},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:rl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:V7,r:12},2173:{f:$H,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:dr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:C7,r:12},2197:{},2198:{f:DH,r:12},2199:{},2200:{},2201:{},2202:{f:E7,r:12},2203:{f:rl},2204:{},2205:{},2206:{},2207:{},2211:{f:K$},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:br},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:q7},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:H7},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Ow},1:{},2:{f:sU},3:{f:eU},4:{f:Z7},5:{f:Bw},7:{f:aU},8:{},9:{f:Om},11:{},22:{f:br},30:{f:d7},31:{},32:{},33:{f:Hw},36:{},37:{f:Iw},50:{f:nU},62:{},52:{},67:{},68:{f:br},69:{},86:{},126:{},127:{f:Q7},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:iU},223:{},234:{},354:{},421:{},518:{f:Rf},521:{f:Om},536:{f:Uw},547:{f:$w},561:{},579:{},1030:{f:Rf},1033:{f:Om},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ue(t,s,r,a){var n=s;if(!isNaN(n)){var i=a||(r||[]).length||0,l=t.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&vy(r)&&t.push(r)}}function aY(t,s,r,a){var n=(r||[]).length||0;if(n<=8224)return Ue(t,s,r,n);var i=s;if(!isNaN(i)){for(var l=r.parts||[],o=0,c=0,u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,i),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<n;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function tm(t,s,r){return t||(t=Ne(7)),t.write_shift(2,s),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function nY(t,s,r,a){var n=Ne(9);return tm(n,t,s),Ak(r,a||"b",n),n}function iY(t,s,r){var a=Ne(8+2*r.length);return tm(a,t,s),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function lY(t,s,r,a){if(s.v!=null)switch(s.t){case"d":case"n":var n=s.t=="d"?_r(Vs(s.v)):s.v;n==(n|0)&&n>=0&&n<65536?Ue(t,2,rU(r,a,n)):Ue(t,3,tU(r,a,n));return;case"b":case"e":Ue(t,5,nY(r,a,s.v,s.t));return;case"s":case"str":Ue(t,4,iY(r,a,(s.v||"").slice(0,255)));return}Ue(t,1,tm(null,r,a))}function oY(t,s,r,a){var n=Array.isArray(s),i=es(s["!ref"]||"A1"),l,o="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=Ot(i)}for(var u=i.s.r;u<=i.e.r;++u){o=mr(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=er(d)),l=c[d]+o;var m=n?(s[u]||[])[d]:s[l];m&&lY(t,m,u,d)}}}function cY(t,s){for(var r=s||{},a=Ba(),n=0,i=0;i<t.SheetNames.length;++i)t.SheetNames[i]==r.sheet&&(n=i);if(n==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ue(a,r.biff==4?1033:r.biff==3?521:9,_y(t,16,r)),oY(a,t.Sheets[t.SheetNames[n]],n,r),Ue(a,10),a.end()}function dY(t,s,r){Ue(t,49,r7({sz:12,name:"Arial"},r))}function uY(t,s,r){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)s[n]!=null&&Ue(t,1054,c7(n,s[n],r))})}function mY(t,s){var r=Ne(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ue(t,2151,r),r=Ne(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Ok(es(s["!ref"]||"A1"),r),r.write_shift(4,4),Ue(t,2152,r)}function xY(t,s){for(var r=0;r<16;++r)Ue(t,224,Mw({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(a){Ue(t,224,Mw(a,0,s))})}function hY(t,s){for(var r=0;r<s["!links"].length;++r){var a=s["!links"][r];Ue(t,440,M7(a)),a[1].Tooltip&&Ue(t,2048,L7(a))}delete s["!links"]}function fY(t,s){if(s){var r=0;s.forEach(function(a,n){++r<=256&&a&&Ue(t,125,z7(ih(n,a),n))})}}function gY(t,s,r,a,n){var i=16+Il(n.cellXfs,s,n);if(s.v==null&&!s.bf){Ue(t,513,bo(r,a,i));return}if(s.bf)Ue(t,6,HV(s,r,a,n,i));else switch(s.t){case"d":case"n":var l=s.t=="d"?_r(Vs(s.v)):s.v;Ue(t,515,j7(r,a,l,i));break;case"b":case"e":Ue(t,517,y7(r,a,s.v,i,n,s.t));break;case"s":case"str":if(n.bookSST){var o=By(n.Strings,s.v,n.revStrings);Ue(t,253,n7(r,a,o,i))}else Ue(t,516,l7(r,a,(s.v||"").slice(0,255),i,n));break;default:Ue(t,513,bo(r,a,i))}}function pY(t,s,r){var a=Ba(),n=r.SheetNames[t],i=r.Sheets[n]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[t]||{},c=Array.isArray(i),u=s.biff==8,d,m="",x=[],g=es(i["!ref"]||"A1"),p=u?65536:16384;if(g.e.c>255||g.e.r>=p){if(s.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,p-1)}Ue(a,2057,_y(r,16,s)),Ue(a,13,pn(1)),Ue(a,12,pn(100)),Ue(a,15,ka(!0)),Ue(a,17,ka(!1)),Ue(a,16,go(.001)),Ue(a,95,ka(!0)),Ue(a,42,ka(!1)),Ue(a,43,ka(!1)),Ue(a,130,pn(1)),Ue(a,128,b7()),Ue(a,131,ka(!1)),Ue(a,132,ka(!1)),u&&fY(a,i["!cols"]),Ue(a,512,u7(g,s)),u&&(i["!links"]=[]);for(var f=g.s.r;f<=g.e.r;++f){m=mr(f);for(var b=g.s.c;b<=g.e.c;++b){f===g.s.r&&(x[b]=er(b)),d=x[b]+m;var y=c?(i[f]||[])[b]:i[d];y&&(gY(a,y,f,b,s),u&&y.l&&i["!links"].push([d,y.l]))}}var v=o.CodeName||o.name||n;return u&&Ue(a,574,e7((l.Views||[])[0])),u&&(i["!merges"]||[]).length&&Ue(a,229,A7(i["!merges"])),u&&hY(a,i),Ue(a,442,Rk(v)),u&&mY(a,i),Ue(a,10),a.end()}function bY(t,s,r){var a=Ba(),n=(t||{}).Workbook||{},i=n.Sheets||[],l=n.WBProps||{},o=r.biff==8,c=r.biff==5;if(Ue(a,2057,_y(t,5,r)),r.bookType=="xla"&&Ue(a,135),Ue(a,225,o?pn(1200):null),Ue(a,193,y$(2)),c&&Ue(a,191),c&&Ue(a,192),Ue(a,226),Ue(a,92,U$("SheetJS",r)),Ue(a,66,pn(o?1200:1252)),o&&Ue(a,353,pn(0)),o&&Ue(a,448),Ue(a,317,Y7(t.SheetNames.length)),o&&t.vbaraw&&Ue(a,211),o&&t.vbaraw){var u=l.CodeName||"ThisWorkbook";Ue(a,442,Rk(u))}Ue(a,156,pn(17)),Ue(a,25,ka(!1)),Ue(a,18,ka(!1)),Ue(a,19,pn(0)),o&&Ue(a,431,ka(!1)),o&&Ue(a,444,pn(0)),Ue(a,61,Q$()),Ue(a,64,ka(!1)),Ue(a,141,pn(0)),Ue(a,34,ka(XG(t)=="true")),Ue(a,14,ka(!0)),o&&Ue(a,439,ka(!1)),Ue(a,218,pn(0)),dY(a,t,r),uY(a,t.SSF,r),xY(a,r),o&&Ue(a,352,ka(!1));var d=a.end(),m=Ba();o&&Ue(m,140,U7()),o&&r.Strings&&aY(m,252,G$(r.Strings)),Ue(m,10);var x=m.end(),g=Ba(),p=0,f=0;for(f=0;f<t.SheetNames.length;++f)p+=(o?12:11)+(o?2:1)*t.SheetNames[f].length;var b=d.length+p+x.length;for(f=0;f<t.SheetNames.length;++f){var y=i[f]||{};Ue(g,133,V$({pos:b,hs:y.Hidden||0,dt:0,name:t.SheetNames[f]},r)),b+=s[f].length}var v=g.end();if(p!=v.length)throw new Error("BS8 "+p+" != "+v.length);var N=[];return d.length&&N.push(d),v.length&&N.push(v),x.length&&N.push(x),$r(N)}function yY(t,s){var r=s||{},a=[];t&&!t.SSF&&(t.SSF=zs(bt)),t&&t.SSF&&(Kc(),Zx(t.SSF),r.revssf=th(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Wy(r),r.cellXfs=[],Il(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var n=0;n<t.SheetNames.length;++n)a[a.length]=pY(n,r,t);return a.unshift(bY(t,a,r)),$r(a)}function C5(t,s){for(var r=0;r<=t.SheetNames.length;++r){var a=t.Sheets[t.SheetNames[r]];if(!(!a||!a["!ref"])){var n=$a(a["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=s||{};switch(i.biff||2){case 8:case 5:return yY(t,s);case 4:case 3:case 2:return cY(t,s)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Qw(t,s){var r=s||{},a=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var n=t.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),l=n.index,o=i&&i.index||t.length,c=rL(t.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,m=0,x=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(l=0;l<c.length;++l){var f=c[l].trim(),b=f.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=f.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var v=y[o].trim();if(v.match(/<t[dh]/i)){for(var N=v,S=0;N.charAt(0)=="<"&&(S=N.indexOf(">"))>-1;)N=N.slice(S+1);for(var w=0;w<p.length;++w){var C=p[w];C.s.c==d&&C.s.r<u&&u<=C.e.r&&(d=C.e.c+1,w=-1)}var j=Et(v.slice(0,v.indexOf(">")));x=j.colspan?+j.colspan:1,((m=+j.rowspan)>1||x>1)&&p.push({s:{r:u,c:d},e:{r:u+(m||1)-1,c:d+x-1}});var k=j.t||j["data-t"]||"";if(!N.length){d+=x;continue}if(N=K4(N),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!N.length){d+=x;continue}var E={t:"s",v:N};r.raw||!N.trim().length||k=="s"||(N==="TRUE"?E={t:"b",v:!0}:N==="FALSE"?E={t:"b",v:!1}:isNaN(In(N))?isNaN(Sc(N).getDate())||(E={t:"d",v:Vs(N)},r.cellDates||(E={t:"n",v:_r(E.v)}),E.z=r.dateNF||bt[14]):E={t:"n",v:In(N)}),r.dense?(a[u]||(a[u]=[]),a[u][d]=E):a[yt({r:u,c:d})]=E,d+=x}}}}return a["!ref"]=Ot(g),p.length&&(a["!merges"]=p),a}function vY(t,s,r,a){for(var n=t["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var o=0,c=0,u=0;u<n.length;++u)if(!(n[u].s.r>r||n[u].s.c>l)&&!(n[u].e.r<r||n[u].e.c<l)){if(n[u].s.r<r||n[u].s.c<l){o=-1;break}o=n[u].e.r-n[u].s.r+1,c=n[u].e.c-n[u].s.c+1;break}if(!(o<0)){var d=yt({r,c:l}),m=a.dense?(t[r]||[])[l]:t[d],x=m&&m.v!=null&&(m.h||py(m.w||(Vi(m),m.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),a.editable?x='<span contenteditable="true">'+x+"</span>":m&&(g["data-t"]=m&&m.t||"z",m.v!=null&&(g["data-v"]=m.v),m.z!=null&&(g["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+m.l.Target+'">'+x+"</a>")),g.id=(a.id||"sjs")+"-"+d,i.push($e("td",x,g))}}var p="<tr>";return p+i.join("")+"</tr>"}var jY='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',wY="</body></html>";function NY(t,s){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Dl(Qw(r[0],s),s);var a=Gy();return r.forEach(function(n,i){qy(a,Qw(n,s),"Sheet"+(i+1))}),a}function SY(t,s,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function k5(t,s){var r=s||{},a=r.header!=null?r.header:jY,n=r.footer!=null?r.footer:wY,i=[a],l=$a(t["!ref"]);r.dense=Array.isArray(t),i.push(SY(t,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(vY(t,l,o,r));return i.push("</table>"+n),i.join("")}function E5(t,s,r){var a=r||{},n=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var l=typeof a.origin=="string"?tr(a.origin):a.origin;n=l.r,i=l.c}var o=s.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:n,c:i}};if(t["!ref"]){var d=$a(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),n==-1&&(u.e.r=n=d.e.r+1)}var m=[],x=0,g=t["!rows"]||(t["!rows"]=[]),p=0,f=0,b=0,y=0,v=0,N=0;for(t["!cols"]||(t["!cols"]=[]);p<o.length&&f<c;++p){var S=o[p];if(Zw(S)){if(a.display)continue;g[f]={hidden:!0}}var w=S.children;for(b=y=0;b<w.length;++b){var C=w[b];if(!(a.display&&Zw(C))){var j=C.hasAttribute("data-v")?C.getAttribute("data-v"):C.hasAttribute("v")?C.getAttribute("v"):K4(C.innerHTML),k=C.getAttribute("data-z")||C.getAttribute("z");for(x=0;x<m.length;++x){var E=m[x];E.s.c==y+i&&E.s.r<f+n&&f+n<=E.e.r&&(y=E.e.c+1-i,x=-1)}N=+C.getAttribute("colspan")||1,((v=+C.getAttribute("rowspan")||1)>1||N>1)&&m.push({s:{r:f+n,c:y+i},e:{r:f+n+(v||1)-1,c:y+i+(N||1)-1}});var R={t:"s",v:j},D=C.getAttribute("data-t")||C.getAttribute("t")||"";j!=null&&(j.length==0?R.t=D||"z":a.raw||j.trim().length==0||D=="s"||(j==="TRUE"?R={t:"b",v:!0}:j==="FALSE"?R={t:"b",v:!1}:isNaN(In(j))?isNaN(Sc(j).getDate())||(R={t:"d",v:Vs(j)},a.cellDates||(R={t:"n",v:_r(R.v)}),R.z=a.dateNF||bt[14]):R={t:"n",v:In(j)})),R.z===void 0&&k!=null&&(R.z=k);var P="",T=C.getElementsByTagName("A");if(T&&T.length)for(var B=0;B<T.length&&!(T[B].hasAttribute("href")&&(P=T[B].getAttribute("href"),P.charAt(0)!="#"));++B);P&&P.charAt(0)!="#"&&(R.l={Target:P}),a.dense?(t[f+n]||(t[f+n]=[]),t[f+n][y+i]=R):t[yt({c:y+i,r:f+n})]=R,u.e.c<y+i&&(u.e.c=y+i),y+=N}}++f}return m.length&&(t["!merges"]=(t["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,f-1+n),t["!ref"]=Ot(u),f>=c&&(t["!fullref"]=Ot((u.e.r=o.length-p+f-1+n,u))),t}function P5(t,s){var r=s||{},a=r.dense?[]:{};return E5(a,t,s)}function CY(t,s){return Dl(P5(t,s),s)}function Zw(t){var s="",r=kY(t);return r&&(s=r(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function kY(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function EY(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Xt(s.replace(/<[^>]*>/g,""));return[r]}var eN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function T5(t,s){var r=s||{},a=by(t),n=[],i,l,o={name:""},c="",u=0,d,m,x={},g=[],p=r.dense?[]:{},f,b,y={value:""},v="",N=0,S=[],w=-1,C=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,E={},R=[],D={},P=0,T=0,B=[],F=1,L=1,I=[],V={Names:[]},_={},G=["",""],U=[],A={},q="",Y=0,O=!1,W=!1,z=0;for(mu.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");f=mu.exec(a);)switch(f[3]=f[3].replace(/_.*$/,"")){case"table":case"工作表":f[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?p["!ref"]=Ot(j):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(p["!fullref"]=p["!ref"],j.e.r=r.sheetRows-1,p["!ref"]=Ot(j)),R.length&&(p["!merges"]=R),B.length&&(p["!rows"]=B),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),x[d.name]=p,W=!1):f[0].charAt(f[0].length-2)!=="/"&&(d=Et(f[0],!1),w=C=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,p=r.dense?[]:{},R=[],B=[],W=!0);break;case"table-row-group":f[1]==="/"?--k:++k;break;case"table-row":case"行":if(f[1]==="/"){w+=F,F=1;break}if(m=Et(f[0],!1),m.行号?w=m.行号-1:w==-1&&(w=0),F=+m["number-rows-repeated"]||1,F<10)for(z=0;z<F;++z)k>0&&(B[w+z]={level:k});C=-1;break;case"covered-table-cell":f[1]!=="/"&&++C,r.sheetStubs&&(r.dense?(p[w]||(p[w]=[]),p[w][C]={t:"z"}):p[yt({r:w,c:C})]={t:"z"}),v="",S=[];break;case"table-cell":case"数据":if(f[0].charAt(f[0].length-2)==="/")++C,y=Et(f[0],!1),L=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=Kw(Xt(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Xt(y["string-value"]||""),r.dense?(p[w]||(p[w]=[]),p[w][C]=b):p[yt({r:w,c:C})]=b),C+=L-1;else if(f[1]!=="/"){++C,v="",N=0,S=[],L=1;var H=F?w+F-1:w;if(C>j.e.c&&(j.e.c=C),C<j.s.c&&(j.s.c=C),w<j.s.r&&(j.s.r=w),H>j.e.r&&(j.e.r=H),y=Et(f[0],!1),U=[],A={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Xt(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(P=parseInt(y["number-matrix-rows-spanned"],10)||0,T=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:w,c:C},e:{r:w+P-1,c:C+T-1}},b.F=Ot(D),I.push([D,b.F])),y.formula)b.f=Kw(y.formula);else for(z=0;z<I.length;++z)w>=I[z][0].s.r&&w<=I[z][0].e.r&&C>=I[z][0].s.c&&C<=I[z][0].e.c&&(b.F=I[z][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(P=parseInt(y["number-rows-spanned"],10)||0,T=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:w,c:C},e:{r:w+P-1,c:C+T-1}},R.push(D)),y["number-columns-repeated"]&&(L=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Hs(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Vs(y["date-value"]),r.cellDates||(b.t="n",b.v=_r(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=eL(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=sh(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(v=Xt(y["string-value"]),S=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(O=!1,b.t==="s"&&(b.v=v||"",S.length&&(b.R=S),O=N==0),_.Target&&(b.l=_),U.length>0&&(b.c=U,U=[]),v&&r.cellText!==!1&&(b.w=v),O&&(b.t="z",delete b.v),(!O||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=w))for(var Q=0;Q<F;++Q){if(L=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(p[w+Q]||(p[w+Q]=[]),p[w+Q][C]=Q==0?b:zs(b);--L>0;)p[w+Q][C+L]=zs(b);else for(p[yt({r:w+Q,c:C})]=b;--L>0;)p[yt({r:w+Q,c:C+L})]=zs(b);j.e.c<=C&&(j.e.c=C)}L=parseInt(y["number-columns-repeated"]||"1",10),C+=L-1,L=0,b={},v="",S=[]}_={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(f[1]==="/"){if((i=n.pop())[0]!==f[3])throw"Bad state: "+i}else f[0].charAt(f[0].length-2)!=="/"&&n.push([f[3],!0]);break;case"annotation":if(f[1]==="/"){if((i=n.pop())[0]!==f[3])throw"Bad state: "+i;A.t=v,S.length&&(A.R=S),A.a=q,U.push(A)}else f[0].charAt(f[0].length-2)!=="/"&&n.push([f[3],!1]);q="",Y=0,v="",N=0,S=[];break;case"creator":f[1]==="/"?q=a.slice(Y,f.index):Y=f.index+f[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(f[1]==="/"){if((i=n.pop())[0]!==f[3])throw"Bad state: "+i}else f[0].charAt(f[0].length-2)!=="/"&&n.push([f[3],!1]);v="",N=0,S=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(f[1]==="/"){if(E[o.name]=c,(i=n.pop())[0]!==f[3])throw"Bad state: "+i}else f[0].charAt(f[0].length-2)!=="/"&&(c="",o=Et(f[0],!1),n.push([f[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Et(f[0],!1),c+=eN[f[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Et(f[0],!1),c+=eN[f[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(f[0].slice(-2)==="/>")break;if(f[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(u,f.index);break}else u=f.index+f[0].length;break;case"named-range":l=Et(f[0],!1),G=Ff(l["cell-range-address"]);var J={Name:l.name,Ref:G[0]+"!"+G[1]};W&&(J.Sheet=g.length),V.Names.push(J);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(f[1]==="/"&&(!y||!y["string-value"])){var ie=EY(a.slice(N,f.index));v=(v.length>0?v+`
`:"")+ie[0]}else Et(f[0],!1),N=f.index+f[0].length;break;case"s":break;case"database-range":if(f[1]==="/")break;try{G=Ff(Et(f[0])["target-range-address"]),x[G[0]]["!autofilter"]={ref:G[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(f[1]!=="/"){if(_=Et(f[0],!1),!_.href)break;_.Target=Xt(_.href),delete _.href,_.Target.charAt(0)=="#"&&_.Target.indexOf(".")>-1?(G=Ff(_.Target.slice(1)),_.Target="#"+G[0]+"!"+G[1]):_.Target.match(/^\.\.[\\\/]/)&&(_.Target=_.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(f[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(f)}}var K={Sheets:x,SheetNames:g,Workbook:V};return r.bookSheets&&delete K.Sheets,K}function tN(t,s){s=s||{},gn(t,"META-INF/manifest.xml")&&e$(pr(t,"META-INF/manifest.xml"),s);var r=Xa(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=T5(ks(r),s);return gn(t,"meta.xml")&&(a.Props=yk(pr(t,"meta.xml"))),a}function sN(t,s){return T5(t,s)}var PY=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+uu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return hr+s}}(),rN=function(){var t=function(i){return vs(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,l,o){var c=[];c.push('      <table:table table:name="'+vs(l.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,m=$a(i["!ref"]||"A1"),x=i["!merges"]||[],g=0,p=Array.isArray(i);if(i["!cols"])for(d=0;d<=m.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var f="",b=i["!rows"]||[];for(u=0;u<m.s.r;++u)f=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+f+`></table:table-row>
`);for(;u<=m.e.r;++u){for(f=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+f+`>
`),d=0;d<m.s.c;++d)c.push(s);for(;d<=m.e.c;++d){var y=!1,v={},N="";for(g=0;g!=x.length;++g)if(!(x[g].s.c>d)&&!(x[g].s.r>u)&&!(x[g].e.c<d)&&!(x[g].e.r<u)){(x[g].s.c!=d||x[g].s.r!=u)&&(y=!0),v["table:number-columns-spanned"]=x[g].e.c-x[g].s.c+1,v["table:number-rows-spanned"]=x[g].e.r-x[g].s.r+1;break}if(y){c.push(r);continue}var S=yt({r:u,c:d}),w=p?(i[u]||[])[d]:i[S];if(w&&w.f&&(v["table:formula"]=vs(YV(w.f)),w.F&&w.F.slice(0,S.length)==S)){var C=$a(w.F);v["table:number-matrix-columns-spanned"]=C.e.c-C.s.c+1,v["table:number-matrix-rows-spanned"]=C.e.r-C.s.r+1}if(!w){c.push(s);continue}switch(w.t){case"b":N=w.v?"TRUE":"FALSE",v["office:value-type"]="boolean",v["office:boolean-value"]=w.v?"true":"false";break;case"n":N=w.w||String(w.v||0),v["office:value-type"]="float",v["office:value"]=w.v||0;break;case"s":case"str":N=w.v==null?"":w.v,v["office:value-type"]="string";break;case"d":N=w.w||Vs(w.v).toISOString(),v["office:value-type"]="date",v["office:date-value"]=Vs(w.v).toISOString(),v["table:style-name"]="ce1";break;default:c.push(s);continue}var j=t(N);if(w.l&&w.l.Target){var k=w.l.Target;k=k.charAt(0)=="#"?"#"+KV(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),j=$e("text:a",j,{"xlink:href":k.replace(/&/g,"&amp;")})}c.push("          "+$e("table:table-cell",$e("text:p",j,{}),v)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var m=u["!cols"][d];if(m.width==null&&m.wpx==null&&m.wch==null)continue;jl(m),m.ods=o;var x=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var m=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var c=[hr],u=uu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=uu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(bk().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),n(c,l),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var m=0;m!=l.SheetNames.length;++m)c.push(a(l.Sheets[l.SheetNames[m]],l,m));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function _5(t,s){if(s.bookType=="fods")return rN(t,s);var r=hy(),a="",n=[],i=[];return a="mimetype",Bt(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",Bt(r,a,rN(t,s)),n.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",Bt(r,a,PY(t,s)),n.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",Bt(r,a,hr+bk()),n.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",Bt(r,a,r$(i)),n.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",Bt(r,a,t$(n)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function yo(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function mp(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ks(Fl(t))}function TY(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ka(ii(t))}function _Y(t,s){e:for(var r=0;r<=t.length-s.length;++r){for(var a=0;a<s.length;++a)if(t[r+a]!=s[a])continue e;return!0}return!1}function Nl(t){var s=t.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(s),a=0;return t.forEach(function(n){r.set(n,a),a+=n.length}),r}function aN(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function AY(t,s){for(var r=(t[s+15]&127)<<7|t[s+14]>>1,a=t[s+14]&1,n=s+13;n>=s;--n)a=a*256+t[n];return(t[s+15]&128?-a:a)*Math.pow(10,r-6176)}function RY(t,s,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,n=r/Math.pow(10,a-6176);t[s+15]|=a>>7,t[s+14]|=(a&127)<<1;for(var i=0;n>=1;++i,n/=256)t[s+i]=n&255;t[s+15]|=r>=0?0:128}function yu(t,s){var r=s?s[0]:0,a=t[r]&127;e:if(t[r++]>=128&&(a|=(t[r]&127)<<7,t[r++]<128||(a|=(t[r]&127)<<14,t[r++]<128)||(a|=(t[r]&127)<<21,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return s&&(s[0]=r),a}function gs(t){var s=new Uint8Array(7);s[0]=t&127;var r=1;e:if(t>127){if(s[r-1]|=128,s[r]=t>>7&127,++r,t<=16383||(s[r-1]|=128,s[r]=t>>14&127,++r,t<=2097151)||(s[r-1]|=128,s[r]=t>>21&127,++r,t<=268435455)||(s[r-1]|=128,s[r]=t/256>>>21&127,++r,t<=34359738367)||(s[r-1]|=128,s[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;s[r-1]|=128,s[r]=t/16777216>>>21&127,++r}return s.slice(0,r)}function lr(t){var s=0,r=t[s]&127;e:if(t[s++]>=128){if(r|=(t[s]&127)<<7,t[s++]<128||(r|=(t[s]&127)<<14,t[s++]<128)||(r|=(t[s]&127)<<21,t[s++]<128))break e;r|=(t[s]&127)<<28}return r}function ss(t){for(var s=[],r=[0];r[0]<t.length;){var a=r[0],n=yu(t,r),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var c=r[0];t[r[0]++]>=128;);o=t.slice(c,r[0])}break;case 5:l=4,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=yu(t,r),o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(a))}var u={data:o,type:i};s[n]==null?s[n]=[u]:s[n].push(u)}return s}function Xr(t){var s=[];return t.forEach(function(r,a){r.forEach(function(n){n.data&&(s.push(gs(a*8+n.type)),n.type==2&&s.push(gs(n.data.length)),s.push(n.data))})}),Nl(s)}function Uy(t,s){return(t==null?void 0:t.map(function(r){return s(r.data)}))||[]}function xn(t){for(var s,r=[],a=[0];a[0]<t.length;){var n=yu(t,a),i=ss(t.slice(a[0],a[0]+n));a[0]+=n;var l={id:lr(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=ss(o.data),u=lr(c[3][0].data);l.messages.push({meta:c,data:t.slice(a[0],a[0]+u)}),a[0]+=u}),(s=i[3])!=null&&s[0]&&(l.merge=lr(i[3][0].data)>>>0>0),r.push(l)}return r}function Ho(t){var s=[];return t.forEach(function(r){var a=[];a[1]=[{data:gs(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:gs(+!!r.merge),type:0}]);var n=[];r.messages.forEach(function(l){n.push(l.data),l.meta[3]=[{type:0,data:gs(l.data.length)}],a[2].push({data:Xr(l.meta),type:2})});var i=Xr(a);s.push(gs(i.length)),s.push(i),n.forEach(function(l){return s.push(l)})}),Nl(s)}function FY(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],a=yu(s,r),n=[];r[0]<s.length;){var i=s[r[0]]&3;if(i==0){var l=s[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=s[r[0]],o>1&&(l|=s[r[0]+1]<<8),o>2&&(l|=s[r[0]+2]<<16),o>3&&(l|=s[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}n.push(s.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,u=0;if(i==1?(u=(s[r[0]]>>2&7)+4,c=(s[r[0]++]&224)<<3,c|=s[r[0]++]):(u=(s[r[0]++]>>2)+1,i==2?(c=s[r[0]]|s[r[0]+1]<<8,r[0]+=2):(c=(s[r[0]]|s[r[0]+1]<<8|s[r[0]+2]<<16|s[r[0]+3]<<24)>>>0,r[0]+=4)),n=[Nl(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(n.push(n[0].slice(-c)),u-=c;u>=n[n.length-1].length;)n.push(n[n.length-1]),u-=n[n.length-1].length;n.push(n[0].slice(-c,-c+u))}}var d=Nl(n);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function hn(t){for(var s=[],r=0;r<t.length;){var a=t[r++],n=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,s.push(FY(a,t.slice(r,r+n))),r+=n}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Nl(s)}function Wo(t){for(var s=[],r=0;r<t.length;){var a=Math.min(t.length-r,268435455),n=new Uint8Array(4);s.push(n);var i=gs(a),l=i.length;s.push(i),a<=60?(l++,s.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,s.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,s.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,s.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,s.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),s.push(t.slice(r,r+a)),l+=a,n[0]=0,n[1]=l&255,n[2]=l>>8&255,n[3]=l>>16&255,r+=a}return Nl(s)}function DY(t,s,r,a){var n=yo(t),i=n.getUint32(4,!0),l=(a>1?12:8)+aN(i&(a>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=aN(i&(a>1?12288:4096))*4,i&16&&(c=n.getUint32(l,!0),l+=4),i&32&&(u=n.getFloat64(l,!0),l+=8),i&64&&(d.setTime(d.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var m;switch(t[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:s[c]};break;case 5:m={t:"d",v:d};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else if(c>-1)m={t:"s",v:s[c]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return m}function IY(t,s,r){var a=yo(t),n=a.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);n&1&&(c=AY(t,i),i+=16),n&2&&(u=a.getFloat64(i,!0),i+=8),n&4&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=a.getUint32(i,!0),i+=4),n&16&&(l=a.getUint32(i,!0),i+=4);var m;switch(t[1]){case 0:break;case 2:m={t:"n",v:c};break;case 3:m={t:"s",v:s[o]};break;case 5:m={t:"d",v:d};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(l>-1)m={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)));break;case 10:m={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)))}return m}function If(t,s){var r=new Uint8Array(32),a=yo(r),n=12,i=0;switch(r[0]=5,t.t){case"n":r[1]=2,RY(r,n,t.v),i|=1,n+=16;break;case"b":r[1]=6,a.setFloat64(n,t.v?1:0,!0),i|=2,n+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,a.setUint32(n,s.indexOf(t.v),!0),i|=8,n+=4;break;default:throw"unsupported cell type "+t.t}return a.setUint32(8,i,!0),r.slice(0,n)}function Of(t,s){var r=new Uint8Array(32),a=yo(r),n=12,i=0;switch(r[0]=3,t.t){case"n":r[2]=2,a.setFloat64(n,t.v,!0),i|=32,n+=8;break;case"b":r[2]=6,a.setFloat64(n,t.v?1:0,!0),i|=32,n+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,a.setUint32(n,s.indexOf(t.v),!0),i|=16,n+=4;break;default:throw"unsupported cell type "+t.t}return a.setUint32(4,i,!0),r.slice(0,n)}function OY(t,s,r){switch(t[0]){case 0:case 1:case 2:case 3:return DY(t,s,r,t[0]);case 5:return IY(t,s,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function oa(t){var s=ss(t);return yu(s[1][0].data)}function nN(t,s){var r=ss(s.data),a=lr(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(l){var o=ss(l.data),c=lr(o[1][0].data)>>>0;switch(a){case 1:i[c]=mp(o[3][0].data);break;case 8:{var u=t[oa(o[9][0].data)][0],d=ss(u.data),m=t[oa(d[1][0].data)][0],x=lr(m.meta[1][0].data);if(x!=2001)throw new Error("2000 unexpected reference to ".concat(x));var g=ss(m.data);i[c]=g[3].map(function(p){return mp(p.data)}).join("")}break}}),i}function MY(t,s){var r,a,n,i,l,o,c,u,d,m,x,g,p,f,b=ss(t),y=lr(b[1][0].data)>>>0,v=lr(b[2][0].data)>>>0,N=((a=(r=b[8])==null?void 0:r[0])==null?void 0:a.data)&&lr(b[8][0].data)>0||!1,S,w;if((i=(n=b[7])==null?void 0:n[0])!=null&&i.data&&s!=0)S=(o=(l=b[7])==null?void 0:l[0])==null?void 0:o.data,w=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((m=(d=b[4])==null?void 0:d[0])!=null&&m.data&&s!=1)S=(g=(x=b[4])==null?void 0:x[0])==null?void 0:g.data,w=(f=(p=b[3])==null?void 0:p[0])==null?void 0:f.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var C=N?4:1,j=yo(S),k=[],E=0;E<S.length/2;++E){var R=j.getUint16(E*2,!0);R<65535&&k.push([E,R])}if(k.length!=v)throw"Expected ".concat(v," cells, found ").concat(k.length);var D=[];for(E=0;E<k.length-1;++E)D[k[E][0]]=w.subarray(k[E][1]*C,k[E+1][1]*C);return k.length>=1&&(D[k[k.length-1][0]]=w.subarray(k[k.length-1][1]*C)),{R:y,cells:D}}function BY(t,s){var r,a=ss(s.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?lr(a[7][0].data)>>>0>0?1:0:-1,i=Uy(a[5],function(l){return MY(l,n)});return{nrows:lr(a[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,u){if(l[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));l[o.R][u]=c}),l},[])}}function LY(t,s,r){var a,n=ss(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(lr(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(lr(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=Ot(i);var l=ss(n[4][0].data),o=nN(t,t[oa(l[4][0].data)][0]),c=(a=l[17])!=null&&a[0]?nN(t,t[oa(l[17][0].data)][0]):[],u=ss(l[3][0].data),d=0;u[1].forEach(function(m){var x=ss(m.data),g=t[oa(x[2][0].data)][0],p=lr(g.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var f=BY(t,g);f.data.forEach(function(b,y){b.forEach(function(v,N){var S=yt({r:d+y,c:N}),w=OY(v,o,c);w&&(r[S]=w)})}),d+=f.nrows})}function $Y(t,s){var r=ss(s.data),a={"!ref":"A1"},n=t[oa(r[2][0].data)],i=lr(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return LY(t,n[0],a),a}function UY(t,s){var r,a=ss(s.data),n={name:(r=a[1])!=null&&r[0]?mp(a[1][0].data):"",sheets:[]},i=Uy(a[2],oa);return i.forEach(function(l){t[l].forEach(function(o){var c=lr(o.meta[1][0].data);c==6e3&&n.sheets.push($Y(t,o))})}),n}function HY(t,s){var r=Gy(),a=ss(s.data),n=Uy(a[1],oa);if(n.forEach(function(i){t[i].forEach(function(l){var o=lr(l.meta[1][0].data);if(o==2){var c=UY(t,l);c.sheets.forEach(function(u,d){qy(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Mf(t){var s,r,a,n,i={},l=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=hn(c.content)}catch(m){return console.log("?? "+c.content.length+" "+(m.message||m))}var d;try{d=xn(u)}catch(m){return console.log("## "+(m.message||m))}d.forEach(function(m){i[m.id]=m.messages,l.push(m.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(a=(r=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&lr(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(u){var d=lr(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return HY(i,o)}function WY(t,s,r){var a,n,i,l;if(!((a=t[6])!=null&&a[0])||!((n=t[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=t[8])==null?void 0:i[0])==null?void 0:l.data)&&lr(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=yo(t[7][0].data),d=0,m=[],x=yo(t[4][0].data),g=0,p=[],f=0;f<s.length;++f){if(s[f]==null){u.setUint16(f*2,65535,!0),x.setUint16(f*2,65535);continue}u.setUint16(f*2,d,!0),x.setUint16(f*2,g,!0);var b,y;switch(typeof s[f]){case"string":b=If({t:"s",v:s[f]},r),y=Of({t:"s",v:s[f]},r);break;case"number":b=If({t:"n",v:s[f]},r),y=Of({t:"n",v:s[f]},r);break;case"boolean":b=If({t:"b",v:s[f]},r),y=Of({t:"b",v:s[f]},r);break;default:throw new Error("Unsupported value "+s[f])}m.push(b),d+=b.length,p.push(y),g+=y.length,++c}for(t[2][0].data=gs(c);f<t[7][0].data.length/2;++f)u.setUint16(f*2,65535,!0),x.setUint16(f*2,65535,!0);return t[6][0].data=Nl(m),t[3][0].data=Nl(p),c}function VY(t,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=$a(r["!ref"]);a.s.r=a.s.c=0;var n=!1;a.e.c>9&&(n=!0,a.e.c=9),a.e.r>49&&(n=!0,a.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(Ot(a)));var i=sx(r,{range:a,header:1}),l=["~Sh33tJ5~"];i.forEach(function(q){return q.forEach(function(Y){typeof Y=="string"&&l.push(Y)})});var o={},c=[],u=lt.read(s.numbers,{type:"base64"});u.FileIndex.map(function(q,Y){return[q,u.FullPaths[Y]]}).forEach(function(q){var Y=q[0],O=q[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var W=Y.content,z=hn(W),H=xn(z);H.forEach(function(Q){c.push(Q.id),o[Q.id]={deps:[],location:O,type:lr(Q.messages[0].meta[1][0].data)}})}}),c.sort(function(q,Y){return q-Y});var d=c.filter(function(q){return q>1}).map(function(q){return[q,gs(q)]});u.FileIndex.map(function(q,Y){return[q,u.FullPaths[Y]]}).forEach(function(q){var Y=q[0];if(q[1],!!Y.name.match(/\.iwa/)){var O=xn(hn(Y.content));O.forEach(function(W){W.messages.forEach(function(z){d.forEach(function(H){W.messages.some(function(Q){return lr(Q.meta[1][0].data)!=11006&&_Y(Q.data,H[1])})&&o[H[0]].deps.push(W.id)})})})}});for(var m=lt.find(u,o[1].location),x=xn(hn(m.content)),g,p=0;p<x.length;++p){var f=x[p];f.id==1&&(g=f)}var b=oa(ss(g.messages[0].data)[1][0].data);for(m=lt.find(u,o[b].location),x=xn(hn(m.content)),p=0;p<x.length;++p)f=x[p],f.id==b&&(g=f);for(b=oa(ss(g.messages[0].data)[2][0].data),m=lt.find(u,o[b].location),x=xn(hn(m.content)),p=0;p<x.length;++p)f=x[p],f.id==b&&(g=f);for(b=oa(ss(g.messages[0].data)[2][0].data),m=lt.find(u,o[b].location),x=xn(hn(m.content)),p=0;p<x.length;++p)f=x[p],f.id==b&&(g=f);var y=ss(g.messages[0].data);{y[6][0].data=gs(a.e.r+1),y[7][0].data=gs(a.e.c+1);var v=oa(y[46][0].data),N=lt.find(u,o[v].location),S=xn(hn(N.content));{for(var w=0;w<S.length&&S[w].id!=v;++w);if(S[w].id!=v)throw"Bad ColumnRowUIDMapArchive";var C=ss(S[w].messages[0].data);C[1]=[],C[2]=[],C[3]=[];for(var j=0;j<=a.e.c;++j){var k=[];k[1]=k[2]=[{type:0,data:gs(j+420690)}],C[1].push({type:2,data:Xr(k)}),C[2].push({type:0,data:gs(j)}),C[3].push({type:0,data:gs(j)})}C[4]=[],C[5]=[],C[6]=[];for(var E=0;E<=a.e.r;++E)k=[],k[1]=k[2]=[{type:0,data:gs(E+726270)}],C[4].push({type:2,data:Xr(k)}),C[5].push({type:0,data:gs(E)}),C[6].push({type:0,data:gs(E)});S[w].messages[0].data=Xr(C)}N.content=Wo(Ho(S)),N.size=N.content.length,delete y[46];var R=ss(y[4][0].data);{R[7][0].data=gs(a.e.r+1);var D=ss(R[1][0].data),P=oa(D[2][0].data);N=lt.find(u,o[P].location),S=xn(hn(N.content));{if(S[0].id!=P)throw"Bad HeaderStorageBucket";var T=ss(S[0].messages[0].data);for(E=0;E<i.length;++E){var B=ss(T[2][0].data);B[1][0].data=gs(E),B[4][0].data=gs(i[E].length),T[2][E]={type:T[2][0].type,data:Xr(B)}}S[0].messages[0].data=Xr(T)}N.content=Wo(Ho(S)),N.size=N.content.length;var F=oa(R[2][0].data);N=lt.find(u,o[F].location),S=xn(hn(N.content));{if(S[0].id!=F)throw"Bad HeaderStorageBucket";for(T=ss(S[0].messages[0].data),j=0;j<=a.e.c;++j)B=ss(T[2][0].data),B[1][0].data=gs(j),B[4][0].data=gs(a.e.r+1),T[2][j]={type:T[2][0].type,data:Xr(B)};S[0].messages[0].data=Xr(T)}N.content=Wo(Ho(S)),N.size=N.content.length;var L=oa(R[4][0].data);(function(){for(var q=lt.find(u,o[L].location),Y=xn(hn(q.content)),O,W=0;W<Y.length;++W){var z=Y[W];z.id==L&&(O=z)}var H=ss(O.messages[0].data);{H[3]=[];var Q=[];l.forEach(function(K,oe){Q[1]=[{type:0,data:gs(oe)}],Q[2]=[{type:0,data:gs(1)}],Q[3]=[{type:2,data:TY(K)}],H[3].push({type:2,data:Xr(Q)})})}O.messages[0].data=Xr(H);var J=Ho(Y),ie=Wo(J);q.content=ie,q.size=q.content.length})();var I=ss(R[3][0].data);{var V=I[1][0];delete I[2];var _=ss(V.data);{var G=oa(_[2][0].data);(function(){for(var q=lt.find(u,o[G].location),Y=xn(hn(q.content)),O,W=0;W<Y.length;++W){var z=Y[W];z.id==G&&(O=z)}var H=ss(O.messages[0].data);{delete H[6],delete I[7];var Q=new Uint8Array(H[5][0].data);H[5]=[];for(var J=0,ie=0;ie<=a.e.r;++ie){var K=ss(Q);J+=WY(K,i[ie],l),K[1][0].data=gs(ie),H[5].push({data:Xr(K),type:2})}H[1]=[{type:0,data:gs(a.e.c+1)}],H[2]=[{type:0,data:gs(a.e.r+1)}],H[3]=[{type:0,data:gs(J)}],H[4]=[{type:0,data:gs(a.e.r+1)}]}O.messages[0].data=Xr(H);var oe=Ho(Y),le=Wo(oe);q.content=le,q.size=q.content.length})()}V.data=Xr(_)}R[3][0].data=Xr(I)}y[4][0].data=Xr(R)}g.messages[0].data=Xr(y);var U=Ho(x),A=Wo(U);return m.content=A,m.size=m.content.length,u}function A5(t){return function(r){for(var a=0;a!=t.length;++a){var n=t[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function Hy(t){A5([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function Wy(t){A5([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function zY(t){return Vt.WS.indexOf(t)>-1?"sheet":t==Vt.CS?"chart":t==Vt.DS?"dialog":t==Vt.MS?"macro":t&&t.length?t:"sheet"}function GY(t,s){if(!t)return 0;try{t=s.map(function(a){return a.id||(a.id=a.strRelID),[a.name,t["!id"][a.id].Target,zY(t["!id"][a.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function qY(t,s,r,a,n,i,l,o,c,u,d,m){try{i[a]=Ud(Xa(t,r,!0),s);var x=pr(t,s),g;switch(o){case"sheet":g=fq(x,s,n,c,i[a],u,d,m);break;case"chart":if(g=gq(x,s,n,c,i[a],u,d,m),!g||!g["!drawel"])break;var p=Ad(g["!drawel"].Target,s),f=xu(p),b=sW(Xa(t,p,!0),Ud(Xa(t,f,!0),p)),y=Ad(b,p),v=xu(y);g=WG(Xa(t,y,!0),y,c,Ud(Xa(t,v,!0),y),u,g);break;case"macro":g=pq(x,s,n,c,i[a],u,d,m);break;case"dialog":g=bq(x,s,n,c,i[a],u,d,m);break;default:throw new Error("Unrecognized sheet type "+o)}l[a]=g;var N=[];i&&i[a]&&or(i[a]).forEach(function(S){var w="";if(i[a][S].Type==Vt.CMNT){w=Ad(i[a][S].Target,s);var C=wq(pr(t,w,!0),w,c);if(!C||!C.length)return;Vw(g,C,!1)}i[a][S].Type==Vt.TCMNT&&(w=Ad(i[a][S].Target,s),N=N.concat(aW(pr(t,w,!0),c)))}),N&&N.length&&Vw(g,N,!0,c.people||[])}catch(S){if(c.WTF)throw S}}function on(t){return t.charAt(0)=="/"?t.slice(1):t}function YY(t,s){if(Kc(),s=s||{},Hy(s),gn(t,"META-INF/manifest.xml")||gn(t,"objectdata.xml"))return tN(t,s);if(gn(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Mf<"u"){if(t.FileIndex)return Mf(t);var r=lt.utils.cfb_new();return uw(t).forEach(function(B){Bt(r,B,nL(t,B))}),Mf(r)}throw new Error("Unsupported NUMBERS file")}if(!gn(t,"[Content_Types].xml"))throw gn(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):gn(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=uw(t),n=QL(Xa(t,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",pr(t,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!pr(t,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!s.bookSheets&&!s.bookProps){if(Hd=[],n.sst)try{Hd=jq(pr(t,on(n.sst)),n.sst,s)}catch(B){if(s.WTF)throw B}s.cellStyles&&n.themes.length&&(c=vq(Xa(t,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(u=yq(pr(t,on(n.style)),n.style,c,s))}n.links.map(function(B){try{var F=Ud(Xa(t,xu(on(B))),B);return Sq(pr(t,on(B)),F,B,s)}catch{}});var d=hq(pr(t,on(n.workbooks[0])),n.workbooks[0],s),m={},x="";n.coreprops.length&&(x=pr(t,on(n.coreprops[0]),!0),x&&(m=yk(x)),n.extprops.length!==0&&(x=pr(t,on(n.extprops[0]),!0),x&&n$(x,m,s)));var g={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(x=Xa(t,on(n.custprops[0]),!0),x&&(g=l$(x,s)));var p={};if((s.bookSheets||s.bookProps)&&(d.Sheets?l=d.Sheets.map(function(F){return F.name}):m.Worksheets&&m.SheetNames.length>0&&(l=m.SheetNames),s.bookProps&&(p.Props=m,p.Custprops=g),s.bookSheets&&typeof l<"u"&&(p.SheetNames=l),s.bookSheets?p.SheetNames:s.bookProps))return p;l={};var f={};s.bookDeps&&n.calcchain&&(f=Nq(pr(t,on(n.calcchain)),n.calcchain));var b=0,y={},v,N;{var S=d.Sheets;m.Worksheets=S.length,m.SheetNames=[];for(var w=0;w!=S.length;++w)m.SheetNames[w]=S[w].name}var C=i?"bin":"xml",j=n.workbooks[0].lastIndexOf("/"),k=(n.workbooks[0].slice(0,j+1)+"_rels/"+n.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");gn(t,k)||(k="xl/_rels/workbook."+C+".rels");var E=Ud(Xa(t,k,!0),k.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=Cq(pr(t,on(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=iW(pr(t,on(n.people[0])),s)),E&&(E=GY(E,d.Sheets));var R=pr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=m.Worksheets;++b){var D="sheet";if(E&&E[b]?(v="xl/"+E[b][1].replace(/[\/]?xl\//,""),gn(t,v)||(v=E[b][1]),gn(t,v)||(v=k.replace(/_rels\/.*$/,"")+E[b][1]),D=E[b][2]):(v="xl/worksheets/sheet"+(b+1-R)+"."+C,v=v.replace(/sheet0\./,"sheet.")),N=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(b!=s.sheets)continue e;break;case"string":if(m.SheetNames[b].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var P=!1,T=0;T!=s.sheets.length;++T)typeof s.sheets[T]=="number"&&s.sheets[T]==b&&(P=1),typeof s.sheets[T]=="string"&&s.sheets[T].toLowerCase()==m.SheetNames[b].toLowerCase()&&(P=1);if(!P)continue e}}qY(t,v,N,m.SheetNames[b],b,y,l,D,s,d,c,u)}return p={Directory:n,Workbook:d,Props:m,Custprops:g,Deps:f,Sheets:l,SheetNames:m.SheetNames,Strings:Hd,Styles:u,Themes:c,SSF:zs(bt)},s&&s.bookFiles&&(t.files?(p.keys=a,p.files=t.files):(p.keys=[],p.files={},t.FullPaths.forEach(function(B,F){B=B.replace(/^Root Entry[\/]/,""),p.keys.push(B),p.files[B]=t.FileIndex[F]}))),s&&s.bookVBA&&(n.vba.length>0?p.vbaraw=pr(t,on(n.vba[0]),!0):n.defaults&&n.defaults.bin===hW&&(p.vbaraw=pr(t,"xl/vbaProject.bin",!0))),p}function KY(t,s){var r=s||{},a="Workbook",n=lt.find(t,a);try{if(a="/!DataSpaces/Version",n=lt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(CU(n.content),a="/!DataSpaces/DataSpaceMap",n=lt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=EU(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=lt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=PU(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=lt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);_U(n.content)}catch{}if(a="/EncryptionInfo",n=lt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=AU(n.content);if(a="/EncryptedPackage",n=lt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function XY(t,s){return s.bookType=="ods"?_5(t,s):s.bookType=="numbers"?VY(t,s):s.bookType=="xlsb"?JY(t,s):QY(t,s)}function JY(t,s){tc=1024,t&&!t.SSF&&(t.SSF=zs(bt)),t&&t.SSF&&(Kc(),Zx(t.SSF),s.revssf=th(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Wd?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var r=s.bookType=="xlsb"?"bin":"xml",a=a5.indexOf(s.bookType)>-1,n=Py();Wy(s=s||{});var i=hy(),l="",o=0;if(s.cellXfs=[],Il(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),l="docProps/core.xml",Bt(i,l,vk(t.Props,s)),n.coreprops.push(l),bs(s.rels,2,l,Vt.CORE_PROPS),l="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Bt(i,l,Nk(t.Props)),n.extprops.push(l),bs(s.rels,3,l,Vt.EXT_PROPS),t.Custprops!==t.Props&&or(t.Custprops||{}).length>0&&(l="docProps/custom.xml",Bt(i,l,Sk(t.Custprops)),n.custprops.push(l),bs(s.rels,4,l,Vt.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],x=(m||{})["!type"]||"sheet";switch(x){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Bt(i,l,Eq(o-1,l,s,t,d)),n.sheets.push(l),bs(s.wbrels,-1,"worksheets/sheet"+o+"."+r,Vt.WS[0])}if(m){var g=m["!comments"],p=!1,f="";g&&g.length>0&&(f="xl/comments"+o+"."+r,Bt(i,f,_q(g,f)),n.comments.push(f),bs(d,-1,"../comments"+o+"."+r,Vt.CMNT),p=!0),m["!legacy"]&&p&&Bt(i,"xl/drawings/vmlDrawing"+o+".vml",s5(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}d["!id"].rId1&&Bt(i,xu(l),mc(d))}return s.Strings!=null&&s.Strings.length>0&&(l="xl/sharedStrings."+r,Bt(i,l,Tq(s.Strings,l,s)),n.strs.push(l),bs(s.wbrels,-1,"sharedStrings."+r,Vt.SST)),l="xl/workbook."+r,Bt(i,l,kq(t,l)),n.workbooks.push(l),bs(s.rels,1,l,Vt.WB),l="xl/theme/theme1.xml",Bt(i,l,Dy(t.Themes,s)),n.themes.push(l),bs(s.wbrels,-1,"theme/theme1.xml",Vt.THEME),l="xl/styles."+r,Bt(i,l,Pq(t,l,s)),n.styles.push(l),bs(s.wbrels,-1,"styles."+r,Vt.STY),t.vbaraw&&a&&(l="xl/vbaProject.bin",Bt(i,l,t.vbaraw),n.vba.push(l),bs(s.wbrels,-1,"vbaProject.bin",Vt.VBA)),l="xl/metadata."+r,Bt(i,l,Aq(l)),n.metadata.push(l),bs(s.wbrels,-1,"metadata."+r,Vt.XLMETA),Bt(i,"[Content_Types].xml",pk(n,s)),Bt(i,"_rels/.rels",mc(s.rels)),Bt(i,"xl/_rels/workbook."+r+".rels",mc(s.wbrels)),delete s.revssf,delete s.ssf,i}function QY(t,s){tc=1024,t&&!t.SSF&&(t.SSF=zs(bt)),t&&t.SSF&&(Kc(),Zx(t.SSF),s.revssf=th(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Wd?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var r="xml",a=a5.indexOf(s.bookType)>-1,n=Py();Wy(s=s||{});var i=hy(),l="",o=0;if(s.cellXfs=[],Il(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),l="docProps/core.xml",Bt(i,l,vk(t.Props,s)),n.coreprops.push(l),bs(s.rels,2,l,Vt.CORE_PROPS),l="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Bt(i,l,Nk(t.Props)),n.extprops.push(l),bs(s.rels,3,l,Vt.EXT_PROPS),t.Custprops!==t.Props&&or(t.Custprops||{}).length>0&&(l="docProps/custom.xml",Bt(i,l,Sk(t.Custprops)),n.custprops.push(l),bs(s.rels,4,l,Vt.CUST_PROPS));var d=["SheetJ5"];for(s.tcid=0,o=1;o<=t.SheetNames.length;++o){var m={"!id":{}},x=t.Sheets[t.SheetNames[o-1]],g=(x||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Bt(i,l,f5(o-1,s,t,m)),n.sheets.push(l),bs(s.wbrels,-1,"worksheets/sheet"+o+"."+r,Vt.WS[0])}if(x){var p=x["!comments"],f=!1,b="";if(p&&p.length>0){var y=!1;p.forEach(function(v){v[1].forEach(function(N){N.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,Bt(i,b,nW(p,d,s)),n.threadedcomments.push(b),bs(m,-1,"../threadedComments/threadedComment"+o+"."+r,Vt.TCMNT)),b="xl/comments"+o+"."+r,Bt(i,b,r5(p)),n.comments.push(b),bs(m,-1,"../comments"+o+"."+r,Vt.CMNT),f=!0}x["!legacy"]&&f&&Bt(i,"xl/drawings/vmlDrawing"+o+".vml",s5(o,x["!comments"])),delete x["!comments"],delete x["!legacy"]}m["!id"].rId1&&Bt(i,xu(l),mc(m))}return s.Strings!=null&&s.Strings.length>0&&(l="xl/sharedStrings."+r,Bt(i,l,Vk(s.Strings,s)),n.strs.push(l),bs(s.wbrels,-1,"sharedStrings."+r,Vt.SST)),l="xl/workbook."+r,Bt(i,l,v5(t)),n.workbooks.push(l),bs(s.rels,1,l,Vt.WB),l="xl/theme/theme1.xml",Bt(i,l,Dy(t.Themes,s)),n.themes.push(l),bs(s.wbrels,-1,"theme/theme1.xml",Vt.THEME),l="xl/styles."+r,Bt(i,l,Qk(t,s)),n.styles.push(l),bs(s.wbrels,-1,"styles."+r,Vt.STY),t.vbaraw&&a&&(l="xl/vbaProject.bin",Bt(i,l,t.vbaraw),n.vba.push(l),bs(s.wbrels,-1,"vbaProject.bin",Vt.VBA)),l="xl/metadata."+r,Bt(i,l,t5()),n.metadata.push(l),bs(s.wbrels,-1,"metadata."+r,Vt.XLMETA),d.length>1&&(l="xl/persons/person.xml",Bt(i,l,lW(d)),n.people.push(l),bs(s.wbrels,-1,"persons/person.xml",Vt.PEOPLE)),Bt(i,"[Content_Types].xml",pk(n,s)),Bt(i,"_rels/.rels",mc(s.rels)),Bt(i,"xl/_rels/workbook."+r+".rels",mc(s.wbrels)),delete s.revssf,delete s.ssf,i}function Vy(t,s){var r="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=tn(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function ZY(t,s){return lt.find(t,"EncryptedPackage")?KY(t,s):S5(t,s)}function eK(t,s){var r,a=t,n=s||{};return n.type||(n.type=Ht&&Buffer.isBuffer(t)?"buffer":"base64"),r=G4(a,n),YY(r,n)}function R5(t,s){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return dp(t.slice(r),s);default:break e}return Cc.to_workbook(t,s)}function tK(t,s){var r="",a=Vy(t,s);switch(s.type){case"base64":r=tn(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=fo(t);break;default:throw new Error("Unrecognized type "+s.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=ks(r)),s.type="binary",R5(r,s)}function sK(t,s){var r=t;return s.type=="base64"&&(r=tn(r)),r=lu.utils.decode(1200,r.slice(2),"str"),s.type="binary",R5(r,s)}function rK(t){return t.match(/[^\x00-\x7F]/)?ii(t):t}function Bf(t,s,r,a){return a?(r.type="string",Cc.to_workbook(t,r)):Cc.to_workbook(s,r)}function tx(t,s){cy();var r=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return tx(new Uint8Array(t),(r=zs(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=t,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),hc={},r.dateNF&&(hc.dateNF=r.dateNF),r.type||(r.type=Ht&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Ht?"buffer":"binary",a=J9(t),typeof Uint8Array<"u"&&!Ht&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=rK(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=zs(r),r.type="array",tx(dy(a),r)}switch((n=Vy(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return ZY(lt.read(a,r),r);break;case 9:if(n[1]<=8)return S5(a,r);break;case 60:return dp(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return oU(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return Hk.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?eK(a,r):Bf(t,a,r,i);case 239:return n[3]===60?dp(a,r):Bf(t,a,r,i);case 255:if(n[1]===254)return sK(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return to.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return to.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return cp.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return Kk.to_workbook(a,r);break;case 10:case 13:case 32:return tK(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return lU.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?cp.to_workbook(a,r):Bf(t,a,r,i)}function F5(t,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return Yu(s.file,lt.write(t,{type:Ht?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return lt.write(t,s)}function aK(t,s){var r=zs(s||{}),a=XY(t,r);return nK(a,r)}function nK(t,s){var r={},a=Ht?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(r.compression="DEFLATE"),s.password)r.type=a;else switch(s.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+s.type)}var n=t.FullPaths?lt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!s.compression}):t.generate(r);if(typeof Deno<"u"&&typeof n=="string"){if(s.type=="binary"||s.type=="base64")return n;n=new Uint8Array(Qx(n))}return s.password&&typeof encrypt_agile<"u"?F5(encrypt_agile(n,s.password),s):s.type==="file"?Yu(s.file,n):s.type=="string"?ks(n):n}function iK(t,s){var r=s||{},a=rY(t,r);return F5(a,r)}function ti(t,s,r){r||(r="");var a=r+t;switch(s.type){case"base64":return ou(ii(a));case"binary":return ii(a);case"string":return t;case"file":return Yu(s.file,a,"utf8");case"buffer":return Ht?qi(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ti(a,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function lK(t,s){switch(s.type){case"base64":return ou(t);case"binary":return t;case"string":return t;case"file":return Yu(s.file,t,"binary");case"buffer":return Ht?qi(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function $m(t,s){switch(s.type){case"string":case"base64":case"binary":for(var r="",a=0;a<t.length;++a)r+=String.fromCharCode(t[a]);return s.type=="base64"?ou(r):s.type=="string"?ks(r):r;case"file":return Yu(s.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+s.type)}}function D5(t,s){cy(),ZG(t);var r=zs(s||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=D5(t,r);return r.type="array",Qx(a)}var n=0;if(r.sheet&&(typeof r.sheet=="number"?n=r.sheet:n=t.SheetNames.indexOf(r.sheet),!t.SheetNames[n]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ti(Xq(t,r),r);case"slk":case"sylk":return ti(Uk.from_sheet(t.Sheets[t.SheetNames[n]],r),r);case"htm":case"html":return ti(k5(t.Sheets[t.SheetNames[n]],r),r);case"txt":return lK(O5(t.Sheets[t.SheetNames[n]],r),r);case"csv":return ti(zy(t.Sheets[t.SheetNames[n]],r),r,"\uFEFF");case"dif":return ti(Hk.from_sheet(t.Sheets[t.SheetNames[n]],r),r);case"dbf":return $m(cp.from_sheet(t.Sheets[t.SheetNames[n]],r),r);case"prn":return ti(Cc.from_sheet(t.Sheets[t.SheetNames[n]],r),r);case"rtf":return ti(Kk.from_sheet(t.Sheets[t.SheetNames[n]],r),r);case"eth":return ti(Wk.from_sheet(t.Sheets[t.SheetNames[n]],r),r);case"fods":return ti(_5(t,r),r);case"wk1":return $m(to.sheet_to_wk1(t.Sheets[t.SheetNames[n]],r),r);case"wk3":return $m(to.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),$m(C5(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),iK(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return aK(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function oK(t){if(!t.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=s[t.bookType]||t.bookType}}function I5(t,s,r){var a={};return a.type="file",a.file=s,oK(a),D5(t,a)}function cK(t,s,r,a,n,i,l,o){var c=mr(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),m=!0,x=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:r,enumerable:!1})}catch{x.__rowNum__=r}else x.__rowNum__=r;if(!l||t[r])for(var g=s.s.c;g<=s.e.c;++g){var p=l?t[r][g]:t[a[g]+c];if(p===void 0||p.t===void 0){if(u===void 0)continue;i[g]!=null&&(x[i[g]]=u);continue}var f=p.v;switch(p.t){case"z":if(f==null)break;continue;case"e":f=f==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(i[g]!=null){if(f==null)if(p.t=="e"&&f===null)x[i[g]]=null;else if(u!==void 0)x[i[g]]=u;else if(d&&f===null)x[i[g]]=null;else continue;else x[i[g]]=d&&(p.t!=="n"||p.t==="n"&&o.rawNumbers!==!1)?f:Vi(p,f,o);f!=null&&(m=!1)}}return{row:x,isempty:m}}function sx(t,s){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=s||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof d){case"string":c=es(d);break;case"number":c=es(t["!ref"]),c.s.r=d;break;default:c=d}a>0&&(n=0);var m=mr(c.s.r),x=[],g=[],p=0,f=0,b=Array.isArray(t),y=c.s.r,v=0,N={};b&&!t[y]&&(t[y]=[]);var S=u.skipHidden&&t["!cols"]||[],w=u.skipHidden&&t["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(S[v]||{}).hidden)switch(x[v]=er(v),r=b?t[y][v]:t[x[v]+m],a){case 1:i[v]=v-c.s.c;break;case 2:i[v]=x[v];break;case 3:i[v]=u.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Vi(r,null,u),f=N[l]||0,!f)N[l]=1;else{do o=l+"_"+f++;while(N[o]);N[l]=f,N[o]=1}i[v]=o}for(y=c.s.r+n;y<=c.e.r;++y)if(!(w[y]||{}).hidden){var C=cK(t,c,y,x,a,i,b,u);(C.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(g[p++]=C.row)}return g.length=p,g}var iN=/"/g;function dK(t,s,r,a,n,i,l,o){for(var c=!0,u=[],d="",m=mr(r),x=s.s.c;x<=s.e.c;++x)if(a[x]){var g=o.dense?(t[r]||[])[x]:t[a[x]+m];if(g==null)d="";else if(g.v!=null){c=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:Vi(g,null,o));for(var p=0,f=0;p!==d.length;++p)if((f=d.charCodeAt(p))===n||f===i||f===34||o.forceQuotes){d='"'+d.replace(iN,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(c=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(iN,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(l)}function zy(t,s){var r=[],a=s??{};if(t==null||t["!ref"]==null)return"";var n=es(t["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,c=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",m=[];a.dense=Array.isArray(t);for(var x=a.skipHidden&&t["!cols"]||[],g=a.skipHidden&&t["!rows"]||[],p=n.s.c;p<=n.e.c;++p)(x[p]||{}).hidden||(m[p]=er(p));for(var f=0,b=n.s.r;b<=n.e.r;++b)(g[b]||{}).hidden||(d=dK(t,n,b,m,l,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),(d||a.blankrows!==!1)&&r.push((f++?o:"")+d)));return delete a.dense,r.join("")}function O5(t,s){s||(s={}),s.FS="	",s.RS=`
`;var r=zy(t,s);return r}function uK(t){var s="",r,a="";if(t==null||t["!ref"]==null)return[];var n=es(t["!ref"]),i="",l=[],o,c=[],u=Array.isArray(t);for(o=n.s.c;o<=n.e.c;++o)l[o]=er(o);for(var d=n.s.r;d<=n.e.r;++d)for(i=mr(d),o=n.s.c;o<=n.e.c;++o)if(s=l[o]+i,r=u?(t[d]||[])[o]:t[s],a="",r!==void 0){if(r.F!=null){if(s=r.F,!r.f)continue;a=r.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=s+"="+a}return c}function M5(t,s,r){var a=r||{},n=+!a.skipHeader,i=t||{},l=0,o=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?tr(a.origin):a.origin;l=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:l+s.length-1+n}};if(i["!ref"]){var m=es(i["!ref"]);d.e.c=Math.max(d.e.c,m.e.c),d.e.r=Math.max(d.e.r,m.e.r),l==-1&&(l=m.e.r+1,d.e.r=l+s.length-1+n)}else l==-1&&(l=0,d.e.r=s.length-1+n);var x=a.header||[],g=0;s.forEach(function(f,b){or(f).forEach(function(y){(g=x.indexOf(y))==-1&&(x[g=x.length]=y);var v=f[y],N="z",S="",w=yt({c:o+g,r:l+b+n});u=vu(i,w),v&&typeof v=="object"&&!(v instanceof Date)?i[w]=v:(typeof v=="number"?N="n":typeof v=="boolean"?N="b":typeof v=="string"?N="s":v instanceof Date?(N="d",a.cellDates||(N="n",v=_r(v)),S=a.dateNF||bt[14]):v===null&&a.nullError&&(N="e",v=0),u?(u.t=N,u.v=v,delete u.w,delete u.R,S&&(u.z=S)):i[w]=u={t:N,v},S&&(u.z=S))})}),d.e.c=Math.max(d.e.c,o+x.length-1);var p=mr(l);if(n)for(g=0;g<x.length;++g)i[er(g+o)+p]={t:"s",v:x[g]};return i["!ref"]=Ot(d),i}function mK(t,s){return M5(null,t,s)}function vu(t,s,r){if(typeof s=="string"){if(Array.isArray(t)){var a=tr(s);return t[a.r]||(t[a.r]=[]),t[a.r][a.c]||(t[a.r][a.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?vu(t,yt(s)):vu(t,yt({r:s,c:r||0}))}function xK(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var r=t.SheetNames.indexOf(s);if(r>-1)return r;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function Gy(){return{SheetNames:[],Sheets:{}}}function qy(t,s,r,a){var n=1;if(!r)for(;n<=65535&&t.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||r;for(++n;n<=65535&&t.SheetNames.indexOf(r=l+n)!=-1;++n);}if(y5(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=s,r}function hK(t,s,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var a=xK(t,s);switch(t.Workbook.Sheets[a]||(t.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[a].Hidden=r}function fK(t,s){return t.z=s,t}function B5(t,s,r){return s?(t.l={Target:s},r&&(t.l.Tooltip=r)):delete t.l,t}function gK(t,s,r){return B5(t,"#"+s,r)}function pK(t,s,r){t.c||(t.c=[]),t.c.push({t:s,a:r||"SheetJS"})}function bK(t,s,r,a){for(var n=typeof s!="string"?s:es(s),i=typeof s=="string"?s:Ot(s),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var c=vu(t,l,o);c.t="n",c.F=i,delete c.v,l==n.s.r&&o==n.s.c&&(c.f=r,a&&(c.D=!0))}return t}var ul={encode_col:er,encode_row:mr,encode_cell:yt,encode_range:Ot,decode_col:wy,decode_row:jy,split_cell:TL,decode_cell:tr,decode_range:$a,format_cell:Vi,sheet_add_aoa:dk,sheet_add_json:M5,sheet_add_dom:E5,aoa_to_sheet:Xc,json_to_sheet:mK,table_to_sheet:P5,table_to_book:CY,sheet_to_csv:zy,sheet_to_txt:O5,sheet_to_json:sx,sheet_to_html:k5,sheet_to_formulae:uK,sheet_to_row_object_array:sx,sheet_get_cell:vu,book_new:Gy,book_append_sheet:qy,book_set_sheet_visibility:hK,cell_set_number_format:fK,cell_set_hyperlink:B5,cell_set_internal_link:gK,cell_add_comment:pK,sheet_set_array_formula:bK,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const yK=({isOpen:t,onClose:s,selectedBranch:r,onSuccess:a})=>{var P;const[n,i]=h.useState("floors"),[l,o]=h.useState(null),[c,u]=h.useState(!1),[d,m]=h.useState(0),[x,g]=h.useState(null),[p,f]=h.useState(null),[b,y]=h.useState(!1),v=h.useRef(null),N=[{floorName:"Ground Floor",totalRooms:8},{floorName:"First Floor",totalRooms:10},{floorName:"Second Floor",totalRooms:12},{floorName:"Third Floor",totalRooms:8},{floorName:"Fourth Floor",totalRooms:6}],S=()=>{const T=[],B=["Ground Floor","First Floor","Second Floor","Third Floor","Fourth Floor"],F=["1-sharing","2-sharing","3-sharing","4-sharing"],L=[8e3,6e3,5e3,4e3];let I=101;return B.forEach((V,_)=>{const G=_===0?8:_===1?10:_===2?12:_===3?8:6;for(let U=0;U<G;U++){const A=Math.floor(Math.random()*F.length),q=F[A],Y=L[A];T.push({floorName:V,roomNumber:I.toString(),sharingType:q,cost:Y}),I++}}),T},w=()=>{const T=n==="floors"?N:S(),B=ul.book_new(),F=ul.json_to_sheet(T),L=n==="floors"?[{wch:15},{wch:12}]:[{wch:15},{wch:12},{wch:15},{wch:10}];F["!cols"]=L,ul.book_append_sheet(B,F,n==="floors"?"Floors":"Rooms"),I5(B,n==="floors"?"sample_floors_template.xlsx":"sample_rooms_template.xlsx"),M.success(`Sample ${n} template downloaded successfully!`)},C=T=>{const B=T.target.files[0];if(!B)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(B.type)){M.error("Please select a valid Excel file (.xlsx, .xls) or CSV file");return}o(B),j(B)},j=T=>{const B=new FileReader;B.onload=F=>{try{const L=new Uint8Array(F.target.result),I=tx(L,{type:"array"}),V=I.SheetNames[0],_=I.Sheets[V],G=ul.sheet_to_json(_,{header:1});if(G.length<2){M.error("Excel file must have at least a header row and one data row");return}const U=G[0],A=G.slice(1),q=A.slice(0,5).map(Y=>{const O={};return U.forEach((W,z)=>{O[W]=Y[z]||""}),O});g({headers:U,preview:q,totalRows:A.length}),M.success(`Preview loaded: ${A.length} rows found`)}catch(L){console.error("Error reading Excel file:",L),M.error("Error reading Excel file. Please check the format.")}},B.readAsArrayBuffer(T)},k=async()=>{if(!l||!r){M.error("Please select a file and ensure branch is selected");return}u(!0),m(0),f(null);try{const T=await l.arrayBuffer(),B=new FormData;B.append("file",l),B.append("uploadType",n),B.append("branchId",r._id);const L=await(await fetch("/api/pg/bulk-upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:B})).json();L.success?(f(L.data),M.success(`✅ Successfully processed ${L.data.totalRows} rows!`),L.data.uploadedCount>0&&M.success(`📤 Uploaded: ${L.data.uploadedCount} ${n}`,{duration:3e3}),L.data.skippedCount>0&&M.error(`⏭️ Skipped: ${L.data.skippedCount} duplicates`,{duration:4e3}),L.data.errors&&L.data.errors.length>0&&M.error(`❌ Errors: ${L.data.errors.length} rows had issues`,{duration:5e3}),m(100),y(!0)):L.subscriptionError?(s(),a&&a({subscriptionError:!0,upgradeRequired:L.upgradeRequired,message:L.message}),M.error(L.message,{duration:6e3})):M.error(L.message||"Upload failed")}catch(T){console.error("Upload error:",T),M.error("Upload failed. Please try again.")}finally{u(!1),m(0)}},E=()=>{f(null),s()},R=()=>{y(!1),f(null),o(null),g(null),v.current&&(v.current.value=""),a(),s()},D=()=>{o(null),g(null),f(null),v.current&&(v.current.value="")};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fg,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Bulk Upload ",n.charAt(0).toUpperCase()+n.slice(1)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Import ",n," data from Excel file"]})]})]}),e.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"floors",checked:n==="floors",onChange:T=>i(T.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Floors"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"rooms",checked:n==="rooms",onChange:T=>i(T.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Rooms"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Download Sample Template"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Download a sample Excel file with the correct format for ",n," data"]})]}),e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Download Sample"})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-blue-700",children:[e.jsxs("p",{className:"font-medium",children:["Expected columns for ",n,":"]}),n==="floors"?e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"floorName:"}),' Name of the floor (e.g., "Ground Floor")']}),e.jsxs("li",{children:[e.jsx("strong",{children:"totalRooms:"})," Total number of rooms on this floor"]})]}):e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"floorName:"})," Name of the floor (must match existing floor)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"roomNumber:"}),' Room number (e.g., "101", "102")']}),e.jsxs("li",{children:[e.jsx("strong",{children:"sharingType:"}),' Sharing type ("1-sharing", "2-sharing", "3-sharing", "4-sharing")']}),e.jsxs("li",{children:[e.jsx("strong",{children:"cost:"})," Cost per bed (optional - will auto-assign based on sharing type)"]})]}),n==="rooms"&&e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsxs("p",{className:"text-xs text-yellow-800",children:["💡 ",e.jsx("strong",{children:"Auto-allocation:"})," Beds will be automatically created based on sharing type:"]}),e.jsxs("ul",{className:"text-xs text-yellow-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• 1-sharing: 1 bed (101-A)"}),e.jsx("li",{children:"• 2-sharing: 2 beds (101-A, 101-B)"}),e.jsx("li",{children:"• 3-sharing: 3 beds (101-A, 101-B, 101-C)"}),e.jsx("li",{children:"• 4-sharing: 4 beds (101-A, 101-B, 101-C, 101-D)"})]}),e.jsxs("p",{className:"text-xs text-yellow-800 mt-1",children:["💰 ",e.jsx("strong",{children:"Default costs:"})," 1-sharing: ₹8000, 2-sharing: ₹6000, 3-sharing: ₹5000, 4-sharing: ₹4000"]})]})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{ref:v,type:"file",accept:".xlsx,.xls,.csv",onChange:C,className:"hidden"}),l?e.jsxs("div",{children:[e.jsx(Be,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"File Selected"}),e.jsx("p",{className:"text-gray-600 mb-2",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["File size: ",(l.size/1024).toFixed(1)," KB"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("button",{onClick:()=>{var T;return(T=v.current)==null?void 0:T.click()},className:"px-4 py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition duration-200",children:"Change File"}),e.jsx("button",{onClick:D,className:"px-4 py-2 text-red-600 border border-red-600 rounded-lg hover:bg-red-50 transition duration-200",children:"Remove"})]})]}):e.jsxs("div",{children:[e.jsx(Bi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Excel File"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your Excel file here, or click to browse"}),e.jsx("button",{onClick:()=>{var T;return(T=v.current)==null?void 0:T.click()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"Choose File"})]})]}),x&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Data Preview"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing first 5 rows of ",x.totalRows," total rows"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-200",children:x.headers.map((T,B)=>e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:T},B))})}),e.jsx("tbody",{children:x.preview.map((T,B)=>e.jsx("tr",{className:"border-b border-gray-100",children:x.headers.map((F,L)=>e.jsx("td",{className:"py-2 px-3 text-gray-600",children:T[F]||"-"},L))},B))})]})})]}),c&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(no,{className:"h-5 w-5 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Uploading..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d}%`}})}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Please wait while we process your data..."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:E,disabled:c,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:k,disabled:!l||c,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200 disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx(no,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bi,{className:"h-4 w-4"}),e.jsxs("span",{children:["Upload ",n.charAt(0).toUpperCase()+n.slice(1)]})]})})]})]})]}),b&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Summary of your bulk upload operation"})]})]}),e.jsx("button",{onClick:R,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.totalRows}),e.jsx("div",{className:"text-sm text-green-700",children:"Total Rows"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.uploadedCount}),e.jsx("div",{className:"text-sm text-blue-700",children:"Successfully Uploaded"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:p.skippedCount}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Skipped (Duplicates)"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:((P=p.errors)==null?void 0:P.length)||0}),e.jsx("div",{className:"text-sm text-red-700",children:"Errors"})]})]}),p.duplicates&&p.duplicates.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-yellow-800",children:["Duplicates Found (",p.duplicates.length,")"]})]}),e.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"The following items were skipped because they already exist in the system:"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:p.duplicates.map((T,B)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-white rounded border border-yellow-200",children:[e.jsx("div",{className:"w-6 h-6 bg-yellow-100 text-yellow-800 rounded-full flex items-center justify-center text-xs font-semibold",children:T.row}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:T.name}),e.jsx("div",{className:"text-xs text-yellow-600",children:T.reason})]})]},B))})]}),p.errors&&p.errors.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Yt,{className:"h-5 w-5 text-red-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:["Errors (",p.errors.length,")"]})]}),e.jsx("p",{className:"text-sm text-red-700 mb-3",children:"The following rows had issues and could not be processed:"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:p.errors.map((T,B)=>e.jsx("div",{className:"p-2 bg-white rounded border border-red-200",children:e.jsx("div",{className:"text-sm text-red-800",children:T})},B))})]}),n==="rooms"&&p.roomStats&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Jt,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Room Statistics"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:p.roomStats.totalBeds}),e.jsx("div",{className:"text-xs text-blue-700",children:"Total Beds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["₹",Math.round(p.roomStats.averageCost)]}),e.jsx("div",{className:"text-xs text-blue-700",children:"Average Cost"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:p.roomStats.totalRooms}),e.jsx("div",{className:"text-xs text-blue-700",children:"Total Rooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:Object.keys(p.roomStats.sharingTypeBreakdown||{}).length}),e.jsx("div",{className:"text-xs text-blue-700",children:"Sharing Types"})]})]}),p.roomStats.sharingTypeBreakdown&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Sharing Type Breakdown:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(p.roomStats.sharingTypeBreakdown).map(([T,B])=>e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[T,": ",B]},T))})]})]}),p.uploadedCount>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-green-800",children:["Successfully uploaded ",p.uploadedCount," ",n,"!"]}),e.jsx("p",{className:"text-sm text-green-700",children:"Your data has been processed and added to the system."})]})]})}),e.jsx("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:R,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"Close"})})]})]})})]}):null},vK=({isOpen:t,onClose:s,onSubmit:r,formData:a,setFormData:n,isEdit:i})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm mx-auto transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:i?"Edit Floor":"Add New Floor"}),e.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-0.5",children:[e.jsx(TE,{className:"h-3 w-3 mr-1"}),i?"Update floor details":"Create a new floor for your PG"]})]})]}),e.jsx("button",{onClick:s,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-all duration-200 hover:scale-110",children:e.jsx(ct,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:r,className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Floor Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:a.name,onChange:l=>n({...a,name:l.target.value}),className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-sm",placeholder:"e.g., Ground Floor, First Floor",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter a descriptive name for the floor"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Total Rooms ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",min:"1",max:"50",value:a.totalRooms,onChange:l=>n({...a,totalRooms:parseInt(l.target.value)||1}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-sm",placeholder:"Number of rooms on this floor",required:!0})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Specify the total number of rooms available on this floor"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-3 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(Za,{className:"h-3 w-3"}),e.jsx("span",{children:i?"Update Floor":"Create Floor"})]})]})]})]})}):null,jK=({isOpen:t,onClose:s,onSubmit:r,formData:a,setFormData:n,isEdit:i,floors:l,sharingTypes:o,handleSharingTypeChange:c,handleRoomNumberChange:u,handleNumberOfBedsChange:d,handleBedNumberChange:m})=>{var x,g,p;return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl mx-auto max-h-[88vh] overflow-y-auto transform transition-all duration-300 scale-100 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white rounded-t-xl sticky top-0 bg-white z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(xs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:i?"Edit Room":"Add New Room"}),e.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-0.5",children:[e.jsx(Ia,{className:"h-3 w-3 mr-1"}),i?"Update room details":"Create a new room for your PG"]})]})]}),e.jsx("button",{onClick:s,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-all duration-200 hover:scale-110",children:e.jsx(ct,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:r,className:"p-5 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Floor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.floorId,onChange:f=>n({...a,floorId:f.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 appearance-none bg-white text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select a floor"}),l.map(f=>e.jsx("option",{value:f._id,children:f.name},f._id))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Choose which floor this room belongs to"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Room Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ov,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:a.roomNumber,onChange:f=>u(f.target.value),className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-sm",placeholder:"e.g., 101, 102",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter a unique room number"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Number of Beds ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(xs,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",min:"1",max:"10",value:a.numberOfBeds,onChange:f=>d(f.target.value),className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-sm",placeholder:"Number of beds",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Specify the number of beds in this room"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Sharing Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsxs("select",{value:a.sharingType,onChange:f=>c(f.target.value),className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 appearance-none bg-white text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select sharing type"}),o.map(f=>e.jsxs("option",{value:f.id,children:[f.name," - ₹",f.cost]},f.id))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Choose the sharing configuration for this room"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Cost per Bed ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",min:"0",step:"100",value:a.cost,onChange:f=>n({...a,cost:parseInt(f.target.value)||0}),className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-sm",placeholder:"Cost per bed",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter the cost per bed in this room"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Bed Numbers ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Array.from({length:a.numberOfBeds},(f,b)=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Bed ",b+1]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ov,{className:"absolute left-2.5 top-2 h-3 w-3 text-gray-400"}),e.jsx("input",{type:"text",value:a.bedNumbers[b]||"",onChange:y=>m(b,y.target.value),className:"w-full pl-7 pr-2 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-xs",placeholder:`e.g., ${a.roomNumber}-${String.fromCharCode(65+b)}`})]})]},b))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Customize bed numbers or leave empty for auto-generation"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(xs,{className:"h-4 w-4 text-white"})}),e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Room ",a.roomNumber||"---"]})]}),e.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200",children:[a.numberOfBeds," Beds"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"p-2 bg-gray-100 rounded-lg",children:[e.jsx("span",{className:"block text-gray-500",children:"Floor"}),e.jsx("span",{className:"font-semibold text-gray-900",children:((x=l.find(f=>f._id===a.floorId))==null?void 0:x.name)||"Select"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-lg",children:[e.jsx("span",{className:"block text-gray-500",children:"Sharing"}),e.jsx("span",{className:"font-semibold text-gray-900",children:((g=o.find(f=>f.id===a.sharingType))==null?void 0:g.name)||"—"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-lg",children:[e.jsx("span",{className:"block text-gray-500",children:"Cost"}),e.jsxs("span",{className:"font-bold text-emerald-700",children:["₹",a.cost||0]})]}),((p=a.bedNumbers)==null?void 0:p.length)>0&&e.jsxs("div",{className:"col-span-2 p-2 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"block text-blue-600",children:"Bed Numbers"}),e.jsx("span",{className:"text-blue-800",children:a.bedNumbers.filter(Boolean).join(", ")})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-3 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg font-medium hover:from-green-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(Za,{className:"h-3 w-3"}),e.jsx("span",{children:i?"Update Room":"Create Room"})]})]})]})]})}):null},wK=({isOpen:t,onClose:s,onConfirm:r,title:a,message:n,confirmText:i="Confirm",cancelText:l="Cancel",type:o="danger"})=>{if(!t)return null;const u=(()=>{switch(o){case"danger":return{icon:"text-red-600",bg:"bg-red-50",border:"border-red-200",button:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",iconComponent:Yt};case"warning":return{icon:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200",button:"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700",iconComponent:Rt};case"info":return{icon:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200",button:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",iconComponent:kl};default:return{icon:"text-red-600",bg:"bg-red-50",border:"border-red-200",button:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",iconComponent:Yt}}})(),d=u.iconComponent;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm mx-auto transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${u.bg} ${u.border} rounded-lg flex items-center justify-center shadow-md`,children:e.jsx(d,{className:`h-5 w-5 ${u.icon}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Please confirm your action"})]})]}),e.jsx("button",{onClick:s,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-all duration-200 hover:scale-110",children:e.jsx(ct,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:`p-3 ${u.bg} ${u.border} rounded-lg mb-4`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(d,{className:`h-4 w-4 ${u.icon} mt-0.5 flex-shrink-0`}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:n})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-sm",children:l}),e.jsxs("button",{onClick:()=>{r(),s()},className:`flex items-center space-x-2 px-4 py-2 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm ${u.button}`,children:[e.jsx(Be,{className:"h-3 w-3"}),e.jsx("span",{children:i})]})]})]})]})})},NK=({isOpen:t,onClose:s,requestedBeds:r=1,currentBedsUsed:a=0,subscriptionErrorDetails:n,onTopUpConfirm:i,onUpgrade:l})=>{const o=He(J2),c=He(Q2);He(Z2);const[u,d]=h.useState(0),[m,x]=h.useState(!1),[g,p]=h.useState(null),f=(n==null?void 0:n.limit)||c.maxBeds||(o==null?void 0:o.baseBedCount)||0,b=(n==null?void 0:n.currentUsage)!==void 0?n.currentUsage:a,y=n!=null&&n.requested?Math.max(0,n.requested-(n.limit-n.currentUsage)):Math.max(0,b+r-f),v=(o==null?void 0:o.topUpPricePerBed)||0,N=(n==null?void 0:n.trialLimit)||(n==null?void 0:n.trialExpired),S=n==null?void 0:n.freeLimit;n==null||n.paidLimit,n==null||n.bulkUploadLimit,h.useEffect(()=>{t&&y>0&&d(y)},[t,y]),h.useEffect(()=>{o&&u>0&&w()},[u,o]);const w=async()=>{try{const j=f+u,k=await we.post(`/api/subscriptions/${o._id}/calculate`,{bedCount:j});k.data.success&&p(k.data.data)}catch(j){console.error("Error calculating pricing:",j)}},C=async()=>{var j,k;try{x(!0),(await we.post("/users/subscription/add-beds",{additionalBeds:u,newMaxBeds:f+u})).data.success&&(M.success(`Successfully added ${u} beds to your plan!`),window.location.reload(),i&&i(u),s())}catch(E){M.error(((k=(j=E.response)==null?void 0:j.data)==null?void 0:k.message)||"Failed to add beds")}finally{x(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-red-50",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:S?"Free Plan Bed Limit Reached":N?"Free Trial Bed Limit Reached":"Bed Limit Exceeded"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(n==null?void 0:n.message)||(S?"Your free plan has reached the bed limit. Upgrade to add more beds.":N?"Your free trial has reached the bed limit. Upgrade to add more beds.":"You've reached the maximum bed limit for your current plan")})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Current Situation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ur,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Current Plan"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:S?"Free Plan":(o==null?void 0:o.planName)||"Free"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(xs,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Current Limit"})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[f," beds"]}),N&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Free Trial"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(_t,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Beds Used"})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[b," beds"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Rt,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Beds Needed"})]}),e.jsxs("p",{className:"text-lg font-bold text-orange-600",children:["+",(n==null?void 0:n.requested)||y," beds"]})]}),(n==null?void 0:n.remaining)!==void 0&&e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(hi,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Beds Remaining"})]}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[n.remaining," beds"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Choose an Option"}),e.jsxs(e.Fragment,{children:[!S&&e.jsx("div",{className:"space-y-4 mb-4",children:e.jsxs("div",{className:"border-2 border-blue-200 rounded-xl p-4 bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(_t,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Add More Beds (Recommended)"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Top-up your current plan with additional beds"})]})}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Additional Beds"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>d(Math.max(y,u-1)),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"−"}),e.jsx("input",{type:"number",min:y,value:u,onChange:j=>d(Math.max(y,parseInt(j.target.value)||y)),className:"w-24 px-4 py-2 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>d(u+1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"+"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["@ ",et.formatCurrency(v),"/bed"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Minimum ",y," beds required to proceed"]})]}),g&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("h6",{className:"font-semibold text-gray-900 mb-3",children:"Updated Pricing"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Base Price"}),e.jsx("span",{className:"font-medium",children:et.formatCurrency(g.basePrice)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Top-up (",u," beds)"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["+",et.formatCurrency(g.topUpCost)]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"New Monthly Total"}),e.jsx("span",{className:"font-bold text-blue-600 text-lg",children:et.formatCurrency(g.totalMonthlyPrice)})]}),(o==null?void 0:o.billingCycle)==="annual"&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Annual Total"}),e.jsx("span",{children:et.formatCurrency(g.totalAnnualPrice)})]})]})]}),e.jsx("button",{onClick:C,disabled:m||u<y,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:m?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(hi,{className:"h-5 w-5"}),e.jsxs("span",{children:["Add ",u," Beds for ",et.formatCurrency(u*v),"/month"]})]})})]})}),l&&e.jsxs("div",{className:"border-2 border-purple-200 rounded-xl p-4 bg-gradient-to-br from-purple-50 to-pink-50",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(Ur,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:S?"Upgrade from Free Plan":N?"Upgrade from Trial":"Upgrade to Higher Plan"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S?"Unlock unlimited beds and premium features":N?"Continue with premium features after trial ends":"Get more beds and features with a different plan"})]})}),e.jsx("button",{onClick:()=>{l(),s()},className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md",children:"View Available Plans"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"💡 Note:"})," Adding beds will update your monthly billing immediately. The new pricing will be reflected in your next billing cycle."]})})]})]})}):null},SK=()=>{var it,ft;const[t,s]=h.useState("floors"),r=He(Nr),{subscription:a,canAddBed:n,getSubscriptionSummary:i}=Hu(),[l,o]=h.useState([]),[c,u]=h.useState([]),[d,m]=h.useState(!0),[x,g]=h.useState(!1),[p,f]=h.useState(!1),[b,y]=h.useState(!1),[v,N]=h.useState(!1),[S,w]=h.useState(!1),[C,j]=h.useState(null),[k,E]=h.useState(null),[R,D]=h.useState(null),[P,T]=h.useState(null),[B,F]=h.useState([]),[L,I]=h.useState(!1),[V,_]=h.useState(!1),[G,U]=h.useState(0),[A,q]=h.useState(null),[Y,O]=h.useState({name:"",totalRooms:1}),[W,z]=h.useState({floorId:"",roomNumber:"",numberOfBeds:1,sharingType:"1-sharing",cost:0,bedNumbers:[]});h.useEffect(()=>{H()},[]),h.useEffect(()=>{r&&(Q(),J())},[r]);const H=async()=>{try{const Pe=await(await fetch("/api/pg/sharing-types",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();Pe.success&&F(Pe.data)}catch(be){console.error("Error fetching sharing types:",be)}},Q=async()=>{var be,Pe,ee;if(r)try{const me=`/api/pg/floors?branchId=${r._id}`,qe=await(await fetch(me,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();qe.success?o(qe.data):(be=qe.message)!=null&&be.includes("No PG associated with this user")?M.error("Please complete your PG setup first. Contact superadmin to assign a PG."):(Pe=qe.message)!=null&&Pe.includes("No default branch found")?M.error("Please set up a default branch for your PG first."):(ee=qe.message)!=null&&ee.includes("Invalid branch ID")?M.error("Selected branch is invalid. Please select a different branch."):M.error(qe.message||"Failed to fetch floors")}catch(me){console.error("❌ Error fetching floors:",me),M.error("Failed to fetch floors")}finally{m(!1)}},J=async()=>{var be,Pe,ee;if(r)try{const me=`/api/pg/rooms?branchId=${r._id}`,qe=await(await fetch(me,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();qe.success?u(qe.data):(be=qe.message)!=null&&be.includes("No PG associated with this user")?M.error("Please complete your PG setup first. Contact superadmin to assign a PG."):(Pe=qe.message)!=null&&Pe.includes("No default branch found")?M.error("Please set up a default branch for your PG first."):(ee=qe.message)!=null&&ee.includes("Invalid branch ID")?M.error("Selected branch is invalid. Please select a different branch."):M.error(qe.message||"Failed to fetch rooms")}catch(me){console.error("❌ Error fetching rooms:",me),M.error("Failed to fetch rooms")}},ie=async be=>{be.preventDefault();try{const Pe=R?`/api/pg/floors/${R._id}`:"/api/pg/floors",Te=await(await fetch(Pe,{method:R?"PUT":"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({...Y,branchId:r._id})})).json();Te.success?(M.success(R?"Floor updated successfully":"Floor created successfully"),g(!1),D(null),O({name:"",totalRooms:1}),Q()):M.error(Te.message||"Failed to save floor")}catch(Pe){console.error("Error saving floor:",Pe),M.error("Failed to save floor")}},K=async be=>{be.preventDefault();const Pe=W.numberOfBeds,ee=i();if(console.log("🎯 Checking bed limits:",{bedsToAdd:Pe,subscription:ee,canAddBed:n(Pe)}),!n(Pe)){U(Pe),(ee==null?void 0:ee.billingCycle)==="trial"?_(!0):I(!0);return}try{const me=P?`/api/pg/rooms/${P._id}`:"/api/pg/rooms",Te=P?"PUT":"POST",qe={...W,branchId:r._id,bedNumbers:W.bedNumbers.filter(mt=>mt.trim()!=="")},Nt=await(await fetch(me,{method:Te,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify(qe)})).json();Nt.success?(M.success(P?"Room updated successfully":"Room created successfully"),f(!1),T(null),z({floorId:"",roomNumber:"",numberOfBeds:1,sharingType:"1-sharing",cost:0,bedNumbers:[]}),J()):Nt.subscriptionError?(U(W.numberOfBeds),Nt.upgradeRequired?(ee==null?void 0:ee.billingCycle)==="trial"?_(!0):I(!0):M.error(Nt.message||"Failed to save room")):M.error(Nt.message||"Failed to save room")}catch(me){console.error("Error saving room:",me),M.error("Failed to save room")}},oe=be=>{D(be),O({name:be.name,totalRooms:be.totalRooms}),g(!0)},le=be=>{var Pe,ee;T(be),z({floorId:typeof be.floorId=="string"?be.floorId:((Pe=be.floorId)==null?void 0:Pe._id)||"",roomNumber:be.roomNumber,numberOfBeds:be.numberOfBeds,sharingType:be.sharingType,cost:be.cost,bedNumbers:((ee=be.beds)==null?void 0:ee.map(me=>me.bedNumber))||[]}),f(!0)},Se=(be,Pe)=>{const ee=[...W.bedNumbers];ee[be]=Pe,z({...W,bedNumbers:ee})},Ee=be=>{const Pe=parseInt(be);z({...W,numberOfBeds:Pe,bedNumbers:W.bedNumbers.slice(0,Pe)})},ye=()=>{I(!1),U(0)},We=()=>{_(!1),U(0)},fe=()=>{_(!1),U(0),window.location.reload()},Fe=async be=>{try{M.success("Bed top-up request submitted successfully"),I(!1),U(0)}catch{M.error("Failed to process bed top-up request")}},ce=async be=>{E(()=>async()=>{try{const ee=await(await fetch(`/api/pg/floors/${be}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();ee.success?(M.success("Floor deleted successfully"),Q()):M.error(ee.message||"Failed to delete floor")}catch(Pe){console.error("Error deleting floor:",Pe),M.error("Failed to delete floor")}}),N(!0)},Ce=async be=>{E(()=>async()=>{try{const ee=await(await fetch(`/api/pg/rooms/${be}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();ee.success?(M.success("Room deleted successfully"),J()):M.error(ee.message||"Failed to delete room")}catch(Pe){console.error("Error deleting room:",Pe),M.error("Failed to delete room")}}),N(!0)},ze=be=>{if(be&&be.subscriptionError){q({message:be.message,trialExpired:be.trialExpired,trialLimit:be.trialLimit,paidLimit:be.paidLimit,currentUsage:be.currentUsage,limit:be.limit,remaining:be.remaining,requested:be.requested,bulkUploadLimit:be.bulkUploadLimit}),be.upgradeRequired&&(be.freeLimit?I(!0):be.trialExpired||be.trialLimit||(subscriptionSummary==null?void 0:subscriptionSummary.billingCycle)==="trial"?_(!0):I(!0));return}t==="floors"?Q():J()},De=be=>{const Pe=B.find(Te=>Te.id===be);let ee=1;be==="1-sharing"?ee=1:be==="2-sharing"?ee=2:be==="3-sharing"?ee=3:be==="4-sharing"&&(ee=4);const me=st(W.roomNumber,ee);z(Te=>({...Te,sharingType:be,numberOfBeds:ee,cost:Pe?Pe.cost:0,bedNumbers:me}))},st=(be,Pe)=>{if(!be)return[];const ee=[],me=["A","B","C","D","E","F","G","H","I","J"];for(let Te=0;Te<Pe;Te++)ee.push(`${be}-${me[Te]}`);return ee},Xe=be=>{const Pe=st(W.numberOfBeds?W.roomNumber:be,W.numberOfBeds);z(ee=>({...ee,roomNumber:be,bedNumbers:Pe}))};return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PG Management"}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[e.jsx(Ia,{className:"h-3 w-3 mr-1"}),"Managing ",r.name]})]})]})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-5 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full -translate-y-12 translate-x-12 opacity-50"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:r.name}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[e.jsx(sr,{className:"h-3 w-3 mr-1"}),r.address.street,", ",r.address.city]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg mb-1",children:e.jsx(Je,{className:"h-5 w-5 text-blue-600"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.capacity.totalRooms}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-lg mb-1",children:e.jsx(xs,{className:"h-5 w-5 text-green-600"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.capacity.totalBeds}),e.jsx("p",{className:"text-xs text-gray-500",children:"Beds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-lg mb-1",children:e.jsx(Fs,{className:"h-5 w-5 text-purple-600"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 capitalize",children:r.status}),e.jsx("p",{className:"text-xs text-gray-500",children:"Status"})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("nav",{className:"flex space-x-1 px-4","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>s("floors"),className:`flex items-center space-x-2 py-3 px-4 rounded-t-lg font-medium text-sm transition-all duration-300 ${t==="floors"?"bg-white text-blue-600 shadow-md border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsxs("span",{children:["Floors (",l.length,")"]})]}),e.jsxs("button",{onClick:()=>s("rooms"),className:`flex items-center space-x-2 py-3 px-4 rounded-t-lg font-medium text-sm transition-all duration-300 ${t==="rooms"?"bg-white text-blue-600 shadow-md border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Rooms (",c.length,")"]})]})]})}),e.jsx("div",{className:"p-6",children:t==="floors"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:"Floors"}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Manage floors in ",r.name]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(Bi,{className:"h-3 w-3"}),e.jsx("span",{children:"Import"})]}),e.jsxs("button",{onClick:()=>{g(!0),D(null),O({name:"",totalRooms:1})},className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(as,{className:"h-3 w-3"}),e.jsx("span",{children:"Add Floor"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(be=>e.jsxs("div",{className:"group bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg hover:border-blue-300 transition-all duration-300 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Ie,{className:"h-4 w-4 text-white"})}),e.jsx("h4",{className:"font-bold text-gray-900",children:be.name})]}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:()=>oe(be),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-all duration-200 hover:scale-110",title:"Edit floor",children:e.jsx(fa,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>ce(be._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 hover:scale-110",title:"Delete floor",children:e.jsx(Pr,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Total Rooms"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:be.totalRooms})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(xt,{className:"h-3 w-3 mr-1"}),"Created"]}),e.jsx("span",{children:new Date(be.createdAt).toLocaleDateString()})]})]})]},be._id))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:"Rooms"}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[e.jsx(xs,{className:"h-3 w-3 mr-1"}),"Manage rooms in ",r.name]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("a",{href:"/admin/room-availability",className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsx("span",{children:"View Availability"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(Bi,{className:"h-3 w-3"}),e.jsx("span",{children:"Import"})]}),e.jsxs("button",{onClick:()=>{f(!0),T(null),z({floorId:"",roomNumber:"",numberOfBeds:1,sharingType:"1-sharing",cost:0,bedNumbers:[]})},className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(as,{className:"h-3 w-3"}),e.jsx("span",{children:"Add Room"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(be=>{var Pe;return e.jsxs("div",{className:"group bg-white border border-gray-200 rounded-xl p-3 hover:shadow-lg hover:border-cyan-300 transition-all duration-300 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(xs,{className:"h-3.5 w-3.5 text-white"})}),e.jsxs("h4",{className:"font-bold text-gray-900 text-sm",children:["Room ",be.roomNumber]})]}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:()=>{j(be),w(!0)},className:"p-1.5 text-cyan-600 hover:bg-cyan-50 rounded-md transition-all duration-200 hover:scale-110",title:"Preview room",children:e.jsx(ot,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>le(be),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-all duration-200 hover:scale-110",title:"Edit room",children:e.jsx(fa,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>Ce(be._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 hover:scale-110",title:"Delete room",children:e.jsx(Pr,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full",children:((Pe=be.floorId)==null?void 0:Pe.name)||"N/A"}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-cyan-100 text-cyan-700 rounded-full",children:[be.numberOfBeds," Beds"]}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-700 rounded-full",children:be.sharingType}),e.jsxs("span",{className:"px-2 py-1 text-xs font-bold bg-emerald-100 text-emerald-700 rounded-full",children:["₹",be.cost]})]}),be.beds&&be.beds.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Bed Numbers"}),e.jsx("div",{className:"text-xs text-gray-700 bg-blue-50 px-2 py-1 rounded-md",children:be.beds.map(ee=>ee.bedNumber).join(", ")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[be.availableBeds>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200",children:[be.availableBeds," Available"]}),be.occupiedBeds>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:[be.occupiedBeds," Occupied"]}),be.noticePeriodBeds>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[be.noticePeriodBeds," Notice"]})]})]})]},be._id)})})]})})]})]}),e.jsx(vK,{isOpen:x,onClose:()=>{g(!1),D(null),O({name:"",totalRooms:1})},onSubmit:ie,formData:Y,setFormData:O,isEdit:!!R}),e.jsx(jK,{isOpen:p,onClose:()=>{f(!1),T(null),z({floorId:"",roomNumber:"",numberOfBeds:1,sharingType:"1-sharing",cost:0,bedNumbers:[]})},onSubmit:K,formData:W,setFormData:z,isEdit:!!P,floors:l,sharingTypes:B,handleSharingTypeChange:De,handleRoomNumberChange:Xe,handleNumberOfBedsChange:Ee,handleBedNumberChange:Se,generateBedNumbers:st}),e.jsx(yK,{isOpen:b,onClose:()=>y(!1),selectedBranch:r,onSuccess:ze}),S&&C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md mx-auto transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(xs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Room ",C.roomNumber]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Room Details Preview"})]})]}),e.jsx("button",{onClick:()=>{w(!1),j(null)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-all duration-200 hover:scale-110",children:e.jsx(ct,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Floor"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:((it=C.floorId)==null?void 0:it.name)||"N/A"})]}),e.jsxs("div",{className:"p-3 bg-cyan-50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-cyan-600 mb-1",children:"Beds"}),e.jsx("div",{className:"text-sm font-semibold text-cyan-900",children:C.numberOfBeds})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-purple-600 mb-1",children:"Sharing"}),e.jsx("div",{className:"text-sm font-semibold text-purple-900",children:C.sharingType})]}),e.jsxs("div",{className:"p-3 bg-emerald-50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-emerald-600 mb-1",children:"Cost"}),e.jsxs("div",{className:"text-sm font-bold text-emerald-900",children:["₹",C.cost]})]})]}),C.beds&&C.beds.length>0&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"Bed Numbers"}),e.jsx("div",{className:"text-sm text-blue-800",children:C.beds.map(be=>be.bedNumber).join(", ")})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Current Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.availableBeds>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200",children:[C.availableBeds," Available"]}),C.occupiedBeds>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:[C.occupiedBeds," Occupied"]}),C.noticePeriodBeds>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[C.noticePeriodBeds," Notice"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>{w(!1),j(null)},className:"px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-sm",children:"Close"}),e.jsxs("button",{onClick:()=>{w(!1),j(null),le(C)},className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm",children:[e.jsx(fa,{className:"h-3 w-3"}),e.jsx("span",{children:"Edit Room"})]})]})]})}),e.jsx(wK,{isOpen:v,onClose:()=>{N(!1),E(null)},onConfirm:k,title:"Confirm Delete",message:"Are you sure you want to delete this item? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(NK,{isOpen:L,onClose:ye,requestedBeds:G,currentBedsUsed:(A==null?void 0:A.currentUsage)||((ft=a==null?void 0:a.usage)==null?void 0:ft.bedsUsed)||0,subscriptionErrorDetails:A,onTopUpConfirm:Fe,onUpgrade:()=>{M.success("Navigate to subscription upgrade page"),ye()}}),e.jsx(fS,{isOpen:V,onClose:We,subscriptionErrorDetails:A,onTrialActivated:fe})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-sm mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Select a Branch"}),e.jsx("p",{className:"text-gray-600 mb-1 text-sm",children:"Please use the branch selector in the header."})]})})})},CK=({isOpen:t,onClose:s,onSubmit:r,editingResident:a,selectedBranch:n})=>{const[i,l]=h.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",permanentAddress:{street:"",city:"",state:"",pincode:""},workDetails:{company:"",designation:"",workAddress:""},emergencyContact:{name:"",relationship:"",phone:"",address:""},checkInDate:"",contractStartDate:"",status:"pending"}),[o,c]=h.useState(!1);h.useEffect(()=>{var m,x,g,p,f,b,y,v,N,S,w;a&&l({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",dateOfBirth:a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"",gender:a.gender||"",permanentAddress:{street:((m=a.permanentAddress)==null?void 0:m.street)||"",city:((x=a.permanentAddress)==null?void 0:x.city)||"",state:((g=a.permanentAddress)==null?void 0:g.state)||"",pincode:((p=a.permanentAddress)==null?void 0:p.pincode)||""},workDetails:{company:((f=a.workDetails)==null?void 0:f.company)||"",designation:((b=a.workDetails)==null?void 0:b.designation)||"",workAddress:((y=a.workDetails)==null?void 0:y.workAddress)||""},emergencyContact:{name:((v=a.emergencyContact)==null?void 0:v.name)||"",relationship:((N=a.emergencyContact)==null?void 0:N.relationship)||"",phone:((S=a.emergencyContact)==null?void 0:S.phone)||"",address:((w=a.emergencyContact)==null?void 0:w.address)||""},checkInDate:a.checkInDate?new Date(a.checkInDate).toISOString().split("T")[0]:"",contractStartDate:a.contractStartDate?new Date(a.contractStartDate).toISOString().split("T")[0]:"",status:a.status||"pending"})},[a]);const u=(m,x)=>{if(m.includes(".")){const[g,p]=m.split(".");l(f=>({...f,[g]:{...f[g],[p]:x}}))}else l(g=>({...g,[m]:x}))},d=async m=>{if(m.preventDefault(),!i.firstName||!i.lastName||!i.phone){M.error("Please fill in all required fields");return}c(!0);try{const x={...i},g=await r(x);g&&g.success!==!1?(s(),M.success(a?"Resident updated successfully":"Resident created successfully")):(console.error("Form submission failed:",g),g&&g.message?M.error(g.message):M.error("Failed to save resident. Please try again."))}catch(x){console.error("Error submitting resident:",x),M.error("Failed to save resident. Please try again.")}finally{c(!1)}};return t?e.jsx(vt,{children:e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(jt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Resident":"Add New Resident"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a?"Update resident information and details":"Create a new resident profile"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:d,className:"overflow-y-auto max-h-[calc(90vh-120px)] p-6",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(jt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"BASIC INFORMATION"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Personal details and contact information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"First Name *"}),e.jsx("input",{type:"text",value:i.firstName,onChange:m=>u("firstName",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter first name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Last Name *"}),e.jsx("input",{type:"text",value:i.lastName,onChange:m=>u("lastName",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter last name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",value:i.email,onChange:m=>u("email",m.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Phone *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",value:i.phone,onChange:m=>u("phone",m.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter phone number",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Date of Birth *"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",value:i.dateOfBirth,onChange:m=>u("dateOfBirth",m.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Gender *"}),e.jsxs("select",{value:i.gender,onChange:m=>u("gender",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400 bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(sr,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PERMANENT ADDRESS"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Home address information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 lg:col-span-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Street Address *"}),e.jsx("input",{type:"text",value:i.permanentAddress.street,onChange:m=>u("permanentAddress.street",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter street address",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"City *"}),e.jsx("input",{type:"text",value:i.permanentAddress.city,onChange:m=>u("permanentAddress.city",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter city",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"State *"}),e.jsx("input",{type:"text",value:i.permanentAddress.state,onChange:m=>u("permanentAddress.state",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter state",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pincode *"}),e.jsx("input",{type:"text",value:i.permanentAddress.pincode,onChange:m=>u("permanentAddress.pincode",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter pincode",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(_E,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"WORK DETAILS (OPTIONAL)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Employment and workplace information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Company"}),e.jsx("input",{type:"text",value:i.workDetails.company,onChange:m=>u("workDetails.company",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter company name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Designation"}),e.jsx("input",{type:"text",value:i.workDetails.designation,onChange:m=>u("workDetails.designation",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter job title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Work Address"}),e.jsx("input",{type:"text",value:i.workDetails.workAddress,onChange:m=>u("workDetails.workAddress",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter work address"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"EMERGENCY CONTACT"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Emergency contact person details"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contact Name *"}),e.jsx("input",{type:"text",value:i.emergencyContact.name,onChange:m=>u("emergencyContact.name",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter contact name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Relationship *"}),e.jsx("input",{type:"text",value:i.emergencyContact.relationship,onChange:m=>u("emergencyContact.relationship",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"e.g., Father, Mother, Sibling",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contact Phone *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",value:i.emergencyContact.phone,onChange:m=>u("emergencyContact.phone",m.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",placeholder:"Enter contact phone",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contact Address *"}),e.jsx("textarea",{value:i.emergencyContact.address,onChange:m=>u("emergencyContact.address",m.target.value),rows:3,className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400 resize-none",placeholder:"Enter contact address",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(xt,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"DATES AND STATUS"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Important dates and current status"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Check-in Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",value:i.checkInDate,onChange:m=>u("checkInDate",m.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contract Start Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",value:i.contractStartDate,onChange:m=>u("contractStartDate",m.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Status"}),e.jsxs("select",{value:i.status,onChange:m=>u("status",m.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400 bg-white",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"moved_out",children:"Moved Out"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-semibold transition-all duration-200 hover:scale-105 border border-gray-300 shadow-sm hover:shadow-md",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:o,className:"flex items-center space-x-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-700 text-white rounded-lg hover:from-blue-700 hover:to-purple-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 font-semibold",children:[e.jsx(Za,{className:"h-5 w-5"}),e.jsx("span",{children:o?"Saving...":a?"Update Resident":"Add Resident"}),o&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white ml-2"})]})]})]})]})})}):null},Yy=({isOpen:t,onClose:s,resident:r,onEdit:a})=>{const[n,i]=h.useState(null),[l,o]=h.useState(!1),[c,u]=h.useState("overview");h.useEffect(()=>{r&&t&&d(r._id)},[r,t]);const d=async C=>{try{o(!0);const k=await(await fetch(`/api/residents/${C}/details`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();k.success?i(k.data):M.error(k.message||"Failed to fetch resident details")}catch(j){console.error("Error fetching resident details:",j),M.error("Failed to fetch resident details")}finally{o(!1)}};if(!r)return null;const m=C=>C?new Date(C).toLocaleDateString("en-IN"):"Not specified",x=C=>C?`₹${C.toLocaleString()}`:"₹0",g=C=>{const j={active:{color:"bg-green-100 text-green-800",text:"Active"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},inactive:{color:"bg-gray-100 text-gray-800",text:"Inactive"},moved_out:{color:"bg-red-100 text-red-800",text:"Moved Out"},notice_period:{color:"bg-orange-100 text-orange-800",text:"Notice Period"}},k=j[C]||j.pending;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.color}`,children:k.text})},p=C=>{const j={paid:{color:"bg-green-100 text-green-800",text:"Paid"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},overdue:{color:"bg-red-100 text-red-800",text:"Overdue"}},k=j[C]||j.pending;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.color}`,children:k.text})},f=[{id:"overview",label:"Overview",icon:jt},{id:"payments",label:"Payments",icon:Ks},{id:"room",label:"Room & Allocation",icon:Ie},{id:"history",label:"Room History",icon:ol},{id:"documents",label:"Documents",icon:ns}],b=()=>{var C,j,k,E,R,D,P,T,B,F,L,I,V,_,G;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(jt,{className:"h-5 w-5 mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Full Name:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[r.firstName," ",r.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.phone})]}),r.alternatePhone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Alternate Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.alternatePhone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date of Birth:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.dateOfBirth)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Gender:"}),e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:r.gender})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status:"}),e.jsx("span",{children:g(r.status)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2"}),"Permanent Address"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Street:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(C=r.permanentAddress)==null?void 0:C.street})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"City:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(j=r.permanentAddress)==null?void 0:j.city})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"State:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(k=r.permanentAddress)==null?void 0:k.state})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pincode:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(E=r.permanentAddress)==null?void 0:E.pincode})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"Work Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Company:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(R=r.workDetails)==null?void 0:R.company})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Designation:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(D=r.workDetails)==null?void 0:D.designation})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Work Address:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(P=r.workDetails)==null?void 0:P.workAddress})]}),((T=r.workDetails)==null?void 0:T.workPhone)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Work Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.workDetails.workPhone})]}),((B=r.workDetails)==null?void 0:B.workEmail)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Work Email:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.workDetails.workEmail})]}),((F=r.workDetails)==null?void 0:F.salary)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Salary:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:["₹",r.workDetails.salary.toLocaleString()]})]}),((L=r.workDetails)==null?void 0:L.joiningDate)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Joining Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.workDetails.joiningDate)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2"}),"Emergency Contact"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(I=r.emergencyContact)==null?void 0:I.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Relationship:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(V=r.emergencyContact)==null?void 0:V.relationship})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(_=r.emergencyContact)==null?void 0:_.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(G=r.emergencyContact)==null?void 0:G.address})]})]})]})]})},y=()=>{var C,j,k,E,R,D,P,T;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x(((C=r.advancePayment)==null?void 0:C.amount)||0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Advance Payment"}),((j=r.advancePayment)==null?void 0:j.date)&&e.jsx("div",{className:"text-xs text-blue-500 mt-1",children:m(r.advancePayment.date)})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x(((k=r.rentPayment)==null?void 0:k.amount)||0)}),e.jsx("div",{className:"text-sm text-green-600",children:"Rent Payment"}),((E=r.rentPayment)==null?void 0:E.date)&&e.jsx("div",{className:"text-xs text-green-500 mt-1",children:m(r.rentPayment.date)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x(r.totalAmountPaid||0)}),e.jsx("div",{className:"text-sm text-purple-600",children:"Total Paid"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"Current Room & Cost Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Room Number:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.roomNumber||"Unassigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Bed Number:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.bedNumber||"Not assigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Sharing Type:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.sharingType||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Monthly Cost:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:x(r.cost)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Payment Status:"}),e.jsx("span",{children:p(r.paymentStatus)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Last Payment:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.lastPaymentDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Check-in Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.checkInDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract Start:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.contractStartDate)})]})]})]})]}),(((R=r.advancePayment)==null?void 0:R.receiptNumber)||((D=r.rentPayment)==null?void 0:D.receiptNumber))&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(gg,{className:"h-5 w-5 mr-2"}),"Payment Receipts"]}),e.jsxs("div",{className:"space-y-3",children:[((P=r.advancePayment)==null?void 0:P.receiptNumber)&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Advance Receipt:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.advancePayment.receiptNumber})]}),((T=r.rentPayment)==null?void 0:T.receiptNumber)&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rent Receipt:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.rentPayment.receiptNumber})]})]})]})]})},v=()=>{var C,j;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"Current Room Allocation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Room Number:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.roomNumber||"Unassigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Bed Number:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.bedNumber||"Not assigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Floor:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((j=(C=r.roomId)==null?void 0:C.floorId)==null?void 0:j.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Sharing Type:"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.sharingType||"N/A"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Monthly Cost:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:x(r.cost)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Check-in Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.checkInDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract Start:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.contractStartDate)})]}),r.contractEndDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract End:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.contractEndDate)})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Important Dates"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Check-in Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.checkInDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract Start:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.contractStartDate)})]}),r.contractEndDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract End:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.contractEndDate)})]})]}),e.jsxs("div",{className:"space-y-3",children:[r.checkOutDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Check-out Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.checkOutDate)})]}),r.vacationDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Vacation Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:m(r.vacationDate)})]}),r.noticeDays&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Notice Period:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[r.noticeDays," days"]})]})]})]})]})]})},N=()=>e.jsx("div",{className:"space-y-6",children:r.switchHistory&&r.switchHistory.length>0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(ol,{className:"h-5 w-5 mr-2"}),"Room Switch History"]}),e.jsx("div",{className:"space-y-4",children:r.switchHistory.map((C,j)=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ol,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-gray-900",children:[C.fromRoom," → ",C.toRoom]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Bed ",C.fromBed," → Bed ",C.toBed]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:m(C.switchDate)}),C.reason&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Reason: ",C.reason]})]})]})},j))})]}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[e.jsx(ol,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No room switch history found"})]})}),S=()=>{var C,j,k,E;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 mr-2"}),"Documents"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"ID Proof:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(C=r.documents)!=null&&C.idProof?"Uploaded":"Not uploaded"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address Proof:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(j=r.documents)!=null&&j.addressProof?"Uploaded":"Not uploaded"})]})]}),e.jsxs("div",{className:"space-y-3",children:[((k=r.documents)==null?void 0:k.idProof)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"ID Proof File:"}),e.jsx("a",{href:r.documents.idProof,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800",children:"View Document"})]}),((E=r.documents)==null?void 0:E.addressProof)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address Proof File:"}),e.jsx("a",{href:r.documents.addressProof,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800",children:"View Document"})]})]})]})]}),(r.dietaryRestrictions||r.medicalConditions||r.specialRequirements||r.notes)&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-3",children:[r.dietaryRestrictions&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Dietary Restrictions:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:r.dietaryRestrictions})]}),r.medicalConditions&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Medical Conditions:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:r.medicalConditions})]}),r.specialRequirements&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Special Requirements:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:r.specialRequirements})]}),r.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:r.notes})]})]})]})]})},w=()=>{switch(c){case"overview":return b();case"payments":return y();case"room":return v();case"history":return N();case"documents":return S();default:return b()}};return e.jsx(vt,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Resident Details"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[r.firstName," ",r.lastName," • ",r.email]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:a,className:"inline-flex items-center px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-8 px-6",children:f.map(C=>{const j=C.icon;return e.jsxs("button",{onClick:()=>u(C.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c===C.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:C.label})]},C.id)})})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)] p-6",children:l?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):w()})]})})})},lh=({isOpen:t,onClose:s,onConfirm:r,title:a="Confirm Delete",message:n="Are you sure you want to delete this item? This action cannot be undone.",confirmText:i="Delete",cancelText:l="Cancel",loading:o=!1})=>e.jsx(vt,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Rt,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700",children:n})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,disabled:o,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:l}),e.jsx("button",{type:"button",onClick:r,disabled:o,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Deleting...":i})]})]})})}),kK=({isOpen:t,onClose:s,selectedBranch:r,onSuccess:a})=>{var E;const[n,i]=h.useState(null),[l,o]=h.useState(!1),[c,u]=h.useState(0),[d,m]=h.useState(null),[x,g]=h.useState(null),[p,f]=h.useState(!1),b=h.useRef(null),y=[{firstName:"John",lastName:"Doe",email:"john.doe@example.com",phone:"9876543210",alternatePhone:"9876543211",gender:"male",dateOfBirth:"1995-05-15",permanentStreet:"123 Main Street",permanentCity:"Mumbai",permanentState:"Maharashtra",permanentPincode:"400001",emergencyName:"Jane Doe",emergencyRelationship:"Father",emergencyPhone:"9876543212",emergencyAddress:"123 Main Street, Mumbai, Maharashtra 400001",workCompany:"Tech Solutions Ltd",workDesignation:"Software Engineer",workAddress:"456 Tech Park, Mumbai",workPhone:"9876543213",workEmail:"john.doe@techsolutions.com",workSalary:"75000",workJoiningDate:"2023-01-15",checkInDate:"2024-01-15",contractStartDate:"2024-01-15",contractEndDate:"2024-12-31",status:"active"},{firstName:"Sarah",lastName:"Smith",email:"sarah.smith@example.com",phone:"9876543214",alternatePhone:"9876543215",gender:"female",dateOfBirth:"1998-08-22",permanentStreet:"456 Oak Avenue",permanentCity:"Delhi",permanentState:"Delhi",permanentPincode:"110001",emergencyName:"Robert Smith",emergencyRelationship:"Father",emergencyPhone:"9876543216",emergencyAddress:"456 Oak Avenue, Delhi, Delhi 110001",workCompany:"Marketing Pro",workDesignation:"Marketing Manager",workAddress:"789 Business Center, Delhi",workPhone:"9876543217",workEmail:"sarah.smith@marketingpro.com",workSalary:"65000",workJoiningDate:"2023-03-01",checkInDate:"2024-01-20",contractStartDate:"2024-01-20",contractEndDate:"2024-12-31",status:"active"},{firstName:"Mike",lastName:"Johnson",email:"mike.johnson@example.com",phone:"9876543218",alternatePhone:"9876543219",gender:"male",dateOfBirth:"1993-12-10",permanentStreet:"789 Pine Road",permanentCity:"Bangalore",permanentState:"Karnataka",permanentPincode:"560001",emergencyName:"Lisa Johnson",emergencyRelationship:"Mother",emergencyPhone:"9876543220",emergencyAddress:"789 Pine Road, Bangalore, Karnataka 560001",workCompany:"Data Analytics Co",workDesignation:"Data Analyst",workAddress:"321 Tech Hub, Bangalore",workPhone:"9876543221",workEmail:"mike.johnson@dataanalytics.com",workSalary:"55000",workJoiningDate:"2023-06-15",checkInDate:"2024-02-01",contractStartDate:"2024-02-01",contractEndDate:"2024-12-31",status:"pending"},{firstName:"Emily",lastName:"Williams",email:"emily.williams@example.com",phone:"9876543222",alternatePhone:"9876543223",gender:"female",dateOfBirth:"1996-03-28",permanentStreet:"321 Elm Street",permanentCity:"Chennai",permanentState:"Tamil Nadu",permanentPincode:"600001",emergencyName:"David Williams",emergencyRelationship:"Father",emergencyPhone:"9876543224",emergencyAddress:"321 Elm Street, Chennai, Tamil Nadu 600001",workCompany:"Creative Studio",workDesignation:"Graphic Designer",workAddress:"654 Creative Plaza, Chennai",workPhone:"9876543225",workEmail:"emily.williams@creativestudio.com",workSalary:"45000",workJoiningDate:"2023-09-01",checkInDate:"2024-02-05",contractStartDate:"2024-02-05",contractEndDate:"2024-12-31",status:"active"},{firstName:"David",lastName:"Brown",email:"david.brown@example.com",phone:"9876543226",alternatePhone:"9876543227",gender:"male",dateOfBirth:"1994-07-14",permanentStreet:"654 Maple Drive",permanentCity:"Hyderabad",permanentState:"Telangana",permanentPincode:"500001",emergencyName:"Mary Brown",emergencyRelationship:"Mother",emergencyPhone:"9876543228",emergencyAddress:"654 Maple Drive, Hyderabad, Telangana 500001",workCompany:"Sales Pro",workDesignation:"Sales Representative",workAddress:"987 Sales Tower, Hyderabad",workPhone:"9876543229",workEmail:"david.brown@salespro.com",workSalary:"50000",workJoiningDate:"2023-12-01",checkInDate:"2024-02-10",contractStartDate:"2024-02-10",contractEndDate:"2024-12-31",status:"active"}],v=()=>{const R=ul.json_to_sheet(y),D=ul.book_new();ul.book_append_sheet(D,R,"Residents");const P=[{wch:12},{wch:12},{wch:25},{wch:12},{wch:12},{wch:8},{wch:12},{wch:20},{wch:12},{wch:12},{wch:10},{wch:15},{wch:12},{wch:12},{wch:30},{wch:20},{wch:15},{wch:25},{wch:12},{wch:25},{wch:10},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:10}];R["!cols"]=P,I5(D,"residents_sample.xlsx"),M.success("Sample file downloaded successfully!")},N=R=>{const D=R.target.files[0];D&&(i(D),S(D))},S=R=>{const D=new FileReader;D.onload=P=>{try{const T=new Uint8Array(P.target.result),B=tx(T,{type:"array"}),F=B.SheetNames[0],L=B.Sheets[F],I=ul.sheet_to_json(L,{header:1});if(I.length<2){M.error("File must contain at least a header row and one data row");return}const V=I[0],_=I.slice(1,6);m({headers:V,preview:_.map(G=>{const U={};return V.forEach((A,q)=>{U[A]=G[q]||""}),U}),totalRows:I.length-1})}catch(T){console.error("Error reading file:",T),M.error("Error reading file. Please check the file format.")}},D.readAsArrayBuffer(R)},w=async()=>{if(!n)return;o(!0),u(0);const R=setInterval(()=>{u(D=>D>=90?(clearInterval(R),90):D+10)},200);try{const D=await n.arrayBuffer(),P=new FormData;P.append("file",new Blob([D],{type:n.type}),n.name),P.append("branchId",r._id);const T=await fetch("/api/residents/bulk-upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:P});clearInterval(R),u(100);const B=await T.json();if(B.success){if(g(B.data),M.success(`✅ Successfully processed ${B.data.totalRows} rows!`),B.data.uploadedCount>0&&M.success(`📤 Uploaded: ${B.data.uploadedCount} residents`,{duration:3e3}),B.data.skippedCount>0&&M.error(`⏭️ Skipped: ${B.data.skippedCount} duplicates`,{duration:4e3}),B.data.errors&&B.data.errors.length>0&&M.error(`❌ Errors: ${B.data.errors.length} rows had issues`,{duration:5e3}),B.data.verification){const{verifiedCount:F,expectedCount:L,verificationPassed:I}=B.data.verification;I?M.success(`✅ Verification: All ${F} residents confirmed in database`,{duration:3e3}):M.error(`⚠️ Verification: ${F}/${L} residents found in database`,{duration:5e3})}u(100),f(!0)}else M.error(B.message||"Upload failed")}catch(D){clearInterval(R),console.error("Error uploading file:",D),M.error("Upload failed. Please try again.")}finally{o(!1)}},C=()=>{g(null),s()},j=()=>{f(!1),g(null),i(null),m(null),b.current&&(b.current.value=""),console.log("🔄 ResidentBulkUploadModal: Closing results modal and triggering refresh"),a(),s()},k=()=>{i(null),m(null),g(null),u(0),b.current&&(b.current.value="")};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(jt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Bulk Upload Residents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload multiple residents from Excel file"})]})]}),e.jsx("button",{onClick:C,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"📋 Upload Instructions"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("p",{children:"• Upload an Excel file (.xlsx, .xls) or CSV file"}),e.jsx("p",{children:"• File should contain the following columns:"}),e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:["📞 ",e.jsx("strong",{children:"Phone Number Format:"}),' Use exactly 10 digits without country code (e.g., "9876543210" not "+91-9876543210")']})}),e.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"firstName:"})," Resident's first name (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"lastName:"})," Resident's last name (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"email:"})," Email address (required, must be unique)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"phone:"})," Phone number (required, exactly 10 digits, no country code)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"alternatePhone:"})," Alternate phone (optional, exactly 10 digits, no country code)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"gender:"})," Gender (required: male, female, other)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"dateOfBirth:"})," Date of birth (required, YYYY-MM-DD)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"permanentStreet:"})," Permanent address street (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"permanentCity:"})," Permanent address city (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"permanentState:"})," Permanent address state (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"permanentPincode:"})," Permanent address pincode (required, exactly 6 digits)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"emergencyName:"})," Emergency contact name (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"emergencyRelationship:"})," Relationship with emergency contact (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"emergencyPhone:"})," Emergency contact phone (required, exactly 10 digits, no country code)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"emergencyAddress:"})," Emergency contact address (required)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workCompany:"})," Work company name (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workDesignation:"})," Work designation (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workAddress:"})," Work address (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workPhone:"})," Work phone (optional, exactly 10 digits, no country code)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workEmail:"})," Work email (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workSalary:"})," Work salary (optional, positive number)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workJoiningDate:"})," Work joining date (optional, YYYY-MM-DD)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"checkInDate:"})," Check-in date (required, YYYY-MM-DD)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"contractStartDate:"})," Contract start date (required, YYYY-MM-DD)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"contractEndDate:"})," Contract end date (optional, YYYY-MM-DD)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"checkOutDate:"})," Check-out date (optional, YYYY-MM-DD)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"status:"})," Status (optional: active, inactive, moved_out, pending, notice_period)"]})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:["⚠️ ",e.jsx("strong",{children:"Duplicate Check:"})," Residents with existing email or phone number will be skipped"]})})]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"📥 Download Sample File"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get a sample Excel file with the correct format"})]}),e.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200",children:[e.jsx(xr,{className:"h-4 w-4 mr-2"}),"Download Sample"]})]})}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(fg,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Excel File"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag and drop your Excel file here, or click to browse"}),e.jsx("input",{ref:b,type:"file",accept:".xlsx,.xls,.csv",onChange:N,className:"hidden"}),e.jsxs("button",{onClick:()=>{var R;return(R=b.current)==null?void 0:R.click()},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:[e.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Choose File"]})]}),n&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fg,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:n.name}),e.jsxs("p",{className:"text-xs text-green-700",children:[(n.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:k,className:"text-red-600 hover:text-red-800",children:"Remove"})]})})]}),d&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Data Preview"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing first 5 rows of ",d.totalRows," total rows"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-200",children:d.headers.map((R,D)=>e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:R},D))})}),e.jsx("tbody",{children:d.preview.map((R,D)=>e.jsx("tr",{className:"border-b border-gray-100",children:d.headers.map((P,T)=>e.jsx("td",{className:"py-2 px-3 text-gray-600",children:R[P]||"-"},T))},D))})]})})]}),l&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(no,{className:"h-5 w-5 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Uploading..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Please wait while we process your data..."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:C,disabled:l,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:w,disabled:!n||l,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200 disabled:opacity-50",children:l?e.jsxs(e.Fragment,{children:[e.jsx(no,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bi,{className:"h-4 w-4"}),e.jsx("span",{children:"Upload Residents"})]})})]})]})]}),p&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Summary of your bulk upload operation"})]})]}),e.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition duration-200",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.totalRows}),e.jsx("div",{className:"text-sm text-green-700",children:"Total Rows"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.uploadedCount}),e.jsx("div",{className:"text-sm text-blue-700",children:"Successfully Uploaded"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.skippedCount}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Skipped (Duplicates)"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:((E=x.errors)==null?void 0:E.length)||0}),e.jsx("div",{className:"text-sm text-red-700",children:"Errors"})]})]}),x.duplicates&&x.duplicates.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-yellow-800",children:["Duplicates Found (",x.duplicates.length,")"]})]}),e.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"The following residents were skipped because they already exist in the system:"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:x.duplicates.map((R,D)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-white rounded border border-yellow-200",children:[e.jsx("div",{className:"w-6 h-6 bg-yellow-100 text-yellow-800 rounded-full flex items-center justify-center text-xs font-semibold",children:R.row}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:R.name}),e.jsx("div",{className:"text-xs text-yellow-600",children:R.reason})]})]},D))})]}),x.errors&&x.errors.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Yt,{className:"h-5 w-5 text-red-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:["Errors (",x.errors.length,")"]})]}),e.jsx("p",{className:"text-sm text-red-700 mb-3",children:"The following rows had issues and could not be processed:"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:x.errors.map((R,D)=>e.jsx("div",{className:"p-2 bg-white rounded border border-red-200",children:e.jsx("div",{className:"text-sm text-red-800",children:R})},D))})]}),x.residentStats&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Jt,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Resident Statistics"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:x.residentStats.totalResidents}),e.jsx("div",{className:"text-xs text-blue-700",children:"Total Residents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:x.residentStats.activeCount}),e.jsx("div",{className:"text-xs text-blue-700",children:"Active"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:x.residentStats.pendingCount}),e.jsx("div",{className:"text-xs text-blue-700",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:x.residentStats.maleCount+x.residentStats.femaleCount}),e.jsx("div",{className:"text-xs text-blue-700",children:"By Gender"})]})]}),x.residentStats.genderBreakdown&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Gender Breakdown:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(x.residentStats.genderBreakdown).map(([R,D])=>e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[R,": ",D]},R))})]})]}),x.uploadedCount>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-green-800",children:["Successfully uploaded ",x.uploadedCount," residents!"]}),e.jsx("p",{className:"text-sm text-green-700",children:"Your data has been processed and added to the system."})]})]})}),e.jsx("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:j,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"Close"})})]})]})})]}):null},EK=({isOpen:t,onClose:s,module:r,submodule:a,action:n})=>{const i=Ms(),l=d=>({resident_management:"Resident Management",payment_tracking:"Payment Tracking",room_allocation:"Room Allocation",qr_code_payments:"QR Code Payments",ticket_system:"Ticket System",analytics_reports:"Analytics & Reports",bulk_upload:"Bulk Upload",email_notifications:"Email Notifications",sms_notifications:"SMS Notifications",multi_branch:"Multi-Branch",custom_reports:"Custom Reports",api_access:"API Access",mobile_app:"Mobile App",advanced_analytics:"Advanced Analytics"})[d]||d,o=d=>({residents:"Residents",onboarding:"Onboarding",offboarding:"Offboarding",room_switching:"Room Switching",moved_out:"Moved Out",payments:"Payments",payment_history:"Payment History",payment_reports:"Payment Reports",rooms:"Rooms",room_availability:"Room Availability",room_assignments:"Room Assignments",qr_generation:"QR Generation",qr_scanning:"QR Scanning",payment_processing:"Payment Processing",tickets:"Tickets",ticket_categories:"Ticket Categories",ticket_priorities:"Ticket Priorities",dashboard:"Dashboard",reports:"Reports",charts:"Charts",exports:"Exports",file_upload:"File Upload",data_validation:"Data Validation",bulk_import:"Bulk Import",email_templates:"Email Templates",email_sending:"Email Sending",email_history:"Email History",sms_templates:"SMS Templates",sms_sending:"SMS Sending",sms_history:"SMS History",branch_management:"Branch Management",branch_switching:"Branch Switching",branch_reports:"Branch Reports",report_builder:"Report Builder",custom_queries:"Custom Queries",report_scheduling:"Report Scheduling",api_keys:"API Keys",api_endpoints:"API Endpoints",api_logs:"API Logs",mobile_sync:"Mobile Sync",push_notifications:"Push Notifications",offline_mode:"Offline Mode",advanced_charts:"Advanced Charts",predictive_analytics:"Predictive Analytics",data_insights:"Data Insights"})[d]||d,c=d=>({create:"Create",read:"View",update:"Edit",delete:"Delete"})[d]||d,u=()=>{s(),i("/admin/subscription-plans")};return e.jsx(vt,{children:t&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black bg-opacity-50",onClick:s}),e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Er,{className:"h-5 w-5 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permission Required"})]}),e.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ct,{className:"h-5 w-5 text-gray-400"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-red-100 to-orange-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(vn,{className:"h-8 w-8 text-orange-600"})}),e.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Action Not Allowed"}),e.jsxs("p",{className:"text-gray-600",children:["You don't have permission to ",e.jsx("strong",{children:c(n)})," ",o(a)," in ",l(r),"."]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"💡 Tip:"})," Upgrade your subscription plan to unlock this feature and get access to more advanced capabilities."]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors font-medium",children:"Cancel"}),e.jsxs("button",{onClick:u,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 font-medium flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"Upgrade Plan"}),e.jsx(oi,{className:"h-4 w-4"})]})]})]})]})]})})},zl=({module:t,submodule:s,action:r,children:a,onClick:n,showTooltip:i=!0,tooltipMessage:l,disabled:o=!1,className:c="",...u})=>{const{canPerformActionOnSubmodule:d}=Wc(),[m,x]=h.useState(!1),g=d(t,s,r),p=o||!g,f=`You don't have permission to ${r} ${s}. Please upgrade your subscription plan.`,b=N=>{if(p){N.preventDefault(),x(!0);return}n&&n(N)},y=()=>l||f,v=Ke.Children.map(a,N=>Ke.isValidElement(N)?Ke.cloneElement(N,{disabled:p,onClick:b,className:`${N.props.className||""} ${p?"opacity-50 cursor-not-allowed":""} ${c}`.trim(),title:p&&i?y():N.props.title,...u}):N);return e.jsxs(e.Fragment,{children:[v,e.jsx(EK,{isOpen:m,onClose:()=>x(!1),module:t,submodule:s,action:r})]})},PK=({children:t,message:s,position:r="top",disabled:a=!1})=>{const[n,i]=h.useState(!1),l=h.useRef(null),o=()=>{switch(r){case"top":return"bottom-full left-1/2 transform -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 transform -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 transform -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 transform -translate-y-1/2 ml-2";default:return"bottom-full left-1/2 transform -translate-x-1/2 mb-2"}},c=()=>{switch(r){case"top":return"top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-gray-900";case"bottom":return"bottom-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-t-gray-900";case"left":return"left-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-r-gray-900";case"right":return"right-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-l-gray-900";default:return"top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-gray-900"}};return a?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{ref:l,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"inline-block",children:t}),e.jsx(vt,{children:n&&e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`absolute z-50 ${o()}`,children:[e.jsx("div",{className:"bg-gray-900 text-white text-sm rounded-lg px-3 py-2 max-w-xs shadow-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(kl,{className:"h-4 w-4 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:s})]})}),e.jsx("div",{className:`absolute w-0 h-0 border-4 ${c()}`,style:{borderWidth:"4px"}})]})})]}):t},b0=({module:t,submodule:s,action:r,children:a,onClick:n,disabled:i=!1,className:l="",variant:o="primary",size:c="md",tooltip:u=!0,...d})=>{const{canPerformActionOnSubmodule:m}=Wc(),x=m(t,s,r),g=i||!x,p=()=>{if(g)return"bg-gray-100 text-gray-400 cursor-not-allowed";switch(o){case"primary":return"bg-blue-600 hover:bg-blue-700 text-white";case"secondary":return"bg-gray-600 hover:bg-gray-700 text-white";case"success":return"bg-green-600 hover:bg-green-700 text-white";case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"outline":return"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300";default:return"bg-blue-600 hover:bg-blue-700 text-white"}},f=()=>{switch(c){case"sm":return"px-3 py-1.5 text-sm";case"md":return"px-4 py-2 text-sm";case"lg":return"px-6 py-3 text-base";default:return"px-4 py-2 text-sm"}},b=`You don't have permission to ${r} ${s}. Please upgrade your subscription plan.`,y=e.jsx("button",{className:`${p()} ${f()} rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2 ${l}`.trim(),disabled:g,onClick:n,...d,children:a});return u&&g?e.jsx(PK,{message:b,disabled:g,children:y}):e.jsx(zl,{module:t,submodule:s,action:r,onClick:n,disabled:i,children:y})},TK=()=>{const{user:t}=He(J=>J.auth),s=He(Nr),[r,a]=h.useState([]),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[x,g]=h.useState(null),[p,f]=h.useState(null),[b,y]=h.useState(null),[v,N]=h.useState(""),[S,w]=h.useState("all"),[C,j]=h.useState("all"),[k,E]=h.useState(1),[R,D]=h.useState(1),[P,T]=h.useState(!1),[B,F]=h.useState({total:0,active:0,pending:0,movedOut:0}),L=Ms(),I=async()=>{if(s){i(!0);try{const J=new URLSearchParams({page:k,limit:12,branchId:s._id});S!=="all"&&J.append("status",S),C!=="all"&&J.append("gender",C);const K=await(await fetch(`/api/residents?${J}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();if(K.success){console.log("📊 Residents fetched:",K.data.residents.length,"total residents");let oe=K.data.residents;S!=="all"&&(oe=oe.filter(le=>le.status===S)),a(oe),D(K.data.pagination.totalPages)}else M.error(K.message||"Failed to fetch residents")}catch(J){console.error("❌ Residents: Error fetching residents:",J),M.error("Failed to fetch residents")}finally{i(!1)}}},V=async()=>{if(s)try{const J=new URLSearchParams({branchId:s._id}),K=await(await fetch(`/api/residents/stats/overview?${J}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();if(K.success){const oe=K.data;F({total:oe.total||0,active:oe.active||0,pending:oe.pending||0,movedOut:(oe.movedOut||0)+(oe.inactive||0)})}}catch(J){console.error("Error fetching stats:",J)}},_=async()=>{if(!v.trim()){I();return}i(!0);try{const J=new URLSearchParams({q:v,page:k,limit:10,branchId:s._id});S!=="all"&&J.append("status",S),C!=="all"&&J.append("gender",C);const K=await(await fetch(`/api/residents/search/query?${J}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();K.success?a(K.data):M.error(K.message||"Search failed")}catch(J){console.error("Error searching residents:",J),M.error("Search failed")}finally{i(!1)}},G=async J=>{try{const ie=x?`/api/residents/${x._id}`:"/api/residents",le=await(await fetch(ie,{method:x?"PUT":"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({...J,branchId:s._id})})).json();return le.success?(I(),V(),{success:!0,message:le.message}):{success:!1,message:le.message||"Operation failed"}}catch(ie){return console.error("Error submitting resident:",ie),{success:!1,message:"Operation failed"}}},U=async()=>{if(b)try{const ie=await(await fetch(`/api/residents/${b._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();ie.success?(M.success("Resident deleted successfully"),m(!1),y(null),I(),V()):M.error(ie.message||"Failed to delete resident")}catch(J){console.error("Error deleting resident:",J),M.error("Failed to delete resident")}},A=J=>{g(J),o(!0)},q=J=>{console.log("🔍 Residents: Navigating to resident profile:",J._id),f(J),L(`/admin/residents/${J._id}`)},Y=J=>{y(J),m(!0)},O=()=>{console.log("🔄 Bulk upload success - refreshing residents and stats"),setTimeout(()=>{console.log("🔄 Delayed refresh - fetching residents and stats"),I(),V()},1e3)},W=async()=>{try{const ie=await(await fetch("/api/residents/export/data?format=csv",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();if(ie.success){const K=ie.data.residents.map(Ee=>Object.values(Ee).join(",")).join(`
`),oe=new Blob([K],{type:"text/csv"}),le=window.URL.createObjectURL(oe),Se=document.createElement("a");Se.href=le,Se.download="residents.csv",Se.click(),window.URL.revokeObjectURL(le),M.success("Residents exported successfully")}else M.error(ie.message||"Export failed")}catch(J){console.error("Error exporting residents:",J),M.error("Export failed")}};h.useEffect(()=>{s&&(I(),V())},[s,k,S,C]),h.useEffect(()=>{if(v){const J=setTimeout(_,500);return()=>clearTimeout(J)}},[v]);const z=J=>{const ie={active:{color:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200",icon:Be,gradient:"from-green-400 to-emerald-500"},pending:{color:"bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800 border-yellow-200",icon:ut,gradient:"from-yellow-400 to-orange-500"},inactive:{color:"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border-gray-200",icon:Ze,gradient:"from-gray-400 to-slate-500"},moved_out:{color:"bg-gradient-to-r from-red-100 to-pink-100 text-red-800 border-red-200",icon:ea,gradient:"from-red-400 to-pink-500"}},K=ie[J]||ie.pending,oe=K.icon;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${K.color} shadow-sm`,children:[e.jsx(oe,{className:"w-3 h-3 mr-1.5"}),J.replace("_"," ")]})},H=J=>{var le,Se,Ee;const ie=`${((le=J.firstName)==null?void 0:le.charAt(0))||""}${((Se=J.lastName)==null?void 0:Se.charAt(0))||""}`.toUpperCase(),K=["from-blue-400 to-indigo-500","from-purple-400 to-pink-500","from-green-400 to-emerald-500","from-orange-400 to-red-500","from-teal-400 to-cyan-500","from-violet-400 to-purple-500"],oe=(((Ee=J.firstName)==null?void 0:Ee.length)||0)%K.length;return e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${K[oe]} flex items-center justify-center text-white font-semibold text-lg shadow-lg`,children:ie||e.jsx(jt,{className:"w-6 h-6"})})},Q=J=>J.isVIP?e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800 rounded-full text-xs font-medium border border-yellow-200",children:[e.jsx(vn,{className:"w-3 h-3"}),"VIP"]}):J.isLongTerm?e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 rounded-full text-xs font-medium border border-blue-200",children:[e.jsx(Fs,{className:"w-3 h-3"}),"Long-term"]}):null;return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Je,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Resident Management"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Manage residents for ",s.name]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center px-3 py-1.5 text-sm bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Bi,{className:"h-4 w-4 mr-1.5"}),"Import"]}),e.jsxs(b0,{module:"resident_management",submodule:"residents",action:"create",onClick:()=>o(!0),className:"inline-flex items-center px-3 py-1.5 text-sm bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(as,{className:"h-4 w-4 mr-1.5"}),"Add Resident"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow p-4 border border-gray-100 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center shadow",children:e.jsx(Je,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:B.total}),e.jsx("p",{className:"text-xs text-gray-500",children:"All time"})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow p-4 border border-gray-100 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg flex items-center justify-center shadow",children:e.jsx(Be,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:B.active}),e.jsx("p",{className:"text-xs text-green-600",children:"Currently staying"})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow p-4 border border-gray-100 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center shadow",children:e.jsx(ut,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:B.pending}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Awaiting check-in"})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow p-4 border border-gray-100 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-400 to-pink-500 rounded-lg flex items-center justify-center shadow",children:e.jsx(ea,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Moved Out"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:B.movedOut}),e.jsx("p",{className:"text-xs text-red-600",children:"This month"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:flex lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"w-full lg:max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search residents...",value:v,onChange:J=>N(J.target.value),className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white"})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(ls,{value:S,onValueChange:w,children:[e.jsx(Qt,{className:"w-[180px]",children:e.jsx(os,{placeholder:"Select Status"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Status"}),e.jsx(ke,{value:"active",children:"Active"}),e.jsx(ke,{value:"pending",children:"Pending"}),e.jsx(ke,{value:"inactive",children:"Inactive"}),e.jsx(ke,{value:"moved_out",children:"Moved Out"})]})]}),e.jsxs(ls,{value:C,onValueChange:j,children:[e.jsx(Qt,{className:"w-[180px]",children:e.jsx(os,{placeholder:"Select Gender"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Gender"}),e.jsx(ke,{value:"male",children:"Male"}),e.jsx(ke,{value:"female",children:"Female"}),e.jsx(ke,{value:"other",children:"Other"})]})]}),e.jsxs("button",{onClick:W,className:"inline-flex items-center px-4 py-3 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(xr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:n?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading residents..."})]}):r.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(Je,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No residents found"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:v?"Try adjusting your search criteria or filters.":"Get started by adding your first resident to this branch."}),!v&&e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Add Your First Resident"]})]}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:r.map((J,ie)=>{var K;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ie*.1},exit:{opacity:0,y:-20},className:"group bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 hover:border-blue-200 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-indigo-50/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[H(J),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h4",{className:"font-bold text-gray-900 text-base truncate",children:[J.firstName," ",J.lastName]}),Q(J)]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(Tr,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-[200px] block",title:J.email,children:J.email})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[z(J.status),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zl,{module:"resident_management",submodule:"residents",action:"read",onClick:()=>q(J),children:e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110",title:"View details",children:e.jsx(ot,{className:"h-4 w-4"})})}),e.jsx(zl,{module:"resident_management",submodule:"residents",action:"update",onClick:()=>A(J),children:e.jsx("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200 hover:scale-110",title:"Edit resident",children:e.jsx(fa,{className:"h-4 w-4"})})}),e.jsx(zl,{module:"resident_management",submodule:"residents",action:"delete",onClick:()=>Y(J),children:e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110",title:"Delete resident",children:e.jsx(Pr,{className:"h-4 w-4"})})})]})]})]}),e.jsxs("div",{className:"relative mt-4 grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(Cs,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Contact"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:J.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(Ie,{className:"w-4 h-4 text-purple-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Work/Study"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((K=J.workDetails)==null?void 0:K.company)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(xs,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Room"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:J.roomNumber?`Room ${J.roomNumber}`:"Unassigned"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(xt,{className:"w-4 h-4 text-orange-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Check-in"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:J.checkInDate?new Date(J.checkInDate).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{className:"relative mt-4 flex items-center justify-between px-2 py-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded-md transition-colors",children:e.jsx(pg,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-green-600 hover:bg-green-100 rounded-md transition-colors",children:e.jsx(Ks,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-gray-600 hover:bg-gray-200 rounded-md transition-colors",children:e.jsx(io,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zl,{module:"resident_management",submodule:"residents",action:"read",onClick:()=>q(J),children:e.jsx("button",{className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded-md transition-colors",children:e.jsx(ot,{className:"w-4 h-4"})})}),e.jsx(zl,{module:"resident_management",submodule:"residents",action:"update",onClick:()=>A(J),children:e.jsx("button",{className:"p-1.5 text-green-600 hover:bg-green-100 rounded-md transition-colors",children:e.jsx(fa,{className:"w-4 h-4"})})}),e.jsx(zl,{module:"resident_management",submodule:"residents",action:"delete",onClick:()=>Y(J),children:e.jsx("button",{className:"p-1.5 text-red-600 hover:bg-red-100 rounded-md transition-colors",children:e.jsx(Pr,{className:"w-4 h-4"})})})]})]})]},J._id)})}),(R>1||r.length>0)&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:r.length>0?`Page ${k} of ${R} • ${r.length} residents shown`:"No residents found"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>E(Math.max(1,k-1)),disabled:k===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md",children:"Previous"}),e.jsx("button",{onClick:()=>E(Math.min(R,k+1)),disabled:k===R||r.length===0,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md",children:"Next"})]})]})})]})})]}),e.jsx(vt,{children:l&&e.jsx(CK,{isOpen:l,onClose:()=>{o(!1),g(null)},onSubmit:G,editingResident:x,selectedBranch:s})}),e.jsx(vt,{children:c&&p&&e.jsx(Yy,{isOpen:c,onClose:()=>{u(!1),f(null)},resident:p,onEdit:()=>{u(!1),g(p),o(!0)}})}),e.jsx(vt,{children:d&&b&&e.jsx(lh,{isOpen:d,onClose:()=>{m(!1),y(null)},onConfirm:U,title:"Delete Resident",message:`Are you sure you want to delete ${b.firstName} ${b.lastName}? This action cannot be undone.`,confirmText:"Delete Resident",cancelText:"Cancel"})}),e.jsx(kK,{isOpen:P,onClose:()=>T(!1),selectedBranch:s,onSuccess:O})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(Je,{className:"h-10 w-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Select a Branch"}),e.jsx("p",{className:"text-gray-600 mb-1 max-w-md",children:"Please use the branch selector in the header."})]})})},_K=()=>{const{user:t}=He(O=>O.auth),s=He(Nr),[r,a]=h.useState(1),[n,i]=h.useState(!1),[l,o]=h.useState([]),[c,u]=h.useState(null),[d,m]=h.useState(null),[x,g]=h.useState(null),[p,f]=h.useState(""),[b,y]=h.useState(30),[v,N]=h.useState(""),[S,w]=h.useState([]),[C,j]=h.useState(!1),[k,E]=h.useState("");h.useEffect(()=>{s&&(R(),P())},[s]),h.useEffect(()=>{c&&D()},[c]),h.useEffect(()=>{if(p==="notice"&&b>0){const O=new Date;O.setDate(O.getDate()+b),N(O.toISOString().split("T")[0])}},[p,b]);const R=async()=>{try{i(!0);const O=new URLSearchParams;s!=null&&s._id&&O.append("branchId",s._id);const W=await Tt.get(`/residents?${O.toString()}`);if(W.data.success){const z=(W.data.data.residents||[]).filter(H=>H.roomId&&H.bedNumber);o(z)}else M.error(W.data.message||"Failed to fetch residents")}catch(O){console.error("Error fetching residents:",O),M.error("Failed to fetch residents")}finally{i(!1)}},D=async()=>{if(c)try{i(!0);const O=await Tt.get(`/residents/${c._id}/details`);if(O.data.success){const W=O.data.data;m(W),g(W.paymentSummary||null),console.log("Payment details:",W.paymentSummary)}else M.error(O.data.message||"Failed to fetch resident details")}catch(O){console.error("Error fetching resident details:",O),M.error("Failed to fetch resident details")}finally{i(!1)}},P=async()=>{try{const O=await Tt.get("/residents/overdue-vacations");O.data.success&&w(O.data.data.overdueResidents||[])}catch(O){console.error("Error fetching overdue vacations:",O)}},T=async()=>{try{j(!0);const O=await Tt.post("/residents/process-vacations");O.data.success?(M.success(O.data.message),R(),P()):M.error(O.data.message||"Failed to process vacations")}catch(O){console.error("Error processing vacations:",O),M.error("Failed to process vacations")}finally{j(!1)}},B=l.filter(O=>{var z,H,Q,J;const W=k.toLowerCase();return((z=O.firstName)==null?void 0:z.toLowerCase().includes(W))||((H=O.lastName)==null?void 0:H.toLowerCase().includes(W))||((Q=O.phone)==null?void 0:Q.includes(k))||((J=O.email)==null?void 0:J.toLowerCase().includes(W))}),F=O=>{u(O),a(2)},L=()=>{a(3)},I=O=>{f(O),a(4)},V=async()=>{var O;if(!c||!p){M.error("Please fill in all required fields");return}if(p==="notice"){if(!b||b<1||b>30){M.error("Please enter a valid notice period (1-30 days)");return}if(!v){M.error("Please select vacation date");return}}try{i(!0);const W={vacationType:p,...p==="notice"&&{noticeDays:b,vacationDate:v}},z=await Tt.post(`/residents/${c._id}/vacate`,W);if(z.data.success){const H=p==="immediate"?"Resident vacated immediately! Room and bed are now available.":`Resident will be vacated on ${v} (${b} days notice). Room and bed will be available after that date.`;M.success(H),u(null),m(null),g(null),f(""),y(30),N(""),a(1),R()}else M.error(z.data.message||"Failed to vacate resident")}catch(W){if(console.error("Error vacating resident:",W),(O=W.response)!=null&&O.data){const z=W.response.data;z.message==="Resident is not assigned to any room"?M.error("This resident is not assigned to any room"):z.message.includes("Notice days")?M.error("Invalid notice period. Please enter 1-30 days."):M.error(z.message||"Failed to vacate resident")}else M.error("Failed to vacate resident")}finally{i(!1)}},_=()=>{r>1&&(a(r-1),r===4?(f(""),y(30),N("")):r===3||r===2&&(u(null),m(null),g(null)))},G=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 flex items-center justify-center mr-3 shadow-md",children:e.jsx(jt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Select Resident"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Choose a resident to offboard from their room"})]})]})}),e.jsxs("div",{className:"relative max-w-sm mx-auto",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name, phone, or email...",value:k,onChange:O=>E(O.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-200 rounded-lg focus:ring-1 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-gray-50 focus:bg-white text-xs"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 max-h-80 overflow-y-auto",children:n?e.jsxs("div",{className:"col-span-full text-center py-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-red-500 border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Loading residents..."})]}):B.length===0?e.jsxs("div",{className:"col-span-full text-center py-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 flex items-center justify-center mx-auto mb-2 shadow-md",children:e.jsx(Je,{className:"h-6 w-6 text-gray-400"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"No allocated residents found"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"All residents are currently unassigned"})]}):B.map(O=>e.jsx(ae.div,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:"p-3 rounded-xl border border-red-200 bg-gradient-to-r from-red-50 to-pink-50 hover:border-red-300 hover:shadow-lg transition-all cursor-pointer",onClick:()=>F(O),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 flex items-center justify-center mx-auto mb-2 shadow-md",children:e.jsx(jt,{className:"h-5 w-5 text-white"})}),e.jsxs("h3",{className:"font-bold text-gray-900 mb-2 text-sm",children:[O.firstName," ",O.lastName]}),e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.status==="active"?"bg-green-100 text-green-600":O.status==="notice_period"?"bg-orange-100 text-orange-600":"bg-red-100 text-red-600"}`,children:[O.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-3 w-3 inline mr-1"}),"Active"]}),O.status==="notice_period"&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-3 w-3 inline mr-1"}),"Notice Period"]}),O.status==="inactive"&&e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"h-3 w-3 inline mr-1"}),"Vacated"]})]})}),e.jsxs("div",{className:"space-y-1 mb-2",children:[O.phone&&e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs text-gray-600 bg-white/80 rounded-lg p-1.5",children:[e.jsx(Cs,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"truncate font-medium",children:O.phone})]}),O.email&&e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs text-gray-600 bg-white/80 rounded-lg p-1.5",children:[e.jsx(Tr,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"truncate font-medium",children:O.email})]})]}),O.roomNumber&&e.jsx("div",{className:"p-2 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(Ie,{className:"h-3 w-3 text-red-600"}),e.jsxs("span",{className:"text-xs font-medium text-red-800",children:["Room ",O.roomNumber," • Bed ",O.bedNumber||"N/A"]})]})}),e.jsx("div",{className:"mt-2 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg text-xs font-semibold",children:[e.jsx("span",{children:"Select"}),e.jsx(oi,{className:"h-3 w-3"})]})})]})},O._id))})]}),U=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center mr-3 shadow-md",children:e.jsx(Ft,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Payment Status"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Review payment and deposit information before proceeding"})]})]})}),n?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-green-500 border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Loading payment details..."})]}):x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(xt,{className:"h-4 w-4 text-green-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Current Month Payment"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Month/Year"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[x.currentMonth.month," ",x.currentMonth.year]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.currentMonth.isPaid?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:x.currentMonth.isPaid?"Paid":"Pending"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["₹",x.currentMonth.amount]})]}),x.currentMonth.isPaid&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Paid on"}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:new Date(x.currentMonth.paymentDate).toLocaleDateString()})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(Ie,{className:"h-4 w-4 text-blue-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Advance & Security Deposit"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Advance Payment"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["₹",x.advancePayment.amount]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.advancePayment.status==="paid"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:x.advancePayment.status==="paid"?"Collected":"Pending"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Security Deposit"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["₹",x.securityDeposit.amount]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.securityDeposit.status==="collected"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:x.securityDeposit.status==="collected"?"Collected":"Pending"})})]}),x.securityDeposit.refundable&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"⚡ Refundable on checkout"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-4 rounded-xl border border-purple-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 text-purple-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Payment Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-purple-200 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Paid"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["₹",x.totalPaid]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-purple-200 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Months Paid"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:x.totalMonths})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-purple-200 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Average Rent"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["₹",x.averageAmount]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-purple-200 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Pending Amount"}),e.jsxs("p",{className:`text-sm font-bold ${x.pendingAmount>0?"text-red-600":"text-green-600"}`,children:["₹",x.pendingAmount]})]})]})]}),x.recentPayments&&x.recentPayments.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 p-4 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(ut,{className:"h-4 w-4 text-gray-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Recent Payments"})]}),e.jsx("div",{className:"space-y-2",children:x.recentPayments.map((O,W)=>e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[O.month," ",O.year]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Paid on ",new Date(O.paymentDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["₹",O.amount]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:O.paymentMethod})]})]},W))})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 flex items-center justify-center mx-auto mb-2",children:e.jsx(Ft,{className:"h-6 w-6 text-gray-400"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"No payment information found"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Payment details are not available for this resident"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center px-3 py-1.5 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:[e.jsx(vr,{className:"h-4 w-4 mr-1.5"}),"Back"]}),e.jsxs("button",{onClick:L,className:"flex items-center px-3 py-1.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-colors text-sm",children:["Continue to Review Details",e.jsx(oi,{className:"h-4 w-4 ml-1.5"})]})]})]}),A=()=>{var O;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 flex items-center justify-center mr-3 shadow-md",children:e.jsx(ns,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Review Details"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Review the selected resident's information"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 p-3 rounded-xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-red-500 to-pink-600 flex items-center justify-center",children:e.jsx(jt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900",children:[c==null?void 0:c.firstName," ",c==null?void 0:c.lastName]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["ID: ",(O=c==null?void 0:c._id)==null?void 0:O.slice(-8)]})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(c==null?void 0:c.status)==="active"?"bg-green-100 text-green-600":(c==null?void 0:c.status)==="notice_period"?"bg-orange-100 text-orange-600":"bg-red-100 text-red-600"}`,children:[(c==null?void 0:c.status)==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-3 w-3 inline mr-1"}),"Active"]}),(c==null?void 0:c.status)==="notice_period"&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-3 w-3 inline mr-1"}),"Notice Period"]}),(c==null?void 0:c.status)==="inactive"&&e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"h-3 w-3 inline mr-1"}),"Vacated"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 p-1.5 bg-white rounded-lg",children:[e.jsx(Cs,{className:"h-3 w-3 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:c==null?void 0:c.phone})]})]}),(c==null?void 0:c.email)&&e.jsxs("div",{className:"flex items-center space-x-1.5 p-1.5 bg-white rounded-lg",children:[e.jsx(Tr,{className:"h-3 w-3 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:c.email})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 mb-2",children:[e.jsx(Ie,{className:"h-3 w-3 text-red-600"}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:"Current Assignment"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(Ia,{className:"h-3 w-3 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Room"}),e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Room ",c==null?void 0:c.roomNumber]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(xs,{className:"h-3 w-3 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Bed"}),e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Bed ",c==null?void 0:c.bedNumber]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(fm,{className:"h-3 w-3 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Check-in Date"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:c!=null&&c.checkInDate?new Date(c.checkInDate).toLocaleDateString():"N/A"})]})]})]}),(c==null?void 0:c.status)==="notice_period"&&(c==null?void 0:c.vacationDate)&&e.jsx("div",{className:"mt-2 p-1.5 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(ut,{className:"h-3 w-3 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"Notice Period Active"}),e.jsxs("p",{className:"text-xs text-orange-600",children:["Vacating on ",new Date(c.vacationDate).toLocaleDateString(),"(",c.noticeDays," days notice)"]})]})]})}),(c==null?void 0:c.status)==="inactive"&&(c==null?void 0:c.checkOutDate)&&e.jsx("div",{className:"mt-2 p-1.5 bg-red-50 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(ea,{className:"h-3 w-3 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-700 font-medium",children:"Already Vacated"}),e.jsxs("p",{className:"text-xs text-red-600",children:["Vacated on ",new Date(c.checkOutDate).toLocaleDateString()]})]})]})})]}),x&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-3 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(Ft,{className:"h-3 w-3 text-green-600"})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:"Payment Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-green-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Month"}),e.jsxs("p",{className:`text-xs font-bold ${x.currentMonth.isPaid?"text-green-600":"text-red-600"}`,children:[x.currentMonth.isPaid?"Paid":"Pending"," - ₹",x.currentMonth.amount]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-green-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Security Deposit"}),e.jsxs("p",{className:`text-xs font-bold ${x.securityDeposit.status==="collected"?"text-green-600":"text-red-600"}`,children:[x.securityDeposit.status==="collected"?"Collected":"Pending"," - ₹",x.securityDeposit.amount]})]})]}),x.pendingAmount>0&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 rounded-lg border border-red-200",children:e.jsxs("p",{className:"text-xs text-red-700 font-medium",children:["⚠️ Outstanding Amount: ₹",x.pendingAmount]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center px-3 py-1.5 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:[e.jsx(vr,{className:"h-4 w-4 mr-1.5"}),"Back"]}),e.jsxs("button",{onClick:()=>a(4),className:"flex items-center px-3 py-1.5 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg hover:from-red-600 hover:to-pink-700 transition-colors text-sm",children:["Continue to Vacation Options",e.jsx(oi,{className:"h-4 w-4 ml-1.5"})]})]})]})},q=()=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-sky-400 to-blue-500 flex items-center justify-center mr-3",children:e.jsx(ea,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Choose Vacation Type"}),e.jsxs("p",{className:"text-gray-600",children:["Select how to vacate ",c==null?void 0:c.firstName]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ae.div,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`p-4 rounded-xl border transition-all cursor-pointer ${p==="immediate"?"border-sky-500 bg-gradient-to-br from-sky-50 to-blue-50 shadow-lg":"border-gray-200 bg-gradient-to-r from-sky-50 to-blue-50 hover:border-sky-300 hover:shadow-md"}`,onClick:()=>I("immediate"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3 ${p==="immediate"?"bg-sky-500 text-white":"bg-sky-100 text-sky-600"}`,children:e.jsx(ea,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Immediate Vacation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Vacate the resident immediately from their room and bed. Room and bed will be available immediately for new assignments."}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs text-gray-600",children:[e.jsx(Be,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:"Instant availability"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs text-gray-600",children:[e.jsx(ut,{className:"h-3 w-3 text-sky-500"}),e.jsx("span",{children:"No waiting period"})]})]}),p==="immediate"&&e.jsx("div",{className:"mt-3 p-2 bg-sky-100 rounded-lg border border-sky-200",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Mv,{className:"h-4 w-4 text-sky-600"}),e.jsx("span",{className:"text-xs font-medium text-sky-700",children:"Selected"})]})})]})}),e.jsx(ae.div,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`p-4 rounded-xl border transition-all cursor-pointer ${p==="notice"?"border-sky-500 bg-gradient-to-br from-sky-50 to-blue-50 shadow-lg":"border-gray-200 bg-gradient-to-r from-sky-50 to-blue-50 hover:border-sky-300 hover:shadow-md"}`,onClick:()=>I("notice"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3 ${p==="notice"?"bg-sky-500 text-white":"bg-sky-100 text-sky-600"}`,children:e.jsx(ut,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Notice Period Vacation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Schedule the vacation for a future date. Resident stays until the specified date."}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs text-gray-600",children:[e.jsx(fm,{className:"h-3 w-3 text-orange-500"}),e.jsx("span",{children:"Flexible scheduling"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs text-gray-600",children:[e.jsx(Rt,{className:"h-3 w-3 text-orange-500"}),e.jsx("span",{children:"Max 30 days notice"})]})]}),p==="notice"&&e.jsx("div",{className:"mt-3 p-2 bg-sky-100 rounded-lg border border-sky-200",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Mv,{className:"h-4 w-4 text-sky-600"}),e.jsx("span",{className:"text-xs font-medium text-sky-700",children:"Selected"})]})})]})})]}),p==="notice"&&e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-4 rounded-xl border border-sky-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(fm,{className:"h-4 w-4 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Notice Period Configuration"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notice Period (Days)"}),e.jsx("input",{type:"number",min:"1",max:"30",value:b,onChange:O=>y(Math.min(Math.max(O.target.value,1),30)),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-sky-100 focus:border-sky-500 transition-all",placeholder:"Enter days (1-30)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 30 days notice period"})]}),b&&e.jsx("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fm,{className:"h-4 w-4 text-sky-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-sky-700",children:"Vacation Date (Auto-calculated)"}),e.jsx("p",{className:"text-xs text-sky-600",children:v?new Date(v).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Calculating..."})]})]})}),e.jsx("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"Automatic Process"}),e.jsx("p",{className:"text-xs text-orange-600",children:"The resident will be automatically vacated on the calculated date. Room and bed will become available for new assignments."})]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs("button",{onClick:_,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx("button",{onClick:V,disabled:n||p==="notice"&&(!b||b<1),className:"flex items-center px-6 py-3 bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded-lg hover:from-sky-600 hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),p==="immediate"?"Vacate Immediately":"Schedule Vacation"]})})]})]}),Y=()=>{switch(r){case 1:return G();case 2:return U();case 3:return A();case 4:return q();default:return G()}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-3",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 flex items-center justify-center mr-3 shadow-lg",children:e.jsx(ea,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-0.5",children:"Resident Offboarding"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage resident vacations and room assignments"})]})]})}),S.length>0&&e.jsxs(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl p-4 shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(Rt,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-red-800",children:"⚠️ Overdue Vacations Detected"}),e.jsxs("p",{className:"text-red-700 text-xs",children:[S.length," resident",S.length!==1?"s":""," should have been vacated"]})]})]}),e.jsx("button",{onClick:T,disabled:C,className:"flex items-center px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-xs",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-white border-t-transparent mr-1.5"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-3 w-3 mr-1.5"}),"Process Overdue"]})})]}),e.jsxs("div",{className:"mt-3 space-y-1.5",children:[S.slice(0,2).map(O=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900 text-xs",children:[O.firstName," ",O.lastName]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Room ",O.roomNumber," • Bed ",O.bedNumber," • Due: ",new Date(O.vacationDate).toLocaleDateString()]})]})]}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-red-100 text-red-700 text-xs font-semibold rounded-full",children:[Math.ceil((new Date-new Date(O.vacationDate))/(1e3*60*60*24))," days overdue"]})]},O._id)),S.length>2&&e.jsxs("p",{className:"text-xs text-red-600 text-center",children:["... and ",S.length-2," more resident",S.length-2!==1?"s":""]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Step ",r," of 5"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r===1&&"Select Resident",r===2&&"Payment Status",r===3&&"Review Details",r===4&&"Choose Vacation Type",r===5&&"Confirm Offboarding"]})]}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:[1,2,3,4,5].map(O=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all ${O<r?"bg-green-500 text-white shadow-md":O===r?"bg-red-500 text-white shadow-lg scale-110":"bg-gray-200 text-gray-500"}`,children:O<r?e.jsx(Be,{className:"h-4 w-4"}):O}),O<5&&e.jsx("div",{className:`w-8 h-0.5 mx-1 transition-all ${O<r?"bg-green-500":"bg-gray-200"}`})]},O))}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${r/5*100}%`}})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:e.jsx(vt,{mode:"wait",children:Y()})})]})})},AK=()=>{const t=He(Nr),[s,r]=h.useState([]),[a,n]=h.useState([]),[i,l]=h.useState(!1),[o,c]=h.useState(""),[u,d]=h.useState(null),[m,x]=h.useState(null),[g,p]=h.useState(null),[f,b]=h.useState(""),[y,v]=h.useState(!1),[N,S]=h.useState(!1),[w,C]=h.useState([]),[j,k]=h.useState(""),[E,R]=h.useState("name"),[D,P]=h.useState(!1);h.useEffect(()=>{t&&(T(),B())},[t]);const T=async()=>{try{l(!0);const Q=await(await fetch(`/api/residents?branchId=${t._id}&status=active`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();Q.success&&Q.data&&Array.isArray(Q.data.residents)?r(Q.data.residents):(console.error("Invalid residents data:",Q),r([]),M.error(Q.message||"Failed to fetch residents"))}catch(H){console.error("Error fetching residents:",H),r([]),M.error("Failed to fetch residents")}finally{l(!1)}},B=async()=>{try{const Q=await(await fetch(`/api/residents/switch/available-rooms?pgId=${t.pgId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();Q.success&&Array.isArray(Q.data)?n(Q.data):(console.error("Invalid available rooms data:",Q),n([]),M.error(Q.message||"Failed to fetch available rooms"))}catch(H){console.error("Error fetching available rooms:",H),n([]),M.error("Failed to fetch available rooms")}},F=H=>{d(H),x(null),p(null),b("")},L=H=>{x(H),p(null),P(!1)},I=H=>{p(H),u&&m&&P(!0)},V=async()=>{if(!u||!m||!g){M.error("Please select resident, room, and bed");return}try{l(!0);const Q=await(await fetch(`/api/residents/${u._id}/switch-room`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({newRoomId:m._id,newBedNumber:g,reason:f||"Room switch request"})})).json();Q.success?(M.success("Room switched successfully!"),v(!1),G(),T(),B()):M.error(Q.message||"Failed to switch room")}catch(H){console.error("Error switching room:",H),M.error("Failed to switch room")}finally{l(!1)}},_=async H=>{try{const J=await(await fetch(`/api/residents/${H}/switch-history`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();J.success&&Array.isArray(J.data)?(C(J.data),S(!0)):(console.error("Invalid switch history data:",J),C([]),M.error(J.message||"Failed to fetch switch history"))}catch(Q){console.error("Error fetching switch history:",Q),C([]),M.error("Failed to fetch switch history")}},G=()=>{d(null),x(null),p(null),b(""),P(!1)},U=H=>H.roomNumber?{hasRoom:!0,roomNumber:H.roomNumber,bedNumber:H.bedNumber||"N/A",sharingType:H.sharingType||"N/A",cost:H.cost||0}:{hasRoom:!1,roomNumber:"Unassigned",bedNumber:"N/A",sharingType:"N/A",cost:0},A=()=>{if(!Array.isArray(s))return[];let H=s.filter(Q=>{const J=Q.firstName||"",ie=Q.lastName||"",K=Q.email||"",oe=Q.phone||"",le=Q.roomNumber||"";return J.toLowerCase().includes(o.toLowerCase())||ie.toLowerCase().includes(o.toLowerCase())||K.toLowerCase().includes(o.toLowerCase())||oe.includes(o)||le.includes(o)});return H.sort((Q,J)=>{switch(E){case"name":return`${Q.firstName||""} ${Q.lastName||""}`.localeCompare(`${J.firstName||""} ${J.lastName||""}`);case"room":return(Q.roomNumber||"").localeCompare(J.roomNumber||"");case"checkIn":return new Date(J.checkInDate||0)-new Date(Q.checkInDate||0);default:return 0}}),H},q=()=>{if(!Array.isArray(a))return[];let H=a;return j&&(H=H.filter(Q=>Q.sharingType===j)),H},Y=H=>({"1-sharing":"bg-blue-100 text-blue-800","2-sharing":"bg-green-100 text-green-800","3-sharing":"bg-yellow-100 text-yellow-800","4-sharing":"bg-purple-100 text-purple-800"})[H]||"bg-gray-100 text-gray-800",O=H=>{const Q={active:{color:"bg-green-100 text-green-800",text:"Active"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},inactive:{color:"bg-gray-100 text-gray-800",text:"Inactive"},moved_out:{color:"bg-red-100 text-red-800",text:"Moved Out"}},J=Q[H]||Q.pending;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J.color}`,children:J.text})},W=()=>e.jsxs(ls,{value:j||"all",onValueChange:H=>k(H==="all"?"":H),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Sharing Types"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Sharing Types"}),e.jsx(ke,{value:"1-sharing",children:"1-sharing"}),e.jsx(ke,{value:"2-sharing",children:"2-sharing"}),e.jsx(ke,{value:"3-sharing",children:"3-sharing"}),e.jsx(ke,{value:"4-sharing",children:"4-sharing"})]})]}),z=()=>e.jsxs(ls,{value:E,onValueChange:H=>R(H),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Sort by Name"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"name",children:"Sort by Name"}),e.jsx(ke,{value:"room",children:"Sort by Room"}),e.jsx(ke,{value:"checkIn",children:"Sort by Check-in Date"})]})]});return t?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Room Switching"}),e.jsx("p",{className:"text-gray-600",children:"Switch residents between different rooms and beds"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>{T(),B()},className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Je,{className:"h-5 w-5 mr-2 text-blue-600"}),"Current Residents"]}),e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[s.length," residents"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search residents...",value:o,onChange:H=>c(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(z,{})})]})]}),e.jsx("div",{className:"p-6",children:i?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):A().length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Je,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No residents found"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:A().map(H=>e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ${(u==null?void 0:u._id)===H._id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>F(H),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(jt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[H.firstName||"N/A"," ",H.lastName||"N/A"]}),e.jsx("p",{className:"text-sm text-gray-500",children:H.email||"N/A"})]})]}),e.jsxs("div",{className:"text-right",children:[O(H.status),H.roomNumber&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Room ",H.roomNumber," - Bed ",H.bedNumber||"N/A"]})]})]}),H.roomNumber&&e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Current: ",H.roomNumber,"-",H.bedNumber||"N/A"]})]}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),_(H._id)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View History"})]})]},H._id))})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-green-600"}),"Available Rooms"]}),e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[a.length," rooms"]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(W,{})})]}),e.jsx("div",{className:"p-6",children:q().length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ie,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No available rooms found"})]}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:q().map(H=>{var Q;return e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ${(m==null?void 0:m._id)===H._id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>L(H),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:["Room ",H.roomNumber||"N/A"]}),e.jsx("p",{className:"text-sm text-gray-500",children:((Q=H.floorId)==null?void 0:Q.name)||"N/A"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(H.sharingType)}`,children:H.sharingType||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["₹",H.cost||0]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:H.availableBedCount||0}),e.jsx("p",{className:"text-xs text-gray-600",children:"Available Beds"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:H.occupiedBedCount||0}),e.jsx("p",{className:"text-xs text-gray-600",children:"Occupied Beds"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Bed Status:"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:H.beds&&H.beds.map(J=>e.jsxs("div",{className:`p-2 text-xs rounded-lg border text-center ${J.isOccupied?"border-red-200 bg-red-50 text-red-700":"border-green-200 bg-green-50 text-green-700"}`,children:["Bed ",J.bedNumber,e.jsx("div",{className:"text-xs mt-1",children:J.isOccupied?"Occupied":"Available"})]},J.bedNumber))})]}),(m==null?void 0:m._id)===H._id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Select Available Bed:"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:(H.availableBeds||[]).map(J=>e.jsxs("button",{onClick:ie=>{ie.stopPropagation(),I(J.bedNumber)},className:`p-2 text-sm rounded-lg border transition-all duration-200 ${g===J.bedNumber?"border-blue-500 bg-blue-50 text-blue-700":"border-green-200 bg-green-50 text-green-700 hover:border-green-300"}`,children:["Bed ",J.bedNumber]},J.bedNumber))})]})]},H._id)})})})]})]}),e.jsx(vt,{children:D&&u&&m&&g&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Room Switch Preview"}),e.jsx("p",{className:"text-gray-600",children:"Review the switch details before confirming"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(vr,{className:"h-4 w-4 text-red-600"})}),e.jsx("h4",{className:"font-medium text-red-800",children:"Current Room"})]}),(()=>{const H=U(u);return H.hasRoom?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-700",children:"Room Number:"}),e.jsxs("span",{className:"font-medium text-red-900",children:["Room ",H.roomNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-700",children:"Bed Number:"}),e.jsxs("span",{className:"font-medium text-red-900",children:["Bed ",H.bedNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-700",children:"Sharing Type:"}),e.jsx("span",{className:"font-medium text-red-900",children:H.sharingType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-700",children:"Current Cost:"}),e.jsxs("span",{className:"font-medium text-red-900",children:["₹",H.cost]})]})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-red-600 font-medium",children:"Currently Unassigned"})})})()]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(oi,{className:"h-4 w-4 text-green-600"})}),e.jsx("h4",{className:"font-medium text-green-800",children:"New Room"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Room Number:"}),e.jsxs("span",{className:"font-medium text-green-900",children:["Room ",m.roomNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Bed Number:"}),e.jsxs("span",{className:"font-medium text-green-900",children:["Bed ",g]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Sharing Type:"}),e.jsx("span",{className:"font-medium text-green-900",children:m.sharingType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:"New Cost:"}),e.jsxs("span",{className:"font-medium text-green-900",children:["₹",m.cost]})]})]})]})]}),(()=>{const H=U(u);return H.hasRoom&&m.sharingType!==H.sharingType})()&&e.jsxs("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-800",children:"Cost Change Notice"})]}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-2",children:["The sharing type is changing from ",e.jsx("strong",{children:U(u).sharingType})," to ",e.jsx("strong",{children:m.sharingType}),". This will affect the monthly rent amount from ₹",U(u).cost," to ₹",m.cost,"."]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Switch (Optional)"}),e.jsx("textarea",{value:f,onChange:H=>b(H.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter reason for room switch..."})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-4",children:[e.jsx("button",{onClick:G,className:"px-6 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>v(!0),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-700 text-white rounded-xl hover:from-blue-700 hover:to-purple-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 font-semibold",children:[e.jsx(ol,{className:"h-5 w-5 inline mr-2"}),"Confirm Room Switch"]})]})]})}),e.jsx(vt,{children:y&&u&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-auto overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:e.jsx(ol,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Room Switch Preview"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review the switch details before confirming"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(vr,{className:"h-5 w-5 text-red-600"}),e.jsx("h4",{className:"font-semibold text-red-900",children:"Current Room"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Room Number:"}),e.jsx("span",{className:"text-sm text-red-900",children:u==null?void 0:u.roomNumber})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Bed Number:"}),e.jsx("span",{className:"text-sm text-red-900",children:u==null?void 0:u.bedNumber})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Sharing Type:"}),e.jsx("span",{className:"text-sm text-red-900",children:u==null?void 0:u.sharingType})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Current Cost:"}),e.jsxs("span",{className:"text-sm text-red-900",children:["₹",u==null?void 0:u.cost]})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(oi,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold text-green-900",children:"New Room"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Room Number:"}),e.jsx("span",{className:"text-sm text-green-900",children:m==null?void 0:m.roomNumber})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Bed Number:"}),e.jsx("span",{className:"text-sm text-green-900",children:g})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Sharing Type:"}),e.jsx("span",{className:"text-sm text-green-900",children:m==null?void 0:m.sharingType})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"New Cost:"}),e.jsxs("span",{className:"text-sm text-green-900",children:["₹",m==null?void 0:m.cost]})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Switch (Optional)"}),e.jsx("textarea",{value:f,onChange:H=>b(H.target.value),placeholder:"Enter reason for room switch...",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 min-h-[100px] resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6 pt-6 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:i,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:i?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Confirm Switch"})]})})]}),(u==null?void 0:u.sharingType)!==(m==null?void 0:m.sharingType)&&e.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-900",children:"Sharing Type Change"})]}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-2",children:["The sharing type is changing from ",(u==null?void 0:u.sharingType)||"unknown"," to ",m==null?void 0:m.sharingType,". This will affect the monthly rent amount from ₹",(u==null?void 0:u.cost)||0," to ₹",(m==null?void 0:m.cost)||0,"."]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6 pt-6 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:i,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:i?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Confirm Switch"})]})})]})]})]})})}),e.jsx(vt,{children:N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-auto max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Room Switch History"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(AE,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"p-6",children:w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Qd,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No History Found"}),e.jsx("p",{className:"text-gray-500",children:"This resident hasn't switched rooms yet."})]}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"relative",children:w.map((H,Q)=>e.jsxs("div",{className:"relative pb-8",children:[Q!==w.length-1&&e.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-0.5 bg-gradient-to-b from-blue-500 to-indigo-500"}),e.jsxs("div",{className:"relative flex items-start space-x-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(ol,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Room Switch"}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded-full",children:new Date(H.switchDate).toLocaleDateString()})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(H.switchDate).toLocaleTimeString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(vr,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-900",children:"From"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-red-800",children:["Room ",H.fromRoom]}),e.jsxs("p",{className:"text-sm text-red-800",children:["Bed ",H.fromBed]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(oi,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"To"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-green-800",children:["Room ",H.toRoom]}),e.jsxs("p",{className:"text-sm text-green-800",children:["Bed ",H.toBed]})]})]})]}),H.reason&&e.jsx("div",{className:"bg-gray-50 rounded p-3",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",H.reason]})})]})]})]},Q))})})})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Room Switching"}),e.jsx("p",{className:"text-gray-600",children:"Please use the branch selector in the header to switch rooms."})]})})})},RK=()=>{const{user:t}=He(U=>U.auth),s=He(Nr),[r,a]=h.useState([]),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState(null),[x,g]=h.useState(null),[p,f]=h.useState(""),[b,y]=h.useState("all"),[v,N]=h.useState(1),[S,w]=h.useState(1),[C,j]=h.useState("grid"),[k,E]=h.useState({total:0,inactive:0,movedOut:0,thisMonth:0}),R=Ms(),D=async()=>{if(s){i(!0);try{const U=new URLSearchParams({page:v,limit:10,branchId:s._id,status:"inactive,moved_out"});b!=="all"&&U.append("gender",b),console.log("🔍 Fetching moved out residents with params:",U.toString());const q=await(await fetch(`/api/residents?${U}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();console.log("📊 Moved out residents response:",q),q.success?(console.log(`✅ Found ${q.data.residents.length} moved out residents`),a(q.data.residents||[]),w(q.data.pagination.totalPages)):(console.error("❌ Failed to fetch moved out residents:",q.message),M.error(q.message||"Failed to fetch moved out residents"))}catch(U){console.error("❌ Error fetching moved out residents:",U),M.error("Failed to fetch moved out residents")}finally{i(!1)}}},P=async()=>{if(s)try{const U=new URLSearchParams({branchId:s._id}),q=await(await fetch(`/api/residents/stats/overview?${U}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();if(q.success){const Y=q.data;E({total:Y.total||0,inactive:Y.inactive||0,movedOut:Y.movedOut||0,thisMonth:Y.thisMonth||0})}}catch(U){console.error("Error fetching stats:",U)}};h.useEffect(()=>{s&&(D(),P())},[s,v,b]);const T=U=>{m(U),o(!0)},B=U=>{R(`/admin/residents/edit/${U._id}`)},F=U=>{g(U),u(!0)},L=async()=>{if(x)try{const A=await(await fetch(`/api/residents/${x._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();A.success?(M.success("Resident deleted successfully"),D(),P()):M.error(A.message||"Failed to delete resident")}catch(U){console.error("Error deleting resident:",U),M.error("Failed to delete resident")}finally{u(!1),g(null)}},I=U=>{R("/admin/onboarding",{state:{preSelectedResident:U,mode:"re-onboard"}})},V=r.filter(U=>{var Y,O,W,z;const A=p.toLowerCase();return(b==="all"||U.gender===b)&&(((Y=U.firstName)==null?void 0:Y.toLowerCase().includes(A))||((O=U.lastName)==null?void 0:O.toLowerCase().includes(A))||((W=U.phone)==null?void 0:W.includes(p))||((z=U.email)==null?void 0:z.toLowerCase().includes(A)))});console.log("🔍 Debug - movedOutResidents:",r.length),console.log("🔍 Debug - filteredResidents:",V.length),console.log("🔍 Debug - searchTerm:",p);const _=()=>e.jsxs(ls,{value:b,onValueChange:U=>y(U),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Genders"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Genders"}),e.jsx(ke,{value:"male",children:"Male"}),e.jsx(ke,{value:"female",children:"Female"}),e.jsx(ke,{value:"other",children:"Other"})]})]}),G=({resident:U})=>{const A=(Y,O)=>`${(Y==null?void 0:Y.charAt(0))||""}${(O==null?void 0:O.charAt(0))||""}`.toUpperCase(),q=()=>{var O;const Y=["bg-blue-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-green-500"];return Y[(((O=U.firstName)==null?void 0:O.length)||0)%Y.length]};return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-4 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white ${q()}`,children:A(U.firstName,U.lastName)}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-gray-900 text-lg truncate",children:[U.firstName," ",U.lastName]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:U.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-2 rounded-lg",children:[e.jsx(Cs,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700 truncate",children:U.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-2 rounded-lg",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:U.roomNumber?`Room ${U.roomNumber}`:"Not assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-2 rounded-lg",children:[e.jsx(xt,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:U.checkOutDate?new Date(U.checkOutDate).toLocaleDateString():"No checkout date"})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center border-t border-gray-200 pt-3",children:[e.jsxs("button",{onClick:()=>T(U),className:"flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs("button",{onClick:()=>I(U),className:"flex items-center text-green-600 hover:text-green-800 text-sm",children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Re-onboard"]})]})]})};return!t||(t==null?void 0:t.role)!=="admin"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"Admin privileges required to access moved out residents."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>R("/admin/residents"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(vr,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Moved Out Residents"}),e.jsxs("p",{className:"text-gray-600",children:["Manage residents who have vacated from ",(s==null?void 0:s.name)||"your PG"]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:()=>{D(),P()},className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Moved Out"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:k.movedOut}),e.jsx("p",{className:"text-sm text-gray-500",children:"All time"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400 to-pink-500 rounded-xl",children:e.jsx(ea,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Month Moved Out"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:k.thisMonth}),e.jsx("p",{className:"text-sm text-gray-500",children:"Recent departures"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl",children:e.jsx(xt,{className:"h-6 w-6 text-white"})})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search residents...",value:p,onChange:U=>f(U.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(_,{})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>j("grid"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${C==="grid"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Grid"}),e.jsx("button",{onClick:()=>j("table"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${C==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Table"})]}),e.jsxs("button",{className:"flex items-center px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:[e.jsx(xr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):V.length===0?e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-400 to-slate-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(ea,{className:"h-10 w-10 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No moved out residents found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:p?"No residents match your search criteria.":"All residents are currently active."}),p&&e.jsx("button",{onClick:()=>f(""),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Search"})]}):C==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(U=>e.jsx(G,{resident:U},U._id))}):e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resident"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Room"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-out Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map((U,A)=>e.jsxs(ae.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10"}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[U.firstName," ",U.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:U.email})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:U.phone}),e.jsx("div",{className:"text-sm text-gray-500",children:U.gender})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:U.roomNumber?`Room ${U.roomNumber}`:"Not assigned"}),e.jsx("div",{className:"text-sm text-gray-500",children:U.bedNumber?`Bed ${U.bedNumber}`:"No bed"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:U.checkOutDate?new Date(U.checkOutDate).toLocaleDateString():"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:U.checkOutDate?new Date(U.checkOutDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(U),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View details",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B(U),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Edit resident",children:e.jsx(Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(U),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete resident",children:e.jsx(Trash2,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(U),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Re-onboard",children:e.jsx(Pa,{className:"h-4 w-4"})})]})})]},U._id))})]})})}),S>1&&e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(U=>Math.max(U-1,1)),disabled:v===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Page ",v," of ",S]}),e.jsx("button",{onClick:()=>N(U=>Math.min(U+1,S)),disabled:v===S,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}),e.jsx(vt,{children:l&&d&&e.jsx(Yy,{resident:d,onClose:()=>{o(!1),m(null)}})}),e.jsx(vt,{children:c&&x&&e.jsx(lh,{isOpen:c,title:"Delete Resident",message:`Are you sure you want to permanently delete ${x.firstName} ${x.lastName}? This action cannot be undone.`,onConfirm:L,onCancel:()=>{u(!1),g(null)}})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Moved Out Residents"}),e.jsx("p",{className:"text-gray-600",children:"Please select a branch from the header to continue."})]})})},lN=()=>{var V,_,G,U,A,q,Y,O,W,z,H,Q,J,ie,K,oe,le,Se,Ee,ye,We;const{id:t}=Nx(),s=Ms(),{user:r}=He(fe=>fe.auth),[a,n]=h.useState(null),[i,l]=h.useState([]),[o,c]=h.useState([]),[u,d]=h.useState([]),[m,x]=h.useState(!0),[g,p]=h.useState("profile"),[f,b]=h.useState(!1),[y,v]=h.useState(!1),[N,S]=h.useState(null),[w,C]=h.useState(!1);h.useEffect(()=>{console.log("🔍 ResidentProfile: Component mounted with ID:",t),t?(k(),E(),D()):console.error("❌ ResidentProfile: No ID provided in URL parameters")},[t]),h.useEffect(()=>{g==="payments"&&t&&j()},[g,t]);const j=async()=>{try{await Tt.put(`/residents/${t}/payment-status`),await D(),await k()}catch(fe){console.error("Error refreshing payment data:",fe),await D(),await k()}},k=async()=>{try{x(!0);const fe=await Tt.get(`/residents/${t}/details`);if(fe.data.success){const Fe=fe.data.data,ce=new Date,Ce=ce.toLocaleString("en-US",{month:"long"}),ze=ce.getFullYear();try{const De=await Tt.get(`/payments/resident/${t}`);if(De.data.success){const Xe=(De.data.data||[]).some(it=>it.month===Ce&&it.year===ze&&it.isActive===!0);Fe.hasCurrentMonthPayment=Xe}}catch(De){console.error("Error checking current month payment:",De),Fe.hasCurrentMonthPayment=!1}n(Fe)}else M.error(fe.data.message||"Failed to fetch resident details")}catch(fe){console.error("Error fetching resident details:",fe),M.error("Failed to fetch resident details")}finally{x(!1)}},E=async()=>{var fe,Fe;try{console.log("🔍 Fetching allocation letters for resident:",t);const ce=await Tt.get(`/residents/${t}/allocation-letters`);if(console.log("📄 Allocation letters response:",ce.data),ce.data.success){const Ce=ce.data.data||[];console.log("✅ Allocation letters fetched:",Ce),l(Ce)}else console.log("❌ Failed to fetch allocation letters:",ce.data.message),l([])}catch(ce){console.error("❌ Error fetching allocation letters:",ce),console.error("Error details:",{message:ce.message,status:(fe=ce.response)==null?void 0:fe.status,data:(Fe=ce.response)==null?void 0:Fe.data}),l([])}},R=()=>!i||i.length===0?(console.log("📄 No allocation letters found for resident:",a==null?void 0:a.firstName,a==null?void 0:a.lastName),[]):(console.log("📄 Processing allocation letters:",i),i.map(fe=>(console.log("📄 Processing letter:",fe),{_id:fe._id,originalName:fe.fileName||`Allocation Letter - ${a==null?void 0:a.firstName} ${a==null?void 0:a.lastName}`,documentType:"allocation_letter",fileSize:1024*50,createdAt:fe.generatedOn||fe.createdAt||new Date,downloadCount:fe.downloadCount||0,metadata:{description:"Room allocation letter generated during onboarding",roomNumber:fe.roomNumber,bedNumber:fe.bedNumber,monthlyRent:fe.monthlyRent,onboardingDate:fe.onboardingDate},isPreviewAvailable:!!fe.previewData,previewData:fe.previewData,isAllocationLetter:!0,allocationData:fe.allocationData}))),D=async()=>{try{const fe=await Tt.get(`/payments/resident/${t}`);if(fe.data.success){const ce=(fe.data.data||[]).map(Ce=>({_id:Ce._id,month:`${Ce.month} ${Ce.year}`,amount:Ce.amount,status:Ce.status,dueDate:Ce.paymentDate,paidDate:Ce.status==="paid"?Ce.paymentDate:null,paymentMethod:Ce.paymentMethod||"Not specified",receiptNumber:Ce._id.slice(-6).toUpperCase(),markedBy:Ce.markedBy,markedAt:Ce.markedAt,receiptImage:Ce.receiptImage}));d(ce)}else console.error("Failed to fetch payments:",fe.data.message),d([])}catch(fe){console.error("Error fetching payments:",fe),d([])}},P=fe=>fe?new Date(fe).toLocaleDateString("en-IN"):"Not specified",T=fe=>{const Fe={active:{color:"bg-green-100 text-green-800",text:"Active"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},inactive:{color:"bg-gray-100 text-gray-800",text:"Inactive"},moved_out:{color:"bg-red-100 text-red-800",text:"Moved Out"},notice_period:{color:"bg-orange-100 text-orange-800",text:"Notice Period"}},ce=Fe[fe]||Fe.pending;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ce.color}`,children:ce.text})},B=fe=>{const Fe={paid:{color:"bg-green-100 text-green-800",text:"Paid"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},overdue:{color:"bg-red-100 text-red-800",text:"Overdue"}},ce=Fe[fe]||Fe.pending;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ce.color}`,children:ce.text})},F=async fe=>{try{console.log("🔍 Previewing document:",fe);const Fe=i.find(ce=>ce._id===fe);if(console.log("📄 Found letter for preview:",Fe),Fe&&Fe.previewData){const ce={fileName:Fe.fileName||`Allocation Letter - ${a==null?void 0:a.firstName} ${a==null?void 0:a.lastName}.pdf`,mimeType:"application/pdf",previewData:Fe.previewData,allocationData:Fe.allocationData,roomNumber:Fe.roomNumber,bedNumber:Fe.bedNumber,monthlyRent:Fe.monthlyRent,onboardingDate:Fe.onboardingDate,generatedOn:Fe.generatedOn,downloadCount:Fe.downloadCount};console.log("📄 Setting preview document:",ce),S(ce),v(!0)}else console.log("❌ No preview data available for letter:",Fe),M.error("Preview not available for this document. Please try downloading instead.")}catch(Fe){console.error("❌ Error loading document preview:",Fe),M.error("Failed to load document preview")}},L=async fe=>{try{const Fe=i.find(ce=>ce._id===fe);if(Fe&&Fe.previewData){const ce=atob(Fe.previewData),Ce=new Array(ce.length);for(let it=0;it<ce.length;it++)Ce[it]=ce.charCodeAt(it);const ze=new Uint8Array(Ce),De=new Blob([ze],{type:"application/pdf"}),st=window.URL.createObjectURL(De),Xe=document.createElement("a");Xe.href=st,Xe.setAttribute("download",`Allocation Letter - ${a==null?void 0:a.firstName} ${a==null?void 0:a.lastName}.pdf`),document.body.appendChild(Xe),Xe.click(),Xe.remove(),window.URL.revokeObjectURL(st),M.success("Document downloaded successfully")}else try{const ce=await Tt.get(`/residents/allocation-letter/${fe}/download`);if(ce.data.success){const{generateAllocationLetterPDF:Ce,htmlToBase64PDF:ze}=await Bg(async()=>{const{generateAllocationLetterPDF:me,htmlToBase64PDF:Te}=await import("./allocationLetterGenerator-q1nh4Y7H.js");return{generateAllocationLetterPDF:me,htmlToBase64PDF:Te}},__vite__mapDeps([6,3,1,4,2,5])),De=await Ce(ce.data.data),st=await ze(De),Xe=atob(st.split(",")[1]),it=new Array(Xe.length);for(let me=0;me<Xe.length;me++)it[me]=Xe.charCodeAt(me);const ft=new Uint8Array(it),be=new Blob([ft],{type:"application/pdf"}),Pe=window.URL.createObjectURL(be),ee=document.createElement("a");ee.href=Pe,ee.setAttribute("download",ce.data.fileName||`Allocation Letter - ${a==null?void 0:a.firstName} ${a==null?void 0:a.lastName}.pdf`),document.body.appendChild(ee),ee.click(),ee.remove(),window.URL.revokeObjectURL(Pe),M.success("Document downloaded successfully")}else M.error("Document not found")}catch(ce){console.error("Error fetching document from backend:",ce),M.error("Document not found")}}catch(Fe){console.error("Error downloading document:",Fe),M.error("Failed to download document")}},I=fe=>{fe.receiptImage?(S({fileName:fe.receiptImage.originalName||"Payment Receipt",mimeType:fe.receiptImage.mimeType||"image/jpeg",previewData:null,filePath:fe.receiptImage.filePath}),v(!0)):M.error("Receipt not available")};return m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-500"})})})}):a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>s("/admin/residents"),className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Residents"})]})})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6",children:[e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[{id:"profile",label:"Profile",icon:jt},{id:"documents",label:"Documents",icon:ns},{id:"payments",label:"Payments",icon:Ks}].map(fe=>{const Fe=fe.icon;return e.jsxs("button",{onClick:()=>p(fe.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-all ${g===fe.id?"bg-white text-sky-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:fe.label})]},fe.id)})}),e.jsxs("div",{className:"space-y-6",children:[g==="profile"&&e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(jt,{className:"h-5 w-5 mr-2 text-sky-600"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Full Name:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[a.firstName," ",a.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.email||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.phone})]}),a.alternatePhone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Alternate Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.alternatePhone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date of Birth:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.dateOfBirth)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Gender:"}),e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:a.gender})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status:"}),e.jsx("span",{children:T(a.status)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-sky-600"}),"Permanent Address"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Street:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((V=a.permanentAddress)==null?void 0:V.street)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"City:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((_=a.permanentAddress)==null?void 0:_.city)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"State:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((G=a.permanentAddress)==null?void 0:G.state)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pincode:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((U=a.permanentAddress)==null?void 0:U.pincode)||"Not provided"})]})]})]}),a.workDetails&&e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-sky-600"}),"Work Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Company:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((A=a.workDetails)==null?void 0:A.company)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Designation:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((q=a.workDetails)==null?void 0:q.designation)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Work Address:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((Y=a.workDetails)==null?void 0:Y.workAddress)||"Not provided"})]}),((O=a.workDetails)==null?void 0:O.workPhone)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Work Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.workDetails.workPhone})]}),((W=a.workDetails)==null?void 0:W.workEmail)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Work Email:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.workDetails.workEmail})]}),((z=a.workDetails)==null?void 0:z.salary)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Salary:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:["₹",a.workDetails.salary.toLocaleString()]})]}),((H=a.workDetails)==null?void 0:H.joiningDate)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Joining Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.workDetails.joiningDate)})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2 text-sky-600"}),"Emergency Contact"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((Q=a.emergencyContact)==null?void 0:Q.name)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Relationship:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((J=a.emergencyContact)==null?void 0:J.relationship)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((ie=a.emergencyContact)==null?void 0:ie.phone)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((K=a.emergencyContact)==null?void 0:K.address)||"Not provided"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-sky-600"}),"Room Assignment"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Room Number:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.roomNumber||"Unassigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Bed Number:"}),e.jsx("span",{className:"text-sm text-gray-900",children:a.bedNumber||"Not assigned"})]}),a.roomId&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Room Type:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((oe=a.roomId)==null?void 0:oe.sharingType)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ks,{className:"h-5 w-5 mr-2 text-sky-600"}),"Payment Status"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Current Status:"}),e.jsx("span",{children:B(a.paymentStatus==="paid"||a.hasCurrentMonthPayment?"paid":a.paymentStatus)})]}),a.lastPaymentDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Last Payment:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.lastPaymentDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rent Amount:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:["₹",a.rentAmount||8e3]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Payments:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[u.filter(fe=>fe.status==="paid").length," months"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending Payments:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[u.filter(fe=>fe.status==="pending").length," months"]})]}),a.hasCurrentMonthPayment&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"This Month:"}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"✓ Paid"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2 text-sky-600"}),"Important Dates"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Check-in Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.checkInDate)})]}),a.checkOutDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Check-out Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.checkOutDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract Start:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.contractStartDate)})]}),a.contractEndDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Contract End:"}),e.jsx("span",{className:"text-sm text-gray-900",children:P(a.contractEndDate)})]})]})]}),(a.dietaryRestrictions||a.medicalConditions||a.specialRequirements||a.notes)&&e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-3",children:[a.dietaryRestrictions&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Dietary Restrictions:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:a.dietaryRestrictions})]}),a.medicalConditions&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Medical Conditions:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:a.medicalConditions})]}),a.specialRequirements&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Special Requirements:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:a.specialRequirements})]}),a.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:a.notes})]})]})]})]})]})}),g==="documents"&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Allocation Letters"})]}),e.jsx("button",{onClick:()=>{console.log("🔍 Debug: Current allocation letters:",i),console.log("🔍 Debug: Processed letters:",R()),console.log("🔍 Debug: Resident ID:",t),console.log("🔍 Debug: Resident data:",a),E()},className:"px-3 py-1 text-xs bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",children:"Debug"})]}),R().length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No allocation letters found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Allocation letters will appear here after onboarding"}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:async()=>{var fe,Fe;try{if(!a)return;const ce=`Allocation Letter - ${a.firstName} ${a.lastName}.pdf`,Ce={residentId:a._id||t,fileName:ce,allocationData:{resident:{firstName:a.firstName,lastName:a.lastName,phone:a.phone,email:a.email,_id:a._id||t},sharingType:a.sharingType?{id:a.sharingType.id||a.sharingType._id,name:a.sharingType.name,cost:a.sharingType.cost}:void 0,room:a.roomId?{_id:a.roomId._id||a.roomId,roomNumber:a.roomId.roomNumber,floor:a.roomId.floorId?{name:a.roomId.floorId.name}:void 0}:void 0,bedNumber:a.bedNumber,onboardingDate:a.checkInDate||a.contractStartDate,allocationDate:new Date().toISOString()}},ze=await Tt.post("/residents/allocation-letter",Ce);(fe=ze.data)!=null&&fe.success?(M.success("Allocation letter generated"),await E()):M.error(((Fe=ze.data)==null?void 0:Fe.message)||"Failed to generate allocation letter")}catch(ce){console.error("Generate allocation letter failed",ce),M.error("Failed to generate allocation letter")}},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Generate Allocation Letter"})})]}):e.jsx("div",{className:"space-y-4",children:R().map(fe=>{var Fe;return e.jsxs(ae.div,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:"bg-white p-4 rounded-xl border border-sky-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"text-2xl",children:"📄"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:fe.originalName}),e.jsx("p",{className:"text-sm text-gray-500",children:"Allocation Letter"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(fe.fileSize/1024)," KB"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Generated:"}),e.jsx("span",{className:"font-medium",children:new Date(fe.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Downloads:"}),e.jsx("span",{className:"font-medium",children:fe.downloadCount})]}),((Fe=fe.metadata)==null?void 0:Fe.description)&&e.jsx("div",{className:"text-sm text-gray-600",children:fe.metadata.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>F(fe._id),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all text-sm",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:"Preview"})]}),e.jsxs("button",{onClick:()=>L(fe._id),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all text-sm",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Download"})]})]})]},fe._id)})})]}),y&&N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Document Preview"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"File:"})," ",N.fileName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",N.mimeType]}),N.downloadCount!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Downloads:"})," ",N.downloadCount]})]}),N.allocationData&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Allocation Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[N.roomNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Room:"}),e.jsx("span",{className:"ml-2 font-medium",children:N.roomNumber})]}),N.bedNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Bed:"}),e.jsx("span",{className:"ml-2 font-medium",children:N.bedNumber})]}),N.monthlyRent&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Rent:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["₹",N.monthlyRent.toLocaleString()]})]}),N.onboardingDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Onboarding Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(N.onboardingDate).toLocaleDateString()})]}),N.generatedOn&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Generated:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(N.generatedOn).toLocaleString()})]})]})]}),N.mimeType==="application/pdf"?e.jsx("div",{className:"w-full h-96 border rounded-lg overflow-hidden",children:e.jsx("iframe",{src:`data:application/pdf;base64,${N.previewData}`,className:"w-full h-full",title:"PDF Preview"})}):N.mimeType.startsWith("image/")?e.jsx("img",{src:`data:${N.mimeType};base64,${N.previewData}`,alt:"Document preview",className:"max-w-full h-auto rounded-lg border"}):e.jsxs("div",{className:"bg-gray-100 p-8 rounded-lg text-center",children:[e.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Preview not available for this file type"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Please download the file to view it"})]})]})]})})]}),g==="payments"&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ks,{className:"h-4 w-4 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Payment Statistics"})]}),e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-3 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-all text-sm",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Paid"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₹",((le=a==null?void 0:a.paymentSummary)==null?void 0:le.totalPaid)||0]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rent Paid"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["₹",((Se=a==null?void 0:a.paymentSummary)==null?void 0:Se.totalRentPaid)||0]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Advance Paid"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["₹",((Ee=a==null?void 0:a.paymentSummary)==null?void 0:Ee.totalAdvancePaid)||0]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Months"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((ye=a==null?void 0:a.paymentSummary)==null?void 0:ye.totalMonths)||0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rent Payments"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:(a==null?void 0:a.rentPaymentCount)||0})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Advance Payments"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:(a==null?void 0:a.advancePaymentCount)||0})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-sky-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Average Rent"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₹",((We=a==null?void 0:a.paymentSummary)==null?void 0:We.averageRentAmount)||0]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-xl border border-sky-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(gg,{className:"h-4 w-4 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Payment History"})]}),u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gg,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No payment history found"})]}):e.jsx("div",{className:"space-y-4",children:u.map(fe=>e.jsxs(ae.div,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:"bg-white p-4 rounded-xl border border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:fe.month}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",P(fe.dueDate)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₹",fe.amount.toLocaleString()]}),B(fe.status)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("p",{className:"font-medium capitalize",children:fe.paymentMethod||"Not specified"})]}),fe.paymentDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-medium",children:P(fe.paymentDate)})]}),fe.markedBy&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Marked By:"}),e.jsxs("p",{className:"font-medium",children:[fe.markedBy.firstName," ",fe.markedBy.lastName]})]}),fe.markedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Marked At:"}),e.jsx("p",{className:"font-medium",children:P(fe.markedAt)})]})]}),fe.receiptImage&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Payment Receipt:"}),e.jsx("button",{onClick:()=>I(fe),className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"View Receipt"})]}),fe.receiptImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:`/uploads/payments/${fe.receiptImage.fileName}`,alt:"Payment receipt",className:"w-full h-32 object-cover rounded-lg border border-gray-200",onError:Fe=>{Fe.target.style.display="none",Fe.target.nextSibling.style.display="block"}}),e.jsx("div",{className:"hidden text-sm text-gray-500 mt-1",children:"Receipt image not available"})]})]})]},fe._id))})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(jt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Resident not found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"The resident you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>s("/admin/residents"),className:"px-4 py-2 bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded-lg hover:from-sky-600 hover:to-blue-600 transition-all",children:"Back to Residents"})]})})})};var L5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var s={}.hasOwnProperty;function r(){for(var i="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(i=n(i,a(o)))}return i}function a(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var o in i)s.call(i,o)&&i[o]&&(l=n(l,o));return l}function n(i,l){return l?i?i+" "+l:i+l:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(L5);var FK=L5.exports;const dt=s2(FK);var DK=Symbol.for("react.element"),IK=Symbol.for("react.transitional.element"),OK=Symbol.for("react.fragment");function $5(t){return t&&At(t)==="object"&&(t.$$typeof===DK||t.$$typeof===IK)&&t.type===OK}function Sl(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return Ke.Children.forEach(t,function(a){a==null&&!s.keepEmpty||(Array.isArray(a)?r=r.concat(Sl(a)):$5(a)&&a.props?r=r.concat(Sl(a.props.children,s)):r.push(a))}),r}var xp={},MK=function(s){};function BK(t,s){}function LK(t,s){}function $K(){xp={}}function U5(t,s,r){!s&&!xp[r]&&(t(!1,r),xp[r]=!0)}function _a(t,s){U5(BK,t,s)}function UK(t,s){U5(LK,t,s)}_a.preMessage=MK;_a.resetWarned=$K;_a.noteOnce=UK;function ju(t){return t instanceof HTMLElement||t instanceof SVGElement}function HK(t){return t&&At(t)==="object"&&ju(t.nativeElement)?t.nativeElement:ju(t)?t:null}function y0(t){var s=HK(t);if(s)return s;if(t instanceof Ke.Component){var r;return(r=xg.findDOMNode)===null||r===void 0?void 0:r.call(xg,t)}return null}var H5={exports:{}},ws={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky=Symbol.for("react.element"),Xy=Symbol.for("react.portal"),oh=Symbol.for("react.fragment"),ch=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),uh=Symbol.for("react.provider"),mh=Symbol.for("react.context"),WK=Symbol.for("react.server_context"),xh=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),fh=Symbol.for("react.suspense_list"),gh=Symbol.for("react.memo"),ph=Symbol.for("react.lazy"),VK=Symbol.for("react.offscreen"),W5;W5=Symbol.for("react.module.reference");function kn(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case Ky:switch(t=t.type,t){case oh:case dh:case ch:case hh:case fh:return t;default:switch(t=t&&t.$$typeof,t){case WK:case mh:case xh:case ph:case gh:case uh:return t;default:return s}}case Xy:return s}}}ws.ContextConsumer=mh;ws.ContextProvider=uh;ws.Element=Ky;ws.ForwardRef=xh;ws.Fragment=oh;ws.Lazy=ph;ws.Memo=gh;ws.Portal=Xy;ws.Profiler=dh;ws.StrictMode=ch;ws.Suspense=hh;ws.SuspenseList=fh;ws.isAsyncMode=function(){return!1};ws.isConcurrentMode=function(){return!1};ws.isContextConsumer=function(t){return kn(t)===mh};ws.isContextProvider=function(t){return kn(t)===uh};ws.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ky};ws.isForwardRef=function(t){return kn(t)===xh};ws.isFragment=function(t){return kn(t)===oh};ws.isLazy=function(t){return kn(t)===ph};ws.isMemo=function(t){return kn(t)===gh};ws.isPortal=function(t){return kn(t)===Xy};ws.isProfiler=function(t){return kn(t)===dh};ws.isStrictMode=function(t){return kn(t)===ch};ws.isSuspense=function(t){return kn(t)===hh};ws.isSuspenseList=function(t){return kn(t)===fh};ws.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===oh||t===dh||t===ch||t===hh||t===fh||t===VK||typeof t=="object"&&t!==null&&(t.$$typeof===ph||t.$$typeof===gh||t.$$typeof===uh||t.$$typeof===mh||t.$$typeof===xh||t.$$typeof===W5||t.getModuleId!==void 0)};ws.typeOf=kn;H5.exports=ws;var Lf=H5.exports;function bh(t,s,r){var a=h.useRef({});return(!("value"in a.current)||r(a.current.condition,s))&&(a.current.value=t(),a.current.condition=s),a.current.value}var zK=Number(h.version.split(".")[0]),Jy=function(s,r){typeof s=="function"?s(r):At(s)==="object"&&s&&"current"in s&&(s.current=r)},Qc=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];var n=r.filter(Boolean);return n.length<=1?n[0]:function(i){r.forEach(function(l){Jy(l,i)})}},Zc=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return bh(function(){return Qc.apply(void 0,r)},r,function(n,i){return n.length!==i.length||n.every(function(l,o){return l!==i[o]})})},Ol=function(s){var r,a;if(!s)return!1;if(Qy(s)&&zK>=19)return!0;var n=Lf.isMemo(s)?s.type.type:s.type;return!(typeof n=="function"&&!((r=n.prototype)!==null&&r!==void 0&&r.render)&&n.$$typeof!==Lf.ForwardRef||typeof s=="function"&&!((a=s.prototype)!==null&&a!==void 0&&a.render)&&s.$$typeof!==Lf.ForwardRef)};function Qy(t){return h.isValidElement(t)&&!$5(t)}var GK=function(s){return Qy(s)&&Ol(s)},To=function(s){if(s&&Qy(s)){var r=s;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null},hp=h.createContext(null);function qK(t){var s=t.children,r=t.onBatchResize,a=h.useRef(0),n=h.useRef([]),i=h.useContext(hp),l=h.useCallback(function(o,c,u){a.current+=1;var d=a.current;n.current.push({size:o,element:c,data:u}),Promise.resolve().then(function(){d===a.current&&(r==null||r(n.current),n.current=[])}),i==null||i(o,c,u)},[r,i]);return h.createElement(hp.Provider,{value:l},s)}var V5=function(){if(typeof Map<"u")return Map;function t(s,r){var a=-1;return s.some(function(n,i){return n[0]===r?(a=i,!0):!1}),a}return function(){function s(){this.__entries__=[]}return Object.defineProperty(s.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),s.prototype.get=function(r){var a=t(this.__entries__,r),n=this.__entries__[a];return n&&n[1]},s.prototype.set=function(r,a){var n=t(this.__entries__,r);~n?this.__entries__[n][1]=a:this.__entries__.push([r,a])},s.prototype.delete=function(r){var a=this.__entries__,n=t(a,r);~n&&a.splice(n,1)},s.prototype.has=function(r){return!!~t(this.__entries__,r)},s.prototype.clear=function(){this.__entries__.splice(0)},s.prototype.forEach=function(r,a){a===void 0&&(a=null);for(var n=0,i=this.__entries__;n<i.length;n++){var l=i[n];r.call(a,l[1],l[0])}},s}()}(),fp=typeof window<"u"&&typeof document<"u"&&window.document===document,rx=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),YK=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(rx):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),KK=2;function XK(t,s){var r=!1,a=!1,n=0;function i(){r&&(r=!1,t()),a&&o()}function l(){YK(i)}function o(){var c=Date.now();if(r){if(c-n<KK)return;a=!0}else r=!0,a=!1,setTimeout(l,s);n=c}return o}var JK=20,QK=["top","right","bottom","left","width","height","size","weight"],ZK=typeof MutationObserver<"u",eX=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=XK(this.refresh.bind(this),JK)}return t.prototype.addObserver=function(s){~this.observers_.indexOf(s)||this.observers_.push(s),this.connected_||this.connect_()},t.prototype.removeObserver=function(s){var r=this.observers_,a=r.indexOf(s);~a&&r.splice(a,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var s=this.updateObservers_();s&&this.refresh()},t.prototype.updateObservers_=function(){var s=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return s.forEach(function(r){return r.broadcastActive()}),s.length>0},t.prototype.connect_=function(){!fp||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ZK?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!fp||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(s){var r=s.propertyName,a=r===void 0?"":r,n=QK.some(function(i){return!!~a.indexOf(i)});n&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),z5=function(t,s){for(var r=0,a=Object.keys(s);r<a.length;r++){var n=a[r];Object.defineProperty(t,n,{value:s[n],enumerable:!1,writable:!1,configurable:!0})}return t},Ec=function(t){var s=t&&t.ownerDocument&&t.ownerDocument.defaultView;return s||rx},G5=yh(0,0,0,0);function ax(t){return parseFloat(t)||0}function oN(t){for(var s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];return s.reduce(function(a,n){var i=t["border-"+n+"-width"];return a+ax(i)},0)}function tX(t){for(var s=["top","right","bottom","left"],r={},a=0,n=s;a<n.length;a++){var i=n[a],l=t["padding-"+i];r[i]=ax(l)}return r}function sX(t){var s=t.getBBox();return yh(0,0,s.width,s.height)}function rX(t){var s=t.clientWidth,r=t.clientHeight;if(!s&&!r)return G5;var a=Ec(t).getComputedStyle(t),n=tX(a),i=n.left+n.right,l=n.top+n.bottom,o=ax(a.width),c=ax(a.height);if(a.boxSizing==="border-box"&&(Math.round(o+i)!==s&&(o-=oN(a,"left","right")+i),Math.round(c+l)!==r&&(c-=oN(a,"top","bottom")+l)),!nX(t)){var u=Math.round(o+i)-s,d=Math.round(c+l)-r;Math.abs(u)!==1&&(o-=u),Math.abs(d)!==1&&(c-=d)}return yh(n.left,n.top,o,c)}var aX=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Ec(t).SVGGraphicsElement}:function(t){return t instanceof Ec(t).SVGElement&&typeof t.getBBox=="function"}}();function nX(t){return t===Ec(t).document.documentElement}function iX(t){return fp?aX(t)?sX(t):rX(t):G5}function lX(t){var s=t.x,r=t.y,a=t.width,n=t.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(i.prototype);return z5(l,{x:s,y:r,width:a,height:n,top:r,right:s+a,bottom:n+r,left:s}),l}function yh(t,s,r,a){return{x:t,y:s,width:r,height:a}}var oX=function(){function t(s){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=yh(0,0,0,0),this.target=s}return t.prototype.isActive=function(){var s=iX(this.target);return this.contentRect_=s,s.width!==this.broadcastWidth||s.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var s=this.contentRect_;return this.broadcastWidth=s.width,this.broadcastHeight=s.height,s},t}(),cX=function(){function t(s,r){var a=lX(r);z5(this,{target:s,contentRect:a})}return t}(),dX=function(){function t(s,r,a){if(this.activeObservations_=[],this.observations_=new V5,typeof s!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=s,this.controller_=r,this.callbackCtx_=a}return t.prototype.observe=function(s){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(s instanceof Ec(s).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(s)||(r.set(s,new oX(s)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(s){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(s instanceof Ec(s).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(s)&&(r.delete(s),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var s=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&s.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var s=this.callbackCtx_,r=this.activeObservations_.map(function(a){return new cX(a.target,a.broadcastRect())});this.callback_.call(s,r,s),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),q5=typeof WeakMap<"u"?new WeakMap:new V5,Y5=function(){function t(s){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=eX.getInstance(),a=new dX(s,r,this);q5.set(this,a)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Y5.prototype[t]=function(){var s;return(s=q5.get(this))[t].apply(s,arguments)}});var uX=function(){return typeof rx.ResizeObserver<"u"?rx.ResizeObserver:Y5}(),ml=new Map;function mX(t){t.forEach(function(s){var r,a=s.target;(r=ml.get(a))===null||r===void 0||r.forEach(function(n){return n(a)})})}var K5=new uX(mX);function xX(t,s){ml.has(t)||(ml.set(t,new Set),K5.observe(t)),ml.get(t).add(s)}function hX(t,s){ml.has(t)&&(ml.get(t).delete(s),ml.get(t).size||(K5.unobserve(t),ml.delete(t)))}var fX=function(t){zi(r,t);var s=Gi(r);function r(){return Rr(this,r),s.apply(this,arguments)}return Fr(r,[{key:"render",value:function(){return this.props.children}}]),r}(h.Component);function gX(t,s){var r=t.children,a=t.disabled,n=h.useRef(null),i=h.useRef(null),l=h.useContext(hp),o=typeof r=="function",c=o?r(n):r,u=h.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!o&&h.isValidElement(c)&&Ol(c),m=d?To(c):null,x=Zc(m,n),g=function(){var y;return y0(n.current)||(n.current&&At(n.current)==="object"?y0((y=n.current)===null||y===void 0?void 0:y.nativeElement):null)||y0(i.current)};h.useImperativeHandle(s,function(){return g()});var p=h.useRef(t);p.current=t;var f=h.useCallback(function(b){var y=p.current,v=y.onResize,N=y.data,S=b.getBoundingClientRect(),w=S.width,C=S.height,j=b.offsetWidth,k=b.offsetHeight,E=Math.floor(w),R=Math.floor(C);if(u.current.width!==E||u.current.height!==R||u.current.offsetWidth!==j||u.current.offsetHeight!==k){var D={width:E,height:R,offsetWidth:j,offsetHeight:k};u.current=D;var P=j===Math.round(w)?w:j,T=k===Math.round(C)?C:k,B=pe(pe({},D),{},{offsetWidth:P,offsetHeight:T});l==null||l(B,b,N),v&&Promise.resolve().then(function(){v(B,b)})}},[]);return h.useEffect(function(){var b=g();return b&&!a&&xX(b,f),function(){return hX(b,f)}},[n.current,a]),h.createElement(fX,{ref:i},d?h.cloneElement(c,{ref:x}):c)}var pX=h.forwardRef(gX),bX="rc-observer-key";function yX(t,s){var r=t.children,a=typeof r=="function"?[r]:Sl(r);return a.map(function(n,i){var l=(n==null?void 0:n.key)||"".concat(bX,"-").concat(i);return h.createElement(pX,Gt({},t,{key:l,ref:i===0?s:void 0}),n)})}var sm=h.forwardRef(yX);sm.Collection=qK;function vX(t){if(Array.isArray(t))return Vg(t)}function X5(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rt(t){return vX(t)||X5(t)||Fb(t)||jX()}var J5=function(s){return+setTimeout(s,16)},Q5=function(s){return clearTimeout(s)};typeof window<"u"&&"requestAnimationFrame"in window&&(J5=function(s){return window.requestAnimationFrame(s)},Q5=function(s){return window.cancelAnimationFrame(s)});var cN=0,Zy=new Map;function Z5(t){Zy.delete(t)}var La=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;cN+=1;var a=cN;function n(i){if(i===0)Z5(a),s();else{var l=J5(function(){n(i-1)});Zy.set(a,l)}}return n(r),a};La.cancel=function(t){var s=Zy.get(t);return Z5(t),Q5(s)};function e6(t){if(Array.isArray(t))return t}function wX(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);c=!0);}catch(d){u=!0,n=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function t6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(t,s){return e6(t)||wX(t,s)||Fb(t,s)||t6()}function wu(t){for(var s=0,r,a=0,n=t.length;n>=4;++a,n-=4)r=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,s=(r&65535)*1540483477+((r>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(n){case 3:s^=(t.charCodeAt(a+2)&255)<<16;case 2:s^=(t.charCodeAt(a+1)&255)<<8;case 1:s^=t.charCodeAt(a)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}function sn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function NX(t,s){if(!t)return!1;if(t.contains)return t.contains(s);for(var r=s;r;){if(r===t)return!0;r=r.parentNode}return!1}var dN="data-rc-order",uN="data-rc-priority",SX="rc-util-key",gp=new Map;function s6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.mark;return s?s.startsWith("data-")?s:"data-".concat(s):SX}function vh(t){if(t.attachTo)return t.attachTo;var s=document.querySelector("head");return s||document.body}function CX(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function ev(t){return Array.from((gp.get(t)||t).children).filter(function(s){return s.tagName==="STYLE"})}function r6(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!sn())return null;var r=s.csp,a=s.prepend,n=s.priority,i=n===void 0?0:n,l=CX(a),o=l==="prependQueue",c=document.createElement("style");c.setAttribute(dN,l),o&&i&&c.setAttribute(uN,"".concat(i)),r!=null&&r.nonce&&(c.nonce=r==null?void 0:r.nonce),c.innerHTML=t;var u=vh(s),d=u.firstChild;if(a){if(o){var m=(s.styles||ev(u)).filter(function(x){if(!["prepend","prependQueue"].includes(x.getAttribute(dN)))return!1;var g=Number(x.getAttribute(uN)||0);return i>=g});if(m.length)return u.insertBefore(c,m[m.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function a6(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=vh(s);return(s.styles||ev(r)).find(function(a){return a.getAttribute(s6(s))===t})}function Nu(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a6(t,s);if(r){var a=vh(s);a.removeChild(r)}}function kX(t,s){var r=gp.get(t);if(!r||!NX(document,r)){var a=r6("",s),n=a.parentNode;gp.set(t,n),t.removeChild(a)}}function Oi(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=vh(r),n=ev(a),i=pe(pe({},r),{},{styles:n});kX(a,i);var l=a6(s,i);if(l){var o,c;if((o=i.csp)!==null&&o!==void 0&&o.nonce&&l.nonce!==((c=i.csp)===null||c===void 0?void 0:c.nonce)){var u;l.nonce=(u=i.csp)===null||u===void 0?void 0:u.nonce}return l.innerHTML!==t&&(l.innerHTML=t),l}var d=r6(t,i);return d.setAttribute(s6(i),s),d}function js(t,s){if(t==null)return{};var r,a,n=NE(t,s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],s.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Su(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function n(i,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=a.has(i);if(_a(!c,"Warning: There may be circular references"),c)return!1;if(i===l)return!0;if(r&&o>1)return!1;a.add(i);var u=o+1;if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(var d=0;d<i.length;d++)if(!n(i[d],l[d],u))return!1;return!0}if(i&&l&&At(i)==="object"&&At(l)==="object"){var m=Object.keys(i);return m.length!==Object.keys(l).length?!1:m.every(function(x){return n(i[x],l[x],u)})}return!1}return n(t,s)}var EX="%";function pp(t){return t.join(EX)}var PX=function(){function t(s){Rr(this,t),de(this,"instanceId",void 0),de(this,"cache",new Map),de(this,"extracted",new Set),this.instanceId=s}return Fr(t,[{key:"get",value:function(r){return this.opGet(pp(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,a){return this.opUpdate(pp(r),a)}},{key:"opUpdate",value:function(r,a){var n=this.cache.get(r),i=a(n);i===null?this.cache.delete(r):this.cache.set(r,i)}}]),t}(),Pc="data-token-hash",Mn="data-css-hash",xl="__cssinjs_instance__";function TX(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var s=document.body.querySelectorAll("style[".concat(Mn,"]"))||[],r=document.head.firstChild;Array.from(s).forEach(function(n){n[xl]=n[xl]||t,n[xl]===t&&document.head.insertBefore(n,r)});var a={};Array.from(document.querySelectorAll("style[".concat(Mn,"]"))).forEach(function(n){var i=n.getAttribute(Mn);if(a[i]){if(n[xl]===t){var l;(l=n.parentNode)===null||l===void 0||l.removeChild(n)}}else a[i]=!0})}return new PX(t)}var rm=h.createContext({hashPriority:"low",cache:TX(),defaultCache:!0});function _X(t,s){if(t.length!==s.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==s[r])return!1;return!0}var tv=function(){function t(){Rr(this,t),de(this,"cache",void 0),de(this,"keys",void 0),de(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Fr(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var a,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l={map:this.cache};return r.forEach(function(o){if(!l)l=void 0;else{var c;l=(c=l)===null||c===void 0||(c=c.map)===null||c===void 0?void 0:c.get(o)}}),(a=l)!==null&&a!==void 0&&a.value&&i&&(l.value[1]=this.cacheCallTimes++),(n=l)===null||n===void 0?void 0:n.value}},{key:"get",value:function(r){var a;return(a=this.internalGet(r,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,a){var n=this;if(!this.has(r)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var i=this.keys.reduce(function(u,d){var m=Oe(u,2),x=m[1];return n.internalGet(d)[1]<x?[d,n.internalGet(d)[1]]:u},[this.keys[0],this.cacheCallTimes]),l=Oe(i,1),o=l[0];this.delete(o)}this.keys.push(r)}var c=this.cache;r.forEach(function(u,d){if(d===r.length-1)c.set(u,{value:[a,n.cacheCallTimes++]});else{var m=c.get(u);m?m.map||(m.map=new Map):c.set(u,{map:new Map}),c=c.get(u).map}})}},{key:"deleteByPath",value:function(r,a){var n=r.get(a[0]);if(a.length===1){var i;return n.map?r.set(a[0],{map:n.map}):r.delete(a[0]),(i=n.value)===null||i===void 0?void 0:i[0]}var l=this.deleteByPath(n.map,a.slice(1));return(!n.map||n.map.size===0)&&!n.value&&r.delete(a[0]),l}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(a){return!_X(a,r)}),this.deleteByPath(this.cache,r)}}]),t}();de(tv,"MAX_CACHE_SIZE",20);de(tv,"MAX_CACHE_OFFSET",5);var mN=0,n6=function(){function t(s){Rr(this,t),de(this,"derivatives",void 0),de(this,"id",void 0),this.derivatives=Array.isArray(s)?s:[s],this.id=mN,s.length===0&&(s.length>0,void 0),mN+=1}return Fr(t,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(a,n){return n(r,a)},void 0)}}]),t}(),$f=new tv;function bp(t){var s=Array.isArray(t)?t:[t];return $f.has(s)||$f.set(s,new n6(s)),$f.get(s)}var AX=new WeakMap,Uf={};function RX(t,s){for(var r=AX,a=0;a<s.length;a+=1){var n=s[a];r.has(n)||r.set(n,new WeakMap),r=r.get(n)}return r.has(Uf)||r.set(Uf,t()),r.get(Uf)}var xN=new WeakMap;function Gd(t){var s=xN.get(t)||"";return s||(Object.keys(t).forEach(function(r){var a=t[r];s+=r,a instanceof n6?s+=a.id:a&&At(a)==="object"?s+=Gd(a):s+=a}),s=wu(s),xN.set(t,s)),s}function hN(t,s){return wu("".concat(s,"_").concat(Gd(t)))}var yp=sn();function It(t){return typeof t=="number"?"".concat(t,"px"):t}function nx(t,s,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n)return t;var i=pe(pe({},a),{},de(de({},Pc,s),Mn,r)),l=Object.keys(i).map(function(o){var c=i[o];return c?"".concat(o,'="').concat(c,'"'):null}).filter(function(o){return o}).join(" ");return"<style ".concat(l,">").concat(t,"</style>")}var v0=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(s).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},FX=function(s,r,a){return Object.keys(s).length?".".concat(r).concat(a!=null&&a.scope?".".concat(a.scope):"","{").concat(Object.entries(s).map(function(n){var i=Oe(n,2),l=i[0],o=i[1];return"".concat(l,":").concat(o,";")}).join(""),"}"):""},i6=function(s,r,a){var n={},i={};return Object.entries(s).forEach(function(l){var o,c,u=Oe(l,2),d=u[0],m=u[1];if(a!=null&&(o=a.preserve)!==null&&o!==void 0&&o[d])i[d]=m;else if((typeof m=="string"||typeof m=="number")&&!(a!=null&&(c=a.ignore)!==null&&c!==void 0&&c[d])){var x,g=v0(d,a==null?void 0:a.prefix);n[g]=typeof m=="number"&&!(a!=null&&(x=a.unitless)!==null&&x!==void 0&&x[d])?"".concat(m,"px"):String(m),i[d]="var(".concat(g,")")}}),[i,FX(n,r,{scope:a==null?void 0:a.scope})]},fN=sn()?h.useLayoutEffect:h.useEffect,Qr=function(s,r){var a=h.useRef(!0);fN(function(){return s(a.current)},r),fN(function(){return a.current=!1,function(){a.current=!0}},[])},gN=function(s,r){Qr(function(a){if(!a)return s()},r)},DX=pe({},Mc),pN=DX.useInsertionEffect,IX=function(s,r,a){h.useMemo(s,a),Qr(function(){return r(!0)},a)},OX=pN?function(t,s,r){return pN(function(){return t(),s()},r)}:IX,MX=pe({},Mc),BX=MX.useInsertionEffect,LX=function(s){var r=[],a=!1;function n(i){a||r.push(i)}return h.useEffect(function(){return a=!1,function(){a=!0,r.length&&r.forEach(function(i){return i()})}},s),n},$X=function(){return function(s){s()}},UX=typeof BX<"u"?LX:$X;function sv(t,s,r,a,n){var i=h.useContext(rm),l=i.cache,o=[t].concat(rt(s)),c=pp(o),u=UX([c]),d=function(p){l.opUpdate(c,function(f){var b=f||[void 0,void 0],y=Oe(b,2),v=y[0],N=v===void 0?0:v,S=y[1],w=S,C=w||r(),j=[N,C];return p?p(j):j})};h.useMemo(function(){d()},[c]);var m=l.opGet(c),x=m[1];return OX(function(){n==null||n(x)},function(g){return d(function(p){var f=Oe(p,2),b=f[0],y=f[1];return g&&b===0&&(n==null||n(x)),[b+1,y]}),function(){l.opUpdate(c,function(p){var f=p||[],b=Oe(f,2),y=b[0],v=y===void 0?0:y,N=b[1],S=v-1;return S===0?(u(function(){(g||!l.opGet(c))&&(a==null||a(N,!1))}),null):[v-1,N]})}},[c]),x}var HX={},WX="css",ql=new Map;function VX(t){ql.set(t,(ql.get(t)||0)+1)}function zX(t,s){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(Pc,'="').concat(t,'"]'));r.forEach(function(a){if(a[xl]===s){var n;(n=a.parentNode)===null||n===void 0||n.removeChild(a)}})}}var GX=0;function qX(t,s){ql.set(t,(ql.get(t)||0)-1);var r=new Set;ql.forEach(function(a,n){a<=0&&r.add(n)}),ql.size-r.size>GX&&r.forEach(function(a){zX(a,s),ql.delete(a)})}var YX=function(s,r,a,n){var i=a.getDerivativeToken(s),l=pe(pe({},i),r);return n&&(l=n(l)),l},l6="token";function KX(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=h.useContext(rm),n=a.cache.instanceId,i=a.container,l=r.salt,o=l===void 0?"":l,c=r.override,u=c===void 0?HX:c,d=r.formatToken,m=r.getComputedToken,x=r.cssVar,g=RX(function(){return Object.assign.apply(Object,[{}].concat(rt(s)))},s),p=Gd(g),f=Gd(u),b=x?Gd(x):"",y=sv(l6,[o,t.id,p,f,b],function(){var v,N=m?m(g,u,t):YX(g,u,t,d),S=pe({},N),w="";if(x){var C=i6(N,x.key,{prefix:x.prefix,ignore:x.ignore,unitless:x.unitless,preserve:x.preserve}),j=Oe(C,2);N=j[0],w=j[1]}var k=hN(N,o);N._tokenKey=k,S._tokenKey=hN(S,o);var E=(v=x==null?void 0:x.key)!==null&&v!==void 0?v:k;N._themeKey=E,VX(E);var R="".concat(WX,"-").concat(wu(k));return N._hashId=R,[N,R,S,w,(x==null?void 0:x.key)||""]},function(v){qX(v[0]._themeKey,n)},function(v){var N=Oe(v,4),S=N[0],w=N[3];if(x&&w){var C=Oi(w,wu("css-variables-".concat(S._themeKey)),{mark:Mn,prepend:"queue",attachTo:i,priority:-999});C[xl]=n,C.setAttribute(Pc,S._themeKey)}});return y}var XX=function(s,r,a){var n=Oe(s,5),i=n[2],l=n[3],o=n[4],c=a||{},u=c.plain;if(!l)return null;var d=i._tokenKey,m=-999,x={"data-rc-order":"prependQueue","data-rc-priority":"".concat(m)},g=nx(l,o,d,x,u);return[m,d,g]},JX={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o6="comm",c6="rule",d6="decl",QX="@import",ZX="@namespace",eJ="@keyframes",tJ="@layer",u6=Math.abs,rv=String.fromCharCode;function m6(t){return t.trim()}function j0(t,s,r){return t.replace(s,r)}function sJ(t,s,r){return t.indexOf(s,r)}function fc(t,s){return t.charCodeAt(s)|0}function Tc(t,s,r){return t.slice(s,r)}function si(t){return t.length}function rJ(t){return t.length}function Um(t,s){return s.push(t),t}var jh=1,_c=1,x6=0,Nn=0,yr=0,ed="";function av(t,s,r,a,n,i,l,o){return{value:t,root:s,parent:r,type:a,props:n,children:i,line:jh,column:_c,length:l,return:"",siblings:o}}function aJ(){return yr}function nJ(){return yr=Nn>0?fc(ed,--Nn):0,_c--,yr===10&&(_c=1,jh--),yr}function Bn(){return yr=Nn<x6?fc(ed,Nn++):0,_c++,yr===10&&(_c=1,jh++),yr}function hl(){return fc(ed,Nn)}function w0(){return Nn}function wh(t,s){return Tc(ed,t,s)}function Cu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function iJ(t){return jh=_c=1,x6=si(ed=t),Nn=0,[]}function lJ(t){return ed="",t}function Hf(t){return m6(wh(Nn-1,vp(t===91?t+2:t===40?t+1:t)))}function oJ(t){for(;(yr=hl())&&yr<33;)Bn();return Cu(t)>2||Cu(yr)>3?"":" "}function cJ(t,s){for(;--s&&Bn()&&!(yr<48||yr>102||yr>57&&yr<65||yr>70&&yr<97););return wh(t,w0()+(s<6&&hl()==32&&Bn()==32))}function vp(t){for(;Bn();)switch(yr){case t:return Nn;case 34:case 39:t!==34&&t!==39&&vp(yr);break;case 40:t===41&&vp(t);break;case 92:Bn();break}return Nn}function dJ(t,s){for(;Bn()&&t+yr!==57;)if(t+yr===84&&hl()===47)break;return"/*"+wh(s,Nn-1)+"*"+rv(t===47?t:Bn())}function uJ(t){for(;!Cu(hl());)Bn();return wh(t,Nn)}function mJ(t){return lJ(N0("",null,null,null,[""],t=iJ(t),0,[0],t))}function N0(t,s,r,a,n,i,l,o,c){for(var u=0,d=0,m=l,x=0,g=0,p=0,f=1,b=1,y=1,v=0,N="",S=n,w=i,C=a,j=N;b;)switch(p=v,v=Bn()){case 40:if(p!=108&&fc(j,m-1)==58){sJ(j+=j0(Hf(v),"&","&\f"),"&\f",u6(u?o[u-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:j+=Hf(v);break;case 9:case 10:case 13:case 32:j+=oJ(p);break;case 92:j+=cJ(w0()-1,7);continue;case 47:switch(hl()){case 42:case 47:Um(xJ(dJ(Bn(),w0()),s,r,c),c),(Cu(p||1)==5||Cu(hl()||1)==5)&&si(j)&&Tc(j,-1,void 0)!==" "&&(j+=" ");break;default:j+="/"}break;case 123*f:o[u++]=si(j)*y;case 125*f:case 59:case 0:switch(v){case 0:case 125:b=0;case 59+d:y==-1&&(j=j0(j,/\f/g,"")),g>0&&(si(j)-m||f===0&&p===47)&&Um(g>32?yN(j+";",a,r,m-1,c):yN(j0(j," ","")+";",a,r,m-2,c),c);break;case 59:j+=";";default:if(Um(C=bN(j,s,r,u,d,n,o,N,S=[],w=[],m,i),i),v===123)if(d===0)N0(j,s,C,C,S,i,m,o,w);else{switch(x){case 99:if(fc(j,3)===110)break;case 108:if(fc(j,2)===97)break;default:d=0;case 100:case 109:case 115:}d?N0(t,C,C,a&&Um(bN(t,C,C,0,0,n,o,N,n,S=[],m,w),w),n,w,m,o,a?S:w):N0(j,C,C,C,[""],w,0,o,w)}}u=d=g=0,f=y=1,N=j="",m=l;break;case 58:m=1+si(j),g=p;default:if(f<1){if(v==123)--f;else if(v==125&&f++==0&&nJ()==125)continue}switch(j+=rv(v),v*f){case 38:y=d>0?1:(j+="\f",-1);break;case 44:o[u++]=(si(j)-1)*y,y=1;break;case 64:hl()===45&&(j+=Hf(Bn())),x=hl(),d=m=si(N=j+=uJ(w0())),v++;break;case 45:p===45&&si(j)==2&&(f=0)}}return i}function bN(t,s,r,a,n,i,l,o,c,u,d,m){for(var x=n-1,g=n===0?i:[""],p=rJ(g),f=0,b=0,y=0;f<a;++f)for(var v=0,N=Tc(t,x+1,x=u6(b=l[f])),S=t;v<p;++v)(S=m6(b>0?g[v]+" "+N:j0(N,/&\f/g,g[v])))&&(c[y++]=S);return av(t,s,r,n===0?c6:o,c,u,d,m)}function xJ(t,s,r,a){return av(t,s,r,o6,rv(aJ()),Tc(t,2,-2),0,a)}function yN(t,s,r,a,n){return av(t,s,r,d6,Tc(t,0,a),Tc(t,a+1,-1),a,n)}function jp(t,s){for(var r="",a=0;a<t.length;a++)r+=s(t[a],a,t,s)||"";return r}function hJ(t,s,r,a){switch(t.type){case tJ:if(t.children.length)break;case QX:case ZX:case d6:return t.return=t.return||t.value;case o6:return"";case eJ:return t.return=t.value+"{"+jp(t.children,a)+"}";case c6:if(!si(t.value=t.props.join(",")))return""}return si(r=jp(t.children,a))?t.return=t.value+"{"+r+"}":""}var vN="data-ant-cssinjs-cache-path",h6="_FILE_STYLE__",ro,f6=!0;function fJ(){if(!ro&&(ro={},sn())){var t=document.createElement("div");t.className=vN,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var s=getComputedStyle(t).content||"";s=s.replace(/^"/,"").replace(/"$/,""),s.split(";").forEach(function(n){var i=n.split(":"),l=Oe(i,2),o=l[0],c=l[1];ro[o]=c});var r=document.querySelector("style[".concat(vN,"]"));if(r){var a;f6=!1,(a=r.parentNode)===null||a===void 0||a.removeChild(r)}document.body.removeChild(t)}}function gJ(t){return fJ(),!!ro[t]}function pJ(t){var s=ro[t],r=null;if(s&&sn())if(f6)r=h6;else{var a=document.querySelector("style[".concat(Mn,'="').concat(ro[t],'"]'));a?r=a.innerHTML:delete ro[t]}return[r,s]}var bJ="_skip_check_",g6="_multi_value_";function S0(t){var s=jp(mJ(t),hJ);return s.replace(/\{%%%\:[^;];}/g,";")}function yJ(t){return At(t)==="object"&&t&&(bJ in t||g6 in t)}function jN(t,s,r){if(!s)return t;var a=".".concat(s),n=r==="low"?":where(".concat(a,")"):a,i=t.split(",").map(function(l){var o,c=l.trim().split(/\s+/),u=c[0]||"",d=((o=u.match(/^\w+/))===null||o===void 0?void 0:o[0])||"";return u="".concat(d).concat(n).concat(u.slice(d.length)),[u].concat(rt(c.slice(1))).join(" ")});return i.join(",")}var vJ=function t(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},n=a.root,i=a.injectHash,l=a.parentSelectors,o=r.hashId,c=r.layer;r.path;var u=r.hashPriority,d=r.transformers,m=d===void 0?[]:d;r.linters;var x="",g={};function p(y){var v=y.getName(o);if(!g[v]){var N=t(y.style,r,{root:!1,parentSelectors:l}),S=Oe(N,1),w=S[0];g[v]="@keyframes ".concat(y.getName(o)).concat(w)}}function f(y){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return y.forEach(function(N){Array.isArray(N)?f(N,v):N&&v.push(N)}),v}var b=f(Array.isArray(s)?s:[s]);return b.forEach(function(y){var v=typeof y=="string"&&!n?{}:y;if(typeof v=="string")x+="".concat(v,`
`);else if(v._keyframe)p(v);else{var N=m.reduce(function(S,w){var C;return(w==null||(C=w.visit)===null||C===void 0?void 0:C.call(w,S))||S},v);Object.keys(N).forEach(function(S){var w=N[S];if(At(w)==="object"&&w&&(S!=="animationName"||!w._keyframe)&&!yJ(w)){var C=!1,j=S.trim(),k=!1;(n||i)&&o?j.startsWith("@")?C=!0:j==="&"?j=jN("",o,u):j=jN(S,o,u):n&&!o&&(j==="&"||j==="")&&(j="",k=!0);var E=t(w,r,{root:k,injectHash:C,parentSelectors:[].concat(rt(l),[j])}),R=Oe(E,2),D=R[0],P=R[1];g=pe(pe({},g),P),x+="".concat(j).concat(D)}else{let F=function(L,I){var V=L.replace(/[A-Z]/g,function(G){return"-".concat(G.toLowerCase())}),_=I;!JX[L]&&typeof _=="number"&&_!==0&&(_="".concat(_,"px")),L==="animationName"&&I!==null&&I!==void 0&&I._keyframe&&(p(I),_=I.getName(o)),x+="".concat(V,":").concat(_,";")};var T,B=(T=w==null?void 0:w.value)!==null&&T!==void 0?T:w;At(w)==="object"&&w!==null&&w!==void 0&&w[g6]&&Array.isArray(B)?B.forEach(function(L){F(S,L)}):F(S,B)}})}}),n?c&&(x&&(x="@layer ".concat(c.name," {").concat(x,"}")),c.dependencies&&(g["@layer ".concat(c.name)]=c.dependencies.map(function(y){return"@layer ".concat(y,", ").concat(c.name,";")}).join(`
`))):x="{".concat(x,"}"),[x,g]};function p6(t,s){return wu("".concat(t.join("%")).concat(s))}function jJ(){return null}var b6="style";function wp(t,s){var r=t.token,a=t.path,n=t.hashId,i=t.layer,l=t.nonce,o=t.clientOnly,c=t.order,u=c===void 0?0:c,d=h.useContext(rm),m=d.autoClear;d.mock;var x=d.defaultCache,g=d.hashPriority,p=d.container,f=d.ssrInline,b=d.transformers,y=d.linters,v=d.cache,N=d.layer,S=r._tokenKey,w=[S];N&&w.push("layer"),w.push.apply(w,rt(a));var C=yp,j=sv(b6,w,function(){var P=w.join("|");if(gJ(P)){var T=pJ(P),B=Oe(T,2),F=B[0],L=B[1];if(F)return[F,S,L,{},o,u]}var I=s(),V=vJ(I,{hashId:n,hashPriority:g,layer:N?i:void 0,path:a.join("-"),transformers:b,linters:y}),_=Oe(V,2),G=_[0],U=_[1],A=S0(G),q=p6(w,A);return[A,S,q,U,o,u]},function(P,T){var B=Oe(P,3),F=B[2];(T||m)&&yp&&Nu(F,{mark:Mn,attachTo:p})},function(P){var T=Oe(P,4),B=T[0];T[1];var F=T[2],L=T[3];if(C&&B!==h6){var I={mark:Mn,prepend:N?!1:"queue",attachTo:p,priority:u},V=typeof l=="function"?l():l;V&&(I.csp={nonce:V});var _=[],G=[];Object.keys(L).forEach(function(A){A.startsWith("@layer")?_.push(A):G.push(A)}),_.forEach(function(A){Oi(S0(L[A]),"_layer-".concat(A),pe(pe({},I),{},{prepend:!0}))});var U=Oi(B,F,I);U[xl]=v.instanceId,U.setAttribute(Pc,S),G.forEach(function(A){Oi(S0(L[A]),"_effect-".concat(A),I)})}}),k=Oe(j,3),E=k[0],R=k[1],D=k[2];return function(P){var T;return!f||C||!x?T=h.createElement(jJ,null):T=h.createElement("style",Gt({},de(de({},Pc,R),Mn,D),{dangerouslySetInnerHTML:{__html:E}})),h.createElement(h.Fragment,null,T,P)}}var wJ=function(s,r,a){var n=Oe(s,6),i=n[0],l=n[1],o=n[2],c=n[3],u=n[4],d=n[5],m=a||{},x=m.plain;if(u)return null;var g=i,p={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)};return g=nx(i,l,o,p,x),c&&Object.keys(c).forEach(function(f){if(!r[f]){r[f]=!0;var b=S0(c[f]),y=nx(b,l,"_effect-".concat(f),p,x);f.startsWith("@layer")?g=y+g:g+=y}}),[d,o,g]},y6="cssVar",NJ=function(s,r){var a=s.key,n=s.prefix,i=s.unitless,l=s.ignore,o=s.token,c=s.scope,u=c===void 0?"":c,d=h.useContext(rm),m=d.cache.instanceId,x=d.container,g=o._tokenKey,p=[].concat(rt(s.path),[a,u,g]),f=sv(y6,p,function(){var b=r(),y=i6(b,a,{prefix:n,unitless:i,ignore:l,scope:u}),v=Oe(y,2),N=v[0],S=v[1],w=p6(p,S);return[N,S,w,a]},function(b){var y=Oe(b,3),v=y[2];yp&&Nu(v,{mark:Mn,attachTo:x})},function(b){var y=Oe(b,3),v=y[1],N=y[2];if(v){var S=Oi(v,N,{mark:Mn,prepend:"queue",attachTo:x,priority:-999});S[xl]=m,S.setAttribute(Pc,a)}});return f},SJ=function(s,r,a){var n=Oe(s,4),i=n[1],l=n[2],o=n[3],c=a||{},u=c.plain;if(!i)return null;var d=-999,m={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},x=nx(i,o,l,m,u);return[d,l,x]};de(de(de({},b6,wJ),l6,XX),y6,SJ);var Ts=function(){function t(s,r){Rr(this,t),de(this,"name",void 0),de(this,"style",void 0),de(this,"_keyframe",!0),this.name=s,this.style=r}return Fr(t,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),t}();function Vo(t){return t.notSplit=!0,t}Vo(["borderTop","borderBottom"]),Vo(["borderTop"]),Vo(["borderBottom"]),Vo(["borderLeft","borderRight"]),Vo(["borderLeft"]),Vo(["borderRight"]);var nv=h.createContext({});function CJ(t){return e6(t)||X5(t)||Fb(t)||t6()}function li(t,s){for(var r=t,a=0;a<s.length;a+=1){if(r==null)return;r=r[s[a]]}return r}function v6(t,s,r,a){if(!s.length)return r;var n=CJ(s),i=n[0],l=n.slice(1),o;return!t&&typeof i=="number"?o=[]:Array.isArray(t)?o=rt(t):o=pe({},t),a&&r===void 0&&l.length===1?delete o[i][l[0]]:o[i]=v6(o[i],l,r,a),o}function _n(t,s,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return s.length&&a&&r===void 0&&!li(t,s.slice(0,-1))?t:v6(t,s,r,a)}function kJ(t){return At(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function wN(t){return Array.isArray(t)?[]:{}}var EJ=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function sc(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];var a=wN(s[0]);return s.forEach(function(n){function i(l,o){var c=new Set(o),u=li(n,l),d=Array.isArray(u);if(d||kJ(u)){if(!c.has(u)){c.add(u);var m=li(a,l);d?a=_n(a,l,[]):(!m||At(m)!=="object")&&(a=_n(a,l,wN(u))),EJ(u).forEach(function(x){i([].concat(rt(l),[x]),c)})}}else a=_n(a,l,u)}i([])}),a}function PJ(){}const TJ=h.createContext({}),iv=()=>{const t=()=>{};return t.deprecated=PJ,t},_J=h.createContext(void 0),Va="${label} is not a valid ${type}",Nh={Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Va,method:Va,array:Va,object:Va,number:Va,date:Va,boolean:Va,integer:Va,float:Va,regexp:Va,email:Va,url:Va,hex:Va},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}}};Object.assign({},Nh.Modal);let C0=[];const NN=()=>C0.reduce((t,s)=>Object.assign(Object.assign({},t),s),Nh.Modal);function AJ(t){if(t){const s=Object.assign({},t);return C0.push(s),NN(),()=>{C0=C0.filter(r=>r!==s),NN()}}Object.assign({},Nh.Modal)}const j6=h.createContext(void 0),RJ="internalMark",FJ=t=>{const{locale:s={},children:r,_ANT_MARK__:a}=t;h.useEffect(()=>AJ(s==null?void 0:s.Modal),[s]);const n=h.useMemo(()=>Object.assign(Object.assign({},s),{exist:!0}),[s]);return h.createElement(j6.Provider,{value:n},r)},w6={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ku=Object.assign(Object.assign({},w6),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Mr=Math.round;function Wf(t,s){const r=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],a=r.map(n=>parseFloat(n));for(let n=0;n<3;n+=1)a[n]=s(a[n]||0,r[n]||"",n);return r[3]?a[3]=r[3].includes("%")?a[3]/100:a[3]:a[3]=1,a}const SN=(t,s,r)=>r===0?t:t/100;function pd(t,s){const r=s||255;return t>r?r:t<0?0:t}class Ws{constructor(s){de(this,"isValid",!0),de(this,"r",0),de(this,"g",0),de(this,"b",0),de(this,"a",1),de(this,"_h",void 0),de(this,"_s",void 0),de(this,"_l",void 0),de(this,"_v",void 0),de(this,"_max",void 0),de(this,"_min",void 0),de(this,"_brightness",void 0);function r(a){return a[0]in s&&a[1]in s&&a[2]in s}if(s)if(typeof s=="string"){let n=function(i){return a.startsWith(i)};const a=s.trim();/^#?[A-F\d]{3,8}$/i.test(a)?this.fromHexString(a):n("rgb")?this.fromRgbString(a):n("hsl")?this.fromHslString(a):(n("hsv")||n("hsb"))&&this.fromHsvString(a)}else if(s instanceof Ws)this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this._h=s._h,this._s=s._s,this._l=s._l,this._v=s._v;else if(r("rgb"))this.r=pd(s.r),this.g=pd(s.g),this.b=pd(s.b),this.a=typeof s.a=="number"?pd(s.a,1):1;else if(r("hsl"))this.fromHsl(s);else if(r("hsv"))this.fromHsv(s);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(s))}setR(s){return this._sc("r",s)}setG(s){return this._sc("g",s)}setB(s){return this._sc("b",s)}setA(s){return this._sc("a",s,1)}setHue(s){const r=this.toHsv();return r.h=s,this._c(r)}getLuminance(){function s(i){const l=i/255;return l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}const r=s(this.r),a=s(this.g),n=s(this.b);return .2126*r+.7152*a+.0722*n}getHue(){if(typeof this._h>"u"){const s=this.getMax()-this.getMin();s===0?this._h=0:this._h=Mr(60*(this.r===this.getMax()?(this.g-this.b)/s+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/s+2:(this.r-this.g)/s+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const s=this.getMax()-this.getMin();s===0?this._s=0:this._s=s/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(s=10){const r=this.getHue(),a=this.getSaturation();let n=this.getLightness()-s/100;return n<0&&(n=0),this._c({h:r,s:a,l:n,a:this.a})}lighten(s=10){const r=this.getHue(),a=this.getSaturation();let n=this.getLightness()+s/100;return n>1&&(n=1),this._c({h:r,s:a,l:n,a:this.a})}mix(s,r=50){const a=this._c(s),n=r/100,i=o=>(a[o]-this[o])*n+this[o],l={r:Mr(i("r")),g:Mr(i("g")),b:Mr(i("b")),a:Mr(i("a")*100)/100};return this._c(l)}tint(s=10){return this.mix({r:255,g:255,b:255,a:1},s)}shade(s=10){return this.mix({r:0,g:0,b:0,a:1},s)}onBackground(s){const r=this._c(s),a=this.a+r.a*(1-this.a),n=i=>Mr((this[i]*this.a+r[i]*r.a*(1-this.a))/a);return this._c({r:n("r"),g:n("g"),b:n("b"),a})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(s){return this.r===s.r&&this.g===s.g&&this.b===s.b&&this.a===s.a}clone(){return this._c(this)}toHexString(){let s="#";const r=(this.r||0).toString(16);s+=r.length===2?r:"0"+r;const a=(this.g||0).toString(16);s+=a.length===2?a:"0"+a;const n=(this.b||0).toString(16);if(s+=n.length===2?n:"0"+n,typeof this.a=="number"&&this.a>=0&&this.a<1){const i=Mr(this.a*255).toString(16);s+=i.length===2?i:"0"+i}return s}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const s=this.getHue(),r=Mr(this.getSaturation()*100),a=Mr(this.getLightness()*100);return this.a!==1?`hsla(${s},${r}%,${a}%,${this.a})`:`hsl(${s},${r}%,${a}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(s,r,a){const n=this.clone();return n[s]=pd(r,a),n}_c(s){return new this.constructor(s)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(s){const r=s.replace("#","");function a(n,i){return parseInt(r[n]+r[i||n],16)}r.length<6?(this.r=a(0),this.g=a(1),this.b=a(2),this.a=r[3]?a(3)/255:1):(this.r=a(0,1),this.g=a(2,3),this.b=a(4,5),this.a=r[6]?a(6,7)/255:1)}fromHsl({h:s,s:r,l:a,a:n}){if(this._h=s%360,this._s=r,this._l=a,this.a=typeof n=="number"?n:1,r<=0){const x=Mr(a*255);this.r=x,this.g=x,this.b=x}let i=0,l=0,o=0;const c=s/60,u=(1-Math.abs(2*a-1))*r,d=u*(1-Math.abs(c%2-1));c>=0&&c<1?(i=u,l=d):c>=1&&c<2?(i=d,l=u):c>=2&&c<3?(l=u,o=d):c>=3&&c<4?(l=d,o=u):c>=4&&c<5?(i=d,o=u):c>=5&&c<6&&(i=u,o=d);const m=a-u/2;this.r=Mr((i+m)*255),this.g=Mr((l+m)*255),this.b=Mr((o+m)*255)}fromHsv({h:s,s:r,v:a,a:n}){this._h=s%360,this._s=r,this._v=a,this.a=typeof n=="number"?n:1;const i=Mr(a*255);if(this.r=i,this.g=i,this.b=i,r<=0)return;const l=s/60,o=Math.floor(l),c=l-o,u=Mr(a*(1-r)*255),d=Mr(a*(1-r*c)*255),m=Mr(a*(1-r*(1-c))*255);switch(o){case 0:this.g=m,this.b=u;break;case 1:this.r=d,this.b=u;break;case 2:this.r=u,this.b=m;break;case 3:this.r=u,this.g=d;break;case 4:this.r=m,this.g=u;break;case 5:default:this.g=u,this.b=d;break}}fromHsvString(s){const r=Wf(s,SN);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(s){const r=Wf(s,SN);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(s){const r=Wf(s,(a,n)=>n.includes("%")?Mr(a/100*255):a);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}var Hm=2,CN=.16,DJ=.05,IJ=.05,OJ=.15,N6=5,S6=4,MJ=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function kN(t,s,r){var a;return Math.round(t.h)>=60&&Math.round(t.h)<=240?a=r?Math.round(t.h)-Hm*s:Math.round(t.h)+Hm*s:a=r?Math.round(t.h)+Hm*s:Math.round(t.h)-Hm*s,a<0?a+=360:a>=360&&(a-=360),a}function EN(t,s,r){if(t.h===0&&t.s===0)return t.s;var a;return r?a=t.s-CN*s:s===S6?a=t.s+CN:a=t.s+DJ*s,a>1&&(a=1),r&&s===N6&&a>.1&&(a=.1),a<.06&&(a=.06),Math.round(a*100)/100}function PN(t,s,r){var a;return r?a=t.v+IJ*s:a=t.v-OJ*s,a=Math.max(0,Math.min(1,a)),Math.round(a*100)/100}function Eu(t){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],a=new Ws(t),n=a.toHsv(),i=N6;i>0;i-=1){var l=new Ws({h:kN(n,i,!0),s:EN(n,i,!0),v:PN(n,i,!0)});r.push(l)}r.push(a);for(var o=1;o<=S6;o+=1){var c=new Ws({h:kN(n,o),s:EN(n,o),v:PN(n,o)});r.push(c)}return s.theme==="dark"?MJ.map(function(u){var d=u.index,m=u.amount;return new Ws(s.backgroundColor||"#141414").mix(r[d],m).toHexString()}):r.map(function(u){return u.toHexString()})}var Vf={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Np=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Np.primary=Np[5];var Sp=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Sp.primary=Sp[5];var Cp=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Cp.primary=Cp[5];var kp=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];kp.primary=kp[5];var Ep=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Ep.primary=Ep[5];var Pp=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Pp.primary=Pp[5];var Tp=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Tp.primary=Tp[5];var _p=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];_p.primary=_p[5];var ix=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];ix.primary=ix[5];var Ap=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Ap.primary=Ap[5];var Rp=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Rp.primary=Rp[5];var Fp=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];Fp.primary=Fp[5];var Dp=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Dp.primary=Dp[5];var zf={red:Np,volcano:Sp,orange:Cp,gold:kp,yellow:Ep,lime:Pp,green:Tp,cyan:_p,blue:ix,geekblue:Ap,purple:Rp,magenta:Fp,grey:Dp};function BJ(t,{generateColorPalettes:s,generateNeutralColorPalettes:r}){const{colorSuccess:a,colorWarning:n,colorError:i,colorInfo:l,colorPrimary:o,colorBgBase:c,colorTextBase:u}=t,d=s(o),m=s(a),x=s(n),g=s(i),p=s(l),f=r(c,u),b=t.colorLink||t.colorInfo,y=s(b),v=new Ws(g[1]).mix(new Ws(g[3]),50).toHexString();return Object.assign(Object.assign({},f),{colorPrimaryBg:d[1],colorPrimaryBgHover:d[2],colorPrimaryBorder:d[3],colorPrimaryBorderHover:d[4],colorPrimaryHover:d[5],colorPrimary:d[6],colorPrimaryActive:d[7],colorPrimaryTextHover:d[8],colorPrimaryText:d[9],colorPrimaryTextActive:d[10],colorSuccessBg:m[1],colorSuccessBgHover:m[2],colorSuccessBorder:m[3],colorSuccessBorderHover:m[4],colorSuccessHover:m[4],colorSuccess:m[6],colorSuccessActive:m[7],colorSuccessTextHover:m[8],colorSuccessText:m[9],colorSuccessTextActive:m[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:v,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:x[1],colorWarningBgHover:x[2],colorWarningBorder:x[3],colorWarningBorderHover:x[4],colorWarningHover:x[4],colorWarning:x[6],colorWarningActive:x[7],colorWarningTextHover:x[8],colorWarningText:x[9],colorWarningTextActive:x[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:y[4],colorLink:y[6],colorLinkActive:y[7],colorBgMask:new Ws("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const LJ=t=>{let s=t,r=t,a=t,n=t;return t<6&&t>=5?s=t+1:t<16&&t>=6?s=t+2:t>=16&&(s=16),t<7&&t>=5?r=4:t<8&&t>=7?r=5:t<14&&t>=8?r=6:t<16&&t>=14?r=7:t>=16&&(r=8),t<6&&t>=2?a=1:t>=6&&(a=2),t>4&&t<8?n=4:t>=8&&(n=6),{borderRadius:t,borderRadiusXS:a,borderRadiusSM:r,borderRadiusLG:s,borderRadiusOuter:n}};function $J(t){const{motionUnit:s,motionBase:r,borderRadius:a,lineWidth:n}=t;return Object.assign({motionDurationFast:`${(r+s).toFixed(1)}s`,motionDurationMid:`${(r+s*2).toFixed(1)}s`,motionDurationSlow:`${(r+s*3).toFixed(1)}s`,lineWidthBold:n+1},LJ(a))}const UJ=t=>{const{controlHeight:s}=t;return{controlHeightSM:s*.75,controlHeightXS:s*.5,controlHeightLG:s*1.25}};function k0(t){return(t+8)/t}function HJ(t){const s=Array.from({length:10}).map((r,a)=>{const n=a-1,i=t*Math.pow(Math.E,n/5),l=a>1?Math.floor(i):Math.ceil(i);return Math.floor(l/2)*2});return s[1]=t,s.map(r=>({size:r,lineHeight:k0(r)}))}const WJ=t=>{const s=HJ(t),r=s.map(d=>d.size),a=s.map(d=>d.lineHeight),n=r[1],i=r[0],l=r[2],o=a[1],c=a[0],u=a[2];return{fontSizeSM:i,fontSize:n,fontSizeLG:l,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:o,lineHeightLG:u,lineHeightSM:c,fontHeight:Math.round(o*n),fontHeightLG:Math.round(u*l),fontHeightSM:Math.round(c*i),lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}};function VJ(t){const{sizeUnit:s,sizeStep:r}=t;return{sizeXXL:s*(r+8),sizeXL:s*(r+4),sizeLG:s*(r+2),sizeMD:s*(r+1),sizeMS:s*r,size:s*r,sizeSM:s*(r-1),sizeXS:s*(r-2),sizeXXS:s*(r-3)}}const cn=(t,s)=>new Ws(t).setA(s).toRgbString(),bd=(t,s)=>new Ws(t).darken(s).toHexString(),zJ=t=>{const s=Eu(t);return{1:s[0],2:s[1],3:s[2],4:s[3],5:s[4],6:s[5],7:s[6],8:s[4],9:s[5],10:s[6]}},GJ=(t,s)=>{const r=t||"#fff",a=s||"#000";return{colorBgBase:r,colorTextBase:a,colorText:cn(a,.88),colorTextSecondary:cn(a,.65),colorTextTertiary:cn(a,.45),colorTextQuaternary:cn(a,.25),colorFill:cn(a,.15),colorFillSecondary:cn(a,.06),colorFillTertiary:cn(a,.04),colorFillQuaternary:cn(a,.02),colorBgSolid:cn(a,1),colorBgSolidHover:cn(a,.75),colorBgSolidActive:cn(a,.95),colorBgLayout:bd(r,4),colorBgContainer:bd(r,0),colorBgElevated:bd(r,0),colorBgSpotlight:cn(a,.85),colorBgBlur:"transparent",colorBorder:bd(r,15),colorBorderSecondary:bd(r,6)}};function qJ(t){Vf.pink=Vf.magenta,zf.pink=zf.magenta;const s=Object.keys(w6).map(r=>{const a=t[r]===Vf[r]?zf[r]:Eu(t[r]);return Array.from({length:10},()=>1).reduce((n,i,l)=>(n[`${r}-${l+1}`]=a[l],n[`${r}${l+1}`]=a[l],n),{})}).reduce((r,a)=>(r=Object.assign(Object.assign({},r),a),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),s),BJ(t,{generateColorPalettes:zJ,generateNeutralColorPalettes:GJ})),WJ(t.fontSize)),VJ(t)),UJ(t)),$J(t))}const C6=bp(qJ),Ip={token:ku,override:{override:ku},hashed:!0},k6=Ke.createContext(Ip),Pu="ant",lv="anticon",YJ=(t,s)=>s||(t?`${Pu}-${t}`:Pu),Vr=h.createContext({getPrefixCls:YJ,iconPrefixCls:lv}),{Consumer:ble}=Vr,TN={};function ov(t){const s=h.useContext(Vr),{getPrefixCls:r,direction:a,getPopupContainer:n}=s,i=s[t];return Object.assign(Object.assign({classNames:TN,styles:TN},i),{getPrefixCls:r,direction:a,getPopupContainer:n})}const KJ=`-ant-${Date.now()}-${Math.random()}`;function XJ(t,s){const r={},a=(l,o)=>{let c=l.clone();return c=(o==null?void 0:o(c))||c,c.toRgbString()},n=(l,o)=>{const c=new Ws(l),u=Eu(c.toRgbString());r[`${o}-color`]=a(c),r[`${o}-color-disabled`]=u[1],r[`${o}-color-hover`]=u[4],r[`${o}-color-active`]=u[6],r[`${o}-color-outline`]=c.clone().setA(.2).toRgbString(),r[`${o}-color-deprecated-bg`]=u[0],r[`${o}-color-deprecated-border`]=u[2]};if(s.primaryColor){n(s.primaryColor,"primary");const l=new Ws(s.primaryColor),o=Eu(l.toRgbString());o.forEach((u,d)=>{r[`primary-${d+1}`]=u}),r["primary-color-deprecated-l-35"]=a(l,u=>u.lighten(35)),r["primary-color-deprecated-l-20"]=a(l,u=>u.lighten(20)),r["primary-color-deprecated-t-20"]=a(l,u=>u.tint(20)),r["primary-color-deprecated-t-50"]=a(l,u=>u.tint(50)),r["primary-color-deprecated-f-12"]=a(l,u=>u.setA(u.a*.12));const c=new Ws(o[0]);r["primary-color-active-deprecated-f-30"]=a(c,u=>u.setA(u.a*.3)),r["primary-color-active-deprecated-d-02"]=a(c,u=>u.darken(2))}return s.successColor&&n(s.successColor,"success"),s.warningColor&&n(s.warningColor,"warning"),s.errorColor&&n(s.errorColor,"error"),s.infoColor&&n(s.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(l=>`--${t}-${l}: ${r[l]};`).join(`
`)}
  }
  `.trim()}function JJ(t,s){const r=XJ(t,s);sn()&&Oi(r,`${KJ}-dynamic-theme`)}const lx=h.createContext(!1),QJ=({children:t,disabled:s})=>{const r=h.useContext(lx);return h.createElement(lx.Provider,{value:s??r},t)},Ac=h.createContext(void 0),ZJ=({children:t,size:s})=>{const r=h.useContext(Ac);return h.createElement(Ac.Provider,{value:s||r},t)};function eQ(){const t=h.useContext(lx),s=h.useContext(Ac);return{componentDisabled:t,componentSize:s}}var E6=Fr(function t(){Rr(this,t)}),P6="CALC_UNIT",tQ=new RegExp(P6,"g");function Gf(t){return typeof t=="number"?"".concat(t).concat(P6):t}var sQ=function(t){zi(r,t);var s=Gi(r);function r(a,n){var i;Rr(this,r),i=s.call(this),de(Ut(i),"result",""),de(Ut(i),"unitlessCssVar",void 0),de(Ut(i),"lowPriority",void 0);var l=At(a);return i.unitlessCssVar=n,a instanceof r?i.result="(".concat(a.result,")"):l==="number"?i.result=Gf(a):l==="string"&&(i.result=a),i}return Fr(r,[{key:"add",value:function(n){return n instanceof r?this.result="".concat(this.result," + ").concat(n.getResult()):(typeof n=="number"||typeof n=="string")&&(this.result="".concat(this.result," + ").concat(Gf(n))),this.lowPriority=!0,this}},{key:"sub",value:function(n){return n instanceof r?this.result="".concat(this.result," - ").concat(n.getResult()):(typeof n=="number"||typeof n=="string")&&(this.result="".concat(this.result," - ").concat(Gf(n))),this.lowPriority=!0,this}},{key:"mul",value:function(n){return this.lowPriority&&(this.result="(".concat(this.result,")")),n instanceof r?this.result="".concat(this.result," * ").concat(n.getResult(!0)):(typeof n=="number"||typeof n=="string")&&(this.result="".concat(this.result," * ").concat(n)),this.lowPriority=!1,this}},{key:"div",value:function(n){return this.lowPriority&&(this.result="(".concat(this.result,")")),n instanceof r?this.result="".concat(this.result," / ").concat(n.getResult(!0)):(typeof n=="number"||typeof n=="string")&&(this.result="".concat(this.result," / ").concat(n)),this.lowPriority=!1,this}},{key:"getResult",value:function(n){return this.lowPriority||n?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(n){var i=this,l=n||{},o=l.unit,c=!0;return typeof o=="boolean"?c=o:Array.from(this.unitlessCssVar).some(function(u){return i.result.includes(u)})&&(c=!1),this.result=this.result.replace(tQ,c?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),r}(E6),rQ=function(t){zi(r,t);var s=Gi(r);function r(a){var n;return Rr(this,r),n=s.call(this),de(Ut(n),"result",0),a instanceof r?n.result=a.result:typeof a=="number"&&(n.result=a),n}return Fr(r,[{key:"add",value:function(n){return n instanceof r?this.result+=n.result:typeof n=="number"&&(this.result+=n),this}},{key:"sub",value:function(n){return n instanceof r?this.result-=n.result:typeof n=="number"&&(this.result-=n),this}},{key:"mul",value:function(n){return n instanceof r?this.result*=n.result:typeof n=="number"&&(this.result*=n),this}},{key:"div",value:function(n){return n instanceof r?this.result/=n.result:typeof n=="number"&&(this.result/=n),this}},{key:"equal",value:function(){return this.result}}]),r}(E6),aQ=function(s,r){var a=s==="css"?sQ:rQ;return function(n){return new a(n,r)}},_N=function(s,r){return"".concat([r,s.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Zr(t){var s=h.useRef();s.current=t;var r=h.useCallback(function(){for(var a,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=s.current)===null||a===void 0?void 0:a.call.apply(a,[s].concat(i))},[]);return r}function Tu(t){var s=h.useRef(!1),r=h.useState(t),a=Oe(r,2),n=a[0],i=a[1];h.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]);function l(o,c){c&&s.current||i(o)}return[n,l]}function qf(t){return t!==void 0}function ao(t,s){var r=s||{},a=r.defaultValue,n=r.value,i=r.onChange,l=r.postState,o=Tu(function(){return qf(n)?n:qf(a)?typeof a=="function"?a():a:typeof t=="function"?t():t}),c=Oe(o,2),u=c[0],d=c[1],m=n!==void 0?n:u,x=l?l(m):m,g=Zr(i),p=Tu([m]),f=Oe(p,2),b=f[0],y=f[1];gN(function(){var N=b[0];u!==N&&g(u,N)},[b]),gN(function(){qf(n)||d(n)},[n]);var v=Zr(function(N,S){d(N,S),y([m],S)});return[x,v]}function AN(t,s,r,a){var n=pe({},s[t]);if(a!=null&&a.deprecatedTokens){var i=a.deprecatedTokens;i.forEach(function(o){var c=Oe(o,2),u=c[0],d=c[1];if(n!=null&&n[u]||n!=null&&n[d]){var m;(m=n[d])!==null&&m!==void 0||(n[d]=n==null?void 0:n[u])}})}var l=pe(pe({},r),n);return Object.keys(l).forEach(function(o){l[o]===s[o]&&delete l[o]}),l}var T6=typeof CSSINJS_STATISTIC<"u",Op=!0;function Sn(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];if(!T6)return Object.assign.apply(Object,[{}].concat(s));Op=!1;var a={};return s.forEach(function(n){if(At(n)==="object"){var i=Object.keys(n);i.forEach(function(l){Object.defineProperty(a,l,{configurable:!0,enumerable:!0,get:function(){return n[l]}})})}}),Op=!0,a}var RN={};function nQ(){}var iQ=function(s){var r,a=s,n=nQ;return T6&&typeof Proxy<"u"&&(r=new Set,a=new Proxy(s,{get:function(l,o){if(Op){var c;(c=r)===null||c===void 0||c.add(o)}return l[o]}}),n=function(l,o){var c;RN[l]={global:Array.from(r),component:pe(pe({},(c=RN[l])===null||c===void 0?void 0:c.component),o)}}),{token:a,keys:r,flush:n}};function FN(t,s,r){if(typeof r=="function"){var a;return r(Sn(s,(a=s[t])!==null&&a!==void 0?a:{}))}return r??{}}function lQ(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return"max(".concat(a.map(function(i){return It(i)}).join(","),")")},min:function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return"min(".concat(a.map(function(i){return It(i)}).join(","),")")}}}var oQ=1e3*60*10,cQ=function(){function t(){Rr(this,t),de(this,"map",new Map),de(this,"objectIDMap",new WeakMap),de(this,"nextID",0),de(this,"lastAccessBeat",new Map),de(this,"accessBeat",0)}return Fr(t,[{key:"set",value:function(r,a){this.clear();var n=this.getCompositeKey(r);this.map.set(n,a),this.lastAccessBeat.set(n,Date.now())}},{key:"get",value:function(r){var a=this.getCompositeKey(r),n=this.map.get(a);return this.lastAccessBeat.set(a,Date.now()),this.accessBeat+=1,n}},{key:"getCompositeKey",value:function(r){var a=this,n=r.map(function(i){return i&&At(i)==="object"?"obj_".concat(a.getObjectID(i)):"".concat(At(i),"_").concat(i)});return n.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var a=this.nextID;return this.objectIDMap.set(r,a),this.nextID+=1,a}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var a=Date.now();this.lastAccessBeat.forEach(function(n,i){a-n>oQ&&(r.map.delete(i),r.lastAccessBeat.delete(i))}),this.accessBeat=0}}}]),t}(),DN=new cQ;function dQ(t,s){return Ke.useMemo(function(){var r=DN.get(s);if(r)return r;var a=t();return DN.set(s,a),a},s)}var uQ=function(){return{}};function mQ(t){var s=t.useCSP,r=s===void 0?uQ:s,a=t.useToken,n=t.usePrefix,i=t.getResetStyles,l=t.getCommonStyle,o=t.getCompUnitless;function c(x,g,p,f){var b=Array.isArray(x)?x[0]:x;function y(k){return"".concat(String(b)).concat(k.slice(0,1).toUpperCase()).concat(k.slice(1))}var v=(f==null?void 0:f.unitless)||{},N=typeof o=="function"?o(x):{},S=pe(pe({},N),{},de({},y("zIndexPopup"),!0));Object.keys(v).forEach(function(k){S[y(k)]=v[k]});var w=pe(pe({},f),{},{unitless:S,prefixToken:y}),C=d(x,g,p,w),j=u(b,p,w);return function(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k,R=C(k,E),D=Oe(R,2),P=D[1],T=j(E),B=Oe(T,2),F=B[0],L=B[1];return[F,P,L]}}function u(x,g,p){var f=p.unitless,b=p.injectStyle,y=b===void 0?!0:b,v=p.prefixToken,N=p.ignore,S=function(j){var k=j.rootCls,E=j.cssVar,R=E===void 0?{}:E,D=a(),P=D.realToken;return NJ({path:[x],prefix:R.prefix,key:R.key,unitless:f,ignore:N,token:P,scope:k},function(){var T=FN(x,P,g),B=AN(x,P,T,{deprecatedTokens:p==null?void 0:p.deprecatedTokens});return Object.keys(T).forEach(function(F){B[v(F)]=B[F],delete B[F]}),B}),null},w=function(j){var k=a(),E=k.cssVar;return[function(R){return y&&E?Ke.createElement(Ke.Fragment,null,Ke.createElement(S,{rootCls:j,cssVar:E,component:x}),R):R},E==null?void 0:E.key]};return w}function d(x,g,p){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=Array.isArray(x)?x:[x,x],y=Oe(b,1),v=y[0],N=b.join("-"),S=t.layer||{name:"antd"};return function(w){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,j=a(),k=j.theme,E=j.realToken,R=j.hashId,D=j.token,P=j.cssVar,T=n(),B=T.rootPrefixCls,F=T.iconPrefixCls,L=r(),I=P?"css":"js",V=dQ(function(){var Y=new Set;return P&&Object.keys(f.unitless||{}).forEach(function(O){Y.add(v0(O,P.prefix)),Y.add(v0(O,_N(v,P.prefix)))}),aQ(I,Y)},[I,v,P==null?void 0:P.prefix]),_=lQ(I),G=_.max,U=_.min,A={theme:k,token:D,hashId:R,nonce:function(){return L.nonce},clientOnly:f.clientOnly,layer:S,order:f.order||-999};typeof i=="function"&&wp(pe(pe({},A),{},{clientOnly:!1,path:["Shared",B]}),function(){return i(D,{prefix:{rootPrefixCls:B,iconPrefixCls:F},csp:L})});var q=wp(pe(pe({},A),{},{path:[N,w,F]}),function(){if(f.injectStyle===!1)return[];var Y=iQ(D),O=Y.token,W=Y.flush,z=FN(v,E,p),H=".".concat(w),Q=AN(v,E,z,{deprecatedTokens:f.deprecatedTokens});P&&z&&At(z)==="object"&&Object.keys(z).forEach(function(oe){z[oe]="var(".concat(v0(oe,_N(v,P.prefix)),")")});var J=Sn(O,{componentCls:H,prefixCls:w,iconCls:".".concat(F),antCls:".".concat(B),calc:V,max:G,min:U},P?z:Q),ie=g(J,{hashId:R,prefixCls:w,rootPrefixCls:B,iconPrefixCls:F});W(v,Q);var K=typeof l=="function"?l(J,w,C,f.resetFont):null;return[f.resetStyle===!1?null:K,ie]});return[q,R]}}function m(x,g,p){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=d(x,g,p,pe({resetStyle:!1,order:-998},f)),y=function(N){var S=N.prefixCls,w=N.rootCls,C=w===void 0?S:w;return b(S,C),null};return y}return{genStyleHooks:c,genSubStyleComponent:m,genComponentStyleHook:d}}const vo=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],xQ="5.27.4";function Yf(t){return t>=0&&t<=255}function Rd(t,s){const{r,g:a,b:n,a:i}=new Ws(t).toRgb();if(i<1)return t;const{r:l,g:o,b:c}=new Ws(s).toRgb();for(let u=.01;u<=1;u+=.01){const d=Math.round((r-l*(1-u))/u),m=Math.round((a-o*(1-u))/u),x=Math.round((n-c*(1-u))/u);if(Yf(d)&&Yf(m)&&Yf(x))return new Ws({r:d,g:m,b:x,a:Math.round(u*100)/100}).toRgbString()}return new Ws({r,g:a,b:n,a:1}).toRgbString()}var hQ=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};function _6(t){const{override:s}=t,r=hQ(t,["override"]),a=Object.assign({},s);Object.keys(ku).forEach(x=>{delete a[x]});const n=Object.assign(Object.assign({},r),a),i=480,l=576,o=768,c=992,u=1200,d=1600;if(n.motion===!1){const x="0s";n.motionDurationFast=x,n.motionDurationMid=x,n.motionDurationSlow=x}return Object.assign(Object.assign(Object.assign({},n),{colorFillContent:n.colorFillSecondary,colorFillContentHover:n.colorFill,colorFillAlter:n.colorFillQuaternary,colorBgContainerDisabled:n.colorFillTertiary,colorBorderBg:n.colorBgContainer,colorSplit:Rd(n.colorBorderSecondary,n.colorBgContainer),colorTextPlaceholder:n.colorTextQuaternary,colorTextDisabled:n.colorTextQuaternary,colorTextHeading:n.colorText,colorTextLabel:n.colorTextSecondary,colorTextDescription:n.colorTextTertiary,colorTextLightSolid:n.colorWhite,colorHighlight:n.colorError,colorBgTextHover:n.colorFillSecondary,colorBgTextActive:n.colorFill,colorIcon:n.colorTextTertiary,colorIconHover:n.colorText,colorErrorOutline:Rd(n.colorErrorBg,n.colorBgContainer),colorWarningOutline:Rd(n.colorWarningBg,n.colorBgContainer),fontSizeIcon:n.fontSizeSM,lineWidthFocus:n.lineWidth*3,lineWidth:n.lineWidth,controlOutlineWidth:n.lineWidth*2,controlInteractiveSize:n.controlHeight/2,controlItemBgHover:n.colorFillTertiary,controlItemBgActive:n.colorPrimaryBg,controlItemBgActiveHover:n.colorPrimaryBgHover,controlItemBgActiveDisabled:n.colorFill,controlTmpOutline:n.colorFillQuaternary,controlOutline:Rd(n.colorPrimaryBg,n.colorBgContainer),lineType:n.lineType,borderRadius:n.borderRadius,borderRadiusXS:n.borderRadiusXS,borderRadiusSM:n.borderRadiusSM,borderRadiusLG:n.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:n.sizeXXS,paddingXS:n.sizeXS,paddingSM:n.sizeSM,padding:n.size,paddingMD:n.sizeMD,paddingLG:n.sizeLG,paddingXL:n.sizeXL,paddingContentHorizontalLG:n.sizeLG,paddingContentVerticalLG:n.sizeMS,paddingContentHorizontal:n.sizeMS,paddingContentVertical:n.sizeSM,paddingContentHorizontalSM:n.size,paddingContentVerticalSM:n.sizeXS,marginXXS:n.sizeXXS,marginXS:n.sizeXS,marginSM:n.sizeSM,margin:n.size,marginMD:n.sizeMD,marginLG:n.sizeLG,marginXL:n.sizeXL,marginXXL:n.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:i,screenXSMin:i,screenXSMax:l-1,screenSM:l,screenSMMin:l,screenSMMax:o-1,screenMD:o,screenMDMin:o,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:d-1,screenXXL:d,screenXXLMin:d,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ws("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ws("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ws("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var IN=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const A6={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},fQ={motionBase:!0,motionUnit:!0},gQ={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},R6=(t,s,r)=>{const a=r.getDerivativeToken(t),{override:n}=s,i=IN(s,["override"]);let l=Object.assign(Object.assign({},a),{override:n});return l=_6(l),i&&Object.entries(i).forEach(([o,c])=>{const{theme:u}=c,d=IN(c,["theme"]);let m=d;u&&(m=R6(Object.assign(Object.assign({},l),d),{override:d},u)),l[o]=m}),l};function Xi(){const{token:t,hashed:s,theme:r,override:a,cssVar:n}=Ke.useContext(k6),i=`${xQ}-${s||""}`,l=r||C6,[o,c,u]=KX(l,[ku,t],{salt:i,override:a,getComputedToken:R6,formatToken:_6,cssVar:n&&{prefix:n.prefix,key:n.key,unitless:A6,ignore:fQ,preserve:gQ}});return[l,u,s?c:"",o,n]}const pQ={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},cv=(t,s=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:s?"inherit":t.fontFamily}),dv=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),ON=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),bQ=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),yQ=(t,s,r,a)=>{const n=`[class^="${s}"], [class*=" ${s}"]`,i=r?`.${r}`:n,l={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let o={};return a!==!1&&(o={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[i]:Object.assign(Object.assign(Object.assign({},o),l),{[n]:l})}},F6=(t,s)=>({outline:`${It(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:s??1,transition:"outline-offset 0s, outline 0s"}),Mp=(t,s)=>({"&:focus-visible":F6(t,s)}),D6=t=>({[`.${t}`]:Object.assign(Object.assign({},dv()),{[`.${t} .${t}-icon`]:{display:"block"}})}),{genStyleHooks:am,genComponentStyleHook:vQ,genSubStyleComponent:jQ}=mQ({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:s}=h.useContext(Vr);return{rootPrefixCls:t(),iconPrefixCls:s}},useToken:()=>{const[t,s,r,a,n]=Xi();return{theme:t,realToken:s,hashId:r,token:a,cssVar:n}},useCSP:()=>{const{csp:t}=h.useContext(Vr);return t??{}},getResetStyles:(t,s)=>{var r;const a=bQ(t);return[a,{"&":a},D6((r=s==null?void 0:s.prefix.iconPrefixCls)!==null&&r!==void 0?r:lv)]},getCommonStyle:yQ,getCompUnitless:()=>A6});function wQ(t,s){return vo.reduce((r,a)=>{const n=t[`${a}1`],i=t[`${a}3`],l=t[`${a}6`],o=t[`${a}7`];return Object.assign(Object.assign({},r),s(a,{lightColor:n,lightBorderColor:i,darkColor:l,textColor:o}))},{})}const NQ=(t,s)=>{const[r,a]=Xi();return wp({token:a,hashId:"",path:["ant-design-icons",t],nonce:()=>s==null?void 0:s.nonce,layer:{name:"antd"}},()=>D6(t))},SQ=Object.assign({},Mc),{useId:MN}=SQ,CQ=()=>"",kQ=typeof MN>"u"?CQ:MN;function EQ(t,s,r){var a;iv();const n=t||{},i=n.inherit===!1||!s?Object.assign(Object.assign({},Ip),{hashed:(a=s==null?void 0:s.hashed)!==null&&a!==void 0?a:Ip.hashed,cssVar:s==null?void 0:s.cssVar}):s,l=kQ();return bh(()=>{var o,c;if(!t)return s;const u=Object.assign({},i.components);Object.keys(t.components||{}).forEach(x=>{u[x]=Object.assign(Object.assign({},u[x]),t.components[x])});const d=`css-var-${l.replace(/:/g,"")}`,m=((o=n.cssVar)!==null&&o!==void 0?o:i.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof i.cssVar=="object"?i.cssVar:{}),typeof n.cssVar=="object"?n.cssVar:{}),{key:typeof n.cssVar=="object"&&((c=n.cssVar)===null||c===void 0?void 0:c.key)||d});return Object.assign(Object.assign(Object.assign({},i),n),{token:Object.assign(Object.assign({},i.token),n.token),components:u,cssVar:m})},[n,i],(o,c)=>o.some((u,d)=>{const m=c[d];return!Su(u,m,!0)}))}var PQ=["children"],I6=h.createContext({});function TQ(t){var s=t.children,r=js(t,PQ);return h.createElement(I6.Provider,{value:r},s)}var _Q=function(t){zi(r,t);var s=Gi(r);function r(){return Rr(this,r),s.apply(this,arguments)}return Fr(r,[{key:"render",value:function(){return this.props.children}}]),r}(h.Component);function AQ(t){var s=h.useReducer(function(o){return o+1},0),r=Oe(s,2),a=r[1],n=h.useRef(t),i=Zr(function(){return n.current}),l=Zr(function(o){n.current=typeof o=="function"?o(n.current):o,a()});return[i,l]}var il="none",Wm="appear",Vm="enter",zm="leave",BN="none",An="prepare",rc="start",ac="active",uv="end",O6="prepared";function LN(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit".concat(t)]="webkit".concat(s),r["Moz".concat(t)]="moz".concat(s),r["ms".concat(t)]="MS".concat(s),r["O".concat(t)]="o".concat(s.toLowerCase()),r}function RQ(t,s){var r={animationend:LN("Animation","AnimationEnd"),transitionend:LN("Transition","TransitionEnd")};return t&&("AnimationEvent"in s||delete r.animationend.animation,"TransitionEvent"in s||delete r.transitionend.transition),r}var FQ=RQ(sn(),typeof window<"u"?window:{}),M6={};if(sn()){var DQ=document.createElement("div");M6=DQ.style}var Gm={};function B6(t){if(Gm[t])return Gm[t];var s=FQ[t];if(s)for(var r=Object.keys(s),a=r.length,n=0;n<a;n+=1){var i=r[n];if(Object.prototype.hasOwnProperty.call(s,i)&&i in M6)return Gm[t]=s[i],Gm[t]}return""}var L6=B6("animationend"),$6=B6("transitionend"),U6=!!(L6&&$6),$N=L6||"animationend",UN=$6||"transitionend";function HN(t,s){if(!t)return null;if(At(t)==="object"){var r=s.replace(/-\w/g,function(a){return a[1].toUpperCase()});return t[r]}return"".concat(t,"-").concat(s)}const IQ=function(t){var s=h.useRef();function r(n){n&&(n.removeEventListener(UN,t),n.removeEventListener($N,t))}function a(n){s.current&&s.current!==n&&r(s.current),n&&n!==s.current&&(n.addEventListener(UN,t),n.addEventListener($N,t),s.current=n)}return h.useEffect(function(){return function(){r(s.current)}},[]),[a,r]};var H6=sn()?h.useLayoutEffect:h.useEffect;const OQ=function(){var t=h.useRef(null);function s(){La.cancel(t.current)}function r(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;s();var i=La(function(){n<=1?a({isCanceled:function(){return i!==t.current}}):r(a,n-1)});t.current=i}return h.useEffect(function(){return function(){s()}},[]),[r,s]};var MQ=[An,rc,ac,uv],BQ=[An,O6],W6=!1,LQ=!0;function V6(t){return t===ac||t===uv}const $Q=function(t,s,r){var a=Tu(BN),n=Oe(a,2),i=n[0],l=n[1],o=OQ(),c=Oe(o,2),u=c[0],d=c[1];function m(){l(An,!0)}var x=s?BQ:MQ;return H6(function(){if(i!==BN&&i!==uv){var g=x.indexOf(i),p=x[g+1],f=r(i);f===W6?l(p,!0):p&&u(function(b){function y(){b.isCanceled()||l(p,!0)}f===!0?y():Promise.resolve(f).then(y)})}},[t,i]),h.useEffect(function(){return function(){d()}},[]),[m,i]};function UQ(t,s,r,a){var n=a.motionEnter,i=n===void 0?!0:n,l=a.motionAppear,o=l===void 0?!0:l,c=a.motionLeave,u=c===void 0?!0:c,d=a.motionDeadline,m=a.motionLeaveImmediately,x=a.onAppearPrepare,g=a.onEnterPrepare,p=a.onLeavePrepare,f=a.onAppearStart,b=a.onEnterStart,y=a.onLeaveStart,v=a.onAppearActive,N=a.onEnterActive,S=a.onLeaveActive,w=a.onAppearEnd,C=a.onEnterEnd,j=a.onLeaveEnd,k=a.onVisibleChanged,E=Tu(),R=Oe(E,2),D=R[0],P=R[1],T=AQ(il),B=Oe(T,2),F=B[0],L=B[1],I=Tu(null),V=Oe(I,2),_=V[0],G=V[1],U=F(),A=h.useRef(!1),q=h.useRef(null);function Y(){return r()}var O=h.useRef(!1);function W(){L(il),G(null,!0)}var z=Zr(function(ce){var Ce=F();if(Ce!==il){var ze=Y();if(!(ce&&!ce.deadline&&ce.target!==ze)){var De=O.current,st;Ce===Wm&&De?st=w==null?void 0:w(ze,ce):Ce===Vm&&De?st=C==null?void 0:C(ze,ce):Ce===zm&&De&&(st=j==null?void 0:j(ze,ce)),De&&st!==!1&&W()}}}),H=IQ(z),Q=Oe(H,1),J=Q[0],ie=function(Ce){switch(Ce){case Wm:return de(de(de({},An,x),rc,f),ac,v);case Vm:return de(de(de({},An,g),rc,b),ac,N);case zm:return de(de(de({},An,p),rc,y),ac,S);default:return{}}},K=h.useMemo(function(){return ie(U)},[U]),oe=$Q(U,!t,function(ce){if(ce===An){var Ce=K[An];return Ce?Ce(Y()):W6}if(Ee in K){var ze;G(((ze=K[Ee])===null||ze===void 0?void 0:ze.call(K,Y(),null))||null)}return Ee===ac&&U!==il&&(J(Y()),d>0&&(clearTimeout(q.current),q.current=setTimeout(function(){z({deadline:!0})},d))),Ee===O6&&W(),LQ}),le=Oe(oe,2),Se=le[0],Ee=le[1],ye=V6(Ee);O.current=ye;var We=h.useRef(null);H6(function(){if(!(A.current&&We.current===s)){P(s);var ce=A.current;A.current=!0;var Ce;!ce&&s&&o&&(Ce=Wm),ce&&s&&i&&(Ce=Vm),(ce&&!s&&u||!ce&&m&&!s&&u)&&(Ce=zm);var ze=ie(Ce);Ce&&(t||ze[An])?(L(Ce),Se()):L(il),We.current=s}},[s]),h.useEffect(function(){(U===Wm&&!o||U===Vm&&!i||U===zm&&!u)&&L(il)},[o,i,u]),h.useEffect(function(){return function(){A.current=!1,clearTimeout(q.current)}},[]);var fe=h.useRef(!1);h.useEffect(function(){D&&(fe.current=!0),D!==void 0&&U===il&&((fe.current||D)&&(k==null||k(D)),fe.current=!0)},[D,U]);var Fe=_;return K[An]&&Ee===rc&&(Fe=pe({transition:"none"},Fe)),[U,Ee,Fe,D??s]}function HQ(t){var s=t;At(t)==="object"&&(s=t.transitionSupport);function r(n,i){return!!(n.motionName&&s&&i!==!1)}var a=h.forwardRef(function(n,i){var l=n.visible,o=l===void 0?!0:l,c=n.removeOnLeave,u=c===void 0?!0:c,d=n.forceRender,m=n.children,x=n.motionName,g=n.leavedClassName,p=n.eventProps,f=h.useContext(I6),b=f.motion,y=r(n,b),v=h.useRef(),N=h.useRef();function S(){try{return v.current instanceof HTMLElement?v.current:y0(N.current)}catch{return null}}var w=UQ(y,o,S,n),C=Oe(w,4),j=C[0],k=C[1],E=C[2],R=C[3],D=h.useRef(R);R&&(D.current=!0);var P=h.useCallback(function(V){v.current=V,Jy(i,V)},[i]),T,B=pe(pe({},p),{},{visible:o});if(!m)T=null;else if(j===il)R?T=m(pe({},B),P):!u&&D.current&&g?T=m(pe(pe({},B),{},{className:g}),P):d||!u&&!g?T=m(pe(pe({},B),{},{style:{display:"none"}}),P):T=null;else{var F;k===An?F="prepare":V6(k)?F="active":k===rc&&(F="start");var L=HN(x,"".concat(j,"-").concat(F));T=m(pe(pe({},B),{},{className:dt(HN(x,j),de(de({},L,L&&F),x,typeof x=="string")),style:E}),P)}if(h.isValidElement(T)&&Ol(T)){var I=To(T);I||(T=h.cloneElement(T,{ref:P}))}return h.createElement(_Q,{ref:N},T)});return a.displayName="CSSMotion",a}const td=HQ(U6);var Bp="add",Lp="keep",$p="remove",Kf="removed";function WQ(t){var s;return t&&At(t)==="object"&&"key"in t?s=t:s={key:t},pe(pe({},s),{},{key:String(s.key)})}function Up(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(WQ)}function VQ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],a=0,n=s.length,i=Up(t),l=Up(s);i.forEach(function(u){for(var d=!1,m=a;m<n;m+=1){var x=l[m];if(x.key===u.key){a<m&&(r=r.concat(l.slice(a,m).map(function(g){return pe(pe({},g),{},{status:Bp})})),a=m),r.push(pe(pe({},x),{},{status:Lp})),a+=1,d=!0;break}}d||r.push(pe(pe({},u),{},{status:$p}))}),a<n&&(r=r.concat(l.slice(a).map(function(u){return pe(pe({},u),{},{status:Bp})})));var o={};r.forEach(function(u){var d=u.key;o[d]=(o[d]||0)+1});var c=Object.keys(o).filter(function(u){return o[u]>1});return c.forEach(function(u){r=r.filter(function(d){var m=d.key,x=d.status;return m!==u||x!==$p}),r.forEach(function(d){d.key===u&&(d.status=Lp)})}),r}var zQ=["component","children","onVisibleChanged","onAllRemoved"],GQ=["status"],qQ=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function YQ(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:td,r=function(a){zi(i,a);var n=Gi(i);function i(){var l;Rr(this,i);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return l=n.call.apply(n,[this].concat(c)),de(Ut(l),"state",{keyEntities:[]}),de(Ut(l),"removeKey",function(d){l.setState(function(m){var x=m.keyEntities.map(function(g){return g.key!==d?g:pe(pe({},g),{},{status:Kf})});return{keyEntities:x}},function(){var m=l.state.keyEntities,x=m.filter(function(g){var p=g.status;return p!==Kf}).length;x===0&&l.props.onAllRemoved&&l.props.onAllRemoved()})}),l}return Fr(i,[{key:"render",value:function(){var o=this,c=this.state.keyEntities,u=this.props,d=u.component,m=u.children,x=u.onVisibleChanged;u.onAllRemoved;var g=js(u,zQ),p=d||h.Fragment,f={};return qQ.forEach(function(b){f[b]=g[b],delete g[b]}),delete g.keys,h.createElement(p,g,c.map(function(b,y){var v=b.status,N=js(b,GQ),S=v===Bp||v===Lp;return h.createElement(s,Gt({},f,{key:N.key,visible:S,eventProps:N,onVisibleChanged:function(C){x==null||x(C,{key:N.key}),C||o.removeKey(N.key)}}),function(w,C){return m(pe(pe({},w),{},{index:y}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(o,c){var u=o.keys,d=c.keyEntities,m=Up(u),x=VQ(d,m);return{keyEntities:x.filter(function(g){var p=d.find(function(f){var b=f.key;return g.key===b});return!(p&&p.status===Kf&&g.status===$p)})}}}]),i}(h.Component);return de(r,"defaultProps",{component:"div"}),r}YQ(U6);const WN=h.createContext(!0);function KQ(t){const s=h.useContext(WN),{children:r}=t,[,a]=Xi(),{motion:n}=a,i=h.useRef(!1);return i.current||(i.current=s!==n),i.current?h.createElement(WN.Provider,{value:n},h.createElement(TQ,{motion:n},r)):r}const XQ=()=>null;var JQ=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const QQ=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let z6;function ZQ(){return z6||Pu}function eZ(t){return Object.keys(t).some(s=>s.endsWith("Color"))}const tZ=t=>{const{prefixCls:s,iconPrefixCls:r,theme:a,holderRender:n}=t;s!==void 0&&(z6=s),a&&eZ(a)&&JJ(ZQ(),a)},sZ=t=>{const{children:s,csp:r,autoInsertSpaceInButton:a,alert:n,anchor:i,form:l,locale:o,componentSize:c,direction:u,space:d,splitter:m,virtual:x,dropdownMatchSelectWidth:g,popupMatchSelectWidth:p,popupOverflow:f,legacyLocale:b,parentContext:y,iconPrefixCls:v,theme:N,componentDisabled:S,segmented:w,statistic:C,spin:j,calendar:k,carousel:E,cascader:R,collapse:D,typography:P,checkbox:T,descriptions:B,divider:F,drawer:L,skeleton:I,steps:V,image:_,layout:G,list:U,mentions:A,modal:q,progress:Y,result:O,slider:W,breadcrumb:z,menu:H,pagination:Q,input:J,textArea:ie,empty:K,badge:oe,radio:le,rate:Se,switch:Ee,transfer:ye,avatar:We,message:fe,tag:Fe,table:ce,card:Ce,tabs:ze,timeline:De,timePicker:st,upload:Xe,notification:it,tree:ft,colorPicker:be,datePicker:Pe,rangePicker:ee,flex:me,wave:Te,dropdown:qe,warning:gt,tour:Nt,tooltip:mt,popover:Wt,popconfirm:Le,floatButton:cs,floatButtonGroup:Gs,variant:Gr,inputNumber:Xs,treeSelect:_s}=t,ds=h.useCallback((se,Z)=>{const{prefixCls:te}=t;if(Z)return Z;const re=te||y.getPrefixCls("");return se?`${re}-${se}`:re},[y.getPrefixCls,t.prefixCls]),St=v||y.iconPrefixCls||lv,at=r||y.csp;NQ(St,at);const pt=EQ(N,y.theme,{prefixCls:ds("")}),tt={csp:at,autoInsertSpaceInButton:a,alert:n,anchor:i,locale:o||b,direction:u,space:d,splitter:m,virtual:x,popupMatchSelectWidth:p??g,popupOverflow:f,getPrefixCls:ds,iconPrefixCls:St,theme:pt,segmented:w,statistic:C,spin:j,calendar:k,carousel:E,cascader:R,collapse:D,typography:P,checkbox:T,descriptions:B,divider:F,drawer:L,skeleton:I,steps:V,image:_,input:J,textArea:ie,layout:G,list:U,mentions:A,modal:q,progress:Y,result:O,slider:W,breadcrumb:z,menu:H,pagination:Q,empty:K,badge:oe,radio:le,rate:Se,switch:Ee,transfer:ye,avatar:We,message:fe,tag:Fe,table:ce,card:Ce,tabs:ze,timeline:De,timePicker:st,upload:Xe,notification:it,tree:ft,colorPicker:be,datePicker:Pe,rangePicker:ee,flex:me,wave:Te,dropdown:qe,warning:gt,tour:Nt,tooltip:mt,popover:Wt,popconfirm:Le,floatButton:cs,floatButtonGroup:Gs,variant:Gr,inputNumber:Xs,treeSelect:_s},Pt=Object.assign({},y);Object.keys(tt).forEach(se=>{tt[se]!==void 0&&(Pt[se]=tt[se])}),QQ.forEach(se=>{const Z=t[se];Z&&(Pt[se]=Z)}),typeof a<"u"&&(Pt.button=Object.assign({autoInsertSpace:a},Pt.button));const Ns=bh(()=>Pt,Pt,(se,Z)=>{const te=Object.keys(se),re=Object.keys(Z);return te.length!==re.length||te.some(ne=>se[ne]!==Z[ne])}),{layer:qr}=h.useContext(rm),Dr=h.useMemo(()=>({prefixCls:St,csp:at,layer:qr?"antd":void 0}),[St,at,qr]);let Ds=h.createElement(h.Fragment,null,h.createElement(XQ,{dropdownMatchSelectWidth:g}),s);const an=h.useMemo(()=>{var se,Z,te,re;return sc(((se=Nh.Form)===null||se===void 0?void 0:se.defaultValidateMessages)||{},((te=(Z=Ns.locale)===null||Z===void 0?void 0:Z.Form)===null||te===void 0?void 0:te.defaultValidateMessages)||{},((re=Ns.form)===null||re===void 0?void 0:re.validateMessages)||{},(l==null?void 0:l.validateMessages)||{})},[Ns,l==null?void 0:l.validateMessages]);Object.keys(an).length>0&&(Ds=h.createElement(_J.Provider,{value:an},Ds)),o&&(Ds=h.createElement(FJ,{locale:o,_ANT_MARK__:RJ},Ds)),Ds=h.createElement(nv.Provider,{value:Dr},Ds),c&&(Ds=h.createElement(ZJ,{size:c},Ds)),Ds=h.createElement(KQ,null,Ds);const X=h.useMemo(()=>{const se=pt||{},{algorithm:Z,token:te,components:re,cssVar:ne}=se,he=JQ(se,["algorithm","token","components","cssVar"]),je=Z&&(!Array.isArray(Z)||Z.length>0)?bp(Z):C6,ue={};Object.entries(re||{}).forEach(([ge,Re])=>{const Ae=Object.assign({},Re);"algorithm"in Ae&&(Ae.algorithm===!0?Ae.theme=je:(Array.isArray(Ae.algorithm)||typeof Ae.algorithm=="function")&&(Ae.theme=bp(Ae.algorithm)),delete Ae.algorithm),ue[ge]=Ae});const xe=Object.assign(Object.assign({},ku),te);return Object.assign(Object.assign({},he),{theme:je,token:xe,components:ue,override:Object.assign({override:xe},ue),cssVar:ne})},[pt]);return N&&(Ds=h.createElement(k6.Provider,{value:X},Ds)),Ns.warning&&(Ds=h.createElement(TJ.Provider,{value:Ns.warning},Ds)),S!==void 0&&(Ds=h.createElement(QJ,{disabled:S},Ds)),h.createElement(Vr.Provider,{value:Ns},Ds)},sd=t=>{const s=h.useContext(Vr),r=h.useContext(j6);return h.createElement(sZ,Object.assign({parentContext:s,legacyLocale:r},t))};sd.ConfigContext=Vr;sd.SizeContext=Ac;sd.config=tZ;sd.useConfig=eQ;Object.defineProperty(sd,"SizeContext",{get:()=>Ac});function G6(t){var s;return t==null||(s=t.getRootNode)===null||s===void 0?void 0:s.call(t)}function rZ(t){return G6(t)instanceof ShadowRoot}function ox(t){return rZ(t)?G6(t):null}function aZ(t){return t.replace(/-(.)/g,function(s,r){return r.toUpperCase()})}function nZ(t,s){_a(t,"[@ant-design/icons] ".concat(s))}function VN(t){return At(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(At(t.icon)==="object"||typeof t.icon=="function")}function zN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(s,r){var a=t[r];switch(r){case"class":s.className=a,delete s.class;break;default:delete s[r],s[aZ(r)]=a}return s},{})}function Hp(t,s,r){return r?Ke.createElement(t.tag,pe(pe({key:s},zN(t.attrs)),r),(t.children||[]).map(function(a,n){return Hp(a,"".concat(s,"-").concat(t.tag,"-").concat(n))})):Ke.createElement(t.tag,pe({key:s},zN(t.attrs)),(t.children||[]).map(function(a,n){return Hp(a,"".concat(s,"-").concat(t.tag,"-").concat(n))}))}function q6(t){return Eu(t)[0]}function Y6(t){return t?Array.isArray(t)?t:[t]:[]}var iZ=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,lZ=function(s){var r=h.useContext(nv),a=r.csp,n=r.prefixCls,i=r.layer,l=iZ;n&&(l=l.replace(/anticon/g,n)),i&&(l="@layer ".concat(i,` {
`).concat(l,`
}`)),h.useEffect(function(){var o=s.current,c=ox(o);Oi(l,"@ant-design-icons",{prepend:!i,csp:a,attachTo:c})},[])},oZ=["icon","className","onClick","style","primaryColor","secondaryColor"],qd={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function cZ(t){var s=t.primaryColor,r=t.secondaryColor;qd.primaryColor=s,qd.secondaryColor=r||q6(s),qd.calculated=!!r}function dZ(){return pe({},qd)}var rd=function(s){var r=s.icon,a=s.className,n=s.onClick,i=s.style,l=s.primaryColor,o=s.secondaryColor,c=js(s,oZ),u=h.useRef(),d=qd;if(l&&(d={primaryColor:l,secondaryColor:o||q6(l)}),lZ(u),nZ(VN(r),"icon should be icon definiton, but got ".concat(r)),!VN(r))return null;var m=r;return m&&typeof m.icon=="function"&&(m=pe(pe({},m),{},{icon:m.icon(d.primaryColor,d.secondaryColor)})),Hp(m.icon,"svg-".concat(m.name),pe(pe({className:a,onClick:n,style:i,"data-icon":m.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c),{},{ref:u}))};rd.displayName="IconReact";rd.getTwoToneColors=dZ;rd.setTwoToneColors=cZ;function K6(t){var s=Y6(t),r=Oe(s,2),a=r[0],n=r[1];return rd.setTwoToneColors({primaryColor:a,secondaryColor:n})}function uZ(){var t=rd.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var mZ=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];K6(ix.primary);var _o=h.forwardRef(function(t,s){var r=t.className,a=t.icon,n=t.spin,i=t.rotate,l=t.tabIndex,o=t.onClick,c=t.twoToneColor,u=js(t,mZ),d=h.useContext(nv),m=d.prefixCls,x=m===void 0?"anticon":m,g=d.rootClassName,p=dt(g,x,de(de({},"".concat(x,"-").concat(a.name),!!a.name),"".concat(x,"-spin"),!!n||a.name==="loading"),r),f=l;f===void 0&&o&&(f=-1);var b=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,y=Y6(c),v=Oe(y,2),N=v[0],S=v[1];return h.createElement("span",Gt({role:"img","aria-label":a.name},u,{ref:s,tabIndex:f,onClick:o,className:p}),h.createElement(rd,{icon:a,primaryColor:N,secondaryColor:S,style:b}))});_o.displayName="AntdIcon";_o.getTwoToneColor=uZ;_o.setTwoToneColor=K6;function X6(t){return t&&Ke.isValidElement(t)&&t.type===Ke.Fragment}const xZ=(t,s,r)=>Ke.isValidElement(t)?Ke.cloneElement(t,typeof r=="function"?r(t.props||{}):r):s;function Ao(t,s){return xZ(t,t,s)}const J6=t=>{const[,,,,s]=Xi();return s?`${t}-css-var`:""};var qn={TAB:9,ENTER:13,ESC:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},hZ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},fZ=function(s,r){return h.createElement(_o,Gt({},s,{ref:r,icon:hZ}))},gZ=h.forwardRef(fZ);const mv=Ke.createContext(void 0),Hl=100,Q6={Modal:Hl,Drawer:Hl,Popover:Hl,Popconfirm:Hl,Tooltip:Hl,Tour:Hl,FloatButton:Hl},pZ={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function bZ(t){return t in Q6}const xv=(t,s)=>{const[,r]=Xi(),a=Ke.useContext(mv),n=bZ(t);let i;if(s!==void 0)i=[s,s];else{let l=a??0;n?l+=(a?0:r.zIndexPopupBase)+Q6[t]:l+=pZ[t],i=[a===void 0?s:l,l]}return i};function Z6(t,s){this.v=t,this.k=s}function la(t,s,r,a){var n=Object.defineProperty;try{n({},"",{})}catch{n=0}la=function(l,o,c,u){function d(m,x){la(l,m,function(g){return this._invoke(m,x,g)})}o?n?n(l,o,{value:c,enumerable:!u,configurable:!u,writable:!u}):l[o]=c:(d("next",0),d("throw",1),d("return",2))},la(t,s,r,a)}function hv(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,s,r=typeof Symbol=="function"?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(g,p,f,b){var y=p&&p.prototype instanceof o?p:o,v=Object.create(y.prototype);return la(v,"_invoke",function(N,S,w){var C,j,k,E=0,R=w||[],D=!1,P={p:0,n:0,v:t,a:T,f:T.bind(t,4),d:function(F,L){return C=F,j=0,k=t,P.n=L,l}};function T(B,F){for(j=B,k=F,s=0;!D&&E&&!L&&s<R.length;s++){var L,I=R[s],V=P.p,_=I[2];B>3?(L=_===F)&&(k=I[(j=I[4])?5:(j=3,3)],I[4]=I[5]=t):I[0]<=V&&((L=B<2&&V<I[1])?(j=0,P.v=F,P.n=I[1]):V<_&&(L=B<3||I[0]>F||F>_)&&(I[4]=B,I[5]=F,P.n=_,j=0))}if(L||B>1)return l;throw D=!0,F}return function(B,F,L){if(E>1)throw TypeError("Generator is already running");for(D&&F===1&&T(F,L),j=F,k=L;(s=j<2?t:k)||!D;){C||(j?j<3?(j>1&&(P.n=-1),T(j,k)):P.n=k:P.v=k);try{if(E=2,C){if(j||(B="next"),s=C[B]){if(!(s=s.call(C,k)))throw TypeError("iterator result is not an object");if(!s.done)return s;k=s.value,j<2&&(j=0)}else j===1&&(s=C.return)&&s.call(C),j<2&&(k=TypeError("The iterator does not provide a '"+B+"' method"),j=1);C=t}else if((s=(D=P.n<0)?k:N.call(S,P))!==l)break}catch(I){C=t,j=1,k=I}finally{E=1}}return{value:s,done:D}}}(g,f,b),!0),v}var l={};function o(){}function c(){}function u(){}s=Object.getPrototypeOf;var d=[][a]?s(s([][a]())):(la(s={},a,function(){return this}),s),m=u.prototype=o.prototype=Object.create(d);function x(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,u):(g.__proto__=u,la(g,n,"GeneratorFunction")),g.prototype=Object.create(m),g}return c.prototype=u,la(m,"constructor",u),la(u,"constructor",c),c.displayName="GeneratorFunction",la(u,n,"GeneratorFunction"),la(m),la(m,n,"Generator"),la(m,a,function(){return this}),la(m,"toString",function(){return"[object Generator]"}),(hv=function(){return{w:i,m:x}})()}function cx(t,s){function r(n,i,l,o){try{var c=t[n](i),u=c.value;return u instanceof Z6?s.resolve(u.v).then(function(d){r("next",d,l,o)},function(d){r("throw",d,l,o)}):s.resolve(u).then(function(d){c.value=d,l(c)},function(d){return r("throw",d,l,o)})}catch(d){o(d)}}var a;this.next||(la(cx.prototype),la(cx.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),la(this,"_invoke",function(n,i,l){function o(){return new s(function(c,u){r(n,l,c,u)})}return a=a?a.then(o,o):o()},!0)}function e3(t,s,r,a,n){return new cx(hv().w(t,s,r,a),n||Promise)}function yZ(t,s,r,a,n){var i=e3(t,s,r,a,n);return i.next().then(function(l){return l.done?l.value:i.next()})}function vZ(t){var s=Object(t),r=[];for(var a in s)r.unshift(a);return function n(){for(;r.length;)if((a=r.pop())in s)return n.value=a,n.done=!1,n;return n.done=!0,n}}function GN(t){if(t!=null){var s=t[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],r=0;if(s)return s.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(At(t)+" is not iterable")}function ja(){var t=hv(),s=t.m(ja),r=(Object.getPrototypeOf?Object.getPrototypeOf(s):s.__proto__).constructor;function a(l){var o=typeof l=="function"&&l.constructor;return!!o&&(o===r||(o.displayName||o.name)==="GeneratorFunction")}var n={throw:1,return:2,break:3,continue:3};function i(l){var o,c;return function(u){o||(o={stop:function(){return c(u.a,2)},catch:function(){return u.v},abrupt:function(m,x){return c(u.a,n[m],x)},delegateYield:function(m,x,g){return o.resultName=x,c(u.d,GN(m),g)},finish:function(m){return c(u.f,m)}},c=function(m,x,g){u.p=o.prev,u.n=o.next;try{return m(x,g)}finally{o.next=u.n}}),o.resultName&&(o[o.resultName]=u.v,o.resultName=void 0),o.sent=u.v,o.next=u.n;try{return l.call(this,o)}finally{u.p=o.prev,u.n=o.next}}}return(ja=function(){return{wrap:function(c,u,d,m){return t.w(i(c),u,d,m&&m.reverse())},isGeneratorFunction:a,mark:t.m,awrap:function(c,u){return new Z6(c,u)},AsyncIterator:cx,async:function(c,u,d,m,x){return(a(u)?e3:yZ)(i(c),u,d,m,x)},keys:vZ,values:GN}})()}function qN(t,s,r,a,n,i,l){try{var o=t[i](l),c=o.value}catch(u){return void r(u)}o.done?s(c):Promise.resolve(c).then(a,n)}function Ro(t){return function(){var s=this,r=arguments;return new Promise(function(a,n){var i=t.apply(s,r);function l(c){qN(i,a,n,l,o,"next",c)}function o(c){qN(i,a,n,l,o,"throw",c)}l(void 0)})}}var nm=pe({},pE),jZ=nm.version,Xf=nm.render,wZ=nm.unmountComponentAtNode,Sh;try{var NZ=Number((jZ||"").split(".")[0]);NZ>=18&&(Sh=nm.createRoot)}catch{}function YN(t){var s=nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;s&&At(s)==="object"&&(s.usingClientEntryPoint=t)}var dx="__rc_react_root__";function SZ(t,s){YN(!0);var r=s[dx]||Sh(s);YN(!1),r.render(t),s[dx]=r}function CZ(t,s){Xf==null||Xf(t,s)}function kZ(t,s){if(Sh){SZ(t,s);return}CZ(t,s)}function EZ(t){return Wp.apply(this,arguments)}function Wp(){return Wp=Ro(ja().mark(function t(s){return ja().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var n;(n=s[dx])===null||n===void 0||n.unmount(),delete s[dx]}));case 1:case"end":return a.stop()}},t)})),Wp.apply(this,arguments)}function PZ(t){wZ(t)}function TZ(t){return Vp.apply(this,arguments)}function Vp(){return Vp=Ro(ja().mark(function t(s){return ja().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Sh===void 0){a.next=2;break}return a.abrupt("return",EZ(s));case 2:PZ(s);case 3:case"end":return a.stop()}},t)})),Vp.apply(this,arguments)}const _Z=(t,s)=>(kZ(t,s),()=>TZ(s));let AZ=_Z;function RZ(t){return AZ}const Jf=()=>({height:0,opacity:0}),KN=t=>{const{scrollHeight:s}=t;return{height:s,opacity:1}},FZ=t=>({height:t?t.offsetHeight:0}),Qf=(t,s)=>(s==null?void 0:s.deadline)===!0||s.propertyName==="height",DZ=(t=Pu)=>({motionName:`${t}-motion-collapse`,onAppearStart:Jf,onEnterStart:Jf,onAppearActive:KN,onEnterActive:KN,onLeaveStart:FZ,onLeaveActive:Jf,onAppearEnd:Qf,onEnterEnd:Qf,onLeaveEnd:Qf,motionDeadline:500}),IZ=(t,s,r)=>r!==void 0?r:`${t}-${s}`;function Ml(t,s){var r=Object.assign({},t);return Array.isArray(s)&&s.forEach(function(a){delete r[a]}),r}const fv=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var s=t.getBBox(),r=s.width,a=s.height;if(r||a)return!0}if(t.getBoundingClientRect){var n=t.getBoundingClientRect(),i=n.width,l=n.height;if(i||l)return!0}}return!1},OZ=t=>{const{componentCls:s,colorPrimary:r}=t;return{[s]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},MZ=vQ("Wave",OZ),t3=`${Pu}-wave-target`;function BZ(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"&&t!=="canvastext"}function LZ(t){var s;const{borderTopColor:r,borderColor:a,backgroundColor:n}=getComputedStyle(t);return(s=[r,a,n].find(BZ))!==null&&s!==void 0?s:null}function Zf(t){return Number.isNaN(t)?0:t}const $Z=t=>{const{className:s,target:r,component:a,registerUnmount:n}=t,i=h.useRef(null),l=h.useRef(null);h.useEffect(()=>{l.current=n()},[]);const[o,c]=h.useState(null),[u,d]=h.useState([]),[m,x]=h.useState(0),[g,p]=h.useState(0),[f,b]=h.useState(0),[y,v]=h.useState(0),[N,S]=h.useState(!1),w={left:m,top:g,width:f,height:y,borderRadius:u.map(k=>`${k}px`).join(" ")};o&&(w["--wave-color"]=o);function C(){const k=getComputedStyle(r);c(LZ(r));const E=k.position==="static",{borderLeftWidth:R,borderTopWidth:D}=k;x(E?r.offsetLeft:Zf(-parseFloat(R))),p(E?r.offsetTop:Zf(-parseFloat(D))),b(r.offsetWidth),v(r.offsetHeight);const{borderTopLeftRadius:P,borderTopRightRadius:T,borderBottomLeftRadius:B,borderBottomRightRadius:F}=k;d([P,T,F,B].map(L=>Zf(parseFloat(L))))}if(h.useEffect(()=>{if(r){const k=La(()=>{C(),S(!0)});let E;return typeof ResizeObserver<"u"&&(E=new ResizeObserver(C),E.observe(r)),()=>{La.cancel(k),E==null||E.disconnect()}}},[]),!N)return null;const j=(a==="Checkbox"||a==="Radio")&&(r==null?void 0:r.classList.contains(t3));return h.createElement(td,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(k,E)=>{var R,D;if(E.deadline||E.propertyName==="opacity"){const P=(R=i.current)===null||R===void 0?void 0:R.parentElement;(D=l.current)===null||D===void 0||D.call(l).then(()=>{P==null||P.remove()})}return!1}},({className:k},E)=>h.createElement("div",{ref:Qc(i,E),className:dt(s,k,{"wave-quick":j}),style:w}))},UZ=(t,s)=>{var r;const{component:a}=s;if(a==="Checkbox"&&!(!((r=t.querySelector("input"))===null||r===void 0)&&r.checked))return;const n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",t==null||t.insertBefore(n,t==null?void 0:t.firstChild);const i=RZ();let l=null;function o(){return l}l=i(h.createElement($Z,Object.assign({},s,{target:t,registerUnmount:o})),n)},HZ=(t,s,r)=>{const{wave:a}=h.useContext(Vr),[,n,i]=Xi(),l=Zr(u=>{const d=t.current;if(a!=null&&a.disabled||!d)return;const m=d.querySelector(`.${t3}`)||d,{showEffect:x}=a||{};(x||UZ)(m,{className:s,token:n,component:r,event:u,hashId:i})}),o=h.useRef(null);return u=>{La.cancel(o.current),o.current=La(()=>{l(u)})}},WZ=t=>{const{children:s,disabled:r,component:a}=t,{getPrefixCls:n}=h.useContext(Vr),i=h.useRef(null),l=n("wave"),[,o]=MZ(l),c=HZ(i,dt(l,o),a);if(Ke.useEffect(()=>{const d=i.current;if(!d||d.nodeType!==window.Node.ELEMENT_NODE||r)return;const m=x=>{!fv(x.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")&&!d.className.includes("disabled:")||d.getAttribute("aria-disabled")==="true"||d.className.includes("-leave")||c(x)};return d.addEventListener("click",m,!0),()=>{d.removeEventListener("click",m,!0)}},[r]),!Ke.isValidElement(s))return s??null;const u=Ol(s)?Qc(To(s),i):i;return Ao(s,{ref:u})},s3=t=>{const s=Ke.useContext(Ac);return Ke.useMemo(()=>t?typeof t=="string"?t??s:typeof t=="function"?t(s):s:s,[t,s])},VZ=t=>{const{componentCls:s}=t;return{[s]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},zZ=t=>{const{componentCls:s,antCls:r}=t;return{[s]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${s}-item:empty`]:{display:"none"},[`${s}-item > ${r}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},GZ=t=>{const{componentCls:s}=t;return{[s]:{"&-gap-row-small":{rowGap:t.spaceGapSmallSize},"&-gap-row-middle":{rowGap:t.spaceGapMiddleSize},"&-gap-row-large":{rowGap:t.spaceGapLargeSize},"&-gap-col-small":{columnGap:t.spaceGapSmallSize},"&-gap-col-middle":{columnGap:t.spaceGapMiddleSize},"&-gap-col-large":{columnGap:t.spaceGapLargeSize}}}},r3=am("Space",t=>{const s=Sn(t,{spaceGapSmallSize:t.paddingXS,spaceGapMiddleSize:t.padding,spaceGapLargeSize:t.paddingLG});return[zZ(s),GZ(s),VZ(s)]},()=>({}),{resetStyle:!1});var a3=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const Ch=h.createContext(null),n3=(t,s)=>{const r=h.useContext(Ch),a=h.useMemo(()=>{if(!r)return"";const{compactDirection:n,isFirstItem:i,isLastItem:l}=r,o=n==="vertical"?"-vertical-":"-";return dt(`${t}-compact${o}item`,{[`${t}-compact${o}first-item`]:i,[`${t}-compact${o}last-item`]:l,[`${t}-compact${o}item-rtl`]:s==="rtl"})},[t,s,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:a}},qZ=t=>{const{children:s}=t;return h.createElement(Ch.Provider,{value:null},s)},YZ=t=>{const{children:s}=t,r=a3(t,["children"]);return h.createElement(Ch.Provider,{value:h.useMemo(()=>r,[r])},s)},KZ=t=>{const{getPrefixCls:s,direction:r}=h.useContext(Vr),{size:a,direction:n,block:i,prefixCls:l,className:o,rootClassName:c,children:u}=t,d=a3(t,["size","direction","block","prefixCls","className","rootClassName","children"]),m=s3(N=>a??N),x=s("space-compact",l),[g,p]=r3(x),f=dt(x,p,{[`${x}-rtl`]:r==="rtl",[`${x}-block`]:i,[`${x}-vertical`]:n==="vertical"},o,c),b=h.useContext(Ch),y=Sl(u),v=h.useMemo(()=>y.map((N,S)=>{const w=(N==null?void 0:N.key)||`${x}-item-${S}`;return h.createElement(YZ,{key:w,compactSize:m,compactDirection:n,isFirstItem:S===0&&(!b||(b==null?void 0:b.isFirstItem)),isLastItem:S===y.length-1&&(!b||(b==null?void 0:b.isLastItem))},N)}),[a,y,b]);return y.length===0?null:g(h.createElement("div",Object.assign({className:f},d),v))};var XZ=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const i3=h.createContext(void 0),JZ=t=>{const{getPrefixCls:s,direction:r}=h.useContext(Vr),{prefixCls:a,size:n,className:i}=t,l=XZ(t,["prefixCls","size","className"]),o=s("btn-group",a),[,,c]=Xi(),u=h.useMemo(()=>{switch(n){case"large":return"lg";case"small":return"sm";default:return""}},[n]),d=dt(o,{[`${o}-${u}`]:u,[`${o}-rtl`]:r==="rtl"},i,c);return h.createElement(i3.Provider,{value:n},h.createElement("div",Object.assign({},l,{className:d})))},XN=/^[\u4E00-\u9FA5]{2}$/,zp=XN.test.bind(XN);function JN(t){return typeof t=="string"}function eg(t){return t==="text"||t==="link"}function QZ(t,s){if(t==null)return;const r=s?" ":"";return typeof t!="string"&&typeof t!="number"&&JN(t.type)&&zp(t.props.children)?Ao(t,{children:t.props.children.split("").join(r)}):JN(t)?zp(t)?Ke.createElement("span",null,t.split("").join(r)):Ke.createElement("span",null,t):X6(t)?Ke.createElement("span",null,t):t}function ZZ(t,s){let r=!1;const a=[];return Ke.Children.forEach(t,n=>{const i=typeof n,l=i==="string"||i==="number";if(r&&l){const o=a.length-1,c=a[o];a[o]=`${c}${n}`}else a.push(n);r=l}),Ke.Children.map(a,n=>QZ(n,s))}["default","primary","danger"].concat(rt(vo));const Gp=h.forwardRef((t,s)=>{const{className:r,style:a,children:n,prefixCls:i}=t,l=dt(`${i}-icon`,r);return Ke.createElement("span",{ref:s,className:l,style:a},n)}),QN=h.forwardRef((t,s)=>{const{prefixCls:r,className:a,style:n,iconClassName:i}=t,l=dt(`${r}-loading-icon`,a);return Ke.createElement(Gp,{prefixCls:r,className:l,style:n,ref:s},Ke.createElement(gZ,{className:i}))}),tg=()=>({width:0,opacity:0,transform:"scale(0)"}),sg=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),eee=t=>{const{prefixCls:s,loading:r,existIcon:a,className:n,style:i,mount:l}=t,o=!!r;return a?Ke.createElement(QN,{prefixCls:s,className:n,style:i}):Ke.createElement(td,{visible:o,motionName:`${s}-loading-icon-motion`,motionAppear:!l,motionEnter:!l,motionLeave:!l,removeOnLeave:!0,onAppearStart:tg,onAppearActive:sg,onEnterStart:tg,onEnterActive:sg,onLeaveStart:sg,onLeaveActive:tg},({className:c,style:u},d)=>{const m=Object.assign(Object.assign({},i),u);return Ke.createElement(QN,{prefixCls:s,className:dt(n,c),style:m,ref:d})})},ZN=(t,s)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:s}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:s}}}}}),tee=t=>{const{componentCls:s,fontSize:r,lineWidth:a,groupBorderColor:n,colorErrorHover:i}=t;return{[`${s}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${s}`]:{"&:not(:last-child)":{[`&, & > ${s}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(a).mul(-1).equal(),[`&, & > ${s}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[s]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${s}-icon-only`]:{fontSize:r}},ZN(`${s}-primary`,n),ZN(`${s}-danger`,i)]}};var see=["b"],ree=["v"],rg=function(s){return Math.round(Number(s||0))},aee=function(s){if(s instanceof Ws)return s;if(s&&At(s)==="object"&&"h"in s&&"b"in s){var r=s,a=r.b,n=js(r,see);return pe(pe({},n),{},{v:a})}return typeof s=="string"&&/hsb/.test(s)?s.replace(/hsb/,"hsv"):s},_u=function(t){zi(r,t);var s=Gi(r);function r(a){return Rr(this,r),s.call(this,aee(a))}return Fr(r,[{key:"toHsbString",value:function(){var n=this.toHsb(),i=rg(n.s*100),l=rg(n.b*100),o=rg(n.h),c=n.a,u="hsb(".concat(o,", ").concat(i,"%, ").concat(l,"%)"),d="hsba(".concat(o,", ").concat(i,"%, ").concat(l,"%, ").concat(c.toFixed(c===0?0:2),")");return c===1?u:d}},{key:"toHsb",value:function(){var n=this.toHsv(),i=n.v,l=js(n,ree);return pe(pe({},l),{},{b:i,a:this.a})}}]),r}(Ws),nee=function(s){return s instanceof _u?s:new _u(s)};nee("#1677ff");const iee=(t,s)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,s?8:6))||"",lee=(t,s)=>t?iee(t,s):"";let qp=function(){function t(s){Rr(this,t);var r;if(this.cleared=!1,s instanceof t){this.metaColor=s.metaColor.clone(),this.colors=(r=s.colors)===null||r===void 0?void 0:r.map(n=>({color:new t(n.color),percent:n.percent})),this.cleared=s.cleared;return}const a=Array.isArray(s);a&&s.length?(this.colors=s.map(({color:n,percent:i})=>({color:new t(n),percent:i})),this.metaColor=new _u(this.colors[0].color.metaColor)):this.metaColor=new _u(a?"":s),(!s||a&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Fr(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return lee(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:r}=this;return r?`linear-gradient(90deg, ${r.map(n=>`${n.color.toRgbString()} ${n.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(r){return!r||this.isGradient()!==r.isGradient()?!1:this.isGradient()?this.colors.length===r.colors.length&&this.colors.every((a,n)=>{const i=r.colors[n];return a.percent===i.percent&&a.color.equals(i.color)}):this.toHexString()===r.toHexString()}}])}();var oee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},cee=function(s,r){return h.createElement(_o,Gt({},s,{ref:r,icon:oee}))},dee=h.forwardRef(cee);const uee=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),mee=t=>({animationDuration:t,animationFillMode:"both"}),xee=t=>({animationDuration:t,animationFillMode:"both"}),gv=(t,s,r,a,n=!1)=>{const i=n?"&":"";return{[`
      ${i}${t}-enter,
      ${i}${t}-appear
    `]:Object.assign(Object.assign({},mee(a)),{animationPlayState:"paused"}),[`${i}${t}-leave`]:Object.assign(Object.assign({},xee(a)),{animationPlayState:"paused"}),[`
      ${i}${t}-enter${t}-enter-active,
      ${i}${t}-appear${t}-appear-active
    `]:{animationName:s,animationPlayState:"running"},[`${i}${t}-leave${t}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},hee=new Ts("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),fee=new Ts("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),gee=new Ts("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),pee=new Ts("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),bee=new Ts("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),yee=new Ts("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),vee=new Ts("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),jee=new Ts("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),wee={"move-up":{inKeyframes:vee,outKeyframes:jee},"move-down":{inKeyframes:hee,outKeyframes:fee},"move-left":{inKeyframes:gee,outKeyframes:pee},"move-right":{inKeyframes:bee,outKeyframes:yee}},e1=(t,s)=>{const{antCls:r}=t,a=`${r}-${s}`,{inKeyframes:n,outKeyframes:i}=wee[s];return[gv(a,n,i,t.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${a}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},l3=new Ts("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),o3=new Ts("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),c3=new Ts("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),d3=new Ts("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Nee=new Ts("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),See=new Ts("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Cee=new Ts("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),kee=new Ts("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Eee={"slide-up":{inKeyframes:l3,outKeyframes:o3},"slide-down":{inKeyframes:c3,outKeyframes:d3},"slide-left":{inKeyframes:Nee,outKeyframes:See},"slide-right":{inKeyframes:Cee,outKeyframes:kee}},ux=(t,s)=>{const{antCls:r}=t,a=`${r}-${s}`,{inKeyframes:n,outKeyframes:i}=Eee[s];return[gv(a,n,i,t.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},Pee=new Ts("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Tee=new Ts("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),t1=new Ts("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),s1=new Ts("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),_ee=new Ts("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Aee=new Ts("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Ree=new Ts("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Fee=new Ts("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Dee=new Ts("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Iee=new Ts("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Oee=new Ts("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Mee=new Ts("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Bee={zoom:{inKeyframes:Pee,outKeyframes:Tee},"zoom-big":{inKeyframes:t1,outKeyframes:s1},"zoom-big-fast":{inKeyframes:t1,outKeyframes:s1},"zoom-left":{inKeyframes:Ree,outKeyframes:Fee},"zoom-right":{inKeyframes:Dee,outKeyframes:Iee},"zoom-up":{inKeyframes:_ee,outKeyframes:Aee},"zoom-down":{inKeyframes:Oee,outKeyframes:Mee}},pv=(t,s)=>{const{antCls:r}=t,a=`${r}-${s}`,{inKeyframes:n,outKeyframes:i}=Bee[s];return[gv(a,n,i,s==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},Lee=t=>t instanceof qp?t:new qp(t),$ee=(t,s)=>{const{r,g:a,b:n,a:i}=t.toRgb(),l=new _u(t.toRgbString()).onBackground(s).toHsv();return i<=.5?l.v>.5:r*.299+a*.587+n*.114>192},u3=t=>{const{paddingInline:s,onlyIconSize:r}=t;return Sn(t,{buttonPaddingHorizontal:s,buttonPaddingVertical:0,buttonIconOnlyFontSize:r})},m3=t=>{var s,r,a,n,i,l;const o=(s=t.contentFontSize)!==null&&s!==void 0?s:t.fontSize,c=(r=t.contentFontSizeSM)!==null&&r!==void 0?r:t.fontSize,u=(a=t.contentFontSizeLG)!==null&&a!==void 0?a:t.fontSizeLG,d=(n=t.contentLineHeight)!==null&&n!==void 0?n:k0(o),m=(i=t.contentLineHeightSM)!==null&&i!==void 0?i:k0(c),x=(l=t.contentLineHeightLG)!==null&&l!==void 0?l:k0(u),g=$ee(new qp(t.colorBgSolid),"#fff")?"#000":"#fff",p=vo.reduce((f,b)=>Object.assign(Object.assign({},f),{[`${b}ShadowColor`]:`0 ${It(t.controlOutlineWidth)} 0 ${Rd(t[`${b}1`],t.colorBgContainer)}`}),{});return Object.assign(Object.assign({},p),{fontWeight:400,iconGap:t.marginXS,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:g,contentFontSize:o,contentFontSizeSM:c,contentFontSizeLG:u,contentLineHeight:d,contentLineHeightSM:m,contentLineHeightLG:x,paddingBlock:Math.max((t.controlHeight-o*d)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-c*m)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-u*x)/2-t.lineWidth,0)})},Uee=t=>{const{componentCls:s,iconCls:r,fontWeight:a,opacityLoading:n,motionDurationSlow:i,motionEaseInOut:l,iconGap:o,calc:c}=t;return{[s]:{outline:"none",position:"relative",display:"inline-flex",gap:o,alignItems:"center",justifyContent:"center",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${It(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`${s}-icon > svg`]:dv(),"> a":{color:"currentColor"},"&:not(:disabled)":Mp(t),[`&${s}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${s}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${s}-icon-only`]:{paddingInline:0,[`&${s}-compact-item`]:{flex:"none"}},[`&${s}-loading`]:{opacity:n,cursor:"default"},[`${s}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${i} ${l}`).join(",")},[`&:not(${s}-icon-end)`]:{[`${s}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:c(o).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:c(o).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${s}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:c(o).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:c(o).mul(-1).equal()}}}}}},x3=(t,s,r)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":s,"&:active":r}}),Hee=t=>({minWidth:t.controlHeight,paddingInline:0,borderRadius:"50%"}),Wee=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),kh=(t,s,r,a,n,i,l,o)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:s,borderColor:a||void 0,boxShadow:"none"},x3(t,Object.assign({background:s},l),Object.assign({background:s},o))),{"&:disabled":{cursor:"not-allowed",color:n||void 0,borderColor:i||void 0}})}),Vee=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},Wee(t))}),zee=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),Eh=(t,s,r,a)=>{const i=a&&["link","text"].includes(a)?zee:Vee;return Object.assign(Object.assign({},i(t)),x3(t.componentCls,s,r))},Ph=(t,s,r,a,n)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:s,background:r},Eh(t,a,n))}),Th=(t,s,r,a,n)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:s,background:r},Eh(t,a,n))}),_h=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),Ah=(t,s,r,a)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:s},Eh(t,r,a))}),vi=(t,s,r,a,n)=>({[`&${t.componentCls}-variant-${r}`]:Object.assign({color:s,boxShadow:"none"},Eh(t,a,n,r))}),Gee=t=>{const{componentCls:s}=t;return vo.reduce((r,a)=>{const n=t[`${a}6`],i=t[`${a}1`],l=t[`${a}5`],o=t[`${a}2`],c=t[`${a}3`],u=t[`${a}7`];return Object.assign(Object.assign({},r),{[`&${s}-color-${a}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n,boxShadow:t[`${a}ShadowColor`]},Ph(t,t.colorTextLightSolid,n,{background:l},{background:u})),Th(t,n,t.colorBgContainer,{color:l,borderColor:l,background:t.colorBgContainer},{color:u,borderColor:u,background:t.colorBgContainer})),_h(t)),Ah(t,i,{color:n,background:o},{color:n,background:c})),vi(t,n,"link",{color:l},{color:u})),vi(t,n,"text",{color:l,background:i},{color:u,background:c}))})},{})},qee=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},Ph(t,t.solidTextColor,t.colorBgSolid,{color:t.solidTextColor,background:t.colorBgSolidHover},{color:t.solidTextColor,background:t.colorBgSolidActive})),_h(t)),Ah(t,t.colorFillTertiary,{color:t.defaultColor,background:t.colorFillSecondary},{color:t.defaultColor,background:t.colorFill})),kh(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),vi(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),Yee=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},Th(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),_h(t)),Ah(t,t.colorPrimaryBg,{color:t.colorPrimary,background:t.colorPrimaryBgHover},{color:t.colorPrimary,background:t.colorPrimaryBorder})),vi(t,t.colorPrimaryText,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),vi(t,t.colorPrimaryText,"link",{color:t.colorPrimaryTextHover,background:t.linkHoverBg},{color:t.colorPrimaryTextActive})),kh(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),Kee=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},Ph(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),Th(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),_h(t)),Ah(t,t.colorErrorBg,{color:t.colorError,background:t.colorErrorBgFilledHover},{color:t.colorError,background:t.colorErrorBgActive})),vi(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),vi(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),kh(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),Xee=t=>Object.assign(Object.assign({},vi(t,t.colorLink,"link",{color:t.colorLinkHover},{color:t.colorLinkActive})),kh(t.componentCls,t.ghostBg,t.colorInfo,t.colorInfo,t.colorTextDisabled,t.colorBorder,{color:t.colorInfoHover,borderColor:t.colorInfoHover},{color:t.colorInfoActive,borderColor:t.colorInfoActive})),Jee=t=>{const{componentCls:s}=t;return Object.assign({[`${s}-color-default`]:qee(t),[`${s}-color-primary`]:Yee(t),[`${s}-color-dangerous`]:Kee(t),[`${s}-color-link`]:Xee(t)},Gee(t))},Qee=t=>Object.assign(Object.assign(Object.assign(Object.assign({},Th(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),vi(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),Ph(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),vi(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),bv=(t,s="")=>{const{componentCls:r,controlHeight:a,fontSize:n,borderRadius:i,buttonPaddingHorizontal:l,iconCls:o,buttonPaddingVertical:c,buttonIconOnlyFontSize:u}=t;return[{[s]:{fontSize:n,height:a,padding:`${It(c)} ${It(l)}`,borderRadius:i,[`&${r}-icon-only`]:{width:a,[o]:{fontSize:u}}}},{[`${r}${r}-circle${s}`]:Hee(t)},{[`${r}${r}-round${s}`]:{borderRadius:t.controlHeight,[`&:not(${r}-icon-only)`]:{paddingInline:t.buttonPaddingHorizontal}}}]},Zee=t=>{const s=Sn(t,{fontSize:t.contentFontSize});return bv(s,t.componentCls)},ete=t=>{const s=Sn(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:0,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return bv(s,`${t.componentCls}-sm`)},tte=t=>{const s=Sn(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:0,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return bv(s,`${t.componentCls}-lg`)},ste=t=>{const{componentCls:s}=t;return{[s]:{[`&${s}-block`]:{width:"100%"}}}},rte=am("Button",t=>{const s=u3(t);return[Uee(s),Zee(s),ete(s),tte(s),ste(s),Jee(s),Qee(s),tee(s)]},m3,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function ate(t,s,r,a){const{focusElCls:n,focus:i,borderElCls:l}=r,o=l?"> *":"",c=["hover",i?"focus":null,"active"].filter(Boolean).map(u=>`&:${u} ${o}`).join(",");return{[`&-item:not(${s}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},[`&-item:not(${a}-status-success)`]:{zIndex:2},"&-item":Object.assign(Object.assign({[c]:{zIndex:3}},n?{[`&${n}`]:{zIndex:3}}:{}),{[`&[disabled] ${o}`]:{zIndex:0}})}}function nte(t,s,r){const{borderElCls:a}=r,n=a?`> ${a}`:"";return{[`&-item:not(${s}-first-item):not(${s}-last-item) ${n}`]:{borderRadius:0},[`&-item:not(${s}-last-item)${s}-first-item`]:{[`& ${n}, &${t}-sm ${n}, &${t}-lg ${n}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${s}-first-item)${s}-last-item`]:{[`& ${n}, &${t}-sm ${n}, &${t}-lg ${n}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function ite(t,s={focus:!0}){const{componentCls:r}=t,a=`${r}-compact`;return{[a]:Object.assign(Object.assign({},ate(t,a,s,r)),nte(r,a,s))}}function lte(t,s,r){return{[`&-item:not(${s}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},[`&-item:not(${r}-status-success)`]:{zIndex:2},"&-item":{"&:hover,&:focus,&:active":{zIndex:3},"&[disabled]":{zIndex:0}}}}function ote(t,s){return{[`&-item:not(${s}-first-item):not(${s}-last-item)`]:{borderRadius:0},[`&-item${s}-first-item:not(${s}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${s}-last-item:not(${s}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function cte(t){const s=`${t.componentCls}-compact-vertical`;return{[s]:Object.assign(Object.assign({},lte(t,s,t.componentCls)),ote(t.componentCls,s))}}const dte=t=>{const{componentCls:s,colorPrimaryHover:r,lineWidth:a,calc:n}=t,i=n(a).mul(-1).equal(),l=o=>{const c=`${s}-compact${o?"-vertical":""}-item${s}-primary:not([disabled])`;return{[`${c} + ${c}::before`]:{position:"absolute",top:o?i:0,insetInlineStart:o?0:i,backgroundColor:r,content:'""',width:o?"100%":a,height:o?a:"100%"}}};return Object.assign(Object.assign({},l()),l(!0))},ute=jQ(["Button","compact"],t=>{const s=u3(t);return[ite(s),cte(s),dte(s)]},m3);var mte=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};function xte(t){if(typeof t=="object"&&t){let s=t==null?void 0:t.delay;return s=!Number.isNaN(s)&&typeof s=="number"?s:0,{loading:s<=0,delay:s}}return{loading:!!t,delay:0}}const hte={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},fte=Ke.forwardRef((t,s)=>{var r,a;const{loading:n=!1,prefixCls:i,color:l,variant:o,type:c,danger:u=!1,shape:d,size:m,styles:x,disabled:g,className:p,rootClassName:f,children:b,icon:y,iconPosition:v="start",ghost:N=!1,block:S=!1,htmlType:w="button",classNames:C,style:j={},autoInsertSpace:k,autoFocus:E}=t,R=mte(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),D=c||"default",{button:P}=Ke.useContext(Vr),T=d||(P==null?void 0:P.shape)||"default",[B,F]=h.useMemo(()=>{if(l&&o)return[l,o];if(c||u){const mt=hte[D]||[];return u?["danger",mt[1]]:mt}return P!=null&&P.color&&(P!=null&&P.variant)?[P.color,P.variant]:["default","outlined"]},[c,l,o,u,P==null?void 0:P.variant,P==null?void 0:P.color]),I=B==="danger"?"dangerous":B,{getPrefixCls:V,direction:_,autoInsertSpace:G,className:U,style:A,classNames:q,styles:Y}=ov("button"),O=(r=k??G)!==null&&r!==void 0?r:!0,W=V("btn",i),[z,H,Q]=rte(W),J=h.useContext(lx),ie=g??J,K=h.useContext(i3),oe=h.useMemo(()=>xte(n),[n]),[le,Se]=h.useState(oe.loading),[Ee,ye]=h.useState(!1),We=h.useRef(null),fe=Zc(s,We),Fe=h.Children.count(b)===1&&!y&&!eg(F),ce=h.useRef(!0);Ke.useEffect(()=>(ce.current=!1,()=>{ce.current=!0}),[]),Qr(()=>{let mt=null;oe.delay>0?mt=setTimeout(()=>{mt=null,Se(!0)},oe.delay):Se(oe.loading);function Wt(){mt&&(clearTimeout(mt),mt=null)}return Wt},[oe.delay,oe.loading]),h.useEffect(()=>{if(!We.current||!O)return;const mt=We.current.textContent||"";Fe&&zp(mt)?Ee||ye(!0):Ee&&ye(!1)}),h.useEffect(()=>{E&&We.current&&We.current.focus()},[]);const Ce=Ke.useCallback(mt=>{var Wt;if(le||ie){mt.preventDefault();return}(Wt=t.onClick)===null||Wt===void 0||Wt.call(t,("href"in t,mt))},[t.onClick,le,ie]),{compactSize:ze,compactItemClassnames:De}=n3(W,_),st={large:"lg",small:"sm",middle:void 0},Xe=s3(mt=>{var Wt,Le;return(Le=(Wt=m??ze)!==null&&Wt!==void 0?Wt:K)!==null&&Le!==void 0?Le:mt}),it=Xe&&(a=st[Xe])!==null&&a!==void 0?a:"",ft=le?"loading":y,be=Ml(R,["navigate"]),Pe=dt(W,H,Q,{[`${W}-${T}`]:T!=="default"&&T,[`${W}-${D}`]:D,[`${W}-dangerous`]:u,[`${W}-color-${I}`]:I,[`${W}-variant-${F}`]:F,[`${W}-${it}`]:it,[`${W}-icon-only`]:!b&&b!==0&&!!ft,[`${W}-background-ghost`]:N&&!eg(F),[`${W}-loading`]:le,[`${W}-two-chinese-chars`]:Ee&&O&&!le,[`${W}-block`]:S,[`${W}-rtl`]:_==="rtl",[`${W}-icon-end`]:v==="end"},De,p,f,U),ee=Object.assign(Object.assign({},A),j),me=dt(C==null?void 0:C.icon,q.icon),Te=Object.assign(Object.assign({},(x==null?void 0:x.icon)||{}),Y.icon||{}),qe=y&&!le?Ke.createElement(Gp,{prefixCls:W,className:me,style:Te},y):n&&typeof n=="object"&&n.icon?Ke.createElement(Gp,{prefixCls:W,className:me,style:Te},n.icon):Ke.createElement(eee,{existIcon:!!y,prefixCls:W,loading:le,mount:ce.current}),gt=b||b===0?ZZ(b,Fe&&O):null;if(be.href!==void 0)return z(Ke.createElement("a",Object.assign({},be,{className:dt(Pe,{[`${W}-disabled`]:ie}),href:ie?void 0:be.href,style:ee,onClick:Ce,ref:fe,tabIndex:ie?-1:0,"aria-disabled":ie}),qe,gt));let Nt=Ke.createElement("button",Object.assign({},R,{type:w,className:Pe,style:ee,onClick:Ce,disabled:ie,ref:fe}),qe,gt,De&&Ke.createElement(ute,{prefixCls:W}));return eg(F)||(Nt=Ke.createElement(WZ,{component:"Button",disabled:le},Nt)),z(Nt)}),Au=fte;Au.Group=JZ;Au.__ANT_BUTTON=!0;var h3=h.createContext(null),r1=[];function gte(t,s){var r=h.useState(function(){if(!sn())return null;var p=document.createElement("div");return p}),a=Oe(r,1),n=a[0],i=h.useRef(!1),l=h.useContext(h3),o=h.useState(r1),c=Oe(o,2),u=c[0],d=c[1],m=l||(i.current?void 0:function(p){d(function(f){var b=[p].concat(rt(f));return b})});function x(){n.parentElement||document.body.appendChild(n),i.current=!0}function g(){var p;(p=n.parentElement)===null||p===void 0||p.removeChild(n),i.current=!1}return Qr(function(){return t?l?l(x):x():g(),g},[t]),Qr(function(){u.length&&(u.forEach(function(p){return p()}),d(r1))},[u]),[n,m]}function pte(t){var s="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=s;var a=r.style;a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll";var n,i;if(t){var l=getComputedStyle(t);a.scrollbarColor=l.scrollbarColor,a.scrollbarWidth=l.scrollbarWidth;var o=getComputedStyle(t,"::-webkit-scrollbar"),c=parseInt(o.width,10),u=parseInt(o.height,10);try{var d=c?"width: ".concat(o.width,";"):"",m=u?"height: ".concat(o.height,";"):"";Oi(`
#`.concat(s,`::-webkit-scrollbar {
`).concat(d,`
`).concat(m,`
}`),s)}catch(p){console.error(p),n=c,i=u}}document.body.appendChild(r);var x=t&&n&&!isNaN(n)?n:r.offsetWidth-r.clientWidth,g=t&&i&&!isNaN(i)?i:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),Nu(s),{width:x,height:g}}function bte(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:pte(t)}function yte(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var vte="rc-util-locker-".concat(Date.now()),a1=0;function jte(t){var s=!!t,r=h.useState(function(){return a1+=1,"".concat(vte,"_").concat(a1)}),a=Oe(r,1),n=a[0];Qr(function(){if(s){var i=bte(document.body).width,l=yte();Oi(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(i,"px);"):"",`
}`),n)}else Nu(n);return function(){Nu(n)}},[s,n])}var wte=!1;function Nte(t){return wte}var n1=function(s){return s===!1?!1:!sn()||!s?null:typeof s=="string"?document.querySelector(s):typeof s=="function"?s():s},f3=h.forwardRef(function(t,s){var r=t.open,a=t.autoLock,n=t.getContainer;t.debug;var i=t.autoDestroy,l=i===void 0?!0:i,o=t.children,c=h.useState(r),u=Oe(c,2),d=u[0],m=u[1],x=d||r;h.useEffect(function(){(l||r)&&m(r)},[r,l]);var g=h.useState(function(){return n1(n)}),p=Oe(g,2),f=p[0],b=p[1];h.useEffect(function(){var D=n1(n);b(D??null)});var y=gte(x&&!f),v=Oe(y,2),N=v[0],S=v[1],w=f??N;jte(a&&r&&sn()&&(w===N||w===document.body));var C=null;if(o&&Ol(o)&&s){var j=o;C=j.ref}var k=Zc(C,s);if(!x||!sn()||f===void 0)return null;var E=w===!1||Nte(),R=o;return s&&(R=h.cloneElement(o,{ref:k})),h.createElement(h3.Provider,{value:S},E?R:Cl.createPortal(R,w))});function Ste(){var t=pe({},Mc);return t.useId}var i1=0,l1=Ste();const g3=l1?function(s){var r=l1();return s||r}:function(s){var r=h.useState("ssr-id"),a=Oe(r,2),n=a[0],i=a[1];return h.useEffect(function(){var l=i1;i1+=1,i("rc_unique_".concat(l))},[]),s||n};var Xl="RC_FORM_INTERNAL_HOOKS",Ss=function(){_a(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Rc=h.createContext({getFieldValue:Ss,getFieldsValue:Ss,getFieldError:Ss,getFieldWarning:Ss,getFieldsError:Ss,isFieldsTouched:Ss,isFieldTouched:Ss,isFieldValidating:Ss,isFieldsValidating:Ss,resetFields:Ss,setFields:Ss,setFieldValue:Ss,setFieldsValue:Ss,validateFields:Ss,submit:Ss,getInternalHooks:function(){return Ss(),{dispatch:Ss,initEntityValue:Ss,registerField:Ss,useSubscribe:Ss,setInitialValues:Ss,destroyForm:Ss,setCallbacks:Ss,registerWatch:Ss,getFields:Ss,setValidateMessages:Ss,setPreserve:Ss,getInitialValue:Ss}}}),mx=h.createContext(null);function Yp(t){return t==null?[]:Array.isArray(t)?t:[t]}function Cte(t){return t&&!!t._init}function Kp(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var s=JSON.parse(JSON.stringify(this));return s.clone=this.clone,s}}}var Xp=Kp();function kte(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Ete(t,s,r){if(Db())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,s);var n=new(t.bind.apply(t,a));return r&&ru(n,r.prototype),n}function Jp(t){var s=typeof Map=="function"?new Map:void 0;return Jp=function(a){if(a===null||!kte(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(s!==void 0){if(s.has(a))return s.get(a);s.set(a,n)}function n(){return Ete(a,arguments,au(this).constructor)}return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ru(n,a)},Jp(t)}var Pte=/%[sdj%]/g,Tte=function(){};function Qp(t){if(!t||!t.length)return null;var s={};return t.forEach(function(r){var a=r.field;s[a]=s[a]||[],s[a].push(r)}),s}function Ja(t){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];var n=0,i=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var l=t.replace(Pte,function(o){if(o==="%%")return"%";if(n>=i)return o;switch(o){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}break;default:return o}});return l}return t}function _te(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ar(t,s){return!!(t==null||s==="array"&&Array.isArray(t)&&!t.length||_te(s)&&typeof t=="string"&&!t)}function Ate(t,s,r){var a=[],n=0,i=t.length;function l(o){a.push.apply(a,rt(o||[])),n++,n===i&&r(a)}t.forEach(function(o){s(o,l)})}function o1(t,s,r){var a=0,n=t.length;function i(l){if(l&&l.length){r(l);return}var o=a;a=a+1,o<n?s(t[o],i):r([])}i([])}function Rte(t){var s=[];return Object.keys(t).forEach(function(r){s.push.apply(s,rt(t[r]||[]))}),s}var c1=function(t){zi(r,t);var s=Gi(r);function r(a,n){var i;return Rr(this,r),i=s.call(this,"Async Validation Error"),de(Ut(i),"errors",void 0),de(Ut(i),"fields",void 0),i.errors=a,i.fields=n,i}return Fr(r)}(Jp(Error));function Fte(t,s,r,a,n){if(s.first){var i=new Promise(function(x,g){var p=function(y){return a(y),y.length?g(new c1(y,Qp(y))):x(n)},f=Rte(t);o1(f,r,p)});return i.catch(function(x){return x}),i}var l=s.firstFields===!0?Object.keys(t):s.firstFields||[],o=Object.keys(t),c=o.length,u=0,d=[],m=new Promise(function(x,g){var p=function(b){if(d.push.apply(d,b),u++,u===c)return a(d),d.length?g(new c1(d,Qp(d))):x(n)};o.length||(a(d),x(n)),o.forEach(function(f){var b=t[f];l.indexOf(f)!==-1?o1(b,r,p):Ate(b,r,p)})});return m.catch(function(x){return x}),m}function Dte(t){return!!(t&&t.message!==void 0)}function Ite(t,s){for(var r=t,a=0;a<s.length;a++){if(r==null)return r;r=r[s[a]]}return r}function d1(t,s){return function(r){var a;return t.fullFields?a=Ite(s,t.fullFields):a=s[r.field||t.fullField],Dte(r)?(r.field=r.field||t.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||t.fullField}}}function u1(t,s){if(s){for(var r in s)if(s.hasOwnProperty(r)){var a=s[r];At(a)==="object"&&At(t[r])==="object"?t[r]=pe(pe({},t[r]),a):t[r]=a}}return t}var zo="enum",Ote=function(s,r,a,n,i){s[zo]=Array.isArray(s[zo])?s[zo]:[],s[zo].indexOf(r)===-1&&n.push(Ja(i.messages[zo],s.fullField,s[zo].join(", ")))},Mte=function(s,r,a,n,i){if(s.pattern){if(s.pattern instanceof RegExp)s.pattern.lastIndex=0,s.pattern.test(r)||n.push(Ja(i.messages.pattern.mismatch,s.fullField,r,s.pattern));else if(typeof s.pattern=="string"){var l=new RegExp(s.pattern);l.test(r)||n.push(Ja(i.messages.pattern.mismatch,s.fullField,r,s.pattern))}}},Bte=function(s,r,a,n,i){var l=typeof s.len=="number",o=typeof s.min=="number",c=typeof s.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=r,m=null,x=typeof r=="number",g=typeof r=="string",p=Array.isArray(r);if(x?m="number":g?m="string":p&&(m="array"),!m)return!1;p&&(d=r.length),g&&(d=r.replace(u,"_").length),l?d!==s.len&&n.push(Ja(i.messages[m].len,s.fullField,s.len)):o&&!c&&d<s.min?n.push(Ja(i.messages[m].min,s.fullField,s.min)):c&&!o&&d>s.max?n.push(Ja(i.messages[m].max,s.fullField,s.max)):o&&c&&(d<s.min||d>s.max)&&n.push(Ja(i.messages[m].range,s.fullField,s.min,s.max))},p3=function(s,r,a,n,i,l){s.required&&(!a.hasOwnProperty(s.field)||Ar(r,l||s.type))&&n.push(Ja(i.messages.required,s.fullField))},qm;const Lte=function(){if(qm)return qm;var t="[a-fA-F\\d:]",s=function(C){return C&&C.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",n=["(?:".concat(a,":){7}(?:").concat(a,"|:)"),"(?:".concat(a,":){6}(?:").concat(r,"|:").concat(a,"|:)"),"(?:".concat(a,":){5}(?::").concat(r,"|(?::").concat(a,"){1,2}|:)"),"(?:".concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(r,"|(?::").concat(a,"){1,3}|:)"),"(?:".concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(r,"|(?::").concat(a,"){1,4}|:)"),"(?:".concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(r,"|(?::").concat(a,"){1,5}|:)"),"(?:".concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(r,"|(?::").concat(a,"){1,6}|:)"),"(?::(?:(?::".concat(a,"){0,5}:").concat(r,"|(?::").concat(a,"){1,7}|:))")],i="(?:%[0-9a-zA-Z]{1,})?",l="(?:".concat(n.join("|"),")").concat(i),o=new RegExp("(?:^".concat(r,"$)|(?:^").concat(l,"$)")),c=new RegExp("^".concat(r,"$")),u=new RegExp("^".concat(l,"$")),d=function(C){return C&&C.exact?o:new RegExp("(?:".concat(s(C)).concat(r).concat(s(C),")|(?:").concat(s(C)).concat(l).concat(s(C),")"),"g")};d.v4=function(w){return w&&w.exact?c:new RegExp("".concat(s(w)).concat(r).concat(s(w)),"g")},d.v6=function(w){return w&&w.exact?u:new RegExp("".concat(s(w)).concat(l).concat(s(w)),"g")};var m="(?:(?:[a-z]+:)?//)",x="(?:\\S+(?::\\S*)?@)?",g=d.v4().source,p=d.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",b="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",y="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",N='(?:[/?#][^\\s"]*)?',S="(?:".concat(m,"|www\\.)").concat(x,"(?:localhost|").concat(g,"|").concat(p,"|").concat(f).concat(b).concat(y,")").concat(v).concat(N);return qm=new RegExp("(?:^".concat(S,"$)"),"i"),qm};var m1={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Fd={integer:function(s){return Fd.number(s)&&parseInt(s,10)===s},float:function(s){return Fd.number(s)&&!Fd.integer(s)},array:function(s){return Array.isArray(s)},regexp:function(s){if(s instanceof RegExp)return!0;try{return!!new RegExp(s)}catch{return!1}},date:function(s){return typeof s.getTime=="function"&&typeof s.getMonth=="function"&&typeof s.getYear=="function"&&!isNaN(s.getTime())},number:function(s){return isNaN(s)?!1:typeof s=="number"},object:function(s){return At(s)==="object"&&!Fd.array(s)},method:function(s){return typeof s=="function"},email:function(s){return typeof s=="string"&&s.length<=320&&!!s.match(m1.email)},url:function(s){return typeof s=="string"&&s.length<=2048&&!!s.match(Lte())},hex:function(s){return typeof s=="string"&&!!s.match(m1.hex)}},$te=function(s,r,a,n,i){if(s.required&&r===void 0){p3(s,r,a,n,i);return}var l=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=s.type;l.indexOf(o)>-1?Fd[o](r)||n.push(Ja(i.messages.types[o],s.fullField,s.type)):o&&At(r)!==s.type&&n.push(Ja(i.messages.types[o],s.fullField,s.type))},Ute=function(s,r,a,n,i){(/^\s+$/.test(r)||r==="")&&n.push(Ja(i.messages.whitespace,s.fullField))};const zt={required:p3,whitespace:Ute,type:$te,range:Bte,enum:Ote,pattern:Mte};var Hte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i)}a(l)},Wte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(r==null&&!s.required)return a();zt.required(s,r,n,l,i,"array"),r!=null&&(zt.type(s,r,n,l,i),zt.range(s,r,n,l,i))}a(l)},Vte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&zt.type(s,r,n,l,i)}a(l)},zte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r,"date")&&!s.required)return a();if(zt.required(s,r,n,l,i),!Ar(r,"date")){var c;r instanceof Date?c=r:c=new Date(r),zt.type(s,c,n,l,i),c&&zt.range(s,c.getTime(),n,l,i)}}a(l)},Gte="enum",qte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&zt[Gte](s,r,n,l,i)}a(l)},Yte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&(zt.type(s,r,n,l,i),zt.range(s,r,n,l,i))}a(l)},Kte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&(zt.type(s,r,n,l,i),zt.range(s,r,n,l,i))}a(l)},Xte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&zt.type(s,r,n,l,i)}a(l)},Jte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(r===""&&(r=void 0),Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&(zt.type(s,r,n,l,i),zt.range(s,r,n,l,i))}a(l)},Qte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),r!==void 0&&zt.type(s,r,n,l,i)}a(l)},Zte=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r,"string")&&!s.required)return a();zt.required(s,r,n,l,i),Ar(r,"string")||zt.pattern(s,r,n,l,i)}a(l)},ese=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r)&&!s.required)return a();zt.required(s,r,n,l,i),Ar(r)||zt.type(s,r,n,l,i)}a(l)},tse=function(s,r,a,n,i){var l=[],o=Array.isArray(r)?"array":At(r);zt.required(s,r,n,l,i,o),a(l)},sse=function(s,r,a,n,i){var l=[],o=s.required||!s.required&&n.hasOwnProperty(s.field);if(o){if(Ar(r,"string")&&!s.required)return a();zt.required(s,r,n,l,i,"string"),Ar(r,"string")||(zt.type(s,r,n,l,i),zt.range(s,r,n,l,i),zt.pattern(s,r,n,l,i),s.whitespace===!0&&zt.whitespace(s,r,n,l,i))}a(l)},ag=function(s,r,a,n,i){var l=s.type,o=[],c=s.required||!s.required&&n.hasOwnProperty(s.field);if(c){if(Ar(r,l)&&!s.required)return a();zt.required(s,r,n,o,i,l),Ar(r,l)||zt.type(s,r,n,o,i)}a(o)};const Yd={string:sse,method:Xte,number:Jte,boolean:Vte,regexp:ese,integer:Kte,float:Yte,array:Wte,object:Qte,enum:qte,pattern:Zte,date:zte,url:ag,hex:ag,email:ag,required:tse,any:Hte};var im=function(){function t(s){Rr(this,t),de(this,"rules",null),de(this,"_messages",Xp),this.define(s)}return Fr(t,[{key:"define",value:function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(At(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(n){var i=r[n];a.rules[n]=Array.isArray(i)?i:[i]})}},{key:"messages",value:function(r){return r&&(this._messages=u1(Kp(),r)),this._messages}},{key:"validate",value:function(r){var a=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},l=r,o=n,c=i;if(typeof o=="function"&&(c=o,o={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,l),Promise.resolve(l);function u(p){var f=[],b={};function y(N){if(Array.isArray(N)){var S;f=(S=f).concat.apply(S,rt(N))}else f.push(N)}for(var v=0;v<p.length;v++)y(p[v]);f.length?(b=Qp(f),c(f,b)):c(null,l)}if(o.messages){var d=this.messages();d===Xp&&(d=Kp()),u1(d,o.messages),o.messages=d}else o.messages=this.messages();var m={},x=o.keys||Object.keys(this.rules);x.forEach(function(p){var f=a.rules[p],b=l[p];f.forEach(function(y){var v=y;typeof v.transform=="function"&&(l===r&&(l=pe({},l)),b=l[p]=v.transform(b),b!=null&&(v.type=v.type||(Array.isArray(b)?"array":At(b)))),typeof v=="function"?v={validator:v}:v=pe({},v),v.validator=a.getValidationMethod(v),v.validator&&(v.field=p,v.fullField=v.fullField||p,v.type=a.getType(v),m[p]=m[p]||[],m[p].push({rule:v,value:b,source:l,field:p}))})});var g={};return Fte(m,o,function(p,f){var b=p.rule,y=(b.type==="object"||b.type==="array")&&(At(b.fields)==="object"||At(b.defaultField)==="object");y=y&&(b.required||!b.required&&p.value),b.field=p.field;function v(j,k){return pe(pe({},k),{},{fullField:"".concat(b.fullField,".").concat(j),fullFields:b.fullFields?[].concat(rt(b.fullFields),[j]):[j]})}function N(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=Array.isArray(j)?j:[j];!o.suppressWarning&&k.length&&t.warning("async-validator:",k),k.length&&b.message!==void 0&&(k=[].concat(b.message));var E=k.map(d1(b,l));if(o.first&&E.length)return g[b.field]=1,f(E);if(!y)f(E);else{if(b.required&&!p.value)return b.message!==void 0?E=[].concat(b.message).map(d1(b,l)):o.error&&(E=[o.error(b,Ja(o.messages.required,b.field))]),f(E);var R={};b.defaultField&&Object.keys(p.value).map(function(T){R[T]=b.defaultField}),R=pe(pe({},R),p.rule.fields);var D={};Object.keys(R).forEach(function(T){var B=R[T],F=Array.isArray(B)?B:[B];D[T]=F.map(v.bind(null,T))});var P=new t(D);P.messages(o.messages),p.rule.options&&(p.rule.options.messages=o.messages,p.rule.options.error=o.error),P.validate(p.value,p.rule.options||o,function(T){var B=[];E&&E.length&&B.push.apply(B,rt(E)),T&&T.length&&B.push.apply(B,rt(T)),f(B.length?B:null)})}}var S;if(b.asyncValidator)S=b.asyncValidator(b,p.value,N,p.source,o);else if(b.validator){try{S=b.validator(b,p.value,N,p.source,o)}catch(j){var w,C;(w=(C=console).error)===null||w===void 0||w.call(C,j),o.suppressValidatorError||setTimeout(function(){throw j},0),N(j.message)}S===!0?N():S===!1?N(typeof b.message=="function"?b.message(b.fullField||b.field):b.message||"".concat(b.fullField||b.field," fails")):S instanceof Array?N(S):S instanceof Error&&N(S.message)}S&&S.then&&S.then(function(){return N()},function(j){return N(j)})},function(p){u(p)},l)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Yd.hasOwnProperty(r.type))throw new Error(Ja("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),n=a.indexOf("message");return n!==-1&&a.splice(n,1),a.length===1&&a[0]==="required"?Yd.required:Yd[this.getType(r)]||void 0}}]),t}();de(im,"register",function(s,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Yd[s]=r});de(im,"warning",Tte);de(im,"messages",Xp);de(im,"validators",Yd);var za="'${name}' is not a valid ${type}",b3={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:za,method:za,array:za,object:za,number:za,date:za,boolean:za,integer:za,float:za,regexp:za,email:za,url:za,hex:za},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},x1=im;function rse(t,s){return t.replace(/\\?\$\{\w+\}/g,function(r){if(r.startsWith("\\"))return r.slice(1);var a=r.slice(2,-1);return s[a]})}var h1="CODE_LOGIC_ERROR";function Zp(t,s,r,a,n){return eb.apply(this,arguments)}function eb(){return eb=Ro(ja().mark(function t(s,r,a,n,i){var l,o,c,u,d,m,x,g,p;return ja().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l=pe({},a),delete l.ruleIndex,x1.warning=function(){},l.validator&&(o=l.validator,l.validator=function(){try{return o.apply(void 0,arguments)}catch(y){return console.error(y),Promise.reject(h1)}}),c=null,l&&l.type==="array"&&l.defaultField&&(c=l.defaultField,delete l.defaultField),u=new x1(de({},s,[l])),d=sc(b3,n.validateMessages),u.messages(d),m=[],b.prev=10,b.next=13,Promise.resolve(u.validate(de({},s,r),pe({},n)));case 13:b.next=18;break;case 15:b.prev=15,b.t0=b.catch(10),b.t0.errors&&(m=b.t0.errors.map(function(y,v){var N=y.message,S=N===h1?d.default:N;return h.isValidElement(S)?h.cloneElement(S,{key:"error_".concat(v)}):S}));case 18:if(!(!m.length&&c)){b.next=23;break}return b.next=21,Promise.all(r.map(function(y,v){return Zp("".concat(s,".").concat(v),y,c,n,i)}));case 21:return x=b.sent,b.abrupt("return",x.reduce(function(y,v){return[].concat(rt(y),rt(v))},[]));case 23:return g=pe(pe({},a),{},{name:s,enum:(a.enum||[]).join(", ")},i),p=m.map(function(y){return typeof y=="string"?rse(y,g):y}),b.abrupt("return",p);case 26:case"end":return b.stop()}},t,null,[[10,15]])})),eb.apply(this,arguments)}function ase(t,s,r,a,n,i){var l=t.join("."),o=r.map(function(d,m){var x=d.validator,g=pe(pe({},d),{},{ruleIndex:m});return x&&(g.validator=function(p,f,b){var y=!1,v=function(){for(var w=arguments.length,C=new Array(w),j=0;j<w;j++)C[j]=arguments[j];Promise.resolve().then(function(){_a(!y,"Your validator function has already return a promise. `callback` will be ignored."),y||b.apply(void 0,C)})},N=x(p,f,v);y=N&&typeof N.then=="function"&&typeof N.catch=="function",_a(y,"`callback` is deprecated. Please return a promise instead."),y&&N.then(function(){b()}).catch(function(S){b(S||" ")})}),g}).sort(function(d,m){var x=d.warningOnly,g=d.ruleIndex,p=m.warningOnly,f=m.ruleIndex;return!!x==!!p?g-f:x?1:-1}),c;if(n===!0)c=new Promise(function(){var d=Ro(ja().mark(function m(x,g){var p,f,b;return ja().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:p=0;case 1:if(!(p<o.length)){v.next=12;break}return f=o[p],v.next=5,Zp(l,s,f,a,i);case 5:if(b=v.sent,!b.length){v.next=9;break}return g([{errors:b,rule:f}]),v.abrupt("return");case 9:p+=1,v.next=1;break;case 12:x([]);case 13:case"end":return v.stop()}},m)}));return function(m,x){return d.apply(this,arguments)}}());else{var u=o.map(function(d){return Zp(l,s,d,a,i).then(function(m){return{errors:m,rule:d}})});c=(n?ise(u):nse(u)).then(function(d){return Promise.reject(d)})}return c.catch(function(d){return d}),c}function nse(t){return tb.apply(this,arguments)}function tb(){return tb=Ro(ja().mark(function t(s){return ja().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(s).then(function(n){var i,l=(i=[]).concat.apply(i,rt(n));return l}));case 1:case"end":return a.stop()}},t)})),tb.apply(this,arguments)}function ise(t){return sb.apply(this,arguments)}function sb(){return sb=Ro(ja().mark(function t(s){var r;return ja().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=0,n.abrupt("return",new Promise(function(i){s.forEach(function(l){l.then(function(o){o.errors.length&&i([o]),r+=1,r===s.length&&i([])})})}));case 2:case"end":return n.stop()}},t)})),sb.apply(this,arguments)}function ur(t){return Yp(t)}function f1(t,s){var r={};return s.forEach(function(a){var n=li(t,a);r=_n(r,a,n)}),r}function gc(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(a){return y3(s,a,r)})}function y3(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!s||!r&&t.length!==s.length?!1:s.every(function(a,n){return t[n]===a})}function lse(t,s){if(t===s)return!0;if(!t&&s||t&&!s||!t||!s||At(t)!=="object"||At(s)!=="object")return!1;var r=Object.keys(t),a=Object.keys(s),n=new Set([].concat(r,a));return rt(n).every(function(i){var l=t[i],o=s[i];return typeof l=="function"&&typeof o=="function"?!0:l===o})}function ose(t){var s=arguments.length<=1?void 0:arguments[1];return s&&s.target&&At(s.target)==="object"&&t in s.target?s.target[t]:s}function g1(t,s,r){var a=t.length;if(s<0||s>=a||r<0||r>=a)return t;var n=t[s],i=s-r;return i>0?[].concat(rt(t.slice(0,r)),[n],rt(t.slice(r,s)),rt(t.slice(s+1,a))):i<0?[].concat(rt(t.slice(0,s)),rt(t.slice(s+1,r+1)),[n],rt(t.slice(r+1,a))):t}var cse=["name"],dn=[];function ng(t,s,r,a,n,i){return typeof t=="function"?t(s,r,"source"in i?{source:i.source}:{}):a!==n}var yv=function(t){zi(r,t);var s=Gi(r);function r(a){var n;if(Rr(this,r),n=s.call(this,a),de(Ut(n),"state",{resetCount:0}),de(Ut(n),"cancelRegisterFunc",null),de(Ut(n),"mounted",!1),de(Ut(n),"touched",!1),de(Ut(n),"dirty",!1),de(Ut(n),"validatePromise",void 0),de(Ut(n),"prevValidating",void 0),de(Ut(n),"errors",dn),de(Ut(n),"warnings",dn),de(Ut(n),"cancelRegister",function(){var c=n.props,u=c.preserve,d=c.isListField,m=c.name;n.cancelRegisterFunc&&n.cancelRegisterFunc(d,u,ur(m)),n.cancelRegisterFunc=null}),de(Ut(n),"getNamePath",function(){var c=n.props,u=c.name,d=c.fieldContext,m=d.prefixName,x=m===void 0?[]:m;return u!==void 0?[].concat(rt(x),rt(u)):[]}),de(Ut(n),"getRules",function(){var c=n.props,u=c.rules,d=u===void 0?[]:u,m=c.fieldContext;return d.map(function(x){return typeof x=="function"?x(m):x})}),de(Ut(n),"refresh",function(){n.mounted&&n.setState(function(c){var u=c.resetCount;return{resetCount:u+1}})}),de(Ut(n),"metaCache",null),de(Ut(n),"triggerMetaEvent",function(c){var u=n.props.onMetaChange;if(u){var d=pe(pe({},n.getMeta()),{},{destroy:c});Su(n.metaCache,d)||u(d),n.metaCache=d}else n.metaCache=null}),de(Ut(n),"onStoreChange",function(c,u,d){var m=n.props,x=m.shouldUpdate,g=m.dependencies,p=g===void 0?[]:g,f=m.onReset,b=d.store,y=n.getNamePath(),v=n.getValue(c),N=n.getValue(b),S=u&&gc(u,y);switch(d.type==="valueUpdate"&&d.source==="external"&&!Su(v,N)&&(n.touched=!0,n.dirty=!0,n.validatePromise=null,n.errors=dn,n.warnings=dn,n.triggerMetaEvent()),d.type){case"reset":if(!u||S){n.touched=!1,n.dirty=!1,n.validatePromise=void 0,n.errors=dn,n.warnings=dn,n.triggerMetaEvent(),f==null||f(),n.refresh();return}break;case"remove":{if(x&&ng(x,c,b,v,N,d)){n.reRender();return}break}case"setField":{var w=d.data;if(S){"touched"in w&&(n.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(n.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(n.errors=w.errors||dn),"warnings"in w&&(n.warnings=w.warnings||dn),n.dirty=!0,n.triggerMetaEvent(),n.reRender();return}else if("value"in w&&gc(u,y,!0)){n.reRender();return}if(x&&!y.length&&ng(x,c,b,v,N,d)){n.reRender();return}break}case"dependenciesUpdate":{var C=p.map(ur);if(C.some(function(j){return gc(d.relatedFields,j)})){n.reRender();return}break}default:if(S||(!p.length||y.length||x)&&ng(x,c,b,v,N,d)){n.reRender();return}break}x===!0&&n.reRender()}),de(Ut(n),"validateRules",function(c){var u=n.getNamePath(),d=n.getValue(),m=c||{},x=m.triggerName,g=m.validateOnly,p=g===void 0?!1:g,f=Promise.resolve().then(Ro(ja().mark(function b(){var y,v,N,S,w,C,j;return ja().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(n.mounted){E.next=2;break}return E.abrupt("return",[]);case 2:if(y=n.props,v=y.validateFirst,N=v===void 0?!1:v,S=y.messageVariables,w=y.validateDebounce,C=n.getRules(),x&&(C=C.filter(function(R){return R}).filter(function(R){var D=R.validateTrigger;if(!D)return!0;var P=Yp(D);return P.includes(x)})),!(w&&x)){E.next=10;break}return E.next=8,new Promise(function(R){setTimeout(R,w)});case 8:if(n.validatePromise===f){E.next=10;break}return E.abrupt("return",[]);case 10:return j=ase(u,d,C,c,N,S),j.catch(function(R){return R}).then(function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dn;if(n.validatePromise===f){var D;n.validatePromise=null;var P=[],T=[];(D=R.forEach)===null||D===void 0||D.call(R,function(B){var F=B.rule.warningOnly,L=B.errors,I=L===void 0?dn:L;F?T.push.apply(T,rt(I)):P.push.apply(P,rt(I))}),n.errors=P,n.warnings=T,n.triggerMetaEvent(),n.reRender()}}),E.abrupt("return",j);case 13:case"end":return E.stop()}},b)})));return p||(n.validatePromise=f,n.dirty=!0,n.errors=dn,n.warnings=dn,n.triggerMetaEvent(),n.reRender()),f}),de(Ut(n),"isFieldValidating",function(){return!!n.validatePromise}),de(Ut(n),"isFieldTouched",function(){return n.touched}),de(Ut(n),"isFieldDirty",function(){if(n.dirty||n.props.initialValue!==void 0)return!0;var c=n.props.fieldContext,u=c.getInternalHooks(Xl),d=u.getInitialValue;return d(n.getNamePath())!==void 0}),de(Ut(n),"getErrors",function(){return n.errors}),de(Ut(n),"getWarnings",function(){return n.warnings}),de(Ut(n),"isListField",function(){return n.props.isListField}),de(Ut(n),"isList",function(){return n.props.isList}),de(Ut(n),"isPreserve",function(){return n.props.preserve}),de(Ut(n),"getMeta",function(){n.prevValidating=n.isFieldValidating();var c={touched:n.isFieldTouched(),validating:n.prevValidating,errors:n.errors,warnings:n.warnings,name:n.getNamePath(),validated:n.validatePromise===null};return c}),de(Ut(n),"getOnlyChild",function(c){if(typeof c=="function"){var u=n.getMeta();return pe(pe({},n.getOnlyChild(c(n.getControlled(),u,n.props.fieldContext))),{},{isFunction:!0})}var d=Sl(c);return d.length!==1||!h.isValidElement(d[0])?{child:d,isFunction:!1}:{child:d[0],isFunction:!1}}),de(Ut(n),"getValue",function(c){var u=n.props.fieldContext.getFieldsValue,d=n.getNamePath();return li(c||u(!0),d)}),de(Ut(n),"getControlled",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=n.props,d=u.name,m=u.trigger,x=u.validateTrigger,g=u.getValueFromEvent,p=u.normalize,f=u.valuePropName,b=u.getValueProps,y=u.fieldContext,v=x!==void 0?x:y.validateTrigger,N=n.getNamePath(),S=y.getInternalHooks,w=y.getFieldsValue,C=S(Xl),j=C.dispatch,k=n.getValue(),E=b||function(B){return de({},f,B)},R=c[m],D=d!==void 0?E(k):{},P=pe(pe({},c),D);P[m]=function(){n.touched=!0,n.dirty=!0,n.triggerMetaEvent();for(var B,F=arguments.length,L=new Array(F),I=0;I<F;I++)L[I]=arguments[I];g?B=g.apply(void 0,L):B=ose.apply(void 0,[f].concat(L)),p&&(B=p(B,k,w(!0))),B!==k&&j({type:"updateValue",namePath:N,value:B}),R&&R.apply(void 0,L)};var T=Yp(v||[]);return T.forEach(function(B){var F=P[B];P[B]=function(){F&&F.apply(void 0,arguments);var L=n.props.rules;L&&L.length&&j({type:"validateField",namePath:N,triggerName:B})}}),P}),a.fieldContext){var i=a.fieldContext.getInternalHooks,l=i(Xl),o=l.initEntityValue;o(Ut(n))}return n}return Fr(r,[{key:"componentDidMount",value:function(){var n=this.props,i=n.shouldUpdate,l=n.fieldContext;if(this.mounted=!0,l){var o=l.getInternalHooks,c=o(Xl),u=c.registerField;this.cancelRegisterFunc=u(this)}i===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var n=this.state.resetCount,i=this.props.children,l=this.getOnlyChild(i),o=l.child,c=l.isFunction,u;return c?u=o:h.isValidElement(o)?u=h.cloneElement(o,this.getControlled(o.props)):(_a(!o,"`children` of Field is not validate ReactElement."),u=o),h.createElement(h.Fragment,{key:n},u)}}]),r}(h.Component);de(yv,"contextType",Rc);de(yv,"defaultProps",{trigger:"onChange",valuePropName:"value"});function v3(t){var s,r=t.name,a=js(t,cse),n=h.useContext(Rc),i=h.useContext(mx),l=r!==void 0?ur(r):void 0,o=(s=a.isListField)!==null&&s!==void 0?s:!!i,c="keep";return o||(c="_".concat((l||[]).join("_"))),h.createElement(yv,Gt({key:c,name:l,isListField:o},a,{fieldContext:n}))}function dse(t){var s=t.name,r=t.initialValue,a=t.children,n=t.rules,i=t.validateTrigger,l=t.isListField,o=h.useContext(Rc),c=h.useContext(mx),u=h.useRef({keys:[],id:0}),d=u.current,m=h.useMemo(function(){var f=ur(o.prefixName)||[];return[].concat(rt(f),rt(ur(s)))},[o.prefixName,s]),x=h.useMemo(function(){return pe(pe({},o),{},{prefixName:m})},[o,m]),g=h.useMemo(function(){return{getKey:function(b){var y=m.length,v=b[y];return[d.keys[v],b.slice(y+1)]}}},[m]);if(typeof a!="function")return _a(!1,"Form.List only accepts function as children."),null;var p=function(b,y,v){var N=v.source;return N==="internal"?!1:b!==y};return h.createElement(mx.Provider,{value:g},h.createElement(Rc.Provider,{value:x},h.createElement(v3,{name:[],shouldUpdate:p,rules:n,validateTrigger:i,initialValue:r,isList:!0,isListField:l??!!c},function(f,b){var y=f.value,v=y===void 0?[]:y,N=f.onChange,S=o.getFieldValue,w=function(){var E=S(m||[]);return E||[]},C={add:function(E,R){var D=w();R>=0&&R<=D.length?(d.keys=[].concat(rt(d.keys.slice(0,R)),[d.id],rt(d.keys.slice(R))),N([].concat(rt(D.slice(0,R)),[E],rt(D.slice(R))))):(d.keys=[].concat(rt(d.keys),[d.id]),N([].concat(rt(D),[E]))),d.id+=1},remove:function(E){var R=w(),D=new Set(Array.isArray(E)?E:[E]);D.size<=0||(d.keys=d.keys.filter(function(P,T){return!D.has(T)}),N(R.filter(function(P,T){return!D.has(T)})))},move:function(E,R){if(E!==R){var D=w();E<0||E>=D.length||R<0||R>=D.length||(d.keys=g1(d.keys,E,R),N(g1(D,E,R)))}}},j=v||[];return Array.isArray(j)||(j=[]),a(j.map(function(k,E){var R=d.keys[E];return R===void 0&&(d.keys[E]=d.id,R=d.keys[E],d.id+=1),{name:E,key:R,isListField:!0}}),C,b)})))}function use(t){var s=!1,r=t.length,a=[];return t.length?new Promise(function(n,i){t.forEach(function(l,o){l.catch(function(c){return s=!0,c}).then(function(c){r-=1,a[o]=c,!(r>0)&&(s&&i(a),n(a))})})}):Promise.resolve([])}var j3="__@field_split__";function ig(t){return t.map(function(s){return"".concat(At(s),":").concat(s)}).join(j3)}var Go=function(){function t(){Rr(this,t),de(this,"kvs",new Map)}return Fr(t,[{key:"set",value:function(r,a){this.kvs.set(ig(r),a)}},{key:"get",value:function(r){return this.kvs.get(ig(r))}},{key:"update",value:function(r,a){var n=this.get(r),i=a(n);i?this.set(r,i):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(ig(r))}},{key:"map",value:function(r){return rt(this.kvs.entries()).map(function(a){var n=Oe(a,2),i=n[0],l=n[1],o=i.split(j3);return r({key:o.map(function(c){var u=c.match(/^([^:]*):(.*)$/),d=Oe(u,3),m=d[1],x=d[2];return m==="number"?Number(x):x}),value:l})})}},{key:"toJSON",value:function(){var r={};return this.map(function(a){var n=a.key,i=a.value;return r[n.join(".")]=i,null}),r}}]),t}(),mse=["name"],xse=Fr(function t(s){var r=this;Rr(this,t),de(this,"formHooked",!1),de(this,"forceRootUpdate",void 0),de(this,"subscribable",!0),de(this,"store",{}),de(this,"fieldEntities",[]),de(this,"initialValues",{}),de(this,"callbacks",{}),de(this,"validateMessages",null),de(this,"preserve",null),de(this,"lastValidatePromise",null),de(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),de(this,"getInternalHooks",function(a){return a===Xl?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(_a(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),de(this,"useSubscribe",function(a){r.subscribable=a}),de(this,"prevWithoutPreserves",null),de(this,"setInitialValues",function(a,n){if(r.initialValues=a||{},n){var i,l=sc(a,r.store);(i=r.prevWithoutPreserves)===null||i===void 0||i.map(function(o){var c=o.key;l=_n(l,c,li(a,c))}),r.prevWithoutPreserves=null,r.updateStore(l)}}),de(this,"destroyForm",function(a){if(a)r.updateStore({});else{var n=new Go;r.getFieldEntities(!0).forEach(function(i){r.isMergedPreserve(i.isPreserve())||n.set(i.getNamePath(),!0)}),r.prevWithoutPreserves=n}}),de(this,"getInitialValue",function(a){var n=li(r.initialValues,a);return a.length?sc(n):n}),de(this,"setCallbacks",function(a){r.callbacks=a}),de(this,"setValidateMessages",function(a){r.validateMessages=a}),de(this,"setPreserve",function(a){r.preserve=a}),de(this,"watchList",[]),de(this,"registerWatch",function(a){return r.watchList.push(a),function(){r.watchList=r.watchList.filter(function(n){return n!==a})}}),de(this,"notifyWatch",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var n=r.getFieldsValue(),i=r.getFieldsValue(!0);r.watchList.forEach(function(l){l(n,i,a)})}}),de(this,"timeoutId",null),de(this,"warningUnhooked",function(){}),de(this,"updateStore",function(a){r.store=a}),de(this,"getFieldEntities",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?r.fieldEntities.filter(function(n){return n.getNamePath().length}):r.fieldEntities}),de(this,"getFieldsMap",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=new Go;return r.getFieldEntities(a).forEach(function(i){var l=i.getNamePath();n.set(l,i)}),n}),de(this,"getFieldEntitiesForNamePathList",function(a){if(!a)return r.getFieldEntities(!0);var n=r.getFieldsMap(!0);return a.map(function(i){var l=ur(i);return n.get(l)||{INVALIDATE_NAME_PATH:ur(i)}})}),de(this,"getFieldsValue",function(a,n){r.warningUnhooked();var i,l,o;if(a===!0||Array.isArray(a)?(i=a,l=n):a&&At(a)==="object"&&(o=a.strict,l=a.filter),i===!0&&!l)return r.store;var c=r.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null),u=[];return c.forEach(function(d){var m,x,g="INVALIDATE_NAME_PATH"in d?d.INVALIDATE_NAME_PATH:d.getNamePath();if(o){var p,f;if((p=(f=d).isList)!==null&&p!==void 0&&p.call(f))return}else if(!i&&(m=(x=d).isListField)!==null&&m!==void 0&&m.call(x))return;if(!l)u.push(g);else{var b="getMeta"in d?d.getMeta():null;l(b)&&u.push(g)}}),f1(r.store,u.map(ur))}),de(this,"getFieldValue",function(a){r.warningUnhooked();var n=ur(a);return li(r.store,n)}),de(this,"getFieldsError",function(a){r.warningUnhooked();var n=r.getFieldEntitiesForNamePathList(a);return n.map(function(i,l){return i&&!("INVALIDATE_NAME_PATH"in i)?{name:i.getNamePath(),errors:i.getErrors(),warnings:i.getWarnings()}:{name:ur(a[l]),errors:[],warnings:[]}})}),de(this,"getFieldError",function(a){r.warningUnhooked();var n=ur(a),i=r.getFieldsError([n])[0];return i.errors}),de(this,"getFieldWarning",function(a){r.warningUnhooked();var n=ur(a),i=r.getFieldsError([n])[0];return i.warnings}),de(this,"isFieldsTouched",function(){r.warningUnhooked();for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];var l=n[0],o=n[1],c,u=!1;n.length===0?c=null:n.length===1?Array.isArray(l)?(c=l.map(ur),u=!1):(c=null,u=l):(c=l.map(ur),u=o);var d=r.getFieldEntities(!0),m=function(b){return b.isFieldTouched()};if(!c)return u?d.every(function(f){return m(f)||f.isList()}):d.some(m);var x=new Go;c.forEach(function(f){x.set(f,[])}),d.forEach(function(f){var b=f.getNamePath();c.forEach(function(y){y.every(function(v,N){return b[N]===v})&&x.update(y,function(v){return[].concat(rt(v),[f])})})});var g=function(b){return b.some(m)},p=x.map(function(f){var b=f.value;return b});return u?p.every(g):p.some(g)}),de(this,"isFieldTouched",function(a){return r.warningUnhooked(),r.isFieldsTouched([a])}),de(this,"isFieldsValidating",function(a){r.warningUnhooked();var n=r.getFieldEntities();if(!a)return n.some(function(l){return l.isFieldValidating()});var i=a.map(ur);return n.some(function(l){var o=l.getNamePath();return gc(i,o)&&l.isFieldValidating()})}),de(this,"isFieldValidating",function(a){return r.warningUnhooked(),r.isFieldsValidating([a])}),de(this,"resetWithFieldInitialValue",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=new Go,i=r.getFieldEntities(!0);i.forEach(function(c){var u=c.props.initialValue,d=c.getNamePath();if(u!==void 0){var m=n.get(d)||new Set;m.add({entity:c,value:u}),n.set(d,m)}});var l=function(u){u.forEach(function(d){var m=d.props.initialValue;if(m!==void 0){var x=d.getNamePath(),g=r.getInitialValue(x);if(g!==void 0)_a(!1,"Form already set 'initialValues' with path '".concat(x.join("."),"'. Field can not overwrite it."));else{var p=n.get(x);if(p&&p.size>1)_a(!1,"Multiple Field with path '".concat(x.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(p){var f=r.getFieldValue(x),b=d.isListField();!b&&(!a.skipExist||f===void 0)&&r.updateStore(_n(r.store,x,rt(p)[0].value))}}}})},o;a.entities?o=a.entities:a.namePathList?(o=[],a.namePathList.forEach(function(c){var u=n.get(c);if(u){var d;(d=o).push.apply(d,rt(rt(u).map(function(m){return m.entity})))}})):o=i,l(o)}),de(this,"resetFields",function(a){r.warningUnhooked();var n=r.store;if(!a){r.updateStore(sc(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(n,null,{type:"reset"}),r.notifyWatch();return}var i=a.map(ur);i.forEach(function(l){var o=r.getInitialValue(l);r.updateStore(_n(r.store,l,o))}),r.resetWithFieldInitialValue({namePathList:i}),r.notifyObservers(n,i,{type:"reset"}),r.notifyWatch(i)}),de(this,"setFields",function(a){r.warningUnhooked();var n=r.store,i=[];a.forEach(function(l){var o=l.name,c=js(l,mse),u=ur(o);i.push(u),"value"in c&&r.updateStore(_n(r.store,u,c.value)),r.notifyObservers(n,[u],{type:"setField",data:l})}),r.notifyWatch(i)}),de(this,"getFields",function(){var a=r.getFieldEntities(!0),n=a.map(function(i){var l=i.getNamePath(),o=i.getMeta(),c=pe(pe({},o),{},{name:l,value:r.getFieldValue(l)});return Object.defineProperty(c,"originRCField",{value:!0}),c});return n}),de(this,"initEntityValue",function(a){var n=a.props.initialValue;if(n!==void 0){var i=a.getNamePath(),l=li(r.store,i);l===void 0&&r.updateStore(_n(r.store,i,n))}}),de(this,"isMergedPreserve",function(a){var n=a!==void 0?a:r.preserve;return n??!0}),de(this,"registerField",function(a){r.fieldEntities.push(a);var n=a.getNamePath();if(r.notifyWatch([n]),a.props.initialValue!==void 0){var i=r.store;r.resetWithFieldInitialValue({entities:[a],skipExist:!0}),r.notifyObservers(i,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(l,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(m){return m!==a}),!r.isMergedPreserve(o)&&(!l||c.length>1)){var u=l?void 0:r.getInitialValue(n);if(n.length&&r.getFieldValue(n)!==u&&r.fieldEntities.every(function(m){return!y3(m.getNamePath(),n)})){var d=r.store;r.updateStore(_n(d,n,u,!0)),r.notifyObservers(d,[n],{type:"remove"}),r.triggerDependenciesUpdate(d,n)}}r.notifyWatch([n])}}),de(this,"dispatch",function(a){switch(a.type){case"updateValue":{var n=a.namePath,i=a.value;r.updateValue(n,i);break}case"validateField":{var l=a.namePath,o=a.triggerName;r.validateFields([l],{triggerName:o});break}}}),de(this,"notifyObservers",function(a,n,i){if(r.subscribable){var l=pe(pe({},i),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(o){var c=o.onStoreChange;c(a,n,l)})}else r.forceRootUpdate()}),de(this,"triggerDependenciesUpdate",function(a,n){var i=r.getDependencyChildrenFields(n);return i.length&&r.validateFields(i),r.notifyObservers(a,i,{type:"dependenciesUpdate",relatedFields:[n].concat(rt(i))}),i}),de(this,"updateValue",function(a,n){var i=ur(a),l=r.store;r.updateStore(_n(r.store,i,n)),r.notifyObservers(l,[i],{type:"valueUpdate",source:"internal"}),r.notifyWatch([i]);var o=r.triggerDependenciesUpdate(l,i),c=r.callbacks.onValuesChange;if(c){var u=f1(r.store,[i]);c(u,r.getFieldsValue())}r.triggerOnFieldsChange([i].concat(rt(o)))}),de(this,"setFieldsValue",function(a){r.warningUnhooked();var n=r.store;if(a){var i=sc(r.store,a);r.updateStore(i)}r.notifyObservers(n,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),de(this,"setFieldValue",function(a,n){r.setFields([{name:a,value:n,errors:[],warnings:[]}])}),de(this,"getDependencyChildrenFields",function(a){var n=new Set,i=[],l=new Go;r.getFieldEntities().forEach(function(c){var u=c.props.dependencies;(u||[]).forEach(function(d){var m=ur(d);l.update(m,function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return x.add(c),x})})});var o=function c(u){var d=l.get(u)||new Set;d.forEach(function(m){if(!n.has(m)){n.add(m);var x=m.getNamePath();m.isFieldDirty()&&x.length&&(i.push(x),c(x))}})};return o(a),i}),de(this,"triggerOnFieldsChange",function(a,n){var i=r.callbacks.onFieldsChange;if(i){var l=r.getFields();if(n){var o=new Go;n.forEach(function(u){var d=u.name,m=u.errors;o.set(d,m)}),l.forEach(function(u){u.errors=o.get(u.name)||u.errors})}var c=l.filter(function(u){var d=u.name;return gc(a,d)});c.length&&i(c,l)}}),de(this,"validateFields",function(a,n){r.warningUnhooked();var i,l;Array.isArray(a)||typeof a=="string"||typeof n=="string"?(i=a,l=n):l=a;var o=!!i,c=o?i.map(ur):[],u=[],d=String(Date.now()),m=new Set,x=l||{},g=x.recursive,p=x.dirty;r.getFieldEntities(!0).forEach(function(v){if(o||c.push(v.getNamePath()),!(!v.props.rules||!v.props.rules.length)&&!(p&&!v.isFieldDirty())){var N=v.getNamePath();if(m.add(N.join(d)),!o||gc(c,N,g)){var S=v.validateRules(pe({validateMessages:pe(pe({},b3),r.validateMessages)},l));u.push(S.then(function(){return{name:N,errors:[],warnings:[]}}).catch(function(w){var C,j=[],k=[];return(C=w.forEach)===null||C===void 0||C.call(w,function(E){var R=E.rule.warningOnly,D=E.errors;R?k.push.apply(k,rt(D)):j.push.apply(j,rt(D))}),j.length?Promise.reject({name:N,errors:j,warnings:k}):{name:N,errors:j,warnings:k}}))}}});var f=use(u);r.lastValidatePromise=f,f.catch(function(v){return v}).then(function(v){var N=v.map(function(S){var w=S.name;return w});r.notifyObservers(r.store,N,{type:"validateFinish"}),r.triggerOnFieldsChange(N,v)});var b=f.then(function(){return r.lastValidatePromise===f?Promise.resolve(r.getFieldsValue(c)):Promise.reject([])}).catch(function(v){var N=v.filter(function(S){return S&&S.errors.length});return Promise.reject({values:r.getFieldsValue(c),errorFields:N,outOfDate:r.lastValidatePromise!==f})});b.catch(function(v){return v});var y=c.filter(function(v){return m.has(v.join(d))});return r.triggerOnFieldsChange(y),b}),de(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(a){var n=r.callbacks.onFinish;if(n)try{n(a)}catch(i){console.error(i)}}).catch(function(a){var n=r.callbacks.onFinishFailed;n&&n(a)})}),this.forceRootUpdate=s});function w3(t){var s=h.useRef(),r=h.useState({}),a=Oe(r,2),n=a[1];if(!s.current)if(t)s.current=t;else{var i=function(){n({})},l=new xse(i);s.current=l.getForm()}return[s.current]}var rb=h.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),hse=function(s){var r=s.validateMessages,a=s.onFormChange,n=s.onFormFinish,i=s.children,l=h.useContext(rb),o=h.useRef({});return h.createElement(rb.Provider,{value:pe(pe({},l),{},{validateMessages:pe(pe({},l.validateMessages),r),triggerFormChange:function(u,d){a&&a(u,{changedFields:d,forms:o.current}),l.triggerFormChange(u,d)},triggerFormFinish:function(u,d){n&&n(u,{values:d,forms:o.current}),l.triggerFormFinish(u,d)},registerForm:function(u,d){u&&(o.current=pe(pe({},o.current),{},de({},u,d))),l.registerForm(u,d)},unregisterForm:function(u){var d=pe({},o.current);delete d[u],o.current=d,l.unregisterForm(u)}})},i)},fse=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],gse=function(s,r){var a=s.name,n=s.initialValues,i=s.fields,l=s.form,o=s.preserve,c=s.children,u=s.component,d=u===void 0?"form":u,m=s.validateMessages,x=s.validateTrigger,g=x===void 0?"onChange":x,p=s.onValuesChange,f=s.onFieldsChange,b=s.onFinish,y=s.onFinishFailed,v=s.clearOnDestroy,N=js(s,fse),S=h.useRef(null),w=h.useContext(rb),C=w3(l),j=Oe(C,1),k=j[0],E=k.getInternalHooks(Xl),R=E.useSubscribe,D=E.setInitialValues,P=E.setCallbacks,T=E.setValidateMessages,B=E.setPreserve,F=E.destroyForm;h.useImperativeHandle(r,function(){return pe(pe({},k),{},{nativeElement:S.current})}),h.useEffect(function(){return w.registerForm(a,k),function(){w.unregisterForm(a)}},[w,k,a]),T(pe(pe({},w.validateMessages),m)),P({onValuesChange:p,onFieldsChange:function(Y){if(w.triggerFormChange(a,Y),f){for(var O=arguments.length,W=new Array(O>1?O-1:0),z=1;z<O;z++)W[z-1]=arguments[z];f.apply(void 0,[Y].concat(W))}},onFinish:function(Y){w.triggerFormFinish(a,Y),b&&b(Y)},onFinishFailed:y}),B(o);var L=h.useRef(null);D(n,!L.current),L.current||(L.current=!0),h.useEffect(function(){return function(){return F(v)}},[]);var I,V=typeof c=="function";if(V){var _=k.getFieldsValue(!0);I=c(_,k)}else I=c;R(!V);var G=h.useRef();h.useEffect(function(){lse(G.current||[],i||[])||k.setFields(i||[]),G.current=i},[i,k]);var U=h.useMemo(function(){return pe(pe({},k),{},{validateTrigger:g})},[k,g]),A=h.createElement(mx.Provider,{value:null},h.createElement(Rc.Provider,{value:U},I));return d===!1?A:h.createElement(d,Gt({},N,{ref:S,onSubmit:function(Y){Y.preventDefault(),Y.stopPropagation(),k.submit()},onReset:function(Y){var O;Y.preventDefault(),k.resetFields(),(O=N.onReset)===null||O===void 0||O.call(N,Y)}}),A)};function p1(t){try{return JSON.stringify(t)}catch{return Math.random()}}function pse(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];var a=s[0],n=s[1],i=n===void 0?{}:n,l=Cte(i)?{form:i}:i,o=l.form,c=h.useState(),u=Oe(c,2),d=u[0],m=u[1],x=h.useMemo(function(){return p1(d)},[d]),g=h.useRef(x);g.current=x;var p=h.useContext(Rc),f=o||p,b=f&&f._init,y=ur(a),v=h.useRef(y);return v.current=y,h.useEffect(function(){if(b){var N=f.getFieldsValue,S=f.getInternalHooks,w=S(Xl),C=w.registerWatch,j=function(D,P){var T=l.preserve?P:D;return typeof a=="function"?a(T):li(T,v.current)},k=C(function(R,D){var P=j(R,D),T=p1(P);g.current!==T&&(g.current=T,m(P))}),E=j(N(),N(!0));return d!==E&&m(E),k}},[b]),d}var bse=h.forwardRef(gse),lm=bse;lm.FormProvider=hse;lm.Field=v3;lm.List=dse;lm.useForm=w3;lm.useWatch=pse;const b1=h.createContext({}),yse=({children:t,status:s,override:r})=>{const a=h.useContext(b1),n=h.useMemo(()=>{const i=Object.assign({},a);return r&&delete i.isFormItemInput,s&&(delete i.status,delete i.hasFeedback,delete i.feedbackIcon),i},[s,r,a]);return h.createElement(b1.Provider,{value:n},t)},N3=t=>{const{space:s,form:r,children:a}=t;if(a==null)return null;let n=a;return r&&(n=Ke.createElement(yse,{override:!0,status:!0},n)),s&&(n=Ke.createElement(qZ,null,n)),n};function vse(t){return s=>h.createElement(sd,{theme:{token:{motion:!1,zIndexPopupBase:0}}},h.createElement(t,Object.assign({},s)))}const jse=(t,s,r,a,n)=>vse(l=>{const{prefixCls:o,style:c}=l,u=h.useRef(null),[d,m]=h.useState(0),[x,g]=h.useState(0),[p,f]=ao(!1,{value:l.open}),{getPrefixCls:b}=h.useContext(Vr),y=b(a,o);h.useEffect(()=>{if(f(!0),typeof ResizeObserver<"u"){const S=new ResizeObserver(C=>{const j=C[0].target;m(j.offsetHeight+8),g(j.offsetWidth)}),w=setInterval(()=>{var C;const j=n?`.${n(y)}`:`.${y}-dropdown`,k=(C=u.current)===null||C===void 0?void 0:C.querySelector(j);k&&(clearInterval(w),S.observe(k))},10);return()=>{clearInterval(w),S.disconnect()}}},[]);let v=Object.assign(Object.assign({},l),{style:Object.assign(Object.assign({},c),{margin:0}),open:p,visible:p,getPopupContainer:()=>u.current});Object.assign(v,{[s]:{overflow:{adjustX:!1,adjustY:!1}}});const N={paddingBottom:d,position:"relative",minWidth:x};return h.createElement("div",{ref:u,style:N},h.createElement(t,Object.assign({},v)))}),wse=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var Nse=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],qo=void 0;function Sse(t,s){var r=t.prefixCls,a=t.invalidate,n=t.item,i=t.renderItem,l=t.responsive,o=t.responsiveDisabled,c=t.registerSize,u=t.itemKey,d=t.className,m=t.style,x=t.children,g=t.display,p=t.order,f=t.component,b=f===void 0?"div":f,y=js(t,Nse),v=l&&!g;function N(k){c(u,k)}h.useEffect(function(){return function(){N(null)}},[]);var S=i&&n!==qo?i(n,{index:p}):x,w;a||(w={opacity:v?0:1,height:v?0:qo,overflowY:v?"hidden":qo,order:l?p:qo,pointerEvents:v?"none":qo,position:v?"absolute":qo});var C={};v&&(C["aria-hidden"]=!0);var j=h.createElement(b,Gt({className:dt(!a&&r,d),style:pe(pe({},w),m)},C,y,{ref:s}),S);return l&&(j=h.createElement(sm,{onResize:function(E){var R=E.offsetWidth;N(R)},disabled:o},j)),j}var Kd=h.forwardRef(Sse);Kd.displayName="Item";function Cse(t){if(typeof MessageChannel>"u")La(t);else{var s=new MessageChannel;s.port1.onmessage=function(){return t()},s.port2.postMessage(void 0)}}function kse(){var t=h.useRef(null),s=function(a){t.current||(t.current=[],Cse(function(){Cl.unstable_batchedUpdates(function(){t.current.forEach(function(n){n()}),t.current=null})})),t.current.push(a)};return s}function yd(t,s){var r=h.useState(s),a=Oe(r,2),n=a[0],i=a[1],l=Zr(function(o){t(function(){i(o)})});return[n,l]}var xx=Ke.createContext(null),Ese=["component"],Pse=["className"],Tse=["className"],_se=function(s,r){var a=h.useContext(xx);if(!a){var n=s.component,i=n===void 0?"div":n,l=js(s,Ese);return h.createElement(i,Gt({},l,{ref:r}))}var o=a.className,c=js(a,Pse),u=s.className,d=js(s,Tse);return h.createElement(xx.Provider,{value:null},h.createElement(Kd,Gt({ref:r,className:dt(o,u)},c,d)))},S3=h.forwardRef(_se);S3.displayName="RawItem";var Ase=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],C3="responsive",k3="invalidate";function Rse(t){return"+ ".concat(t.length," ...")}function Fse(t,s){var r=t.prefixCls,a=r===void 0?"rc-overflow":r,n=t.data,i=n===void 0?[]:n,l=t.renderItem,o=t.renderRawItem,c=t.itemKey,u=t.itemWidth,d=u===void 0?10:u,m=t.ssr,x=t.style,g=t.className,p=t.maxCount,f=t.renderRest,b=t.renderRawRest,y=t.suffix,v=t.component,N=v===void 0?"div":v,S=t.itemComponent,w=t.onVisibleChange,C=js(t,Ase),j=m==="full",k=kse(),E=yd(k,null),R=Oe(E,2),D=R[0],P=R[1],T=D||0,B=yd(k,new Map),F=Oe(B,2),L=F[0],I=F[1],V=yd(k,0),_=Oe(V,2),G=_[0],U=_[1],A=yd(k,0),q=Oe(A,2),Y=q[0],O=q[1],W=yd(k,0),z=Oe(W,2),H=z[0],Q=z[1],J=h.useState(null),ie=Oe(J,2),K=ie[0],oe=ie[1],le=h.useState(null),Se=Oe(le,2),Ee=Se[0],ye=Se[1],We=h.useMemo(function(){return Ee===null&&j?Number.MAX_SAFE_INTEGER:Ee||0},[Ee,D]),fe=h.useState(!1),Fe=Oe(fe,2),ce=Fe[0],Ce=Fe[1],ze="".concat(a,"-item"),De=Math.max(G,Y),st=p===C3,Xe=i.length&&st,it=p===k3,ft=Xe||typeof p=="number"&&i.length>p,be=h.useMemo(function(){var at=i;return Xe?D===null&&j?at=i:at=i.slice(0,Math.min(i.length,T/d)):typeof p=="number"&&(at=i.slice(0,p)),at},[i,d,D,p,Xe]),Pe=h.useMemo(function(){return Xe?i.slice(We+1):i.slice(be.length)},[i,be,Xe,We]),ee=h.useCallback(function(at,pt){var tt;return typeof c=="function"?c(at):(tt=c&&(at==null?void 0:at[c]))!==null&&tt!==void 0?tt:pt},[c]),me=h.useCallback(l||function(at){return at},[l]);function Te(at,pt,tt){Ee===at&&(pt===void 0||pt===K)||(ye(at),tt||(Ce(at<i.length-1),w==null||w(at)),pt!==void 0&&oe(pt))}function qe(at,pt){P(pt.clientWidth)}function gt(at,pt){I(function(tt){var Pt=new Map(tt);return pt===null?Pt.delete(at):Pt.set(at,pt),Pt})}function Nt(at,pt){O(pt),U(Y)}function mt(at,pt){Q(pt)}function Wt(at){return L.get(ee(be[at],at))}Qr(function(){if(T&&typeof De=="number"&&be){var at=H,pt=be.length,tt=pt-1;if(!pt){Te(0,null);return}for(var Pt=0;Pt<pt;Pt+=1){var Ns=Wt(Pt);if(j&&(Ns=Ns||0),Ns===void 0){Te(Pt-1,void 0,!0);break}if(at+=Ns,tt===0&&at<=T||Pt===tt-1&&at+Wt(tt)<=T){Te(tt,null);break}else if(at+De>T){Te(Pt-1,at-Ns-H+Y);break}}y&&Wt(0)+H>T&&oe(null)}},[T,L,Y,H,ee,be]);var Le=ce&&!!Pe.length,cs={};K!==null&&Xe&&(cs={position:"absolute",left:K,top:0});var Gs={prefixCls:ze,responsive:Xe,component:S,invalidate:it},Gr=o?function(at,pt){var tt=ee(at,pt);return h.createElement(xx.Provider,{key:tt,value:pe(pe({},Gs),{},{order:pt,item:at,itemKey:tt,registerSize:gt,display:pt<=We})},o(at,pt))}:function(at,pt){var tt=ee(at,pt);return h.createElement(Kd,Gt({},Gs,{order:pt,key:tt,item:at,renderItem:me,itemKey:tt,registerSize:gt,display:pt<=We}))},Xs={order:Le?We:Number.MAX_SAFE_INTEGER,className:"".concat(ze,"-rest"),registerSize:Nt,display:Le},_s=f||Rse,ds=b?h.createElement(xx.Provider,{value:pe(pe({},Gs),Xs)},b(Pe)):h.createElement(Kd,Gt({},Gs,Xs),typeof _s=="function"?_s(Pe):_s),St=h.createElement(N,Gt({className:dt(!it&&a,g),style:x,ref:s},C),be.map(Gr),ft?ds:null,y&&h.createElement(Kd,Gt({},Gs,{responsive:st,responsiveDisabled:!Xe,order:We,className:"".concat(ze,"-suffix"),registerSize:mt,display:!0,style:cs}),y));return st?h.createElement(sm,{onResize:qe,disabled:!Xe},St):St}var Mi=h.forwardRef(Fse);Mi.displayName="Overflow";Mi.Item=S3;Mi.RESPONSIVE=C3;Mi.INVALIDATE=k3;function Dse(t){var s=t.prefixCls,r=t.align,a=t.arrow,n=t.arrowPos,i=a||{},l=i.className,o=i.content,c=n.x,u=c===void 0?0:c,d=n.y,m=d===void 0?0:d,x=h.useRef();if(!r||!r.points)return null;var g={position:"absolute"};if(r.autoArrow!==!1){var p=r.points[0],f=r.points[1],b=p[0],y=p[1],v=f[0],N=f[1];b===v||!["t","b"].includes(b)?g.top=m:b==="t"?g.top=0:g.bottom=0,y===N||!["l","r"].includes(y)?g.left=u:y==="l"?g.left=0:g.right=0}return h.createElement("div",{ref:x,className:dt("".concat(s,"-arrow"),l),style:g},o)}function Ise(t){var s=t.prefixCls,r=t.open,a=t.zIndex,n=t.mask,i=t.motion;return n?h.createElement(td,Gt({},i,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(l){var o=l.className;return h.createElement("div",{style:{zIndex:a},className:dt("".concat(s,"-mask"),o)})}):null}var Ose=h.memo(function(t){var s=t.children;return s},function(t,s){return s.cache}),Mse=h.forwardRef(function(t,s){var r=t.popup,a=t.className,n=t.prefixCls,i=t.style,l=t.target,o=t.onVisibleChanged,c=t.open,u=t.keepDom,d=t.fresh,m=t.onClick,x=t.mask,g=t.arrow,p=t.arrowPos,f=t.align,b=t.motion,y=t.maskMotion,v=t.forceRender,N=t.getPopupContainer,S=t.autoDestroy,w=t.portal,C=t.zIndex,j=t.onMouseEnter,k=t.onMouseLeave,E=t.onPointerEnter,R=t.onPointerDownCapture,D=t.ready,P=t.offsetX,T=t.offsetY,B=t.offsetR,F=t.offsetB,L=t.onAlign,I=t.onPrepare,V=t.stretch,_=t.targetWidth,G=t.targetHeight,U=typeof r=="function"?r():r,A=c||u,q=(N==null?void 0:N.length)>0,Y=h.useState(!N||!q),O=Oe(Y,2),W=O[0],z=O[1];if(Qr(function(){!W&&q&&l&&z(!0)},[W,q,l]),!W)return null;var H="auto",Q={left:"-1000vw",top:"-1000vh",right:H,bottom:H};if(D||!c){var J,ie=f.points,K=f.dynamicInset||((J=f._experimental)===null||J===void 0?void 0:J.dynamicInset),oe=K&&ie[0][1]==="r",le=K&&ie[0][0]==="b";oe?(Q.right=B,Q.left=H):(Q.left=P,Q.right=H),le?(Q.bottom=F,Q.top=H):(Q.top=T,Q.bottom=H)}var Se={};return V&&(V.includes("height")&&G?Se.height=G:V.includes("minHeight")&&G&&(Se.minHeight=G),V.includes("width")&&_?Se.width=_:V.includes("minWidth")&&_&&(Se.minWidth=_)),c||(Se.pointerEvents="none"),h.createElement(w,{open:v||A,getContainer:N&&function(){return N(l)},autoDestroy:S},h.createElement(Ise,{prefixCls:n,open:c,zIndex:C,mask:x,motion:y}),h.createElement(sm,{onResize:L,disabled:!c},function(Ee){return h.createElement(td,Gt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:v,leavedClassName:"".concat(n,"-hidden")},b,{onAppearPrepare:I,onEnterPrepare:I,visible:c,onVisibleChanged:function(We){var fe;b==null||(fe=b.onVisibleChanged)===null||fe===void 0||fe.call(b,We),o(We)}}),function(ye,We){var fe=ye.className,Fe=ye.style,ce=dt(n,fe,a);return h.createElement("div",{ref:Qc(Ee,s,We),className:ce,style:pe(pe(pe(pe({"--arrow-x":"".concat(p.x||0,"px"),"--arrow-y":"".concat(p.y||0,"px")},Q),Se),Fe),{},{boxSizing:"border-box",zIndex:C},i),onMouseEnter:j,onMouseLeave:k,onPointerEnter:E,onClick:m,onPointerDownCapture:R},g&&h.createElement(Dse,{prefixCls:n,arrow:g,arrowPos:p,align:f}),h.createElement(Ose,{cache:!c&&!d},U))})}))}),Bse=h.forwardRef(function(t,s){var r=t.children,a=t.getTriggerDOMNode,n=Ol(r),i=h.useCallback(function(o){Jy(s,a?a(o):o)},[a]),l=Zc(i,To(r));return n?h.cloneElement(r,{ref:l}):r}),y1=h.createContext(null);function v1(t){return t?Array.isArray(t)?t:[t]:[]}function Lse(t,s,r,a){return h.useMemo(function(){var n=v1(r??s),i=v1(a??s),l=new Set(n),o=new Set(i);return t&&(l.has("hover")&&(l.delete("hover"),l.add("click")),o.has("hover")&&(o.delete("hover"),o.add("click"))),[l,o]},[t,s,r,a])}function $se(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?t[0]===s[0]:t[0]===s[0]&&t[1]===s[1]}function Use(t,s,r,a){for(var n=r.points,i=Object.keys(t),l=0;l<i.length;l+=1){var o,c=i[l];if($se((o=t[c])===null||o===void 0?void 0:o.points,n,a))return"".concat(s,"-placement-").concat(c)}return""}function j1(t,s,r,a){return s||(r?{motionName:"".concat(t,"-").concat(r)}:a?{motionName:a}:null)}function om(t){return t.ownerDocument.defaultView}function ab(t){for(var s=[],r=t==null?void 0:t.parentElement,a=["hidden","scroll","clip","auto"];r;){var n=om(r).getComputedStyle(r),i=n.overflowX,l=n.overflowY,o=n.overflow;[i,l,o].some(function(c){return a.includes(c)})&&s.push(r),r=r.parentElement}return s}function Ru(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?s:t}function vd(t){return Ru(parseFloat(t),0)}function w1(t,s){var r=pe({},t);return(s||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)){var n=om(a).getComputedStyle(a),i=n.overflow,l=n.overflowClipMargin,o=n.borderTopWidth,c=n.borderBottomWidth,u=n.borderLeftWidth,d=n.borderRightWidth,m=a.getBoundingClientRect(),x=a.offsetHeight,g=a.clientHeight,p=a.offsetWidth,f=a.clientWidth,b=vd(o),y=vd(c),v=vd(u),N=vd(d),S=Ru(Math.round(m.width/p*1e3)/1e3),w=Ru(Math.round(m.height/x*1e3)/1e3),C=(p-f-v-N)*S,j=(x-g-b-y)*w,k=b*w,E=y*w,R=v*S,D=N*S,P=0,T=0;if(i==="clip"){var B=vd(l);P=B*S,T=B*w}var F=m.x+R-P,L=m.y+k-T,I=F+m.width+2*P-R-D-C,V=L+m.height+2*T-k-E-j;r.left=Math.max(r.left,F),r.top=Math.max(r.top,L),r.right=Math.min(r.right,I),r.bottom=Math.min(r.bottom,V)}}),r}function N1(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(s),a=r.match(/^(.*)\%$/);return a?t*(parseFloat(a[1])/100):parseFloat(r)}function S1(t,s){var r=s||[],a=Oe(r,2),n=a[0],i=a[1];return[N1(t.width,n),N1(t.height,i)]}function C1(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function Yo(t,s){var r=s[0],a=s[1],n,i;return r==="t"?i=t.y:r==="b"?i=t.y+t.height:i=t.y+t.height/2,a==="l"?n=t.x:a==="r"?n=t.x+t.width:n=t.x+t.width/2,{x:n,y:i}}function al(t,s){var r={t:"b",b:"t",l:"r",r:"l"};return t.map(function(a,n){return n===s?r[a]||"c":a}).join("")}function Hse(t,s,r,a,n,i,l){var o=h.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:n[a]||{}}),c=Oe(o,2),u=c[0],d=c[1],m=h.useRef(0),x=h.useMemo(function(){return s?ab(s):[]},[s]),g=h.useRef({}),p=function(){g.current={}};t||p();var f=Zr(function(){if(s&&r&&t){let ln=function(od,Ei){var Zi=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st,cd=A.x+od,mm=A.y+Ei,Uh=cd+le,Hh=mm+oe,Wh=Math.max(cd,Zi.left),Qe=Math.max(mm,Zi.top),Ct=Math.min(Uh,Zi.right),qs=Math.min(Hh,Zi.bottom);return Math.max(0,(Ct-Wh)*(qs-Qe))},Do=function(){je=A.y+Pt,ue=je+oe,xe=A.x+tt,ge=xe+le};var v,N,S,w,C=s,j=C.ownerDocument,k=om(C),E=k.getComputedStyle(C),R=E.position,D=C.style.left,P=C.style.top,T=C.style.right,B=C.style.bottom,F=C.style.overflow,L=pe(pe({},n[a]),i),I=j.createElement("div");(v=C.parentElement)===null||v===void 0||v.appendChild(I),I.style.left="".concat(C.offsetLeft,"px"),I.style.top="".concat(C.offsetTop,"px"),I.style.position=R,I.style.height="".concat(C.offsetHeight,"px"),I.style.width="".concat(C.offsetWidth,"px"),C.style.left="0",C.style.top="0",C.style.right="auto",C.style.bottom="auto",C.style.overflow="hidden";var V;if(Array.isArray(r))V={x:r[0],y:r[1],width:0,height:0};else{var _,G,U=r.getBoundingClientRect();U.x=(_=U.x)!==null&&_!==void 0?_:U.left,U.y=(G=U.y)!==null&&G!==void 0?G:U.top,V={x:U.x,y:U.y,width:U.width,height:U.height}}var A=C.getBoundingClientRect(),q=k.getComputedStyle(C),Y=q.height,O=q.width;A.x=(N=A.x)!==null&&N!==void 0?N:A.left,A.y=(S=A.y)!==null&&S!==void 0?S:A.top;var W=j.documentElement,z=W.clientWidth,H=W.clientHeight,Q=W.scrollWidth,J=W.scrollHeight,ie=W.scrollTop,K=W.scrollLeft,oe=A.height,le=A.width,Se=V.height,Ee=V.width,ye={left:0,top:0,right:z,bottom:H},We={left:-K,top:-ie,right:Q-K,bottom:J-ie},fe=L.htmlRegion,Fe="visible",ce="visibleFirst";fe!=="scroll"&&fe!==ce&&(fe=Fe);var Ce=fe===ce,ze=w1(We,x),De=w1(ye,x),st=fe===Fe?De:ze,Xe=Ce?De:st;C.style.left="auto",C.style.top="auto",C.style.right="0",C.style.bottom="0";var it=C.getBoundingClientRect();C.style.left=D,C.style.top=P,C.style.right=T,C.style.bottom=B,C.style.overflow=F,(w=C.parentElement)===null||w===void 0||w.removeChild(I);var ft=Ru(Math.round(le/parseFloat(O)*1e3)/1e3),be=Ru(Math.round(oe/parseFloat(Y)*1e3)/1e3);if(ft===0||be===0||ju(r)&&!fv(r))return;var Pe=L.offset,ee=L.targetOffset,me=S1(A,Pe),Te=Oe(me,2),qe=Te[0],gt=Te[1],Nt=S1(V,ee),mt=Oe(Nt,2),Wt=mt[0],Le=mt[1];V.x-=Wt,V.y-=Le;var cs=L.points||[],Gs=Oe(cs,2),Gr=Gs[0],Xs=Gs[1],_s=C1(Xs),ds=C1(Gr),St=Yo(V,_s),at=Yo(A,ds),pt=pe({},L),tt=St.x-at.x+qe,Pt=St.y-at.y+gt,Ns=ln(tt,Pt),qr=ln(tt,Pt,De),Dr=Yo(V,["t","l"]),Ds=Yo(A,["t","l"]),an=Yo(V,["b","r"]),X=Yo(A,["b","r"]),se=L.overflow||{},Z=se.adjustX,te=se.adjustY,re=se.shiftX,ne=se.shiftY,he=function(Ei){return typeof Ei=="boolean"?Ei:Ei>=0},je,ue,xe,ge;Do();var Re=he(te),Ae=ds[0]===_s[0];if(Re&&ds[0]==="t"&&(ue>Xe.bottom||g.current.bt)){var Ye=Pt;Ae?Ye-=oe-Se:Ye=Dr.y-X.y-gt;var Me=ln(tt,Ye),Ge=ln(tt,Ye,De);Me>Ns||Me===Ns&&(!Ce||Ge>=qr)?(g.current.bt=!0,Pt=Ye,gt=-gt,pt.points=[al(ds,0),al(_s,0)]):g.current.bt=!1}if(Re&&ds[0]==="b"&&(je<Xe.top||g.current.tb)){var nt=Pt;Ae?nt+=oe-Se:nt=an.y-Ds.y-gt;var ts=ln(tt,nt),hs=ln(tt,nt,De);ts>Ns||ts===Ns&&(!Ce||hs>=qr)?(g.current.tb=!0,Pt=nt,gt=-gt,pt.points=[al(ds,0),al(_s,0)]):g.current.tb=!1}var Js=he(Z),nn=ds[1]===_s[1];if(Js&&ds[1]==="l"&&(ge>Xe.right||g.current.rl)){var na=tt;nn?na-=le-Ee:na=Dr.x-X.x-qe;var Ir=ln(na,Pt),Na=ln(na,Pt,De);Ir>Ns||Ir===Ns&&(!Ce||Na>=qr)?(g.current.rl=!0,tt=na,qe=-qe,pt.points=[al(ds,1),al(_s,1)]):g.current.rl=!1}if(Js&&ds[1]==="r"&&(xe<Xe.left||g.current.lr)){var Ha=tt;nn?Ha+=le-Ee:Ha=an.x-Ds.x-qe;var Yr=ln(Ha,Pt),Ci=ln(Ha,Pt,De);Yr>Ns||Yr===Ns&&(!Ce||Ci>=qr)?(g.current.lr=!0,tt=Ha,qe=-qe,pt.points=[al(ds,1),al(_s,1)]):g.current.lr=!1}Do();var Wa=re===!0?0:re;typeof Wa=="number"&&(xe<De.left&&(tt-=xe-De.left-qe,V.x+Ee<De.left+Wa&&(tt+=V.x-De.left+Ee-Wa)),ge>De.right&&(tt-=ge-De.right-qe,V.x>De.right-Wa&&(tt+=V.x-De.right+Wa)));var Yn=ne===!0?0:ne;typeof Yn=="number"&&(je<De.top&&(Pt-=je-De.top-gt,V.y+Se<De.top+Yn&&(Pt+=V.y-De.top+Se-Yn)),ue>De.bottom&&(Pt-=ue-De.bottom-gt,V.y>De.bottom-Yn&&(Pt+=V.y-De.bottom+Yn)));var Kn=A.x+tt,Xn=Kn+le,Ll=A.y+Pt,Is=Ll+oe,Kt=V.x,fs=Kt+Ee,Or=V.y,Kr=Or+Se,Ji=Math.max(Kn,Kt),Qi=Math.min(Xn,fs),nd=(Ji+Qi)/2,Fo=nd-Kn,$l=Math.max(Ll,Or),ki=Math.min(Is,Kr),Ul=($l+ki)/2,id=Ul-Ll;l==null||l(s,pt);var Jn=it.right-A.x-(tt+A.width),ld=it.bottom-A.y-(Pt+A.height);ft===1&&(tt=Math.round(tt),Jn=Math.round(Jn)),be===1&&(Pt=Math.round(Pt),ld=Math.round(ld));var $h={ready:!0,offsetX:tt/ft,offsetY:Pt/be,offsetR:Jn/ft,offsetB:ld/be,arrowX:Fo/ft,arrowY:id/be,scaleX:ft,scaleY:be,align:pt};d($h)}}),b=function(){m.current+=1;var N=m.current;Promise.resolve().then(function(){m.current===N&&f()})},y=function(){d(function(N){return pe(pe({},N),{},{ready:!1})})};return Qr(y,[a]),Qr(function(){t||y()},[t]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,b]}function Wse(t,s,r,a,n){Qr(function(){if(t&&s&&r){let m=function(){a(),n()};var i=s,l=r,o=ab(i),c=ab(l),u=om(l),d=new Set([u].concat(rt(o),rt(c)));return d.forEach(function(x){x.addEventListener("scroll",m,{passive:!0})}),u.addEventListener("resize",m,{passive:!0}),a(),function(){d.forEach(function(x){x.removeEventListener("scroll",m),u.removeEventListener("resize",m)})}}},[t,s,r])}function Vse(t,s,r,a,n,i,l,o){var c=h.useRef(t);c.current=t;var u=h.useRef(!1);h.useEffect(function(){if(s&&a&&(!n||i)){var m=function(){u.current=!1},x=function(b){var y;c.current&&!l(((y=b.composedPath)===null||y===void 0||(y=y.call(b))===null||y===void 0?void 0:y[0])||b.target)&&!u.current&&o(!1)},g=om(a);g.addEventListener("pointerdown",m,!0),g.addEventListener("mousedown",x,!0),g.addEventListener("contextmenu",x,!0);var p=ox(r);return p&&(p.addEventListener("mousedown",x,!0),p.addEventListener("contextmenu",x,!0)),function(){g.removeEventListener("pointerdown",m,!0),g.removeEventListener("mousedown",x,!0),g.removeEventListener("contextmenu",x,!0),p&&(p.removeEventListener("mousedown",x,!0),p.removeEventListener("contextmenu",x,!0))}}},[s,r,a,n,i]);function d(){u.current=!0}return d}var zse=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Gse(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f3,s=h.forwardRef(function(r,a){var n=r.prefixCls,i=n===void 0?"rc-trigger-popup":n,l=r.children,o=r.action,c=o===void 0?"hover":o,u=r.showAction,d=r.hideAction,m=r.popupVisible,x=r.defaultPopupVisible,g=r.onPopupVisibleChange,p=r.afterPopupVisibleChange,f=r.mouseEnterDelay,b=r.mouseLeaveDelay,y=b===void 0?.1:b,v=r.focusDelay,N=r.blurDelay,S=r.mask,w=r.maskClosable,C=w===void 0?!0:w,j=r.getPopupContainer,k=r.forceRender,E=r.autoDestroy,R=r.destroyPopupOnHide,D=r.popup,P=r.popupClassName,T=r.popupStyle,B=r.popupPlacement,F=r.builtinPlacements,L=F===void 0?{}:F,I=r.popupAlign,V=r.zIndex,_=r.stretch,G=r.getPopupClassNameFromAlign,U=r.fresh,A=r.alignPoint,q=r.onPopupClick,Y=r.onPopupAlign,O=r.arrow,W=r.popupMotion,z=r.maskMotion,H=r.popupTransitionName,Q=r.popupAnimation,J=r.maskTransitionName,ie=r.maskAnimation,K=r.className,oe=r.getTriggerDOMNode,le=js(r,zse),Se=E||R||!1,Ee=h.useState(!1),ye=Oe(Ee,2),We=ye[0],fe=ye[1];Qr(function(){fe(wse())},[]);var Fe=h.useRef({}),ce=h.useContext(y1),Ce=h.useMemo(function(){return{registerSubPopup:function(Ct,qs){Fe.current[Ct]=qs,ce==null||ce.registerSubPopup(Ct,qs)}}},[ce]),ze=g3(),De=h.useState(null),st=Oe(De,2),Xe=st[0],it=st[1],ft=h.useRef(null),be=Zr(function(Qe){ft.current=Qe,ju(Qe)&&Xe!==Qe&&it(Qe),ce==null||ce.registerSubPopup(ze,Qe)}),Pe=h.useState(null),ee=Oe(Pe,2),me=ee[0],Te=ee[1],qe=h.useRef(null),gt=Zr(function(Qe){ju(Qe)&&me!==Qe&&(Te(Qe),qe.current=Qe)}),Nt=h.Children.only(l),mt=(Nt==null?void 0:Nt.props)||{},Wt={},Le=Zr(function(Qe){var Ct,qs,Sr=me;return(Sr==null?void 0:Sr.contains(Qe))||((Ct=ox(Sr))===null||Ct===void 0?void 0:Ct.host)===Qe||Qe===Sr||(Xe==null?void 0:Xe.contains(Qe))||((qs=ox(Xe))===null||qs===void 0?void 0:qs.host)===Qe||Qe===Xe||Object.values(Fe.current).some(function(nr){return(nr==null?void 0:nr.contains(Qe))||Qe===nr})}),cs=j1(i,W,Q,H),Gs=j1(i,z,ie,J),Gr=h.useState(x||!1),Xs=Oe(Gr,2),_s=Xs[0],ds=Xs[1],St=m??_s,at=Zr(function(Qe){m===void 0&&ds(Qe)});Qr(function(){ds(m||!1)},[m]);var pt=h.useRef(St);pt.current=St;var tt=h.useRef([]);tt.current=[];var Pt=Zr(function(Qe){var Ct;at(Qe),((Ct=tt.current[tt.current.length-1])!==null&&Ct!==void 0?Ct:St)!==Qe&&(tt.current.push(Qe),g==null||g(Qe))}),Ns=h.useRef(),qr=function(){clearTimeout(Ns.current)},Dr=function(Ct){var qs=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;qr(),qs===0?Pt(Ct):Ns.current=setTimeout(function(){Pt(Ct)},qs*1e3)};h.useEffect(function(){return qr},[]);var Ds=h.useState(!1),an=Oe(Ds,2),X=an[0],se=an[1];Qr(function(Qe){(!Qe||St)&&se(!0)},[St]);var Z=h.useState(null),te=Oe(Z,2),re=te[0],ne=te[1],he=h.useState(null),je=Oe(he,2),ue=je[0],xe=je[1],ge=function(Ct){xe([Ct.clientX,Ct.clientY])},Re=Hse(St,Xe,A&&ue!==null?ue:me,B,L,I,Y),Ae=Oe(Re,11),Ye=Ae[0],Me=Ae[1],Ge=Ae[2],nt=Ae[3],ts=Ae[4],hs=Ae[5],Js=Ae[6],nn=Ae[7],na=Ae[8],Ir=Ae[9],Na=Ae[10],Ha=Lse(We,c,u,d),Yr=Oe(Ha,2),Ci=Yr[0],Wa=Yr[1],Yn=Ci.has("click"),Kn=Wa.has("click")||Wa.has("contextMenu"),Xn=Zr(function(){X||Na()}),Ll=function(){pt.current&&A&&Kn&&Dr(!1)};Wse(St,me,Xe,Xn,Ll),Qr(function(){Xn()},[ue,B]),Qr(function(){St&&!(L!=null&&L[B])&&Xn()},[JSON.stringify(I)]);var Is=h.useMemo(function(){var Qe=Use(L,i,Ir,A);return dt(Qe,G==null?void 0:G(Ir))},[Ir,G,L,i,A]);h.useImperativeHandle(a,function(){return{nativeElement:qe.current,popupElement:ft.current,forceAlign:Xn}});var Kt=h.useState(0),fs=Oe(Kt,2),Or=fs[0],Kr=fs[1],Ji=h.useState(0),Qi=Oe(Ji,2),nd=Qi[0],Fo=Qi[1],$l=function(){if(_&&me){var Ct=me.getBoundingClientRect();Kr(Ct.width),Fo(Ct.height)}},ki=function(){$l(),Xn()},Ul=function(Ct){se(!1),Na(),p==null||p(Ct)},id=function(){return new Promise(function(Ct){$l(),ne(function(){return Ct})})};Qr(function(){re&&(Na(),re(),ne(null))},[re]);function Jn(Qe,Ct,qs,Sr){Wt[Qe]=function(nr){var xm;Sr==null||Sr(nr),Dr(Ct,qs);for(var Vh=arguments.length,Dv=new Array(Vh>1?Vh-1:0),hm=1;hm<Vh;hm++)Dv[hm-1]=arguments[hm];(xm=mt[Qe])===null||xm===void 0||xm.call.apply(xm,[mt,nr].concat(Dv))}}(Yn||Kn)&&(Wt.onClick=function(Qe){var Ct;pt.current&&Kn?Dr(!1):!pt.current&&Yn&&(ge(Qe),Dr(!0));for(var qs=arguments.length,Sr=new Array(qs>1?qs-1:0),nr=1;nr<qs;nr++)Sr[nr-1]=arguments[nr];(Ct=mt.onClick)===null||Ct===void 0||Ct.call.apply(Ct,[mt,Qe].concat(Sr))});var ld=Vse(St,Kn,me,Xe,S,C,Le,Dr),$h=Ci.has("hover"),ln=Wa.has("hover"),Do,od;$h&&(Jn("onMouseEnter",!0,f,function(Qe){ge(Qe)}),Jn("onPointerEnter",!0,f,function(Qe){ge(Qe)}),Do=function(Ct){(St||X)&&Xe!==null&&Xe!==void 0&&Xe.contains(Ct.target)&&Dr(!0,f)},A&&(Wt.onMouseMove=function(Qe){var Ct;(Ct=mt.onMouseMove)===null||Ct===void 0||Ct.call(mt,Qe)})),ln&&(Jn("onMouseLeave",!1,y),Jn("onPointerLeave",!1,y),od=function(){Dr(!1,y)}),Ci.has("focus")&&Jn("onFocus",!0,v),Wa.has("focus")&&Jn("onBlur",!1,N),Ci.has("contextMenu")&&(Wt.onContextMenu=function(Qe){var Ct;pt.current&&Wa.has("contextMenu")?Dr(!1):(ge(Qe),Dr(!0)),Qe.preventDefault();for(var qs=arguments.length,Sr=new Array(qs>1?qs-1:0),nr=1;nr<qs;nr++)Sr[nr-1]=arguments[nr];(Ct=mt.onContextMenu)===null||Ct===void 0||Ct.call.apply(Ct,[mt,Qe].concat(Sr))}),K&&(Wt.className=dt(mt.className,K));var Ei=h.useRef(!1);Ei.current||(Ei.current=k||St||X);var Zi=pe(pe({},mt),Wt),cd={},mm=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];mm.forEach(function(Qe){le[Qe]&&(cd[Qe]=function(){for(var Ct,qs=arguments.length,Sr=new Array(qs),nr=0;nr<qs;nr++)Sr[nr]=arguments[nr];(Ct=Zi[Qe])===null||Ct===void 0||Ct.call.apply(Ct,[Zi].concat(Sr)),le[Qe].apply(le,Sr)})});var Uh=h.cloneElement(Nt,pe(pe({},Zi),cd)),Hh={x:hs,y:Js},Wh=O?pe({},O!==!0?O:{}):null;return h.createElement(h.Fragment,null,h.createElement(sm,{disabled:!St,ref:gt,onResize:ki},h.createElement(Bse,{getTriggerDOMNode:oe},Uh)),Ei.current&&h.createElement(y1.Provider,{value:Ce},h.createElement(Mse,{portal:t,ref:be,prefixCls:i,popup:D,className:dt(P,Is),style:T,target:me,onMouseEnter:Do,onMouseLeave:od,onPointerEnter:Do,zIndex:V,open:St,keepDom:X,fresh:U,onClick:q,onPointerDownCapture:ld,mask:S,motion:cs,maskMotion:Gs,onVisibleChanged:Ul,onPrepare:id,forceRender:k,autoDestroy:Se,getPopupContainer:j,align:Ir,arrow:Wh,arrowPos:Hh,ready:Ye,offsetX:Me,offsetY:Ge,offsetR:nt,offsetB:ts,onAlign:Xn,stretch:_,targetWidth:Or/nn,targetHeight:nd/na})))});return s}const vv=Gse(f3);function E3(t){var s=t.children,r=t.prefixCls,a=t.id,n=t.overlayInnerStyle,i=t.bodyClassName,l=t.className,o=t.style;return h.createElement("div",{className:dt("".concat(r,"-content"),l),style:o},h.createElement("div",{className:dt("".concat(r,"-inner"),i),id:a,role:"tooltip",style:n},typeof s=="function"?s():s))}var Ko={shiftX:64,adjustY:1},Xo={adjustX:1,shiftY:!0},un=[0,0],qse={left:{points:["cr","cl"],overflow:Xo,offset:[-4,0],targetOffset:un},right:{points:["cl","cr"],overflow:Xo,offset:[4,0],targetOffset:un},top:{points:["bc","tc"],overflow:Ko,offset:[0,-4],targetOffset:un},bottom:{points:["tc","bc"],overflow:Ko,offset:[0,4],targetOffset:un},topLeft:{points:["bl","tl"],overflow:Ko,offset:[0,-4],targetOffset:un},leftTop:{points:["tr","tl"],overflow:Xo,offset:[-4,0],targetOffset:un},topRight:{points:["br","tr"],overflow:Ko,offset:[0,-4],targetOffset:un},rightTop:{points:["tl","tr"],overflow:Xo,offset:[4,0],targetOffset:un},bottomRight:{points:["tr","br"],overflow:Ko,offset:[0,4],targetOffset:un},rightBottom:{points:["bl","br"],overflow:Xo,offset:[4,0],targetOffset:un},bottomLeft:{points:["tl","bl"],overflow:Ko,offset:[0,4],targetOffset:un},leftBottom:{points:["br","bl"],overflow:Xo,offset:[-4,0],targetOffset:un}},Yse=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],Kse=function(s,r){var a=s.overlayClassName,n=s.trigger,i=n===void 0?["hover"]:n,l=s.mouseEnterDelay,o=l===void 0?0:l,c=s.mouseLeaveDelay,u=c===void 0?.1:c,d=s.overlayStyle,m=s.prefixCls,x=m===void 0?"rc-tooltip":m,g=s.children,p=s.onVisibleChange,f=s.afterVisibleChange,b=s.transitionName,y=s.animation,v=s.motion,N=s.placement,S=N===void 0?"right":N,w=s.align,C=w===void 0?{}:w,j=s.destroyTooltipOnHide,k=j===void 0?!1:j,E=s.defaultVisible,R=s.getTooltipContainer,D=s.overlayInnerStyle;s.arrowContent;var P=s.overlay,T=s.id,B=s.showArrow,F=B===void 0?!0:B,L=s.classNames,I=s.styles,V=js(s,Yse),_=g3(T),G=h.useRef(null);h.useImperativeHandle(r,function(){return G.current});var U=pe({},V);"visible"in s&&(U.popupVisible=s.visible);var A=function(){return h.createElement(E3,{key:"content",prefixCls:x,id:_,bodyClassName:L==null?void 0:L.body,overlayInnerStyle:pe(pe({},D),I==null?void 0:I.body)},P)},q=function(){var O=h.Children.only(g),W=(O==null?void 0:O.props)||{},z=pe(pe({},W),{},{"aria-describedby":P?_:null});return h.cloneElement(g,z)};return h.createElement(vv,Gt({popupClassName:dt(a,L==null?void 0:L.root),prefixCls:x,popup:A,action:i,builtinPlacements:qse,popupPlacement:S,ref:G,popupAlign:C,getPopupContainer:R,onPopupVisibleChange:p,afterPopupVisibleChange:f,popupTransitionName:b,popupAnimation:y,popupMotion:v,defaultPopupVisible:E,autoDestroy:k,mouseLeaveDelay:u,popupStyle:pe(pe({},d),I==null?void 0:I.root),mouseEnterDelay:o,arrow:F},U),q())};const Xse=h.forwardRef(Kse);function P3(t){const{sizePopupArrow:s,borderRadiusXS:r,borderRadiusOuter:a}=t,n=s/2,i=0,l=n,o=a*1/Math.sqrt(2),c=n-a*(1-1/Math.sqrt(2)),u=n-r*(1/Math.sqrt(2)),d=a*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),m=2*n-u,x=d,g=2*n-o,p=c,f=2*n-i,b=l,y=n*Math.sqrt(2)+a*(Math.sqrt(2)-2),v=a*(Math.sqrt(2)-1),N=`polygon(${v}px 100%, 50% ${v}px, ${2*n-v}px 100%, ${v}px 100%)`,S=`path('M ${i} ${l} A ${a} ${a} 0 0 0 ${o} ${c} L ${u} ${d} A ${r} ${r} 0 0 1 ${m} ${x} L ${g} ${p} A ${a} ${a} 0 0 0 ${f} ${b} Z')`;return{arrowShadowWidth:y,arrowPath:S,arrowPolygon:N}}const Jse=(t,s,r)=>{const{sizePopupArrow:a,arrowPolygon:n,arrowPath:i,arrowShadowWidth:l,borderRadiusXS:o,calc:c}=t;return{pointerEvents:"none",width:a,height:a,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:a,height:c(a).div(2).equal(),background:s,clipPath:{_multi_value_:!0,value:[n,i]},content:'""'},"&::after":{content:'""',position:"absolute",width:l,height:l,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${It(o)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},T3=8;function jv(t){const{contentRadius:s,limitVerticalRadius:r}=t,a=s>12?s+2:12;return{arrowOffsetHorizontal:a,arrowOffsetVertical:r?T3:a}}function Ym(t,s){return t?s:{}}function _3(t,s,r){const{componentCls:a,boxShadowPopoverArrow:n,arrowOffsetVertical:i,arrowOffsetHorizontal:l}=t,{arrowDistance:o=0,arrowPlacement:c={left:!0,right:!0,top:!0,bottom:!0}}=r||{};return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({[`${a}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},Jse(t,s,n)),{"&:before":{background:s}})]},Ym(!!c.top,{[[`&-placement-top > ${a}-arrow`,`&-placement-topLeft > ${a}-arrow`,`&-placement-topRight > ${a}-arrow`].join(",")]:{bottom:o,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":l,[`> ${a}-arrow`]:{left:{_skip_check_:!0,value:l}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${It(l)})`,[`> ${a}-arrow`]:{right:{_skip_check_:!0,value:l}}}})),Ym(!!c.bottom,{[[`&-placement-bottom > ${a}-arrow`,`&-placement-bottomLeft > ${a}-arrow`,`&-placement-bottomRight > ${a}-arrow`].join(",")]:{top:o,transform:"translateY(-100%)"},[`&-placement-bottom > ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":l,[`> ${a}-arrow`]:{left:{_skip_check_:!0,value:l}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${It(l)})`,[`> ${a}-arrow`]:{right:{_skip_check_:!0,value:l}}}})),Ym(!!c.left,{[[`&-placement-left > ${a}-arrow`,`&-placement-leftTop > ${a}-arrow`,`&-placement-leftBottom > ${a}-arrow`].join(",")]:{right:{_skip_check_:!0,value:o},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${a}-arrow`]:{top:i},[`&-placement-leftBottom > ${a}-arrow`]:{bottom:i}})),Ym(!!c.right,{[[`&-placement-right > ${a}-arrow`,`&-placement-rightTop > ${a}-arrow`,`&-placement-rightBottom > ${a}-arrow`].join(",")]:{left:{_skip_check_:!0,value:o},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${a}-arrow`]:{top:i},[`&-placement-rightBottom > ${a}-arrow`]:{bottom:i}}))}}function Qse(t,s,r,a){if(a===!1)return{adjustX:!1,adjustY:!1};const n=a&&typeof a=="object"?a:{},i={};switch(t){case"top":case"bottom":i.shiftX=s.arrowOffsetHorizontal*2+r,i.shiftY=!0,i.adjustY=!0;break;case"left":case"right":i.shiftY=s.arrowOffsetVertical*2+r,i.shiftX=!0,i.adjustX=!0;break}const l=Object.assign(Object.assign({},i),n);return l.shiftX||(l.adjustX=!0),l.shiftY||(l.adjustY=!0),l}const k1={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Zse={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},ere=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function A3(t){const{arrowWidth:s,autoAdjustOverflow:r,arrowPointAtCenter:a,offset:n,borderRadius:i,visibleFirst:l}=t,o=s/2,c={},u=jv({contentRadius:i,limitVerticalRadius:!0});return Object.keys(k1).forEach(d=>{const m=a&&Zse[d]||k1[d],x=Object.assign(Object.assign({},m),{offset:[0,0],dynamicInset:!0});switch(c[d]=x,ere.has(d)&&(x.autoArrow=!1),d){case"top":case"topLeft":case"topRight":x.offset[1]=-o-n;break;case"bottom":case"bottomLeft":case"bottomRight":x.offset[1]=o+n;break;case"left":case"leftTop":case"leftBottom":x.offset[0]=-o-n;break;case"right":case"rightTop":case"rightBottom":x.offset[0]=o+n;break}if(a)switch(d){case"topLeft":case"bottomLeft":x.offset[0]=-u.arrowOffsetHorizontal-o;break;case"topRight":case"bottomRight":x.offset[0]=u.arrowOffsetHorizontal+o;break;case"leftTop":case"rightTop":x.offset[1]=-u.arrowOffsetHorizontal*2+o;break;case"leftBottom":case"rightBottom":x.offset[1]=u.arrowOffsetHorizontal*2-o;break}x.overflow=Qse(d,u,s,r),l&&(x.htmlRegion="visibleFirst")}),c}const tre=t=>{const{calc:s,componentCls:r,tooltipMaxWidth:a,tooltipColor:n,tooltipBg:i,tooltipBorderRadius:l,zIndexPopup:o,controlHeight:c,boxShadowSecondary:u,paddingSM:d,paddingXS:m,arrowOffsetHorizontal:x,sizePopupArrow:g}=t,p=s(l).add(g).add(x).equal(),f=s(l).mul(2).add(g).equal();return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},cv(t)),{position:"absolute",zIndex:o,display:"block",width:"max-content",maxWidth:a,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${r}-inner`]:{minWidth:f,minHeight:c,padding:`${It(t.calc(d).div(2).equal())} ${It(m)}`,color:`var(--ant-tooltip-color, ${n})`,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:l,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:p},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:t.min(l,T3)}},[`${r}-content`]:{position:"relative"}}),wQ(t,(b,{darkColor:y})=>({[`&${r}-${b}`]:{[`${r}-inner`]:{backgroundColor:y},[`${r}-arrow`]:{"--antd-arrow-background-color":y}}}))),{"&-rtl":{direction:"rtl"}})},_3(t,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},sre=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},jv({contentRadius:t.borderRadius,limitVerticalRadius:!0})),P3(Sn(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),R3=(t,s=!0)=>am("Tooltip",a=>{const{borderRadius:n,colorTextLightSolid:i,colorBgSpotlight:l}=a,o=Sn(a,{tooltipMaxWidth:250,tooltipColor:i,tooltipBorderRadius:n,tooltipBg:l});return[tre(o),pv(a,"zoom-big-fast")]},sre,{resetStyle:!1,injectStyle:s})(t),rre=vo.map(t=>`${t}-inverse`);function are(t,s=!0){return s?[].concat(rt(rre),rt(vo)).includes(t):vo.includes(t)}function F3(t,s){const r=are(s),a=dt({[`${t}-${s}`]:s&&r}),n={},i={},l=Lee(s).toRgb(),c=(.299*l.r+.587*l.g+.114*l.b)/255<.5?"#FFF":"#000";return s&&!r&&(n.background=s,n["--ant-tooltip-color"]=c,i["--antd-arrow-background-color"]=s),{className:a,overlayStyle:n,arrowStyle:i}}const nre=t=>{const{prefixCls:s,className:r,placement:a="top",title:n,color:i,overlayInnerStyle:l}=t,{getPrefixCls:o}=h.useContext(Vr),c=o("tooltip",s),[u,d,m]=R3(c),x=F3(c,i),g=x.arrowStyle,p=Object.assign(Object.assign({},l),x.overlayStyle),f=dt(d,m,c,`${c}-pure`,`${c}-placement-${a}`,r,x.className);return u(h.createElement("div",{className:f,style:g},h.createElement("div",{className:`${c}-arrow`}),h.createElement(E3,Object.assign({},t,{className:d,prefixCls:c,overlayInnerStyle:p}),n)))};var ire=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const lre=h.forwardRef((t,s)=>{var r,a;const{prefixCls:n,openClassName:i,getTooltipContainer:l,color:o,overlayInnerStyle:c,children:u,afterOpenChange:d,afterVisibleChange:m,destroyTooltipOnHide:x,destroyOnHidden:g,arrow:p=!0,title:f,overlay:b,builtinPlacements:y,arrowPointAtCenter:v=!1,autoAdjustOverflow:N=!0,motion:S,getPopupContainer:w,placement:C="top",mouseEnterDelay:j=.1,mouseLeaveDelay:k=.1,overlayStyle:E,rootClassName:R,overlayClassName:D,styles:P,classNames:T}=t,B=ire(t,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","destroyOnHidden","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),F=!!p,[,L]=Xi(),{getPopupContainer:I,getPrefixCls:V,direction:_,className:G,style:U,classNames:A,styles:q}=ov("tooltip"),Y=iv(),O=h.useRef(null),W=()=>{var ee;(ee=O.current)===null||ee===void 0||ee.forceAlign()};h.useImperativeHandle(s,()=>{var ee,me;return{forceAlign:W,forcePopupAlign:()=>{Y.deprecated(!1,"forcePopupAlign","forceAlign"),W()},nativeElement:(ee=O.current)===null||ee===void 0?void 0:ee.nativeElement,popupElement:(me=O.current)===null||me===void 0?void 0:me.popupElement}});const[z,H]=ao(!1,{value:(r=t.open)!==null&&r!==void 0?r:t.visible,defaultValue:(a=t.defaultOpen)!==null&&a!==void 0?a:t.defaultVisible}),Q=!f&&!b&&f!==0,J=ee=>{var me,Te;H(Q?!1:ee),Q||((me=t.onOpenChange)===null||me===void 0||me.call(t,ee),(Te=t.onVisibleChange)===null||Te===void 0||Te.call(t,ee))},ie=h.useMemo(()=>{var ee,me;let Te=v;return typeof p=="object"&&(Te=(me=(ee=p.pointAtCenter)!==null&&ee!==void 0?ee:p.arrowPointAtCenter)!==null&&me!==void 0?me:v),y||A3({arrowPointAtCenter:Te,autoAdjustOverflow:N,arrowWidth:F?L.sizePopupArrow:0,borderRadius:L.borderRadius,offset:L.marginXXS,visibleFirst:!0})},[v,p,y,L]),K=h.useMemo(()=>f===0?f:b||f||"",[b,f]),oe=h.createElement(N3,{space:!0},typeof K=="function"?K():K),le=V("tooltip",n),Se=V(),Ee=t["data-popover-inject"];let ye=z;!("open"in t)&&!("visible"in t)&&Q&&(ye=!1);const We=h.isValidElement(u)&&!X6(u)?u:h.createElement("span",null,u),fe=We.props,Fe=!fe.className||typeof fe.className=="string"?dt(fe.className,i||`${le}-open`):fe.className,[ce,Ce,ze]=R3(le,!Ee),De=F3(le,o),st=De.arrowStyle,Xe=dt(D,{[`${le}-rtl`]:_==="rtl"},De.className,R,Ce,ze,G,A.root,T==null?void 0:T.root),it=dt(A.body,T==null?void 0:T.body),[ft,be]=xv("Tooltip",B.zIndex),Pe=h.createElement(Xse,Object.assign({},B,{zIndex:ft,showArrow:F,placement:C,mouseEnterDelay:j,mouseLeaveDelay:k,prefixCls:le,classNames:{root:Xe,body:it},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},st),q.root),U),E),P==null?void 0:P.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},q.body),c),P==null?void 0:P.body),De.overlayStyle)},getTooltipContainer:w||l||I,ref:O,builtinPlacements:ie,overlay:oe,visible:ye,onVisibleChange:J,afterVisibleChange:d??m,arrowContent:h.createElement("span",{className:`${le}-arrow-content`}),motion:{motionName:IZ(Se,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:g??!!x}),ye?Ao(We,{className:Fe}):We);return ce(h.createElement(mv.Provider,{value:be},Pe))}),hx=lre;hx._InternalPanelDoNotUseOrYouWillBeFired=nre;var ore={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},cre=function(s,r){return h.createElement(_o,Gt({},s,{ref:r,icon:ore}))},dre=h.forwardRef(cre),ure=qn.ESC,mre=qn.TAB;function xre(t){var s=t.visible,r=t.triggerRef,a=t.onVisibleChange,n=t.autoFocus,i=t.overlayRef,l=h.useRef(!1),o=function(){if(s){var m,x;(m=r.current)===null||m===void 0||(x=m.focus)===null||x===void 0||x.call(m),a==null||a(!1)}},c=function(){var m;return(m=i.current)!==null&&m!==void 0&&m.focus?(i.current.focus(),l.current=!0,!0):!1},u=function(m){switch(m.keyCode){case ure:o();break;case mre:{var x=!1;l.current||(x=c()),x?m.preventDefault():o();break}}};h.useEffect(function(){return s?(window.addEventListener("keydown",u),n&&La(c,3),function(){window.removeEventListener("keydown",u),l.current=!1}):function(){l.current=!1}},[s])}var hre=h.forwardRef(function(t,s){var r=t.overlay,a=t.arrow,n=t.prefixCls,i=h.useMemo(function(){var o;return typeof r=="function"?o=r():o=r,o},[r]),l=Qc(s,To(i));return Ke.createElement(Ke.Fragment,null,a&&Ke.createElement("div",{className:"".concat(n,"-arrow")}),Ke.cloneElement(i,{ref:Ol(i)?l:void 0}))}),Jo={adjustX:1,adjustY:1},Qo=[0,0],fre={topLeft:{points:["bl","tl"],overflow:Jo,offset:[0,-4],targetOffset:Qo},top:{points:["bc","tc"],overflow:Jo,offset:[0,-4],targetOffset:Qo},topRight:{points:["br","tr"],overflow:Jo,offset:[0,-4],targetOffset:Qo},bottomLeft:{points:["tl","bl"],overflow:Jo,offset:[0,4],targetOffset:Qo},bottom:{points:["tc","bc"],overflow:Jo,offset:[0,4],targetOffset:Qo},bottomRight:{points:["tr","br"],overflow:Jo,offset:[0,4],targetOffset:Qo}},gre=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function pre(t,s){var r,a=t.arrow,n=a===void 0?!1:a,i=t.prefixCls,l=i===void 0?"rc-dropdown":i,o=t.transitionName,c=t.animation,u=t.align,d=t.placement,m=d===void 0?"bottomLeft":d,x=t.placements,g=x===void 0?fre:x,p=t.getPopupContainer,f=t.showAction,b=t.hideAction,y=t.overlayClassName,v=t.overlayStyle,N=t.visible,S=t.trigger,w=S===void 0?["hover"]:S,C=t.autoFocus,j=t.overlay,k=t.children,E=t.onVisibleChange,R=js(t,gre),D=Ke.useState(),P=Oe(D,2),T=P[0],B=P[1],F="visible"in t?N:T,L=Ke.useRef(null),I=Ke.useRef(null),V=Ke.useRef(null);Ke.useImperativeHandle(s,function(){return L.current});var _=function(H){B(H),E==null||E(H)};xre({visible:F,triggerRef:V,onVisibleChange:_,autoFocus:C,overlayRef:I});var G=function(H){var Q=t.onOverlayClick;B(!1),Q&&Q(H)},U=function(){return Ke.createElement(hre,{ref:I,overlay:j,prefixCls:l,arrow:n})},A=function(){return typeof j=="function"?U:U()},q=function(){var H=t.minOverlayWidthMatchTrigger,Q=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?H:!Q},Y=function(){var H=t.openClassName;return H!==void 0?H:"".concat(l,"-open")},O=Ke.cloneElement(k,{className:dt((r=k.props)===null||r===void 0?void 0:r.className,F&&Y()),ref:Ol(k)?Qc(V,To(k)):void 0}),W=b;return!W&&w.indexOf("contextMenu")!==-1&&(W=["click"]),Ke.createElement(vv,Gt({builtinPlacements:g},R,{prefixCls:l,ref:L,popupClassName:dt(y,de({},"".concat(l,"-show-arrow"),n)),popupStyle:v,action:w,showAction:f,hideAction:W,popupPlacement:m,popupAlign:u,popupTransitionName:o,popupAnimation:c,popupVisible:F,stretch:q()?"minWidth":"",popup:A(),onPopupVisibleChange:_,onPopupClick:G,getPopupContainer:p}),O)}const bre=Ke.forwardRef(pre),yre=t=>typeof t!="object"&&typeof t!="function"||t===null;var D3=h.createContext(null);function I3(t,s){return t===void 0?null:"".concat(t,"-").concat(s)}function O3(t){var s=h.useContext(D3);return I3(s,t)}var vre=["children","locked"],Vn=h.createContext(null);function jre(t,s){var r=pe({},t);return Object.keys(s).forEach(function(a){var n=s[a];n!==void 0&&(r[a]=n)}),r}function Fu(t){var s=t.children,r=t.locked,a=js(t,vre),n=h.useContext(Vn),i=bh(function(){return jre(n,a)},[n,a],function(l,o){return!r&&(l[0]!==o[0]||!Su(l[1],o[1],!0))});return h.createElement(Vn.Provider,{value:i},s)}var wre=[],M3=h.createContext(null);function Rh(){return h.useContext(M3)}var B3=h.createContext(wre);function ad(t){var s=h.useContext(B3);return h.useMemo(function(){return t!==void 0?[].concat(rt(s),[t]):s},[s,t])}var L3=h.createContext(null),wv=h.createContext({});function E1(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(fv(t)){var r=t.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(r)||t.isContentEditable||r==="a"&&!!t.getAttribute("href"),n=t.getAttribute("tabindex"),i=Number(n),l=null;return n&&!Number.isNaN(i)?l=i:a&&l===null&&(l=0),a&&t.disabled&&(l=null),l!==null&&(l>=0||s&&l<0)}return!1}function Nre(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=rt(t.querySelectorAll("*")).filter(function(a){return E1(a,s)});return E1(t,s)&&r.unshift(t),r}var nb=qn.LEFT,ib=qn.RIGHT,lb=qn.UP,E0=qn.DOWN,P0=qn.ENTER,$3=qn.ESC,jd=qn.HOME,wd=qn.END,P1=[lb,E0,nb,ib];function Sre(t,s,r,a){var n,i="prev",l="next",o="children",c="parent";if(t==="inline"&&a===P0)return{inlineTrigger:!0};var u=de(de({},lb,i),E0,l),d=de(de(de(de({},nb,r?l:i),ib,r?i:l),E0,o),P0,o),m=de(de(de(de(de(de({},lb,i),E0,l),P0,o),$3,c),nb,r?o:c),ib,r?c:o),x={inline:u,horizontal:d,vertical:m,inlineSub:u,horizontalSub:m,verticalSub:m},g=(n=x["".concat(t).concat(s?"":"Sub")])===null||n===void 0?void 0:n[a];switch(g){case i:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case c:return{offset:-1,sibling:!1};case o:return{offset:1,sibling:!1};default:return null}}function Cre(t){for(var s=t;s;){if(s.getAttribute("data-menu-list"))return s;s=s.parentElement}return null}function kre(t,s){for(var r=t||document.activeElement;r;){if(s.has(r))return r;r=r.parentElement}return null}function Nv(t,s){var r=Nre(t,!0);return r.filter(function(a){return s.has(a)})}function T1(t,s,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var n=Nv(t,s),i=n.length,l=n.findIndex(function(o){return r===o});return a<0?l===-1?l=i-1:l-=1:a>0&&(l+=1),l=(l+i)%i,n[l]}var ob=function(s,r){var a=new Set,n=new Map,i=new Map;return s.forEach(function(l){var o=document.querySelector("[data-menu-id='".concat(I3(r,l),"']"));o&&(a.add(o),i.set(o,l),n.set(l,o))}),{elements:a,key2element:n,element2key:i}};function Ere(t,s,r,a,n,i,l,o,c,u){var d=h.useRef(),m=h.useRef();m.current=s;var x=function(){La.cancel(d.current)};return h.useEffect(function(){return function(){x()}},[]),function(g){var p=g.which;if([].concat(P1,[P0,$3,jd,wd]).includes(p)){var f=i(),b=ob(f,a),y=b,v=y.elements,N=y.key2element,S=y.element2key,w=N.get(s),C=kre(w,v),j=S.get(C),k=Sre(t,l(j,!0).length===1,r,p);if(!k&&p!==jd&&p!==wd)return;(P1.includes(p)||[jd,wd].includes(p))&&g.preventDefault();var E=function(I){if(I){var V=I,_=I.querySelector("a");_!=null&&_.getAttribute("href")&&(V=_);var G=S.get(I);o(G),x(),d.current=La(function(){m.current===G&&V.focus()})}};if([jd,wd].includes(p)||k.sibling||!C){var R;!C||t==="inline"?R=n.current:R=Cre(C);var D,P=Nv(R,v);p===jd?D=P[0]:p===wd?D=P[P.length-1]:D=T1(R,v,C,k.offset),E(D)}else if(k.inlineTrigger)c(j);else if(k.offset>0)c(j,!0),x(),d.current=La(function(){b=ob(f,a);var L=C.getAttribute("aria-controls"),I=document.getElementById(L),V=T1(I,b.elements);E(V)},5);else if(k.offset<0){var T=l(j,!0),B=T[T.length-2],F=N.get(B);c(B,!1),E(F)}}u==null||u(g)}}function Pre(t){Promise.resolve().then(t)}var Sv="__RC_UTIL_PATH_SPLIT__",_1=function(s){return s.join(Sv)},Tre=function(s){return s.split(Sv)},cb="rc-menu-more";function _re(){var t=h.useState({}),s=Oe(t,2),r=s[1],a=h.useRef(new Map),n=h.useRef(new Map),i=h.useState([]),l=Oe(i,2),o=l[0],c=l[1],u=h.useRef(0),d=h.useRef(!1),m=function(){d.current||r({})},x=h.useCallback(function(N,S){var w=_1(S);n.current.set(w,N),a.current.set(N,w),u.current+=1;var C=u.current;Pre(function(){C===u.current&&m()})},[]),g=h.useCallback(function(N,S){var w=_1(S);n.current.delete(w),a.current.delete(N)},[]),p=h.useCallback(function(N){c(N)},[]),f=h.useCallback(function(N,S){var w=a.current.get(N)||"",C=Tre(w);return S&&o.includes(C[0])&&C.unshift(cb),C},[o]),b=h.useCallback(function(N,S){return N.filter(function(w){return w!==void 0}).some(function(w){var C=f(w,!0);return C.includes(S)})},[f]),y=function(){var S=rt(a.current.keys());return o.length&&S.push(cb),S},v=h.useCallback(function(N){var S="".concat(a.current.get(N)).concat(Sv),w=new Set;return rt(n.current.keys()).forEach(function(C){C.startsWith(S)&&w.add(n.current.get(C))}),w},[]);return h.useEffect(function(){return function(){d.current=!0}},[]),{registerPath:x,unregisterPath:g,refreshOverflowKeys:p,isSubPathKey:b,getKeyPath:f,getKeys:y,getSubPathKeys:v}}function Dd(t){var s=h.useRef(t);s.current=t;var r=h.useCallback(function(){for(var a,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=s.current)===null||a===void 0?void 0:a.call.apply(a,[s].concat(i))},[]);return t?r:void 0}var Are=Math.random().toFixed(5).toString().slice(2),A1=0;function Rre(t){var s=ao(t,{value:t}),r=Oe(s,2),a=r[0],n=r[1];return h.useEffect(function(){A1+=1;var i="".concat(Are,"-").concat(A1);n("rc-menu-uuid-".concat(i))},[]),a}function U3(t,s,r,a){var n=h.useContext(Vn),i=n.activeKey,l=n.onActive,o=n.onInactive,c={active:i===t};return s||(c.onMouseEnter=function(u){r==null||r({key:t,domEvent:u}),l(t)},c.onMouseLeave=function(u){a==null||a({key:t,domEvent:u}),o(t)}),c}function H3(t){var s=h.useContext(Vn),r=s.mode,a=s.rtl,n=s.inlineIndent;if(r!=="inline")return null;var i=t;return a?{paddingRight:i*n}:{paddingLeft:i*n}}function W3(t){var s=t.icon,r=t.props,a=t.children,n;return s===null||s===!1?null:(typeof s=="function"?n=h.createElement(s,pe({},r)):typeof s!="boolean"&&(n=s),n||a||null)}var Fre=["item"];function fx(t){var s=t.item,r=js(t,Fre);return Object.defineProperty(r,"item",{get:function(){return _a(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),s}}),r}var Dre=["title","attribute","elementRef"],Ire=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Ore=["active"],Mre=function(t){zi(r,t);var s=Gi(r);function r(){return Rr(this,r),s.apply(this,arguments)}return Fr(r,[{key:"render",value:function(){var n=this.props,i=n.title,l=n.attribute,o=n.elementRef,c=js(n,Dre),u=Ml(c,["eventKey","popupClassName","popupOffset","onTitleClick"]);return _a(!l,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),h.createElement(Mi.Item,Gt({},l,{title:typeof i=="string"?i:void 0},u,{ref:o}))}}]),r}(h.Component),Bre=h.forwardRef(function(t,s){var r=t.style,a=t.className,n=t.eventKey;t.warnKey;var i=t.disabled,l=t.itemIcon,o=t.children,c=t.role,u=t.onMouseEnter,d=t.onMouseLeave,m=t.onClick,x=t.onKeyDown,g=t.onFocus,p=js(t,Ire),f=O3(n),b=h.useContext(Vn),y=b.prefixCls,v=b.onItemClick,N=b.disabled,S=b.overflowDisabled,w=b.itemIcon,C=b.selectedKeys,j=b.onActive,k=h.useContext(wv),E=k._internalRenderMenuItem,R="".concat(y,"-item"),D=h.useRef(),P=h.useRef(),T=N||i,B=Zc(s,P),F=ad(n),L=function(Q){return{key:n,keyPath:rt(F).reverse(),item:D.current,domEvent:Q}},I=l||w,V=U3(n,T,u,d),_=V.active,G=js(V,Ore),U=C.includes(n),A=H3(F.length),q=function(Q){if(!T){var J=L(Q);m==null||m(fx(J)),v(J)}},Y=function(Q){if(x==null||x(Q),Q.which===qn.ENTER){var J=L(Q);m==null||m(fx(J)),v(J)}},O=function(Q){j(n),g==null||g(Q)},W={};t.role==="option"&&(W["aria-selected"]=U);var z=h.createElement(Mre,Gt({ref:D,elementRef:B,role:c===null?"none":c||"menuitem",tabIndex:i?null:-1,"data-menu-id":S&&f?null:f},Ml(p,["extra"]),G,W,{component:"li","aria-disabled":i,style:pe(pe({},A),r),className:dt(R,de(de(de({},"".concat(R,"-active"),_),"".concat(R,"-selected"),U),"".concat(R,"-disabled"),T),a),onClick:q,onKeyDown:Y,onFocus:O}),o,h.createElement(W3,{props:pe(pe({},t),{},{isSelected:U}),icon:I}));return E&&(z=E(z,t,{selected:U})),z});function Lre(t,s){var r=t.eventKey,a=Rh(),n=ad(r);return h.useEffect(function(){if(a)return a.registerPath(r,n),function(){a.unregisterPath(r,n)}},[n]),a?null:h.createElement(Bre,Gt({},t,{ref:s}))}const Fh=h.forwardRef(Lre);var $re=["className","children"],Ure=function(s,r){var a=s.className,n=s.children,i=js(s,$re),l=h.useContext(Vn),o=l.prefixCls,c=l.mode,u=l.rtl;return h.createElement("ul",Gt({className:dt(o,u&&"".concat(o,"-rtl"),"".concat(o,"-sub"),"".concat(o,"-").concat(c==="inline"?"inline":"vertical"),a),role:"menu"},i,{"data-menu-list":!0,ref:r}),n)},Cv=h.forwardRef(Ure);Cv.displayName="SubMenuList";function kv(t,s){return Sl(t).map(function(r,a){if(h.isValidElement(r)){var n,i,l=r.key,o=(n=(i=r.props)===null||i===void 0?void 0:i.eventKey)!==null&&n!==void 0?n:l,c=o==null;c&&(o="tmp_key-".concat([].concat(rt(s),[a]).join("-")));var u={key:o,eventKey:o};return h.cloneElement(r,u)}return r})}var ca={adjustX:1,adjustY:1},Hre={topLeft:{points:["bl","tl"],overflow:ca},topRight:{points:["br","tr"],overflow:ca},bottomLeft:{points:["tl","bl"],overflow:ca},bottomRight:{points:["tr","br"],overflow:ca},leftTop:{points:["tr","tl"],overflow:ca},leftBottom:{points:["br","bl"],overflow:ca},rightTop:{points:["tl","tr"],overflow:ca},rightBottom:{points:["bl","br"],overflow:ca}},Wre={topLeft:{points:["bl","tl"],overflow:ca},topRight:{points:["br","tr"],overflow:ca},bottomLeft:{points:["tl","bl"],overflow:ca},bottomRight:{points:["tr","br"],overflow:ca},rightTop:{points:["tr","tl"],overflow:ca},rightBottom:{points:["br","bl"],overflow:ca},leftTop:{points:["tl","tr"],overflow:ca},leftBottom:{points:["bl","br"],overflow:ca}};function V3(t,s,r){if(s)return s;if(r)return r[t]||r.other}var Vre={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function zre(t){var s=t.prefixCls,r=t.visible,a=t.children,n=t.popup,i=t.popupStyle,l=t.popupClassName,o=t.popupOffset,c=t.disabled,u=t.mode,d=t.onVisibleChange,m=h.useContext(Vn),x=m.getPopupContainer,g=m.rtl,p=m.subMenuOpenDelay,f=m.subMenuCloseDelay,b=m.builtinPlacements,y=m.triggerSubMenuAction,v=m.forceSubMenuRender,N=m.rootClassName,S=m.motion,w=m.defaultMotions,C=h.useState(!1),j=Oe(C,2),k=j[0],E=j[1],R=g?pe(pe({},Wre),b):pe(pe({},Hre),b),D=Vre[u],P=V3(u,S,w),T=h.useRef(P);u!=="inline"&&(T.current=P);var B=pe(pe({},T.current),{},{leavedClassName:"".concat(s,"-hidden"),removeOnLeave:!1,motionAppear:!0}),F=h.useRef();return h.useEffect(function(){return F.current=La(function(){E(r)}),function(){La.cancel(F.current)}},[r]),h.createElement(vv,{prefixCls:s,popupClassName:dt("".concat(s,"-popup"),de({},"".concat(s,"-rtl"),g),l,N),stretch:u==="horizontal"?"minWidth":null,getPopupContainer:x,builtinPlacements:R,popupPlacement:D,popupVisible:k,popup:n,popupStyle:i,popupAlign:o&&{offset:o},action:c?[]:[y],mouseEnterDelay:p,mouseLeaveDelay:f,onPopupVisibleChange:d,forceRender:v,popupMotion:B,fresh:!0},a)}function Gre(t){var s=t.id,r=t.open,a=t.keyPath,n=t.children,i="inline",l=h.useContext(Vn),o=l.prefixCls,c=l.forceSubMenuRender,u=l.motion,d=l.defaultMotions,m=l.mode,x=h.useRef(!1);x.current=m===i;var g=h.useState(!x.current),p=Oe(g,2),f=p[0],b=p[1],y=x.current?r:!1;h.useEffect(function(){x.current&&b(!1)},[m]);var v=pe({},V3(i,u,d));a.length>1&&(v.motionAppear=!1);var N=v.onVisibleChanged;return v.onVisibleChanged=function(S){return!x.current&&!S&&b(!0),N==null?void 0:N(S)},f?null:h.createElement(Fu,{mode:i,locked:!x.current},h.createElement(td,Gt({visible:y},v,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(o,"-hidden")}),function(S){var w=S.className,C=S.style;return h.createElement(Cv,{id:s,className:w,style:C},n)}))}var qre=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Yre=["active"],Kre=h.forwardRef(function(t,s){var r=t.style,a=t.className,n=t.title,i=t.eventKey;t.warnKey;var l=t.disabled,o=t.internalPopupClose,c=t.children,u=t.itemIcon,d=t.expandIcon,m=t.popupClassName,x=t.popupOffset,g=t.popupStyle,p=t.onClick,f=t.onMouseEnter,b=t.onMouseLeave,y=t.onTitleClick,v=t.onTitleMouseEnter,N=t.onTitleMouseLeave,S=js(t,qre),w=O3(i),C=h.useContext(Vn),j=C.prefixCls,k=C.mode,E=C.openKeys,R=C.disabled,D=C.overflowDisabled,P=C.activeKey,T=C.selectedKeys,B=C.itemIcon,F=C.expandIcon,L=C.onItemClick,I=C.onOpenChange,V=C.onActive,_=h.useContext(wv),G=_._internalRenderSubMenuItem,U=h.useContext(L3),A=U.isSubPathKey,q=ad(),Y="".concat(j,"-submenu"),O=R||l,W=h.useRef(),z=h.useRef(),H=u??B,Q=d??F,J=E.includes(i),ie=!D&&J,K=A(T,i),oe=U3(i,O,v,N),le=oe.active,Se=js(oe,Yre),Ee=h.useState(!1),ye=Oe(Ee,2),We=ye[0],fe=ye[1],Fe=function(Nt){O||fe(Nt)},ce=function(Nt){Fe(!0),f==null||f({key:i,domEvent:Nt})},Ce=function(Nt){Fe(!1),b==null||b({key:i,domEvent:Nt})},ze=h.useMemo(function(){return le||(k!=="inline"?We||A([P],i):!1)},[k,le,P,We,i,A]),De=H3(q.length),st=function(Nt){O||(y==null||y({key:i,domEvent:Nt}),k==="inline"&&I(i,!J))},Xe=Dd(function(gt){p==null||p(fx(gt)),L(gt)}),it=function(Nt){k!=="inline"&&I(i,Nt)},ft=function(){V(i)},be=w&&"".concat(w,"-popup"),Pe=h.useMemo(function(){return h.createElement(W3,{icon:k!=="horizontal"?Q:void 0,props:pe(pe({},t),{},{isOpen:ie,isSubMenu:!0})},h.createElement("i",{className:"".concat(Y,"-arrow")}))},[k,Q,t,ie,Y]),ee=h.createElement("div",Gt({role:"menuitem",style:De,className:"".concat(Y,"-title"),tabIndex:O?null:-1,ref:W,title:typeof n=="string"?n:null,"data-menu-id":D&&w?null:w,"aria-expanded":ie,"aria-haspopup":!0,"aria-controls":be,"aria-disabled":O,onClick:st,onFocus:ft},Se),n,Pe),me=h.useRef(k);if(k!=="inline"&&q.length>1?me.current="vertical":me.current=k,!D){var Te=me.current;ee=h.createElement(zre,{mode:Te,prefixCls:Y,visible:!o&&ie&&k!=="inline",popupClassName:m,popupOffset:x,popupStyle:g,popup:h.createElement(Fu,{mode:Te==="horizontal"?"vertical":Te},h.createElement(Cv,{id:be,ref:z},c)),disabled:O,onVisibleChange:it},ee)}var qe=h.createElement(Mi.Item,Gt({ref:s,role:"none"},S,{component:"li",style:r,className:dt(Y,"".concat(Y,"-").concat(k),a,de(de(de(de({},"".concat(Y,"-open"),ie),"".concat(Y,"-active"),ze),"".concat(Y,"-selected"),K),"".concat(Y,"-disabled"),O)),onMouseEnter:ce,onMouseLeave:Ce}),ee,!D&&h.createElement(Gre,{id:be,open:ie,keyPath:q},c));return G&&(qe=G(qe,t,{selected:K,active:ze,open:ie,disabled:O})),h.createElement(Fu,{onItemClick:Xe,mode:k==="horizontal"?"vertical":k,itemIcon:H,expandIcon:Q},qe)}),Dh=h.forwardRef(function(t,s){var r=t.eventKey,a=t.children,n=ad(r),i=kv(a,n),l=Rh();h.useEffect(function(){if(l)return l.registerPath(r,n),function(){l.unregisterPath(r,n)}},[n]);var o;return l?o=i:o=h.createElement(Kre,Gt({ref:s},t),i),h.createElement(B3.Provider,{value:n},o)});function Ev(t){var s=t.className,r=t.style,a=h.useContext(Vn),n=a.prefixCls,i=Rh();return i?null:h.createElement("li",{role:"separator",className:dt("".concat(n,"-item-divider"),s),style:r})}var Xre=["className","title","eventKey","children"],Jre=h.forwardRef(function(t,s){var r=t.className,a=t.title;t.eventKey;var n=t.children,i=js(t,Xre),l=h.useContext(Vn),o=l.prefixCls,c="".concat(o,"-item-group");return h.createElement("li",Gt({ref:s,role:"presentation"},i,{onClick:function(d){return d.stopPropagation()},className:dt(c,r)}),h.createElement("div",{role:"presentation",className:"".concat(c,"-title"),title:typeof a=="string"?a:void 0},a),h.createElement("ul",{role:"group",className:"".concat(c,"-list")},n))}),Pv=h.forwardRef(function(t,s){var r=t.eventKey,a=t.children,n=ad(r),i=kv(a,n),l=Rh();return l?i:h.createElement(Jre,Gt({ref:s},Ml(t,["warnKey"])),i)}),Qre=["label","children","key","type","extra"];function db(t,s,r){var a=s.item,n=s.group,i=s.submenu,l=s.divider;return(t||[]).map(function(o,c){if(o&&At(o)==="object"){var u=o,d=u.label,m=u.children,x=u.key,g=u.type,p=u.extra,f=js(u,Qre),b=x??"tmp-".concat(c);return m||g==="group"?g==="group"?h.createElement(n,Gt({key:b},f,{title:d}),db(m,s,r)):h.createElement(i,Gt({key:b},f,{title:d}),db(m,s,r)):g==="divider"?h.createElement(l,Gt({key:b},f)):h.createElement(a,Gt({key:b},f,{extra:p}),d,(!!p||p===0)&&h.createElement("span",{className:"".concat(r,"-item-extra")},p))}return null}).filter(function(o){return o})}function R1(t,s,r,a,n){var i=t,l=pe({divider:Ev,item:Fh,group:Pv,submenu:Dh},a);return s&&(i=db(s,l,n)),kv(i,r)}var Zre=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Wl=[],eae=h.forwardRef(function(t,s){var r,a=t,n=a.prefixCls,i=n===void 0?"rc-menu":n,l=a.rootClassName,o=a.style,c=a.className,u=a.tabIndex,d=u===void 0?0:u,m=a.items,x=a.children,g=a.direction,p=a.id,f=a.mode,b=f===void 0?"vertical":f,y=a.inlineCollapsed,v=a.disabled,N=a.disabledOverflow,S=a.subMenuOpenDelay,w=S===void 0?.1:S,C=a.subMenuCloseDelay,j=C===void 0?.1:C,k=a.forceSubMenuRender,E=a.defaultOpenKeys,R=a.openKeys,D=a.activeKey,P=a.defaultActiveFirst,T=a.selectable,B=T===void 0?!0:T,F=a.multiple,L=F===void 0?!1:F,I=a.defaultSelectedKeys,V=a.selectedKeys,_=a.onSelect,G=a.onDeselect,U=a.inlineIndent,A=U===void 0?24:U,q=a.motion,Y=a.defaultMotions,O=a.triggerSubMenuAction,W=O===void 0?"hover":O,z=a.builtinPlacements,H=a.itemIcon,Q=a.expandIcon,J=a.overflowedIndicator,ie=J===void 0?"...":J,K=a.overflowedIndicatorPopupClassName,oe=a.getPopupContainer,le=a.onClick,Se=a.onOpenChange,Ee=a.onKeyDown;a.openAnimation,a.openTransitionName;var ye=a._internalRenderMenuItem,We=a._internalRenderSubMenuItem,fe=a._internalComponents,Fe=js(a,Zre),ce=h.useMemo(function(){return[R1(x,m,Wl,fe,i),R1(x,m,Wl,{},i)]},[x,m,fe]),Ce=Oe(ce,2),ze=Ce[0],De=Ce[1],st=h.useState(!1),Xe=Oe(st,2),it=Xe[0],ft=Xe[1],be=h.useRef(),Pe=Rre(p),ee=g==="rtl",me=ao(E,{value:R,postState:function(Kt){return Kt||Wl}}),Te=Oe(me,2),qe=Te[0],gt=Te[1],Nt=function(Kt){var fs=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Or(){gt(Kt),Se==null||Se(Kt)}fs?Cl.flushSync(Or):Or()},mt=h.useState(qe),Wt=Oe(mt,2),Le=Wt[0],cs=Wt[1],Gs=h.useRef(!1),Gr=h.useMemo(function(){return(b==="inline"||b==="vertical")&&y?["vertical",y]:[b,!1]},[b,y]),Xs=Oe(Gr,2),_s=Xs[0],ds=Xs[1],St=_s==="inline",at=h.useState(_s),pt=Oe(at,2),tt=pt[0],Pt=pt[1],Ns=h.useState(ds),qr=Oe(Ns,2),Dr=qr[0],Ds=qr[1];h.useEffect(function(){Pt(_s),Ds(ds),Gs.current&&(St?gt(Le):Nt(Wl))},[_s,ds]);var an=h.useState(0),X=Oe(an,2),se=X[0],Z=X[1],te=se>=ze.length-1||tt!=="horizontal"||N;h.useEffect(function(){St&&cs(qe)},[qe]),h.useEffect(function(){return Gs.current=!0,function(){Gs.current=!1}},[]);var re=_re(),ne=re.registerPath,he=re.unregisterPath,je=re.refreshOverflowKeys,ue=re.isSubPathKey,xe=re.getKeyPath,ge=re.getKeys,Re=re.getSubPathKeys,Ae=h.useMemo(function(){return{registerPath:ne,unregisterPath:he}},[ne,he]),Ye=h.useMemo(function(){return{isSubPathKey:ue}},[ue]);h.useEffect(function(){je(te?Wl:ze.slice(se+1).map(function(Is){return Is.key}))},[se,te]);var Me=ao(D||P&&((r=ze[0])===null||r===void 0?void 0:r.key),{value:D}),Ge=Oe(Me,2),nt=Ge[0],ts=Ge[1],hs=Dd(function(Is){ts(Is)}),Js=Dd(function(){ts(void 0)});h.useImperativeHandle(s,function(){return{list:be.current,focus:function(Kt){var fs,Or=ge(),Kr=ob(Or,Pe),Ji=Kr.elements,Qi=Kr.key2element,nd=Kr.element2key,Fo=Nv(be.current,Ji),$l=nt??(Fo[0]?nd.get(Fo[0]):(fs=ze.find(function(id){return!id.props.disabled}))===null||fs===void 0?void 0:fs.key),ki=Qi.get($l);if($l&&ki){var Ul;ki==null||(Ul=ki.focus)===null||Ul===void 0||Ul.call(ki,Kt)}}}});var nn=ao(I||[],{value:V,postState:function(Kt){return Array.isArray(Kt)?Kt:Kt==null?Wl:[Kt]}}),na=Oe(nn,2),Ir=na[0],Na=na[1],Ha=function(Kt){if(B){var fs=Kt.key,Or=Ir.includes(fs),Kr;L?Or?Kr=Ir.filter(function(Qi){return Qi!==fs}):Kr=[].concat(rt(Ir),[fs]):Kr=[fs],Na(Kr);var Ji=pe(pe({},Kt),{},{selectedKeys:Kr});Or?G==null||G(Ji):_==null||_(Ji)}!L&&qe.length&&tt!=="inline"&&Nt(Wl)},Yr=Dd(function(Is){le==null||le(fx(Is)),Ha(Is)}),Ci=Dd(function(Is,Kt){var fs=qe.filter(function(Kr){return Kr!==Is});if(Kt)fs.push(Is);else if(tt!=="inline"){var Or=Re(Is);fs=fs.filter(function(Kr){return!Or.has(Kr)})}Su(qe,fs,!0)||Nt(fs,!0)}),Wa=function(Kt,fs){var Or=fs??!qe.includes(Kt);Ci(Kt,Or)},Yn=Ere(tt,nt,ee,Pe,be,ge,xe,ts,Wa,Ee);h.useEffect(function(){ft(!0)},[]);var Kn=h.useMemo(function(){return{_internalRenderMenuItem:ye,_internalRenderSubMenuItem:We}},[ye,We]),Xn=tt!=="horizontal"||N?ze:ze.map(function(Is,Kt){return h.createElement(Fu,{key:Is.key,overflowDisabled:Kt>se},Is)}),Ll=h.createElement(Mi,Gt({id:p,ref:be,prefixCls:"".concat(i,"-overflow"),component:"ul",itemComponent:Fh,className:dt(i,"".concat(i,"-root"),"".concat(i,"-").concat(tt),c,de(de({},"".concat(i,"-inline-collapsed"),Dr),"".concat(i,"-rtl"),ee),l),dir:g,style:o,role:"menu",tabIndex:d,data:Xn,renderRawItem:function(Kt){return Kt},renderRawRest:function(Kt){var fs=Kt.length,Or=fs?ze.slice(-fs):null;return h.createElement(Dh,{eventKey:cb,title:ie,disabled:te,internalPopupClose:fs===0,popupClassName:K},Or)},maxCount:tt!=="horizontal"||N?Mi.INVALIDATE:Mi.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Kt){Z(Kt)},onKeyDown:Yn},Fe));return h.createElement(wv.Provider,{value:Kn},h.createElement(D3.Provider,{value:Pe},h.createElement(Fu,{prefixCls:i,rootClassName:l,mode:tt,openKeys:qe,rtl:ee,disabled:v,motion:it?q:null,defaultMotions:it?Y:null,activeKey:nt,onActive:hs,onInactive:Js,selectedKeys:Ir,inlineIndent:A,subMenuOpenDelay:w,subMenuCloseDelay:j,forceSubMenuRender:k,builtinPlacements:z,triggerSubMenuAction:W,getPopupContainer:oe,itemIcon:H,expandIcon:Q,onItemClick:Yr,onOpenChange:Ci},h.createElement(L3.Provider,{value:Ye},Ll),h.createElement("div",{style:{display:"none"},"aria-hidden":!0},h.createElement(M3.Provider,{value:Ae},De)))))}),cm=eae;cm.Item=Fh;cm.SubMenu=Dh;cm.ItemGroup=Pv;cm.Divider=Ev;const z3=h.createContext({});var tae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},sae=function(s,r){return h.createElement(_o,Gt({},s,{ref:r,icon:tae}))},G3=h.forwardRef(sae);const gx=h.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var rae=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const q3=t=>{const{prefixCls:s,className:r,dashed:a}=t,n=rae(t,["prefixCls","className","dashed"]),{getPrefixCls:i}=h.useContext(Vr),l=i("menu",s),o=dt({[`${l}-item-divider-dashed`]:!!a},r);return h.createElement(Ev,Object.assign({className:o},n))},Y3=t=>{var s;const{className:r,children:a,icon:n,title:i,danger:l,extra:o}=t,{prefixCls:c,firstLevel:u,direction:d,disableMenuItemTitleTooltip:m,inlineCollapsed:x}=h.useContext(gx),g=N=>{const S=a==null?void 0:a[0],w=h.createElement("span",{className:dt(`${c}-title-content`,{[`${c}-title-content-with-extra`]:!!o||o===0})},a);return(!n||h.isValidElement(a)&&a.type==="span")&&a&&N&&u&&typeof S=="string"?h.createElement("div",{className:`${c}-inline-collapsed-noicon`},S.charAt(0)):w},{siderCollapsed:p}=h.useContext(z3);let f=i;typeof i>"u"?f=u?a:"":i===!1&&(f="");const b={title:f};!p&&!x&&(b.title=null,b.open=!1);const y=Sl(a).length;let v=h.createElement(Fh,Object.assign({},Ml(t,["title","icon","danger"]),{className:dt({[`${c}-item-danger`]:l,[`${c}-item-only-child`]:(n?y+1:y)===1},r),title:typeof i=="string"?i:void 0}),Ao(n,{className:dt(h.isValidElement(n)?(s=n.props)===null||s===void 0?void 0:s.className:void 0,`${c}-item-icon`)}),g(x));return m||(v=h.createElement(hx,Object.assign({},b,{placement:d==="rtl"?"left":"right",classNames:{root:`${c}-inline-collapsed-tooltip`}}),v)),v};var aae=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const px=h.createContext(null),nae=h.forwardRef((t,s)=>{const{children:r}=t,a=aae(t,["children"]),n=h.useContext(px),i=h.useMemo(()=>Object.assign(Object.assign({},n),a),[n,a.prefixCls,a.mode,a.selectable,a.rootClassName]),l=GK(r),o=Zc(s,l?To(r):null);return h.createElement(px.Provider,{value:i},h.createElement(N3,{space:!0},l?h.cloneElement(r,{ref:o}):r))}),iae=t=>{const{componentCls:s,motionDurationSlow:r,horizontalLineHeight:a,colorSplit:n,lineWidth:i,lineType:l,itemPaddingInline:o}=t;return{[`${s}-horizontal`]:{lineHeight:a,border:0,borderBottom:`${It(i)} ${l} ${n}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${s}-item, ${s}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:o},[`> ${s}-item:hover,
        > ${s}-item-active,
        > ${s}-submenu ${s}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${s}-item, ${s}-submenu-title`]:{transition:[`border-color ${r}`,`background ${r}`].join(",")},[`${s}-submenu-arrow`]:{display:"none"}}}},lae=({componentCls:t,menuArrowOffset:s,calc:r})=>({[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${It(r(s).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${It(s)})`}}}}),F1=t=>F6(t),D1=(t,s)=>{const{componentCls:r,itemColor:a,itemSelectedColor:n,subMenuItemSelectedColor:i,groupTitleColor:l,itemBg:o,subMenuItemBg:c,itemSelectedBg:u,activeBarHeight:d,activeBarWidth:m,activeBarBorderWidth:x,motionDurationSlow:g,motionEaseInOut:p,motionEaseOut:f,itemPaddingInline:b,motionDurationMid:y,itemHoverColor:v,lineType:N,colorSplit:S,itemDisabledColor:w,dangerItemColor:C,dangerItemHoverColor:j,dangerItemSelectedColor:k,dangerItemActiveBg:E,dangerItemSelectedBg:R,popupBg:D,itemHoverBg:P,itemActiveBg:T,menuSubMenuBg:B,horizontalItemSelectedColor:F,horizontalItemSelectedBg:L,horizontalItemBorderRadius:I,horizontalItemHoverBg:V}=t;return{[`${r}-${s}, ${r}-${s} > ${r}`]:{color:a,background:o,[`&${r}-root:focus-visible`]:Object.assign({},F1(t)),[`${r}-item`]:{"&-group-title, &-extra":{color:l}},[`${r}-submenu-selected > ${r}-submenu-title`]:{color:i},[`${r}-item, ${r}-submenu-title`]:{color:a,[`&:not(${r}-item-disabled):focus-visible`]:Object.assign({},F1(t))},[`${r}-item-disabled, ${r}-submenu-disabled`]:{color:`${w} !important`},[`${r}-item:not(${r}-item-selected):not(${r}-submenu-selected)`]:{[`&:hover, > ${r}-submenu-title:hover`]:{color:v}},[`&:not(${r}-horizontal)`]:{[`${r}-item:not(${r}-item-selected)`]:{"&:hover":{backgroundColor:P},"&:active":{backgroundColor:T}},[`${r}-submenu-title`]:{"&:hover":{backgroundColor:P},"&:active":{backgroundColor:T}}},[`${r}-item-danger`]:{color:C,[`&${r}-item:hover`]:{[`&:not(${r}-item-selected):not(${r}-submenu-selected)`]:{color:j}},[`&${r}-item:active`]:{background:E}},[`${r}-item a`]:{"&, &:hover":{color:"inherit"}},[`${r}-item-selected`]:{color:n,[`&${r}-item-danger`]:{color:k},"a, a:hover":{color:"inherit"}},[`& ${r}-item-selected`]:{backgroundColor:u,[`&${r}-item-danger`]:{backgroundColor:R}},[`&${r}-submenu > ${r}`]:{backgroundColor:B},[`&${r}-popup > ${r}`]:{backgroundColor:D},[`&${r}-submenu-popup > ${r}`]:{backgroundColor:D},[`&${r}-horizontal`]:Object.assign(Object.assign({},s==="dark"?{borderBottom:0}:{}),{[`> ${r}-item, > ${r}-submenu`]:{top:x,marginTop:t.calc(x).mul(-1).equal(),marginBottom:0,borderRadius:I,"&::after":{position:"absolute",insetInline:b,bottom:0,borderBottom:`${It(d)} solid transparent`,transition:`border-color ${g} ${p}`,content:'""'},"&:hover, &-active, &-open":{background:V,"&::after":{borderBottomWidth:d,borderBottomColor:F}},"&-selected":{color:F,backgroundColor:L,"&:hover":{backgroundColor:L},"&::after":{borderBottomWidth:d,borderBottomColor:F}}}}),[`&${r}-root`]:{[`&${r}-inline, &${r}-vertical`]:{borderInlineEnd:`${It(x)} ${N} ${S}`}},[`&${r}-inline`]:{[`${r}-sub${r}-inline`]:{background:c},[`${r}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${It(m)} solid ${n}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${y} ${f}`,`opacity ${y} ${f}`].join(","),content:'""'},[`&${r}-item-danger`]:{"&::after":{borderInlineEndColor:k}}},[`${r}-selected, ${r}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${y} ${p}`,`opacity ${y} ${p}`].join(",")}}}}}},I1=t=>{const{componentCls:s,itemHeight:r,itemMarginInline:a,padding:n,menuArrowSize:i,marginXS:l,itemMarginBlock:o,itemWidth:c,itemPaddingInline:u}=t,d=t.calc(i).add(n).add(l).equal();return{[`${s}-item`]:{position:"relative",overflow:"hidden"},[`${s}-item, ${s}-submenu-title`]:{height:r,lineHeight:It(r),paddingInline:u,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:o,width:c},[`> ${s}-item,
            > ${s}-submenu > ${s}-submenu-title`]:{height:r,lineHeight:It(r)},[`${s}-item-group-list ${s}-submenu-title,
            ${s}-submenu-title`]:{paddingInlineEnd:d}}},oae=t=>{const{componentCls:s,iconCls:r,itemHeight:a,colorTextLightSolid:n,dropdownWidth:i,controlHeightLG:l,motionEaseOut:o,paddingXL:c,itemMarginInline:u,fontSizeLG:d,motionDurationFast:m,motionDurationSlow:x,paddingXS:g,boxShadowSecondary:p,collapsedWidth:f,collapsedIconSize:b}=t,y={height:a,lineHeight:It(a),listStylePosition:"inside",listStyleType:"disc"};return[{[s]:{"&-inline, &-vertical":Object.assign({[`&${s}-root`]:{boxShadow:"none"}},I1(t))},[`${s}-submenu-popup`]:{[`${s}-vertical`]:Object.assign(Object.assign({},I1(t)),{boxShadow:p})}},{[`${s}-submenu-popup ${s}-vertical${s}-sub`]:{minWidth:i,maxHeight:`calc(100vh - ${It(t.calc(l).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${s}-inline`]:{width:"100%",[`&${s}-root`]:{[`${s}-item, ${s}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${x}`,`background ${x}`,`padding ${m} ${o}`].join(","),[`> ${s}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${s}-sub${s}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${s}-submenu > ${s}-submenu-title`]:y,[`& ${s}-item-group-title`]:{paddingInlineStart:c}},[`${s}-item`]:y}},{[`${s}-inline-collapsed`]:{width:f,[`&${s}-root`]:{[`${s}-item, ${s}-submenu ${s}-submenu-title`]:{[`> ${s}-inline-collapsed-noicon`]:{fontSize:d,textAlign:"center"}}},[`> ${s}-item,
          > ${s}-item-group > ${s}-item-group-list > ${s}-item,
          > ${s}-item-group > ${s}-item-group-list > ${s}-submenu > ${s}-submenu-title,
          > ${s}-submenu > ${s}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${It(t.calc(b).div(2).equal())} - ${It(u)})`,textOverflow:"clip",[`
            ${s}-submenu-arrow,
            ${s}-submenu-expand-icon
          `]:{opacity:0},[`${s}-item-icon, ${r}`]:{margin:0,fontSize:b,lineHeight:It(a),"+ span":{display:"inline-block",opacity:0}}},[`${s}-item-icon, ${r}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${s}-item-icon, ${r}`]:{display:"none"},"a, a:hover":{color:n}},[`${s}-item-group-title`]:Object.assign(Object.assign({},pQ),{paddingInline:g})}}]},O1=t=>{const{componentCls:s,motionDurationSlow:r,motionDurationMid:a,motionEaseInOut:n,motionEaseOut:i,iconCls:l,iconSize:o,iconMarginInlineEnd:c}=t;return{[`${s}-item, ${s}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${r}`,`background ${r}`,`padding calc(${r} + 0.1s) ${n}`].join(","),[`${s}-item-icon, ${l}`]:{minWidth:o,fontSize:o,transition:[`font-size ${a} ${i}`,`margin ${r} ${n}`,`color ${r}`].join(","),"+ span":{marginInlineStart:c,opacity:1,transition:[`opacity ${r} ${n}`,`margin ${r}`,`color ${r}`].join(",")}},[`${s}-item-icon`]:Object.assign({},dv()),[`&${s}-item-only-child`]:{[`> ${l}, > ${s}-item-icon`]:{marginInlineEnd:0}}},[`${s}-item-disabled, ${s}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important",cursor:"not-allowed",pointerEvents:"none"},[`> ${s}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},M1=t=>{const{componentCls:s,motionDurationSlow:r,motionEaseInOut:a,borderRadius:n,menuArrowSize:i,menuArrowOffset:l}=t;return{[`${s}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:i,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${r} ${a}, opacity ${r}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(i).mul(.6).equal(),height:t.calc(i).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:n,transition:[`background ${r} ${a}`,`transform ${r} ${a}`,`top ${r} ${a}`,`color ${r} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${It(t.calc(l).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${It(l)})`}}}}},cae=t=>{const{antCls:s,componentCls:r,fontSize:a,motionDurationSlow:n,motionDurationMid:i,motionEaseInOut:l,paddingXS:o,padding:c,colorSplit:u,lineWidth:d,zIndexPopup:m,borderRadiusLG:x,subMenuItemBorderRadius:g,menuArrowSize:p,menuArrowOffset:f,lineType:b,groupTitleLineHeight:y,groupTitleFontSize:v}=t;return[{"":{[r]:Object.assign(Object.assign({},ON()),{"&-hidden":{display:"none"}})},[`${r}-submenu-hidden`]:{display:"none"}},{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},cv(t)),ON()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${n} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${r}-item`]:{flex:"none"}},[`${r}-item, ${r}-submenu, ${r}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${r}-item-group-title`]:{padding:`${It(o)} ${It(c)}`,fontSize:v,lineHeight:y,transition:`all ${n}`},[`&-horizontal ${r}-submenu`]:{transition:[`border-color ${n} ${l}`,`background ${n} ${l}`].join(",")},[`${r}-submenu, ${r}-submenu-inline`]:{transition:[`border-color ${n} ${l}`,`background ${n} ${l}`,`padding ${i} ${l}`].join(",")},[`${r}-submenu ${r}-sub`]:{cursor:"initial",transition:[`background ${n} ${l}`,`padding ${n} ${l}`].join(",")},[`${r}-title-content`]:{transition:`color ${n}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${s}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${r}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:t.padding}},[`${r}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${r}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:u,borderStyle:b,borderWidth:0,borderTopWidth:d,marginBlock:d,padding:0,"&-dashed":{borderStyle:"dashed"}}}),O1(t)),{[`${r}-item-group`]:{[`${r}-item-group-list`]:{margin:0,padding:0,[`${r}-item, ${r}-submenu-title`]:{paddingInline:`${It(t.calc(a).mul(2).equal())} ${It(c)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:m,borderRadius:x,boxShadow:"none",transformOrigin:"0 0",[`&${r}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${r}`]:Object.assign(Object.assign(Object.assign({borderRadius:x},O1(t)),M1(t)),{[`${r}-item, ${r}-submenu > ${r}-submenu-title`]:{borderRadius:g},[`${r}-submenu-title::after`]:{transition:`transform ${n} ${l}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS}}}),M1(t)),{[`&-inline-collapsed ${r}-submenu-arrow,
        &-inline ${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${It(f)})`},"&::after":{transform:`rotate(45deg) translateX(${It(t.calc(f).mul(-1).equal())})`}},[`${r}-submenu-open${r}-submenu-inline > ${r}-submenu-title > ${r}-submenu-arrow`]:{transform:`translateY(${It(t.calc(p).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${It(t.calc(f).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${It(f)})`}}})},{[`${s}-layout-header`]:{[r]:{lineHeight:"inherit"}}}]},dae=t=>{var s,r,a;const{colorPrimary:n,colorError:i,colorTextDisabled:l,colorErrorBg:o,colorText:c,colorTextDescription:u,colorBgContainer:d,colorFillAlter:m,colorFillContent:x,lineWidth:g,lineWidthBold:p,controlItemBgActive:f,colorBgTextHover:b,controlHeightLG:y,lineHeight:v,colorBgElevated:N,marginXXS:S,padding:w,fontSize:C,controlHeightSM:j,fontSizeLG:k,colorTextLightSolid:E,colorErrorHover:R}=t,D=(s=t.activeBarWidth)!==null&&s!==void 0?s:0,P=(r=t.activeBarBorderWidth)!==null&&r!==void 0?r:g,T=(a=t.itemMarginInline)!==null&&a!==void 0?a:t.marginXXS,B=new Ws(E).setA(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:c,itemColor:c,colorItemTextHover:c,itemHoverColor:c,colorItemTextHoverHorizontal:n,horizontalItemHoverColor:n,colorGroupTitle:u,groupTitleColor:u,colorItemTextSelected:n,itemSelectedColor:n,subMenuItemSelectedColor:n,colorItemTextSelectedHorizontal:n,horizontalItemSelectedColor:n,colorItemBg:d,itemBg:d,colorItemBgHover:b,itemHoverBg:b,colorItemBgActive:x,itemActiveBg:f,colorSubItemBg:m,subMenuItemBg:m,colorItemBgSelected:f,itemSelectedBg:f,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:D,colorActiveBarHeight:p,activeBarHeight:p,colorActiveBarBorderSize:g,activeBarBorderWidth:P,colorItemTextDisabled:l,itemDisabledColor:l,colorDangerItemText:i,dangerItemColor:i,colorDangerItemTextHover:i,dangerItemHoverColor:i,colorDangerItemTextSelected:i,dangerItemSelectedColor:i,colorDangerItemBgActive:o,dangerItemActiveBg:o,colorDangerItemBgSelected:o,dangerItemSelectedBg:o,itemMarginInline:T,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:y,groupTitleLineHeight:v,collapsedWidth:y*2,popupBg:N,itemMarginBlock:S,itemPaddingInline:w,horizontalLineHeight:`${y*1.15}px`,iconSize:C,iconMarginInlineEnd:j-C,collapsedIconSize:k,groupTitleFontSize:C,darkItemDisabledColor:new Ws(E).setA(.25).toRgbString(),darkItemColor:B,darkDangerItemColor:i,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:E,darkItemSelectedBg:n,darkDangerItemSelectedBg:i,darkItemHoverBg:"transparent",darkGroupTitleColor:B,darkItemHoverColor:E,darkDangerItemHoverColor:R,darkDangerItemSelectedColor:E,darkDangerItemActiveBg:i,itemWidth:D?`calc(100% + ${P}px)`:`calc(100% - ${T*2}px)`}},uae=(t,s=t,r=!0)=>am("Menu",n=>{const{colorBgElevated:i,controlHeightLG:l,fontSize:o,darkItemColor:c,darkDangerItemColor:u,darkItemBg:d,darkSubMenuItemBg:m,darkItemSelectedColor:x,darkItemSelectedBg:g,darkDangerItemSelectedBg:p,darkItemHoverBg:f,darkGroupTitleColor:b,darkItemHoverColor:y,darkItemDisabledColor:v,darkDangerItemHoverColor:N,darkDangerItemSelectedColor:S,darkDangerItemActiveBg:w,popupBg:C,darkPopupBg:j}=n,k=n.calc(o).div(7).mul(5).equal(),E=Sn(n,{menuArrowSize:k,menuHorizontalHeight:n.calc(l).mul(1.15).equal(),menuArrowOffset:n.calc(k).mul(.25).equal(),menuSubMenuBg:i,calc:n.calc,popupBg:C}),R=Sn(E,{itemColor:c,itemHoverColor:y,groupTitleColor:b,itemSelectedColor:x,subMenuItemSelectedColor:x,itemBg:d,popupBg:j,subMenuItemBg:m,itemActiveBg:"transparent",itemSelectedBg:g,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:f,itemDisabledColor:v,dangerItemColor:u,dangerItemHoverColor:N,dangerItemSelectedColor:S,dangerItemActiveBg:w,dangerItemSelectedBg:p,menuSubMenuBg:m,horizontalItemSelectedColor:x,horizontalItemSelectedBg:g});return[cae(E),iae(E),oae(E),D1(E,"light"),D1(R,"dark"),lae(E),uee(E),ux(E,"slide-up"),ux(E,"slide-down"),pv(E,"zoom-big")]},dae,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:r,unitless:{groupTitleLineHeight:!0}})(t,s),K3=t=>{var s;const{popupClassName:r,icon:a,title:n,theme:i}=t,l=h.useContext(gx),{prefixCls:o,inlineCollapsed:c,theme:u}=l,d=ad();let m;if(!a)m=c&&!d.length&&n&&typeof n=="string"?h.createElement("div",{className:`${o}-inline-collapsed-noicon`},n.charAt(0)):h.createElement("span",{className:`${o}-title-content`},n);else{const p=h.isValidElement(n)&&n.type==="span";m=h.createElement(h.Fragment,null,Ao(a,{className:dt(h.isValidElement(a)?(s=a.props)===null||s===void 0?void 0:s.className:void 0,`${o}-item-icon`)}),p?n:h.createElement("span",{className:`${o}-title-content`},n))}const x=h.useMemo(()=>Object.assign(Object.assign({},l),{firstLevel:!1}),[l]),[g]=xv("Menu");return h.createElement(gx.Provider,{value:x},h.createElement(Dh,Object.assign({},Ml(t,["icon"]),{title:m,popupClassName:dt(o,r,`${o}-${i||u}`),popupStyle:Object.assign({zIndex:g},t.popupStyle)})))};var mae=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};function lg(t){return t===null||t===!1}const xae={item:Y3,submenu:K3,divider:q3},hae=h.forwardRef((t,s)=>{var r;const a=h.useContext(px),n=a||{},{getPrefixCls:i,getPopupContainer:l,direction:o,menu:c}=h.useContext(Vr),u=i(),{prefixCls:d,className:m,style:x,theme:g="light",expandIcon:p,_internalDisableMenuItemTitleTooltip:f,inlineCollapsed:b,siderCollapsed:y,rootClassName:v,mode:N,selectable:S,onClick:w,overflowedIndicatorPopupClassName:C}=t,j=mae(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),k=Ml(j,["collapsedWidth"]);(r=n.validator)===null||r===void 0||r.call(n,{mode:N});const E=Zr((...A)=>{var q;w==null||w.apply(void 0,A),(q=n.onClick)===null||q===void 0||q.call(n)}),R=n.mode||N,D=S??n.selectable,P=b??y,T={horizontal:{motionName:`${u}-slide-up`},inline:DZ(u),other:{motionName:`${u}-zoom-big`}},B=i("menu",d||n.prefixCls),F=J6(B),[L,I,V]=uae(B,F,!a),_=dt(`${B}-${g}`,c==null?void 0:c.className,m),G=h.useMemo(()=>{var A,q;if(typeof p=="function"||lg(p))return p||null;if(typeof n.expandIcon=="function"||lg(n.expandIcon))return n.expandIcon||null;if(typeof(c==null?void 0:c.expandIcon)=="function"||lg(c==null?void 0:c.expandIcon))return(c==null?void 0:c.expandIcon)||null;const Y=(A=p??(n==null?void 0:n.expandIcon))!==null&&A!==void 0?A:c==null?void 0:c.expandIcon;return Ao(Y,{className:dt(`${B}-submenu-expand-icon`,h.isValidElement(Y)?(q=Y.props)===null||q===void 0?void 0:q.className:void 0)})},[p,n==null?void 0:n.expandIcon,c==null?void 0:c.expandIcon,B]),U=h.useMemo(()=>({prefixCls:B,inlineCollapsed:P||!1,direction:o,firstLevel:!0,theme:g,mode:R,disableMenuItemTitleTooltip:f}),[B,P,o,f,g]);return L(h.createElement(px.Provider,{value:null},h.createElement(gx.Provider,{value:U},h.createElement(cm,Object.assign({getPopupContainer:l,overflowedIndicator:h.createElement(G3,null),overflowedIndicatorPopupClassName:dt(B,`${B}-${g}`,C),mode:R,selectable:D,onClick:E},k,{inlineCollapsed:P,style:Object.assign(Object.assign({},c==null?void 0:c.style),x),className:_,prefixCls:B,direction:o,defaultMotions:T,expandIcon:G,ref:s,rootClassName:dt(v,I,n.rootClassName,V,F),_internalComponents:xae})))))}),jo=h.forwardRef((t,s)=>{const r=h.useRef(null),a=h.useContext(z3);return h.useImperativeHandle(s,()=>({menu:r.current,focus:n=>{var i;(i=r.current)===null||i===void 0||i.focus(n)}})),h.createElement(hae,Object.assign({ref:r},t,a))});jo.Item=Y3;jo.SubMenu=K3;jo.Divider=q3;jo.ItemGroup=Pv;const fae=t=>{const{componentCls:s,menuCls:r,colorError:a,colorTextLightSolid:n}=t,i=`${r}-item`;return{[`${s}, ${s}-menu-submenu`]:{[`${r} ${i}`]:{[`&${i}-danger:not(${i}-disabled)`]:{color:a,"&:hover":{color:n,backgroundColor:a}}}}}},gae=t=>{const{componentCls:s,menuCls:r,zIndexPopup:a,dropdownArrowDistance:n,sizePopupArrow:i,antCls:l,iconCls:o,motionDurationMid:c,paddingBlock:u,fontSize:d,dropdownEdgeChildPadding:m,colorTextDisabled:x,fontSizeIcon:g,controlPaddingHorizontal:p,colorBgElevated:f}=t;return[{[s]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:a,display:"block","&::before":{position:"absolute",insetBlock:t.calc(i).div(2).sub(n).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${l}-btn`]:{[`& > ${o}-down, & > ${l}-btn-icon > ${o}-down`]:{fontSize:g}},[`${s}-wrap`]:{position:"relative",[`${l}-btn > ${o}-down`]:{fontSize:g},[`${o}-down::before`]:{transition:`transform ${c}`}},[`${s}-wrap-open`]:{[`${o}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${l}-slide-down-enter${l}-slide-down-enter-active${s}-placement-bottomLeft,
          &${l}-slide-down-appear${l}-slide-down-appear-active${s}-placement-bottomLeft,
          &${l}-slide-down-enter${l}-slide-down-enter-active${s}-placement-bottom,
          &${l}-slide-down-appear${l}-slide-down-appear-active${s}-placement-bottom,
          &${l}-slide-down-enter${l}-slide-down-enter-active${s}-placement-bottomRight,
          &${l}-slide-down-appear${l}-slide-down-appear-active${s}-placement-bottomRight`]:{animationName:l3},[`&${l}-slide-up-enter${l}-slide-up-enter-active${s}-placement-topLeft,
          &${l}-slide-up-appear${l}-slide-up-appear-active${s}-placement-topLeft,
          &${l}-slide-up-enter${l}-slide-up-enter-active${s}-placement-top,
          &${l}-slide-up-appear${l}-slide-up-appear-active${s}-placement-top,
          &${l}-slide-up-enter${l}-slide-up-enter-active${s}-placement-topRight,
          &${l}-slide-up-appear${l}-slide-up-appear-active${s}-placement-topRight`]:{animationName:c3},[`&${l}-slide-down-leave${l}-slide-down-leave-active${s}-placement-bottomLeft,
          &${l}-slide-down-leave${l}-slide-down-leave-active${s}-placement-bottom,
          &${l}-slide-down-leave${l}-slide-down-leave-active${s}-placement-bottomRight`]:{animationName:o3},[`&${l}-slide-up-leave${l}-slide-up-leave-active${s}-placement-topLeft,
          &${l}-slide-up-leave${l}-slide-up-leave-active${s}-placement-top,
          &${l}-slide-up-leave${l}-slide-up-leave-active${s}-placement-topRight`]:{animationName:d3}}},_3(t,f,{arrowPlacement:{top:!0,bottom:!0}}),{[`${s} ${r}`]:{position:"relative",margin:0},[`${r}-submenu-popup`]:{position:"absolute",zIndex:a,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${s}, ${s}-menu-submenu`]:Object.assign(Object.assign({},cv(t)),{[r]:Object.assign(Object.assign({padding:m,listStyleType:"none",backgroundColor:f,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary},Mp(t)),{"&:empty":{padding:0,boxShadow:"none"},[`${r}-item-group-title`]:{padding:`${It(u)} ${It(p)}`,color:t.colorTextDescription,transition:`all ${c}`},[`${r}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${r}-item-icon`]:{minWidth:d,marginInlineEnd:t.marginXS,fontSize:t.fontSizeSM},[`${r}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${c}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${r}-item-extra`]:{paddingInlineStart:t.padding,marginInlineStart:"auto",fontSize:t.fontSizeSM,color:t.colorTextDescription}},[`${r}-item, ${r}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${It(u)} ${It(p)}`,color:t.colorText,fontWeight:"normal",fontSize:d,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${c}`,borderRadius:t.borderRadiusSM,"&:hover, &-active":{backgroundColor:t.controlItemBgHover}},Mp(t)),{"&-selected":{color:t.colorPrimary,backgroundColor:t.controlItemBgActive,"&:hover, &-active":{backgroundColor:t.controlItemBgActiveHover}},"&-disabled":{color:x,cursor:"not-allowed","&:hover":{color:x,backgroundColor:f,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${It(t.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:t.colorSplit},[`${s}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,[`${s}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:t.colorIcon,fontSize:g,fontStyle:"normal"}}}),[`${r}-item-group-list`]:{margin:`0 ${It(t.marginXS)}`,padding:0,listStyle:"none"},[`${r}-submenu-title`]:{paddingInlineEnd:t.calc(p).add(t.fontSizeSM).equal()},[`${r}-submenu-vertical`]:{position:"relative"},[`${r}-submenu${r}-submenu-disabled ${s}-menu-submenu-title`]:{[`&, ${s}-menu-submenu-arrow-icon`]:{color:x,backgroundColor:f,cursor:"not-allowed"}},[`${r}-submenu-selected ${s}-menu-submenu-title`]:{color:t.colorPrimary}})})},[ux(t,"slide-up"),ux(t,"slide-down"),e1(t,"move-up"),e1(t,"move-down"),pv(t,"zoom-big")]]},pae=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+50,paddingBlock:(t.controlHeight-t.fontSize*t.lineHeight)/2},jv({contentRadius:t.borderRadiusLG,limitVerticalRadius:!0})),P3(t)),bae=am("Dropdown",t=>{const{marginXXS:s,sizePopupArrow:r,paddingXXS:a,componentCls:n}=t,i=Sn(t,{menuCls:`${n}-menu`,dropdownArrowDistance:t.calc(r).div(2).add(s).equal(),dropdownEdgeChildPadding:a});return[gae(i),fae(i)]},pae,{resetStyle:!1}),Ih=t=>{var s;const{menu:r,arrow:a,prefixCls:n,children:i,trigger:l,disabled:o,dropdownRender:c,popupRender:u,getPopupContainer:d,overlayClassName:m,rootClassName:x,overlayStyle:g,open:p,onOpenChange:f,visible:b,onVisibleChange:y,mouseEnterDelay:v=.15,mouseLeaveDelay:N=.1,autoAdjustOverflow:S=!0,placement:w="",overlay:C,transitionName:j,destroyOnHidden:k,destroyPopupOnHide:E}=t,{getPopupContainer:R,getPrefixCls:D,direction:P,dropdown:T}=h.useContext(Vr),B=u||c;iv();const F=h.useMemo(()=>{const ye=D();return j!==void 0?j:w.includes("top")?`${ye}-slide-down`:`${ye}-slide-up`},[D,w,j]),L=h.useMemo(()=>w?w.includes("Center")?w.slice(0,w.indexOf("Center")):w:P==="rtl"?"bottomRight":"bottomLeft",[w,P]),I=D("dropdown",n),V=J6(I),[_,G,U]=bae(I,V),[,A]=Xi(),q=h.Children.only(yre(i)?h.createElement("span",null,i):i),Y=Ao(q,{className:dt(`${I}-trigger`,{[`${I}-rtl`]:P==="rtl"},q.props.className),disabled:(s=q.props.disabled)!==null&&s!==void 0?s:o}),O=o?[]:l,W=!!(O!=null&&O.includes("contextMenu")),[z,H]=ao(!1,{value:p??b}),Q=Zr(ye=>{f==null||f(ye,{source:"trigger"}),y==null||y(ye),H(ye)}),J=dt(m,x,G,U,V,T==null?void 0:T.className,{[`${I}-rtl`]:P==="rtl"}),ie=A3({arrowPointAtCenter:typeof a=="object"&&a.pointAtCenter,autoAdjustOverflow:S,offset:A.marginXXS,arrowWidth:a?A.sizePopupArrow:0,borderRadius:A.borderRadius}),K=Zr(()=>{r!=null&&r.selectable&&(r!=null&&r.multiple)||(f==null||f(!1,{source:"menu"}),H(!1))}),oe=()=>{let ye;return r!=null&&r.items?ye=h.createElement(jo,Object.assign({},r)):typeof C=="function"?ye=C():ye=C,B&&(ye=B(ye)),ye=h.Children.only(typeof ye=="string"?h.createElement("span",null,ye):ye),h.createElement(nae,{prefixCls:`${I}-menu`,rootClassName:dt(U,V),expandIcon:h.createElement("span",{className:`${I}-menu-submenu-arrow`},P==="rtl"?h.createElement(dre,{className:`${I}-menu-submenu-arrow-icon`}):h.createElement(dee,{className:`${I}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:K,validator:({mode:We})=>{}},ye)},[le,Se]=xv("Dropdown",g==null?void 0:g.zIndex);let Ee=h.createElement(bre,Object.assign({alignPoint:W},Ml(t,["rootClassName"]),{mouseEnterDelay:v,mouseLeaveDelay:N,visible:z,builtinPlacements:ie,arrow:!!a,overlayClassName:J,prefixCls:I,getPopupContainer:d||R,transitionName:F,trigger:O,overlay:oe,placement:L,onVisibleChange:Q,overlayStyle:Object.assign(Object.assign(Object.assign({},T==null?void 0:T.style),g),{zIndex:le}),autoDestroy:k??E}),Y);return le&&(Ee=h.createElement(mv.Provider,{value:Se},Ee)),_(Ee)},yae=jse(Ih,"align",void 0,"dropdown",t=>t),vae=t=>h.createElement(yae,Object.assign({},t),h.createElement("span",null));Ih._InternalPanelDoNotUseOrYouWillBeFired=vae;function B1(t){return["small","middle","large"].includes(t)}function L1(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const X3=Ke.createContext({latestIndex:0}),jae=X3.Provider,wae=({className:t,index:s,children:r,split:a,style:n})=>{const{latestIndex:i}=h.useContext(X3);return r==null?null:h.createElement(h.Fragment,null,h.createElement("div",{className:t,style:n},r),s<i&&a&&h.createElement("span",{className:`${t}-split`},a))};var Nae=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const Sae=h.forwardRef((t,s)=>{var r;const{getPrefixCls:a,direction:n,size:i,className:l,style:o,classNames:c,styles:u}=ov("space"),{size:d=i??"small",align:m,className:x,rootClassName:g,children:p,direction:f="horizontal",prefixCls:b,split:y,style:v,wrap:N=!1,classNames:S,styles:w}=t,C=Nae(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[j,k]=Array.isArray(d)?d:[d,d],E=B1(k),R=B1(j),D=L1(k),P=L1(j),T=Sl(p,{keepEmpty:!0}),B=m===void 0&&f==="horizontal"?"center":m,F=a("space",b),[L,I,V]=r3(F),_=dt(F,l,I,`${F}-${f}`,{[`${F}-rtl`]:n==="rtl",[`${F}-align-${B}`]:B,[`${F}-gap-row-${k}`]:E,[`${F}-gap-col-${j}`]:R},x,g,V),G=dt(`${F}-item`,(r=S==null?void 0:S.item)!==null&&r!==void 0?r:c.item);let U=0;const A=T.map((O,W)=>{var z;O!=null&&(U=W);const H=(O==null?void 0:O.key)||`${G}-${W}`;return h.createElement(wae,{className:G,key:H,index:W,split:y,style:(z=w==null?void 0:w.item)!==null&&z!==void 0?z:u.item},O)}),q=h.useMemo(()=>({latestIndex:U}),[U]);if(T.length===0)return null;const Y={};return N&&(Y.flexWrap="wrap"),!R&&P&&(Y.columnGap=j),!E&&D&&(Y.rowGap=k),L(h.createElement("div",Object.assign({ref:s,className:_,style:Object.assign(Object.assign(Object.assign({},Y),o),v)},C),h.createElement(jae,{value:q},A)))}),J3=Sae;J3.Compact=KZ;var Cae=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const Q3=t=>{const{getPopupContainer:s,getPrefixCls:r,direction:a}=h.useContext(Vr),{prefixCls:n,type:i="default",danger:l,disabled:o,loading:c,onClick:u,htmlType:d,children:m,className:x,menu:g,arrow:p,autoFocus:f,overlay:b,trigger:y,align:v,open:N,onOpenChange:S,placement:w,getPopupContainer:C,href:j,icon:k=h.createElement(G3,null),title:E,buttonsRender:R=ie=>ie,mouseEnterDelay:D,mouseLeaveDelay:P,overlayClassName:T,overlayStyle:B,destroyOnHidden:F,destroyPopupOnHide:L,dropdownRender:I,popupRender:V}=t,_=Cae(t,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyOnHidden","destroyPopupOnHide","dropdownRender","popupRender"]),G=r("dropdown",n),U=`${G}-button`,q={menu:g,arrow:p,autoFocus:f,align:v,disabled:o,trigger:o?[]:y,onOpenChange:S,getPopupContainer:C||s,mouseEnterDelay:D,mouseLeaveDelay:P,overlayClassName:T,overlayStyle:B,destroyOnHidden:F,popupRender:V||I},{compactSize:Y,compactItemClassnames:O}=n3(G,a),W=dt(U,O,x);"destroyPopupOnHide"in t&&(q.destroyPopupOnHide=L),"overlay"in t&&(q.overlay=b),"open"in t&&(q.open=N),"placement"in t?q.placement=w:q.placement=a==="rtl"?"bottomLeft":"bottomRight";const z=h.createElement(Au,{type:i,danger:l,disabled:o,loading:c,onClick:u,htmlType:d,href:j,title:E},m),H=h.createElement(Au,{type:i,danger:l,icon:k}),[Q,J]=R([z,H]);return h.createElement(J3.Compact,Object.assign({className:W,size:Y,block:!0},_),Q,h.createElement(Ih,Object.assign({},q),J))};Q3.__ANT_BUTTON=!0;const Z3=Ih;Z3.Button=Q3;const kae=()=>{const{user:t}=He(ce=>ce.auth),s=He(Nr),[r,a]=h.useState("rooms"),[n,i]=h.useState([]),[l,o]=h.useState(null),[c,u]=h.useState([]),[d,m]=h.useState(null),[x,g]=h.useState([]),[p,f]=h.useState(null),[b,y]=h.useState(""),[v,N]=h.useState("all"),[S,w]=h.useState("name"),[C,j]=h.useState({totalResidents:0,paidResidents:0,pendingResidents:0,totalAmount:0}),[k,E]=h.useState(!1),[R,D]=h.useState(""),[P,T]=h.useState(""),[B,F]=h.useState(null),[L,I]=h.useState(null),[V,_]=h.useState(!1),[G,U]=h.useState(!1),[A,q]=h.useState(!0),[Y,O]=h.useState(!0),[W,z]=h.useState(!1);h.useEffect(()=>{s&&(H(),Q())},[s]),h.useEffect(()=>{if(x.length>0){const ce=x.filter(De=>De.paymentStatus==="paid"||De.hasCurrentMonthPayment).length,Ce=x.filter(De=>De.paymentStatus!=="paid"&&!De.hasCurrentMonthPayment).length,ze=x.reduce((De,st)=>De+(st.rentAmount||8e3),0);j({totalResidents:x.length,paidResidents:ce,pendingResidents:Ce,totalAmount:ze})}},[x]);const H=async()=>{if(s)try{q(!0);const ce=await Tt.get(`/pg/rooms?branchId=${s._id}`);ce.data.success?i(ce.data.data||[]):(console.error("Failed to fetch rooms:",ce.data.message),M.error("Failed to fetch rooms"))}catch(ce){console.error("Error fetching rooms:",ce),M.error("Failed to fetch rooms. Please check your connection.")}finally{q(!1)}},Q=async()=>{if(s)try{O(!0);try{await Tt.put("/residents/payment-status/update-all")}catch(Ce){console.error("Error updating payment status:",Ce)}const ce=await Tt.get(`/residents?branchId=${s._id}`);ce.data.success?g(ce.data.data.residents||[]):(console.error("Failed to fetch residents:",ce.data.message),M.error("Failed to fetch residents"))}catch(ce){console.error("Error fetching residents:",ce),M.error("Failed to fetch residents. Please check your connection.")}finally{O(!1)}},J=async ce=>{try{z(!0);const Ce=await Tt.get(`/payments/rooms/${ce}/residents?branchId=${(s==null?void 0:s._id)||""}`);Ce.data.success?u(Ce.data.data||[]):(console.error("Failed to fetch room residents:",Ce.data.message),M.error("Failed to fetch room residents"))}catch(Ce){console.error("Error fetching room residents:",Ce),M.error("Failed to fetch room residents. Please check your connection.")}finally{z(!1)}},ie=ce=>{o(ce),m(null),J(ce._id)},K=ce=>{if(ce.paymentStatus==="paid"||ce.hasCurrentMonthPayment){M.error("Payment for this month has already been completed");return}m(ce),E(!0)},oe=ce=>{f(ce),U(!0)},le=ce=>{const Ce=ce.target.files[0];if(Ce){F(Ce);const ze=new FileReader;ze.onload=De=>{I(De.target.result)},ze.readAsDataURL(Ce)}},Se=async()=>{var ce,Ce,ze;if(!R){M.error("Please select payment date");return}if(!P){M.error("Please select payment method");return}if(P==="upi"&&!B){M.error("Please upload UPI payment receipt");return}_(!0);try{const De=new FormData;De.append("paymentDate",R),De.append("paymentMethod",P),B&&De.append("paymentImage",B);const st=(d==null?void 0:d._id)||(p==null?void 0:p._id),Xe=await Tt.post(`/payments/resident/${st}/mark-paid`,De,{headers:{"Content-Type":"multipart/form-data"}});Xe.data.success?(M.success("Payment marked as completed successfully!"),E(!1),D(""),T(""),F(null),I(null),m(null),f(null),await Ee()):M.error(Xe.data.message||"Failed to mark payment")}catch(De){console.error("Error marking payment:",De),(ze=(Ce=(ce=De.response)==null?void 0:ce.data)==null?void 0:Ce.message)!=null&&ze.includes("already exists")?M.error("Payment for this month has already been marked as completed"):M.error("Failed to mark payment. Please try again.")}finally{_(!1)}},Ee=async()=>{try{await Tt.put("/residents/payment-status/update-all"),await Q(),r==="rooms"&&l&&await J(l._id)}catch(ce){console.error("Error refreshing data after payment:",ce)}},We=(()=>{let ce=x.filter(Ce=>{var ze,De,st,Xe;return((ze=Ce.firstName)==null?void 0:ze.toLowerCase().includes(b.toLowerCase()))||((De=Ce.lastName)==null?void 0:De.toLowerCase().includes(b.toLowerCase()))||((st=Ce.phone)==null?void 0:st.includes(b))||((Xe=Ce.email)==null?void 0:Xe.toLowerCase().includes(b.toLowerCase()))});return v!=="all"&&(v==="paid"?ce=ce.filter(Ce=>Ce.paymentStatus==="paid"||Ce.hasCurrentMonthPayment):v==="pending"&&(ce=ce.filter(Ce=>Ce.paymentStatus!=="paid"&&!Ce.hasCurrentMonthPayment))),ce.sort((Ce,ze)=>{switch(S){case"name":return(Ce.firstName+" "+Ce.lastName).localeCompare(ze.firstName+" "+ze.lastName);case"room":return(Ce.roomNumber||"").localeCompare(ze.roomNumber||"");case"amount":return(ze.rentAmount||8e3)-(Ce.rentAmount||8e3);case"status":const De=Ce.paymentStatus==="paid"||Ce.hasCurrentMonthPayment?"paid":"pending",st=ze.paymentStatus==="paid"||ze.hasCurrentMonthPayment?"paid":"pending";return De.localeCompare(st);default:return 0}}),ce})(),fe=()=>e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-sky-500"}),e.jsx("span",{className:"ml-2 text-gray-600 text-sm",children:"Loading..."})]}),Fe=({message:ce,onRetry:Ce})=>e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:ce}),Ce&&e.jsx("button",{onClick:Ce,className:"px-3 py-1 bg-sky-500 text-white rounded text-sm hover:bg-sky-600 transition-colors",children:"Try Again"})]})});return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 p-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:e.jsx(Ks,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Management"})]}),e.jsxs("button",{onClick:Ee,className:"flex items-center space-x-1 px-3 py-1.5 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Residents"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:C.totalResidents})]}),e.jsx(jt,{className:"h-5 w-5 text-sky-500"})]})}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Paid"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:C.paidResidents})]}),e.jsx(Be,{className:"h-5 w-5 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:C.pendingResidents})]}),e.jsx(ut,{className:"h-5 w-5 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₹",C.totalAmount.toLocaleString()]})]}),e.jsx(Ft,{className:"h-5 w-5 text-green-500"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>a("rooms"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${r==="rooms"?"text-sky-600 border-b-2 border-sky-600 bg-sky-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"By Room"})]})}),e.jsx("button",{onClick:()=>a("residents"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${r==="residents"?"text-sky-600 border-b-2 border-sky-600 bg-sky-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{children:"By Resident"})]})})]}),e.jsxs("div",{className:"p-4",children:[r==="rooms"&&e.jsx(ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:e.jsxs("div",{className:`grid gap-4 ${l?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"} h-[calc(100vh-200px)]`,children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-50 to-blue-50 p-4 rounded-lg border border-sky-200 flex flex-col h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Ie,{className:"h-3 w-3 text-blue-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Select Room"})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[n.length," rooms"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:A?e.jsx(fe,{}):n.length===0?e.jsx(Fe,{message:"No rooms found. Please add some rooms first.",onRetry:H}):e.jsx("div",{className:`grid gap-3 ${l?"grid-cols-2":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:n.map(ce=>e.jsx(ae.button,{onClick:()=>ie(ce),whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},className:`p-3 rounded-lg border transition-all text-left ${(l==null?void 0:l._id)===ce._id?"border-sky-500 bg-sky-50 shadow-md":"border-gray-200 bg-white hover:border-sky-300 hover:shadow-sm"}`,children:e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-sm",children:["Room ",ce.roomNumber]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[ce.sharingType," Sharing"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["₹",ce.rentAmount||8e3,"/month"]})]})},ce._id))})})]}),l&&e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(jt,{className:"h-3 w-3 text-green-600"})}),e.jsxs("h3",{className:"text-base font-bold text-gray-900",children:["Residents in Room ",l.roomNumber]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[c.length," residents"]}),e.jsx("button",{onClick:()=>J(l._id),className:"text-green-600 hover:text-green-700 text-xs font-medium",children:"Refresh"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:W?e.jsx(fe,{}):c.length===0?e.jsx(Fe,{message:"No residents found in this room.",onRetry:()=>J(l._id)}):e.jsx("div",{className:"space-y-3",children:c.map(ce=>e.jsxs(ae.div,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},className:"bg-white p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-sm",children:[ce.firstName," ",ce.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:ce.phone})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["₹",ce.rentAmount||8e3]}),e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${ce.paymentStatus==="paid"||ce.hasCurrentMonthPayment?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:ce.paymentStatus==="paid"||ce.hasCurrentMonthPayment?"Paid":"Pending"})]})]}),e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(xs,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:["Bed ",ce.bedNumber||"Unassigned"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(Tr,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:ce.email||"No email"})]})]}),ce.paymentStatus==="paid"||ce.hasCurrentMonthPayment?e.jsx(hx,{title:"Payment already completed for this month",placement:"top",children:e.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center space-x-1 px-2 py-1.5 bg-gray-300 text-gray-500 rounded text-xs cursor-not-allowed transition-all",children:[e.jsx(Be,{className:"h-3 w-3"}),e.jsx("span",{children:"Payment Done"})]})}):e.jsxs("button",{onClick:()=>K(ce),className:"w-full flex items-center justify-center space-x-1 px-2 py-1.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded text-xs hover:from-green-600 hover:to-emerald-600 transition-all",children:[e.jsx(as,{className:"h-3 w-3"}),e.jsx("span",{children:"Mark Payment"})]})]},ce._id))})})]})]})}),r==="residents"&&e.jsxs(ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-50 to-blue-50 p-4 rounded-lg border border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(Os,{className:"h-3 w-3 text-purple-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Search & Filter"})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[We.length," residents"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by name, phone, or email...",value:b,onChange:ce=>y(ce.target.value),className:"w-full px-3 py-2 pl-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm"}),e.jsx(Os,{className:"h-4 w-4 text-gray-400 absolute left-2.5 top-1/2 transform -translate-y-1/2"})]}),e.jsxs("select",{value:v,onChange:ce=>N(ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("select",{value:S,onChange:ce=>w(ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"room",children:"Sort by Room"}),e.jsx("option",{value:"amount",children:"Sort by Amount"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-sky-50 to-blue-50 p-4 rounded-lg border border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(jt,{className:"h-3 w-3 text-green-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"All Residents"})]}),e.jsx("button",{onClick:Q,className:"text-sky-600 hover:text-sky-700 text-xs font-medium",children:"Refresh"})]}),Y?e.jsx(fe,{}):We.length===0?e.jsx(Fe,{message:"No residents found. Please add some residents first.",onRetry:Q}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:We.map(ce=>e.jsxs(ae.div,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},className:"bg-white p-3 rounded-lg border border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-sm",children:[ce.firstName," ",ce.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:ce.phone})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["₹",ce.rentAmount||8e3]}),e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${ce.paymentStatus==="paid"||ce.hasCurrentMonthPayment?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:ce.paymentStatus==="paid"||ce.hasCurrentMonthPayment?"Paid":"Pending"})]})]}),e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(Ie,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:["Room ",ce.roomNumber||"Unassigned"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(xs,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:["Bed ",ce.bedNumber||"Unassigned"]})]})]}),e.jsxs("button",{onClick:()=>oe(ce),className:"w-full flex items-center justify-center space-x-1 px-2 py-1.5 bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded text-xs hover:from-sky-600 hover:to-blue-600 transition-all",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsx("span",{children:"View Details"})]})]},ce._id))})]})]})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-sm w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Mark Payment as Completed"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:[d==null?void 0:d.firstName," ",d==null?void 0:d.lastName]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-0.5",children:[e.jsxs("p",{children:["Room: ",d==null?void 0:d.roomNumber]}),e.jsxs("p",{children:["Bed: ",d==null?void 0:d.bedNumber]}),e.jsxs("p",{children:["Amount: ₹",(d==null?void 0:d.rentAmount)||8e3]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Date"}),e.jsx("input",{type:"date",value:R,onChange:ce=>D(ce.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsxs("select",{value:P,onChange:ce=>T(ce.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"upi",children:"UPI"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Receipt ",P==="upi"?"(Required)":"(Optional)"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded p-3 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:le,className:"hidden",id:"payment-image"}),e.jsx("label",{htmlFor:"payment-image",className:"cursor-pointer",children:L?e.jsxs("div",{className:"space-y-1",children:[e.jsx("img",{src:L,alt:"Receipt preview",className:"w-24 h-24 object-cover rounded mx-auto"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Click to change image"})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsx(Bi,{className:"h-8 w-8 text-gray-400 mx-auto"}),e.jsx("p",{className:"text-xs text-gray-600",children:P==="upi"?"Upload UPI receipt (Required)":"Upload receipt (Optional)"})]})})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx("button",{onClick:()=>E(!1),disabled:V,className:"flex-1 px-3 py-2 text-gray-700 bg-gray-100 rounded text-sm hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:Se,disabled:V,className:"flex-1 px-3 py-2 bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded text-sm hover:from-sky-600 hover:to-blue-600 transition-colors disabled:opacity-50",children:V?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Processing..."]}):"Mark Payment"})]})]})]})}),G&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-sm w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Resident Details"}),e.jsx("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:[p.firstName," ",p.lastName]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-0.5",children:[e.jsxs("p",{children:["Phone: ",p.phone]}),e.jsxs("p",{children:["Email: ",p.email||"Not provided"]}),e.jsxs("p",{children:["Room: ",p.roomNumber||"Unassigned"]}),e.jsxs("p",{children:["Bed: ",p.bedNumber||"Unassigned"]}),e.jsxs("p",{children:["Amount: ₹",p.rentAmount||8e3]}),e.jsxs("p",{children:["Status: ",e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${p.paymentStatus==="paid"||p.hasCurrentMonthPayment?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p.paymentStatus==="paid"||p.hasCurrentMonthPayment?"Paid":"Pending"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>U(!1),className:"flex-1 px-3 py-2 text-gray-700 bg-gray-100 rounded text-sm hover:bg-gray-200 transition-colors",children:"Close"}),p.paymentStatus!=="paid"&&!p.hasCurrentMonthPayment&&e.jsx("button",{onClick:()=>{U(!1),m(p),E(!0)},className:"flex-1 px-3 py-2 bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded text-sm hover:from-sky-600 hover:to-blue-600 transition-colors",children:"Mark Payment"}),p.paymentStatus==="paid"||p.hasCurrentMonthPayment?e.jsx(hx,{title:"Payment already completed for this month",placement:"top",children:e.jsx("button",{disabled:!0,className:"flex-1 px-3 py-2 bg-gray-300 text-gray-500 rounded text-sm cursor-not-allowed transition-colors",children:"Payment Done"})}):null]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 p-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ks,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Select a Branch"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please use the branch selector in the header to manage payments."})]})})})};var dm={},Eae=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},eE={},rn={};let Tv;const Pae=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];rn.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};rn.getSymbolTotalCodewords=function(s){return Pae[s]};rn.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s};rn.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');Tv=s};rn.isKanjiModeEnabled=function(){return typeof Tv<"u"};rn.toSJIS=function(s){return Tv(s)};var Oh={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},t.from=function(a,n){if(t.isValid(a))return a;try{return s(a)}catch{return n}}})(Oh);function tE(){this.buffer=[],this.length=0}tE.prototype={get:function(t){const s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)===1},put:function(t,s){for(let r=0;r<s;r++)this.putBit((t>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var Tae=tE;function um(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}um.prototype.set=function(t,s,r,a){const n=t*this.size+s;this.data[n]=r,a&&(this.reservedBit[n]=!0)};um.prototype.get=function(t,s){return this.data[t*this.size+s]};um.prototype.xor=function(t,s,r){this.data[t*this.size+s]^=r};um.prototype.isReserved=function(t,s){return this.reservedBit[t*this.size+s]};var _ae=um,sE={};(function(t){const s=rn.getSymbolSize;t.getRowColCoords=function(a){if(a===1)return[];const n=Math.floor(a/7)+2,i=s(a),l=i===145?26:Math.ceil((i-13)/(2*n-2))*2,o=[i-7];for(let c=1;c<n-1;c++)o[c]=o[c-1]-l;return o.push(6),o.reverse()},t.getPositions=function(a){const n=[],i=t.getRowColCoords(a),l=i.length;for(let o=0;o<l;o++)for(let c=0;c<l;c++)o===0&&c===0||o===0&&c===l-1||o===l-1&&c===0||n.push([i[o],i[c]]);return n}})(sE);var rE={};const Aae=rn.getSymbolSize,$1=7;rE.getPositions=function(s){const r=Aae(s);return[[0,0],[r-$1,0],[0,r-$1]]};var aE={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const i=n.size;let l=0,o=0,c=0,u=null,d=null;for(let m=0;m<i;m++){o=c=0,u=d=null;for(let x=0;x<i;x++){let g=n.get(m,x);g===u?o++:(o>=5&&(l+=s.N1+(o-5)),u=g,o=1),g=n.get(x,m),g===d?c++:(c>=5&&(l+=s.N1+(c-5)),d=g,c=1)}o>=5&&(l+=s.N1+(o-5)),c>=5&&(l+=s.N1+(c-5))}return l},t.getPenaltyN2=function(n){const i=n.size;let l=0;for(let o=0;o<i-1;o++)for(let c=0;c<i-1;c++){const u=n.get(o,c)+n.get(o,c+1)+n.get(o+1,c)+n.get(o+1,c+1);(u===4||u===0)&&l++}return l*s.N2},t.getPenaltyN3=function(n){const i=n.size;let l=0,o=0,c=0;for(let u=0;u<i;u++){o=c=0;for(let d=0;d<i;d++)o=o<<1&2047|n.get(u,d),d>=10&&(o===1488||o===93)&&l++,c=c<<1&2047|n.get(d,u),d>=10&&(c===1488||c===93)&&l++}return l*s.N3},t.getPenaltyN4=function(n){let i=0;const l=n.data.length;for(let c=0;c<l;c++)i+=n.data[c];return Math.abs(Math.ceil(i*100/l/5)-10)*s.N4};function r(a,n,i){switch(a){case t.Patterns.PATTERN000:return(n+i)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(n+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return n*i%2+n*i%3===0;case t.Patterns.PATTERN110:return(n*i%2+n*i%3)%2===0;case t.Patterns.PATTERN111:return(n*i%3+(n+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}t.applyMask=function(n,i){const l=i.size;for(let o=0;o<l;o++)for(let c=0;c<l;c++)i.isReserved(c,o)||i.xor(c,o,r(n,c,o))},t.getBestMask=function(n,i){const l=Object.keys(t.Patterns).length;let o=0,c=1/0;for(let u=0;u<l;u++){i(u),t.applyMask(u,n);const d=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(u,n),d<c&&(c=d,o=u)}return o}})(aE);var Mh={};const fl=Oh,Km=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Xm=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Mh.getBlocksCount=function(s,r){switch(r){case fl.L:return Km[(s-1)*4+0];case fl.M:return Km[(s-1)*4+1];case fl.Q:return Km[(s-1)*4+2];case fl.H:return Km[(s-1)*4+3];default:return}};Mh.getTotalCodewordsCount=function(s,r){switch(r){case fl.L:return Xm[(s-1)*4+0];case fl.M:return Xm[(s-1)*4+1];case fl.Q:return Xm[(s-1)*4+2];case fl.H:return Xm[(s-1)*4+3];default:return}};var nE={},Bh={};const Xd=new Uint8Array(512),bx=new Uint8Array(256);(function(){let s=1;for(let r=0;r<255;r++)Xd[r]=s,bx[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)Xd[r]=Xd[r-255]})();Bh.log=function(s){if(s<1)throw new Error("log("+s+")");return bx[s]};Bh.exp=function(s){return Xd[s]};Bh.mul=function(s,r){return s===0||r===0?0:Xd[bx[s]+bx[r]]};(function(t){const s=Bh;t.mul=function(a,n){const i=new Uint8Array(a.length+n.length-1);for(let l=0;l<a.length;l++)for(let o=0;o<n.length;o++)i[l+o]^=s.mul(a[l],n[o]);return i},t.mod=function(a,n){let i=new Uint8Array(a);for(;i.length-n.length>=0;){const l=i[0];for(let c=0;c<n.length;c++)i[c]^=s.mul(n[c],l);let o=0;for(;o<i.length&&i[o]===0;)o++;i=i.slice(o)}return i},t.generateECPolynomial=function(a){let n=new Uint8Array([1]);for(let i=0;i<a;i++)n=t.mul(n,new Uint8Array([1,s.exp(i)]));return n}})(nE);const iE=nE;function _v(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}_v.prototype.initialize=function(s){this.degree=s,this.genPoly=iE.generateECPolynomial(this.degree)};_v.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const a=iE.mod(r,this.genPoly),n=this.degree-a.length;if(n>0){const i=new Uint8Array(this.degree);return i.set(a,n),i}return a};var Rae=_v,lE={},Bl={},Av={};Av.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40};var Si={};const oE="[0-9]+",Fae="[A-Z $%*+\\-./:]+";let Du="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Du=Du.replace(/u/g,"\\u");const Dae="(?:(?![A-Z0-9 $%*+\\-./:]|"+Du+`)(?:.|[\r
]))+`;Si.KANJI=new RegExp(Du,"g");Si.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Si.BYTE=new RegExp(Dae,"g");Si.NUMERIC=new RegExp(oE,"g");Si.ALPHANUMERIC=new RegExp(Fae,"g");const Iae=new RegExp("^"+Du+"$"),Oae=new RegExp("^"+oE+"$"),Mae=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Si.testKanji=function(s){return Iae.test(s)};Si.testNumeric=function(s){return Oae.test(s)};Si.testAlphanumeric=function(s){return Mae.test(s)};(function(t){const s=Av,r=Si;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!s.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function a(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(i,l){if(t.isValid(i))return i;try{return a(i)}catch{return l}}})(Bl);(function(t){const s=rn,r=Mh,a=Oh,n=Bl,i=Av,l=7973,o=s.getBCHDigit(l);function c(x,g,p){for(let f=1;f<=40;f++)if(g<=t.getCapacity(f,p,x))return f}function u(x,g){return n.getCharCountIndicator(x,g)+4}function d(x,g){let p=0;return x.forEach(function(f){const b=u(f.mode,g);p+=b+f.getBitsLength()}),p}function m(x,g){for(let p=1;p<=40;p++)if(d(x,p)<=t.getCapacity(p,g,n.MIXED))return p}t.from=function(g,p){return i.isValid(g)?parseInt(g,10):p},t.getCapacity=function(g,p,f){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof f>"u"&&(f=n.BYTE);const b=s.getSymbolTotalCodewords(g),y=r.getTotalCodewordsCount(g,p),v=(b-y)*8;if(f===n.MIXED)return v;const N=v-u(f,g);switch(f){case n.NUMERIC:return Math.floor(N/10*3);case n.ALPHANUMERIC:return Math.floor(N/11*2);case n.KANJI:return Math.floor(N/13);case n.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(g,p){let f;const b=a.from(p,a.M);if(Array.isArray(g)){if(g.length>1)return m(g,b);if(g.length===0)return 1;f=g[0]}else f=g;return c(f.mode,f.getLength(),b)},t.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let p=g<<12;for(;s.getBCHDigit(p)-o>=0;)p^=l<<s.getBCHDigit(p)-o;return g<<12|p}})(lE);var cE={};const ub=rn,dE=1335,Bae=21522,U1=ub.getBCHDigit(dE);cE.getEncodedBits=function(s,r){const a=s.bit<<3|r;let n=a<<10;for(;ub.getBCHDigit(n)-U1>=0;)n^=dE<<ub.getBCHDigit(n)-U1;return(a<<10|n)^Bae};var uE={};const Lae=Bl;function Fc(t){this.mode=Lae.NUMERIC,this.data=t.toString()}Fc.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};Fc.prototype.getLength=function(){return this.data.length};Fc.prototype.getBitsLength=function(){return Fc.getBitsLength(this.data.length)};Fc.prototype.write=function(s){let r,a,n;for(r=0;r+3<=this.data.length;r+=3)a=this.data.substr(r,3),n=parseInt(a,10),s.put(n,10);const i=this.data.length-r;i>0&&(a=this.data.substr(r),n=parseInt(a,10),s.put(n,i*3+1))};var $ae=Fc;const Uae=Bl,og=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Dc(t){this.mode=Uae.ALPHANUMERIC,this.data=t}Dc.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)};Dc.prototype.getLength=function(){return this.data.length};Dc.prototype.getBitsLength=function(){return Dc.getBitsLength(this.data.length)};Dc.prototype.write=function(s){let r;for(r=0;r+2<=this.data.length;r+=2){let a=og.indexOf(this.data[r])*45;a+=og.indexOf(this.data[r+1]),s.put(a,11)}this.data.length%2&&s.put(og.indexOf(this.data[r]),6)};var Hae=Dc;const Wae=Bl;function Ic(t){this.mode=Wae.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Ic.getBitsLength=function(s){return s*8};Ic.prototype.getLength=function(){return this.data.length};Ic.prototype.getBitsLength=function(){return Ic.getBitsLength(this.data.length)};Ic.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)};var Vae=Ic;const zae=Bl,Gae=rn;function Oc(t){this.mode=zae.KANJI,this.data=t}Oc.getBitsLength=function(s){return s*13};Oc.prototype.getLength=function(){return this.data.length};Oc.prototype.getBitsLength=function(){return Oc.getBitsLength(this.data.length)};Oc.prototype.write=function(t){let s;for(s=0;s<this.data.length;s++){let r=Gae.toSJIS(this.data[s]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var qae=Oc,mE={exports:{}};(function(t){var s={single_source_shortest_paths:function(r,a,n){var i={},l={};l[a]=0;var o=s.PriorityQueue.make();o.push(a,0);for(var c,u,d,m,x,g,p,f,b;!o.empty();){c=o.pop(),u=c.value,m=c.cost,x=r[u]||{};for(d in x)x.hasOwnProperty(d)&&(g=x[d],p=m+g,f=l[d],b=typeof l[d]>"u",(b||f>p)&&(l[d]=p,o.push(d,p),i[d]=u))}if(typeof n<"u"&&typeof l[n]>"u"){var y=["Could not find a path from ",a," to ",n,"."].join("");throw new Error(y)}return i},extract_shortest_path_from_predecessor_list:function(r,a){for(var n=[],i=a;i;)n.push(i),r[i],i=r[i];return n.reverse(),n},find_path:function(r,a,n){var i=s.single_source_shortest_paths(r,a,n);return s.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(r){var a=s.PriorityQueue,n={},i;r=r||{};for(i in a)a.hasOwnProperty(i)&&(n[i]=a[i]);return n.queue=[],n.sorter=r.sorter||a.default_sorter,n},default_sorter:function(r,a){return r.cost-a.cost},push:function(r,a){var n={value:r,cost:a};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=s})(mE);var Yae=mE.exports;(function(t){const s=Bl,r=$ae,a=Hae,n=Vae,i=qae,l=Si,o=rn,c=Yae;function u(y){return unescape(encodeURIComponent(y)).length}function d(y,v,N){const S=[];let w;for(;(w=y.exec(N))!==null;)S.push({data:w[0],index:w.index,mode:v,length:w[0].length});return S}function m(y){const v=d(l.NUMERIC,s.NUMERIC,y),N=d(l.ALPHANUMERIC,s.ALPHANUMERIC,y);let S,w;return o.isKanjiModeEnabled()?(S=d(l.BYTE,s.BYTE,y),w=d(l.KANJI,s.KANJI,y)):(S=d(l.BYTE_KANJI,s.BYTE,y),w=[]),v.concat(N,S,w).sort(function(j,k){return j.index-k.index}).map(function(j){return{data:j.data,mode:j.mode,length:j.length}})}function x(y,v){switch(v){case s.NUMERIC:return r.getBitsLength(y);case s.ALPHANUMERIC:return a.getBitsLength(y);case s.KANJI:return i.getBitsLength(y);case s.BYTE:return n.getBitsLength(y)}}function g(y){return y.reduce(function(v,N){const S=v.length-1>=0?v[v.length-1]:null;return S&&S.mode===N.mode?(v[v.length-1].data+=N.data,v):(v.push(N),v)},[])}function p(y){const v=[];for(let N=0;N<y.length;N++){const S=y[N];switch(S.mode){case s.NUMERIC:v.push([S,{data:S.data,mode:s.ALPHANUMERIC,length:S.length},{data:S.data,mode:s.BYTE,length:S.length}]);break;case s.ALPHANUMERIC:v.push([S,{data:S.data,mode:s.BYTE,length:S.length}]);break;case s.KANJI:v.push([S,{data:S.data,mode:s.BYTE,length:u(S.data)}]);break;case s.BYTE:v.push([{data:S.data,mode:s.BYTE,length:u(S.data)}])}}return v}function f(y,v){const N={},S={start:{}};let w=["start"];for(let C=0;C<y.length;C++){const j=y[C],k=[];for(let E=0;E<j.length;E++){const R=j[E],D=""+C+E;k.push(D),N[D]={node:R,lastCount:0},S[D]={};for(let P=0;P<w.length;P++){const T=w[P];N[T]&&N[T].node.mode===R.mode?(S[T][D]=x(N[T].lastCount+R.length,R.mode)-x(N[T].lastCount,R.mode),N[T].lastCount+=R.length):(N[T]&&(N[T].lastCount=R.length),S[T][D]=x(R.length,R.mode)+4+s.getCharCountIndicator(R.mode,v))}}w=k}for(let C=0;C<w.length;C++)S[w[C]].end=0;return{map:S,table:N}}function b(y,v){let N;const S=s.getBestModeForData(y);if(N=s.from(v,S),N!==s.BYTE&&N.bit<S.bit)throw new Error('"'+y+'" cannot be encoded with mode '+s.toString(N)+`.
 Suggested mode is: `+s.toString(S));switch(N===s.KANJI&&!o.isKanjiModeEnabled()&&(N=s.BYTE),N){case s.NUMERIC:return new r(y);case s.ALPHANUMERIC:return new a(y);case s.KANJI:return new i(y);case s.BYTE:return new n(y)}}t.fromArray=function(v){return v.reduce(function(N,S){return typeof S=="string"?N.push(b(S,null)):S.data&&N.push(b(S.data,S.mode)),N},[])},t.fromString=function(v,N){const S=m(v,o.isKanjiModeEnabled()),w=p(S),C=f(w,N),j=c.find_path(C.map,"start","end"),k=[];for(let E=1;E<j.length-1;E++)k.push(C.table[j[E]].node);return t.fromArray(g(k))},t.rawSplit=function(v){return t.fromArray(m(v,o.isKanjiModeEnabled()))}})(uE);const Lh=rn,cg=Oh,Kae=Tae,Xae=_ae,Jae=sE,Qae=rE,mb=aE,xb=Mh,Zae=Rae,yx=lE,ene=cE,tne=Bl,dg=uE;function sne(t,s){const r=t.size,a=Qae.getPositions(s);for(let n=0;n<a.length;n++){const i=a[n][0],l=a[n][1];for(let o=-1;o<=7;o++)if(!(i+o<=-1||r<=i+o))for(let c=-1;c<=7;c++)l+c<=-1||r<=l+c||(o>=0&&o<=6&&(c===0||c===6)||c>=0&&c<=6&&(o===0||o===6)||o>=2&&o<=4&&c>=2&&c<=4?t.set(i+o,l+c,!0,!0):t.set(i+o,l+c,!1,!0))}}function rne(t){const s=t.size;for(let r=8;r<s-8;r++){const a=r%2===0;t.set(r,6,a,!0),t.set(6,r,a,!0)}}function ane(t,s){const r=Jae.getPositions(s);for(let a=0;a<r.length;a++){const n=r[a][0],i=r[a][1];for(let l=-2;l<=2;l++)for(let o=-2;o<=2;o++)l===-2||l===2||o===-2||o===2||l===0&&o===0?t.set(n+l,i+o,!0,!0):t.set(n+l,i+o,!1,!0)}}function nne(t,s){const r=t.size,a=yx.getEncodedBits(s);let n,i,l;for(let o=0;o<18;o++)n=Math.floor(o/3),i=o%3+r-8-3,l=(a>>o&1)===1,t.set(n,i,l,!0),t.set(i,n,l,!0)}function ug(t,s,r){const a=t.size,n=ene.getEncodedBits(s,r);let i,l;for(i=0;i<15;i++)l=(n>>i&1)===1,i<6?t.set(i,8,l,!0):i<8?t.set(i+1,8,l,!0):t.set(a-15+i,8,l,!0),i<8?t.set(8,a-i-1,l,!0):i<9?t.set(8,15-i-1+1,l,!0):t.set(8,15-i-1,l,!0);t.set(a-8,8,1,!0)}function ine(t,s){const r=t.size;let a=-1,n=r-1,i=7,l=0;for(let o=r-1;o>0;o-=2)for(o===6&&o--;;){for(let c=0;c<2;c++)if(!t.isReserved(n,o-c)){let u=!1;l<s.length&&(u=(s[l]>>>i&1)===1),t.set(n,o-c,u),i--,i===-1&&(l++,i=7)}if(n+=a,n<0||r<=n){n-=a,a=-a;break}}}function lne(t,s,r){const a=new Kae;r.forEach(function(c){a.put(c.mode.bit,4),a.put(c.getLength(),tne.getCharCountIndicator(c.mode,t)),c.write(a)});const n=Lh.getSymbolTotalCodewords(t),i=xb.getTotalCodewordsCount(t,s),l=(n-i)*8;for(a.getLengthInBits()+4<=l&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const o=(l-a.getLengthInBits())/8;for(let c=0;c<o;c++)a.put(c%2?17:236,8);return one(a,t,s)}function one(t,s,r){const a=Lh.getSymbolTotalCodewords(s),n=xb.getTotalCodewordsCount(s,r),i=a-n,l=xb.getBlocksCount(s,r),o=a%l,c=l-o,u=Math.floor(a/l),d=Math.floor(i/l),m=d+1,x=u-d,g=new Zae(x);let p=0;const f=new Array(l),b=new Array(l);let y=0;const v=new Uint8Array(t.buffer);for(let j=0;j<l;j++){const k=j<c?d:m;f[j]=v.slice(p,p+k),b[j]=g.encode(f[j]),p+=k,y=Math.max(y,k)}const N=new Uint8Array(a);let S=0,w,C;for(w=0;w<y;w++)for(C=0;C<l;C++)w<f[C].length&&(N[S++]=f[C][w]);for(w=0;w<x;w++)for(C=0;C<l;C++)N[S++]=b[C][w];return N}function cne(t,s,r,a){let n;if(Array.isArray(t))n=dg.fromArray(t);else if(typeof t=="string"){let u=s;if(!u){const d=dg.rawSplit(t);u=yx.getBestVersionForData(d,r)}n=dg.fromString(t,u||40)}else throw new Error("Invalid data");const i=yx.getBestVersionForData(n,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=i;else if(s<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const l=lne(s,r,n),o=Lh.getSymbolSize(s),c=new Xae(o);return sne(c,s),rne(c),ane(c,s),ug(c,r,0),s>=7&&nne(c,s),ine(c,l),isNaN(a)&&(a=mb.getBestMask(c,ug.bind(null,c,r))),mb.applyMask(a,c),ug(c,r,a),{modules:c,version:s,errorCorrectionLevel:r,maskPattern:a,segments:n}}eE.create=function(s,r){if(typeof s>"u"||s==="")throw new Error("No input text");let a=cg.M,n,i;return typeof r<"u"&&(a=cg.from(r.errorCorrectionLevel,cg.M),n=yx.from(r.version),i=mb.from(r.maskPattern),r.toSJISFunc&&Lh.setToSJISFunction(r.toSJISFunc)),cne(s,n,a,i)};var xE={},Rv={};(function(t){function s(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let a=r.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+r);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const n=parseInt(a.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+a.slice(0,6).join("")}}t.getOptions=function(a){a||(a={}),a.color||(a.color={});const n=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,l=a.scale||4;return{width:i,scale:i?4:l,margin:n,color:{dark:s(a.color.dark||"#000000ff"),light:s(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},t.getScale=function(a,n){return n.width&&n.width>=a+n.margin*2?n.width/(a+n.margin*2):n.scale},t.getImageWidth=function(a,n){const i=t.getScale(a,n);return Math.floor((a+n.margin*2)*i)},t.qrToImageData=function(a,n,i){const l=n.modules.size,o=n.modules.data,c=t.getScale(l,i),u=Math.floor((l+i.margin*2)*c),d=i.margin*c,m=[i.color.light,i.color.dark];for(let x=0;x<u;x++)for(let g=0;g<u;g++){let p=(x*u+g)*4,f=i.color.light;if(x>=d&&g>=d&&x<u-d&&g<u-d){const b=Math.floor((x-d)/c),y=Math.floor((g-d)/c);f=m[o[b*l+y]?1:0]}a[p++]=f.r,a[p++]=f.g,a[p++]=f.b,a[p]=f.a}}})(Rv);(function(t){const s=Rv;function r(n,i,l){n.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,l,o){let c=o,u=l;typeof c>"u"&&(!l||!l.getContext)&&(c=l,l=void 0),l||(u=a()),c=s.getOptions(c);const d=s.getImageWidth(i.modules.size,c),m=u.getContext("2d"),x=m.createImageData(d,d);return s.qrToImageData(x.data,i,c),r(m,u,d),m.putImageData(x,0,0),u},t.renderToDataURL=function(i,l,o){let c=o;typeof c>"u"&&(!l||!l.getContext)&&(c=l,l=void 0),c||(c={});const u=t.render(i,l,c),d=c.type||"image/png",m=c.rendererOpts||{};return u.toDataURL(d,m.quality)}})(xE);var hE={};const dne=Rv;function H1(t,s){const r=t.a/255,a=s+'="'+t.hex+'"';return r<1?a+" "+s+'-opacity="'+r.toFixed(2).slice(1)+'"':a}function mg(t,s,r){let a=t+s;return typeof r<"u"&&(a+=" "+r),a}function une(t,s,r){let a="",n=0,i=!1,l=0;for(let o=0;o<t.length;o++){const c=Math.floor(o%s),u=Math.floor(o/s);!c&&!i&&(i=!0),t[o]?(l++,o>0&&c>0&&t[o-1]||(a+=i?mg("M",c+r,.5+u+r):mg("m",n,0),n=0,i=!1),c+1<s&&t[o+1]||(a+=mg("h",l),l=0)):n++}return a}hE.render=function(s,r,a){const n=dne.getOptions(r),i=s.modules.size,l=s.modules.data,o=i+n.margin*2,c=n.color.light.a?"<path "+H1(n.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",u="<path "+H1(n.color.dark,"stroke")+' d="'+une(l,i,n.margin)+'"/>',d='viewBox="0 0 '+o+" "+o+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof a=="function"&&a(null,x),x};const mne=Eae,hb=eE,fE=xE,xne=hE;function Fv(t,s,r,a,n){const i=[].slice.call(arguments,1),l=i.length,o=typeof i[l-1]=="function";if(!o&&!mne())throw new Error("Callback required as last argument");if(o){if(l<2)throw new Error("Too few arguments provided");l===2?(n=r,r=s,s=a=void 0):l===3&&(s.getContext&&typeof n>"u"?(n=a,a=void 0):(n=a,a=r,r=s,s=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(r=s,s=a=void 0):l===2&&!s.getContext&&(a=r,r=s,s=void 0),new Promise(function(c,u){try{const d=hb.create(r,a);c(t(d,s,a))}catch(d){u(d)}})}try{const c=hb.create(r,a);n(null,t(c,s,a))}catch(c){n(c)}}dm.create=hb.create;dm.toCanvas=Fv.bind(null,fE.render);dm.toDataURL=Fv.bind(null,fE.renderToDataURL);dm.toString=Fv.bind(null,function(t,s,r){return xne.render(t,r)});const hne=()=>{const{user:t}=He(C=>C.auth),s=He(Nr),[r,a]=h.useState(null),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(null),[d,m]=h.useState(null),x=h.useRef(null),g=(s==null?void 0:s.pgId)||(t==null?void 0:t.pgId);h.useEffect(()=>{console.log("🔍 QRCodeManagement: User data:",t),g?(console.log("✅ QRCodeManagement: Effective PG ID:",g),p(),f()):(console.log("❌ QRCodeManagement: No PG ID found"),M.error("No PG associated with this account. Please contact support."))},[g]);const p=async()=>{var C;if(!g){console.error("❌ QRCodeManagement: Cannot fetch QR code - no PG ID");return}try{i(!0);const j=await Tt.get(`/qr/pg/${g}`);j.data.success?(a(j.data.data),(C=j.data.data)!=null&&C.fullUrl&&v(j.data.data.fullUrl)):console.log("No QR code found for this PG")}catch(j){console.error("Error fetching QR code:",j)}finally{i(!1)}},f=async()=>{if(!g){console.error("❌ QRCodeManagement: Cannot fetch stats - no PG ID");return}try{const C=await Tt.get(`/qr/stats/${g}`);C.data.success&&u(C.data.data)}catch(C){console.error("Error fetching stats:",C)}},b=async()=>{var C;if(!g){M.error("No PG associated with this account. Please contact support.");return}try{o(!0),console.log("🔍 QRCodeManagement: Generating QR code for PG:",g);const j=await Tt.post(`/qr/generate/${g}`);j.data.success?(a(j.data.data),(C=j.data.data)!=null&&C.fullUrl&&v(j.data.data.fullUrl),M.success("QR code generated successfully!"),f()):M.error(j.data.message||"Failed to generate QR code")}catch(j){console.error("Error generating QR code:",j),M.error("Failed to generate QR code")}finally{o(!1)}},y=async()=>{if(!g){M.error("No PG associated with this account. Please contact support.");return}try{const C=await Tt.put(`/qr/deactivate/${g}`);C.data.success?(a(null),M.success("QR code deactivated successfully!")):M.error(C.data.message||"Failed to deactivate QR code")}catch(C){console.error("Error deactivating QR code:",C),M.error("Failed to deactivate QR code")}},v=async C=>{try{const j=x.current;if(!j)return;await dm.toCanvas(j,C,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"H"});const k=j.toDataURL("image/png");m(k)}catch(j){console.error("Error generating QR code image:",j),M.error("Failed to generate QR code image")}},N=C=>{navigator.clipboard.writeText(C),M.success("Copied to clipboard!")},S=async()=>{if(!d){M.error("No QR code available to download");return}try{const C=document.createElement("a");C.download=`qr-code-${g||"pg"}-${Date.now()}.png`,C.href=d,document.body.appendChild(C),C.click(),document.body.removeChild(C),M.success("QR code downloaded successfully!")}catch(C){console.error("Error downloading QR code:",C),M.error("Failed to download QR code")}},w=C=>C?new Date(C).toLocaleDateString("en-IN"):"Never";return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-3",children:[e.jsx("canvas",{ref:x,style:{display:"none"}}),e.jsxs("div",{className:"max-w-full mx-auto px-2 sm:px-3",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mr-2 shadow-md",children:e.jsx(kd,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-0.5",children:"QR Code Management"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Generate and manage QR codes for your PG"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:e.jsx(kd,{className:"h-4 w-4 text-blue-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"QR Code"})]}),n?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"Loading..."})]}):r?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 p-4 rounded-lg text-center border border-gray-200",children:[e.jsx("div",{className:"w-32 h-32 bg-white border-2 border-gray-200 rounded-lg mx-auto mb-3 flex items-center justify-center shadow-sm overflow-hidden",children:d?e.jsx("img",{src:d,alt:"QR Code",className:"w-full h-full object-contain"}):e.jsx(kd,{className:"h-16 w-16 text-gray-400"})}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:d?"QR Code Generated":"Generating QR Code..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gradient-to-r from-gray-50 to-blue-50 rounded-md border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Public URL:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-900 font-mono max-w-32 truncate",children:r.fullUrl}),e.jsx("button",{onClick:()=>N(r.fullUrl),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(bg,{className:"h-3 w-3 text-gray-500"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gradient-to-r from-gray-50 to-blue-50 rounded-md border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"QR Code:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-900 font-mono max-w-32 truncate",children:r.qrCode}),e.jsx("button",{onClick:()=>N(r.qrCode),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(bg,{className:"h-3 w-3 text-gray-500"})})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:S,disabled:!d,className:"flex-1 flex items-center justify-center space-x-1.5 px-3 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-md hover:from-blue-600 hover:to-purple-700 transition-all text-xs font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(xr,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Download QR"})]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center space-x-1.5 px-3 py-2 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-md hover:from-red-600 hover:to-pink-700 transition-all text-xs font-medium shadow-sm",children:[e.jsx(Pr,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Deactivate"})]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(kd,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No QR code generated yet"}),e.jsxs("button",{onClick:b,disabled:l,className:"flex items-center space-x-1.5 px-3 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-md hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 text-xs font-medium shadow-sm",children:[l?e.jsx("div",{className:"animate-spin rounded-full h-3.5 w-3.5 border-b-2 border-white"}):e.jsx(as,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:l?"Generating...":"Generate QR Code"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-100 to-emerald-100 flex items-center justify-center",children:e.jsx(Jt,{className:"h-4 w-4 text-green-600"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"QR Code Statistics"})]}),c?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(Je,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Total Scans"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600 mt-1",children:c.usageCount||0})]}),e.jsxs("div",{className:"p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(xt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Last Used"})]}),e.jsx("p",{className:"text-xs font-medium text-green-600 mt-1",children:w(c.lastUsed)})]})]}),e.jsxs("div",{className:"p-3 bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 mb-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"PG Information"})]}),e.jsxs("div",{className:"space-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs font-medium ${c.isActive?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:c.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:w(c.createdAt)})]})]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Jt,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No statistics available"})]})]})]}),e.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow-md border border-gray-100 p-4",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"How to Use QR Code"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs font-bold text-blue-600",children:"1"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Generate QR Code"}),e.jsx("p",{className:"text-xs text-gray-600",children:'Click "Generate QR Code" to create a unique QR code for your PG'})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-green-100 to-emerald-100 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs font-bold text-green-600",children:"2"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Display QR Code"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Print and display the QR code at your PG entrance or common area"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs font-bold text-purple-600",children:"3"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Scan & Register"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Visitors can scan the QR code to register as new tenants"})]})]})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"QR Code Management"}),e.jsx("p",{className:"text-gray-600",children:"Please select a branch from the header to continue."})]})})},fne=()=>{var G,U;const t=He(Nr),[s,r]=h.useState([]),[a,n]=h.useState(!1),[i,l]=h.useState("grid"),[o,c]=h.useState(""),[u,d]=h.useState("all"),[m,x]=h.useState("all"),[g,p]=h.useState([]),[f,b]=h.useState(!1),[y,v]=h.useState(null),[N,S]=h.useState(null),[w,C]=h.useState(null),[j,k]=h.useState(!1),[E,R]=h.useState({totalRooms:0,totalBeds:0,availableBeds:0,occupiedBeds:0,noticePeriodBeds:0,occupancyRate:0}),D=h.useMemo(()=>{let A=s;return o&&(A=A.filter(q=>{var Y,O;return q.roomNumber.toLowerCase().includes(o.toLowerCase())||((O=(Y=q.floorId)==null?void 0:Y.name)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))||q.beds.some(W=>{var z,H;return W.isOccupied&&W.resident&&(((z=W.resident.firstName)==null?void 0:z.toLowerCase().includes(o.toLowerCase()))||((H=W.resident.lastName)==null?void 0:H.toLowerCase().includes(o.toLowerCase())))})})),u!=="all"&&(A=A.filter(q=>u==="available"?q.roomStatus==="fully_available":u==="occupied"?q.roomStatus==="fully_occupied":u==="notice"?q.beds.some(Y=>Y.isOccupied&&Y.residentStatus==="notice_period"):u==="partial"?q.roomStatus==="partially_occupied":!0)),m!=="all"&&(A=A.filter(q=>q.floorId._id===m)),A},[s,o,u,m]),P=h.useMemo(()=>{if(s.length>0&&s[0].metadata)return{totalRooms:s[0].metadata.totalRooms||s.length,totalBeds:s[0].metadata.totalBeds||0,availableBeds:s[0].metadata.availableBeds||0,occupiedBeds:s[0].metadata.occupiedBeds||0,noticePeriodBeds:s[0].metadata.noticePeriodBeds||0,noticePeriodRooms:s.filter(H=>H.beds.some(Q=>Q.isOccupied&&Q.residentStatus==="notice_period")).length,occupancyRate:s[0].metadata.occupancyRate||0};let A=0,q=0,Y=0,O=0,W=0;s.forEach(H=>{A+=H.numberOfBeds,H.beds.some(J=>J.isOccupied&&J.residentStatus==="notice_period")&&W++,H.beds.forEach(J=>{J.isOccupied?J.residentStatus==="notice_period"?O++:J.residentStatus==="active"&&Y++:q++})});const z=A>0?((Y+O)/A*100).toFixed(1):0;return{totalRooms:s.length,totalBeds:A,availableBeds:q,occupiedBeds:Y,noticePeriodBeds:O,noticePeriodRooms:W,occupancyRate:z}},[s]);h.useEffect(()=>{R(P)},[P]);const T=h.useCallback(A=>{c(A)},[]);h.useEffect(()=>{const A=setTimeout(()=>{},300);return()=>clearTimeout(A)},[o]),h.useEffect(()=>{if(!t)return;n(!0),(async()=>{try{const Y=await(await fetch(`/api/pg/floors?branchId=${t._id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();Y.success&&p(Y.data);const W=await(await fetch(`/api/pg/rooms?branchId=${t._id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();W.success&&(r(W.data),S(Date.now()))}catch(q){console.error("Error fetching data:",q),M.error("Failed to fetch data")}finally{n(!1)}})()},[t]),h.useCallback(A=>A.isOccupied?A.residentStatus==="notice_period"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-blue-100 text-blue-800 border-blue-200":"bg-green-100 text-green-800 border-green-200",[]),h.useCallback(A=>A.isOccupied?A.residentStatus==="notice_period"?e.jsx(ut,{className:"h-4 w-4"}):e.jsx(Je,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"}),[]);const B=h.useCallback(A=>A.isOccupied?A.residentStatus==="notice_period"?"Notice Period":"Occupied":"Available",[]);h.useCallback(A=>A.beds.some(q=>q.isOccupied&&q.residentStatus==="notice_period")?"bg-yellow-500":A.roomStatus==="fully_available"?"bg-green-500":A.roomStatus==="fully_occupied"?"bg-blue-500":"bg-orange-500",[]);const F=h.useCallback(A=>A.beds.some(q=>q.isOccupied&&q.residentStatus==="notice_period")?"Notice Period":A.roomStatus==="fully_available"?"Available":A.roomStatus==="fully_occupied"?"Full":"Partial",[]);h.useCallback(A=>({"1-sharing":"bg-purple-100 text-purple-800 border-purple-200","2-sharing":"bg-blue-100 text-blue-800 border-blue-200","3-sharing":"bg-green-100 text-green-800 border-green-200","4-sharing":"bg-orange-100 text-orange-800 border-orange-200"})[A]||"bg-gray-100 text-gray-800 border-gray-200",[]);const L=h.useCallback(A=>{v(A),b(!0)},[]),I=h.useCallback(A=>{C(A),k(!0)},[]),V=async()=>{if(t){n(!0);try{const q=await(await fetch(`/api/pg/rooms?branchId=${t._id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();q.success?(r(q.data),S(Date.now()),M.success("Rooms refreshed successfully")):M.error(q.message||"Failed to fetch rooms")}catch(A){console.error("Error refreshing rooms:",A),M.error("Failed to refresh rooms")}finally{n(!1)}}},_=h.useCallback(A=>{const q=A.beds.some(Q=>Q.isOccupied&&Q.residentStatus==="notice_period"),Y=A.roomStatus==="fully_available",O=A.roomStatus==="fully_occupied",W={notice:{gradient:"from-amber-400 via-orange-400 to-orange-500",iconGradient:"from-amber-600 to-orange-600",bgGradient:"from-amber-50 to-orange-50",borderColor:"border-orange-200",icon:e.jsx(ut,{className:"h-3.5 w-3.5 text-white"}),text:"Notice Period"},available:{gradient:"from-emerald-400 via-green-400 to-teal-500",iconGradient:"from-emerald-600 to-teal-600",bgGradient:"from-emerald-50 to-green-50",borderColor:"border-emerald-200",icon:e.jsx(Be,{className:"h-3.5 w-3.5 text-white"}),text:"Available"},occupied:{gradient:"from-blue-400 via-indigo-400 to-violet-500",iconGradient:"from-blue-600 to-violet-600",bgGradient:"from-blue-50 to-indigo-50",borderColor:"border-blue-200",icon:e.jsx(Je,{className:"h-3.5 w-3.5 text-white"}),text:"Occupied"},partial:{gradient:"from-purple-400 via-fuchsia-400 to-pink-500",iconGradient:"from-purple-600 to-pink-600",bgGradient:"from-purple-50 to-pink-50",borderColor:"border-purple-200",icon:e.jsx(xs,{className:"h-3.5 w-3.5 text-white"}),text:"Partial"}},z=q?"notice":Y?"available":O?"occupied":"partial",H=W[z];return e.jsx(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative group cursor-pointer",onClick:()=>I(A),children:e.jsxs("div",{className:`relative bg-gradient-to-br ${H.bgGradient} rounded-xl overflow-hidden
          border ${H.borderColor} shadow-sm transition-all duration-300
          hover:shadow-lg hover:shadow-${z}-200/40`,children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("div",{className:`bg-gradient-to-r ${H.gradient} 
              px-3 py-1 rounded-lg shadow-sm flex items-center space-x-1.5
              border border-white/20 backdrop-blur-sm`,children:e.jsx("span",{className:"text-white font-bold",children:A.roomNumber})})}),e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("div",{className:`bg-gradient-to-r ${H.iconGradient} 
              p-1.5 rounded-full shadow-sm
              border border-white/20 backdrop-blur-sm`,children:H.icon})}),e.jsx("div",{className:"pt-12 p-2 space-y-2",children:e.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-2 text-center",children:[e.jsx("div",{className:`font-medium text-xs bg-gradient-to-br ${H.gradient} bg-clip-text text-transparent`,children:A.sharingType.split("-")[0]}),e.jsx("div",{className:"text-[10px] text-gray-600",children:"Sharing"})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-2 text-center",children:[e.jsxs("div",{className:`font-medium text-xs bg-gradient-to-br ${H.gradient} bg-clip-text text-transparent`,children:[A.availableBedCount||0,"/",A.numberOfBeds]}),e.jsx("div",{className:"text-[10px] text-gray-600",children:"Beds"})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-2 text-center",children:[e.jsxs("div",{className:`font-medium text-xs bg-gradient-to-br ${H.gradient} bg-clip-text text-transparent`,children:["₹",A.cost/1e3,"k"]}),e.jsx("div",{className:"text-[10px] text-gray-600",children:"Rent"})]})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/5 to-black/20 opacity-0 group-hover:opacity-100 transition-all duration-300",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:`bg-white/95 backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg
                flex items-center space-x-2 transform translate-y-2 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-300`,children:[e.jsx(ot,{className:`h-4 w-4 bg-gradient-to-br ${H.gradient} bg-clip-text text-transparent`}),e.jsx("span",{className:`text-sm font-medium bg-gradient-to-br ${H.gradient} bg-clip-text text-transparent`,children:"View Details"})]})})})]})},A._id)},[I]);return t?a&&s.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Room Availability"}),e.jsx("p",{className:"text-gray-600",children:"Monitor room and bed status across all floors"})]})}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading room data..."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Room Availability"}),e.jsx("p",{className:"text-gray-600",children:"Monitor room and bed status across all floors"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:V,disabled:a,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wt,{className:`h-4 w-4 ${a?"animate-spin":""}`}),e.jsx("span",{children:a?"Refreshing...":"Refresh"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-md transition-colors ${i==="grid"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:e.jsx(i2,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-md transition-colors ${i==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:e.jsx(l2,{className:"h-4 w-4"})})]})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(Ie,{className:"h-5 w-5 text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.totalRooms}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Rooms"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(xs,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.totalBeds}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Beds"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(Be,{className:"h-5 w-5 text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:E.availableBeds}),e.jsx("div",{className:"text-sm text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(Je,{className:"h-5 w-5 text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.occupiedBeds}),e.jsx("div",{className:"text-sm text-gray-600",children:"Occupied"})]}),e.jsxs("div",{className:`rounded-xl border p-4 text-center ${E.noticePeriodBeds>0?"bg-yellow-50 border-yellow-200 shadow-lg":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mx-auto mb-2 ${E.noticePeriodBeds>0?"bg-yellow-200":"bg-yellow-100"}`,children:e.jsx(ut,{className:"h-5 w-5 text-yellow-600"})}),e.jsx("div",{className:`text-2xl font-bold ${E.noticePeriodBeds>0?"text-yellow-700":"text-yellow-600"}`,children:E.noticePeriodBeds}),e.jsx("div",{className:"text-sm text-gray-600",children:"Notice Period"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(Jt,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[E.occupancyRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Occupancy"})]})]}),t&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search rooms...",value:o,onChange:A=>T(A.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:A=>{A.key==="Enter"&&A.preventDefault()}})]}),e.jsxs(ls,{value:u,onValueChange:d,children:[e.jsx(Qt,{className:"w-[180px] bg-white",children:e.jsx(os,{placeholder:"Select Status"})}),e.jsx(Zt,{children:e.jsxs(mi,{children:[e.jsx(Dn,{children:"Room Status"}),e.jsx(ke,{value:"all",children:"All Status"}),e.jsx(ke,{value:"available",children:"Available"}),e.jsx(ke,{value:"occupied",children:"Occupied"}),e.jsx(ke,{value:"notice",children:"Notice Period"}),e.jsx(ke,{value:"partial",children:"Partially Occupied"})]})})]}),e.jsxs(ls,{value:m,onValueChange:x,children:[e.jsx(Qt,{className:"w-[180px] bg-white",children:e.jsx(os,{placeholder:"Select Floor"})}),e.jsx(Zt,{children:e.jsxs(mi,{children:[e.jsx(Dn,{children:"Floor"}),e.jsx(ke,{value:"all",children:"All Floors"}),g.map(A=>e.jsx(ke,{value:A._id,children:A.name},A._id))]})})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",D.length," of ",s.length," rooms"]})]})}),t?e.jsx("div",{children:D.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ie,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Rooms Found"}),e.jsx("p",{className:"text-gray-600",children:o||u!=="all"||m!=="all"?"Try adjusting your filters":"No rooms have been created yet for this branch."})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-8 xl:grid-cols-10 gap-4 p-4",children:D.map(A=>_(A))})}):null,e.jsx(vt,{children:j&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-auto max-h-[85vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-4 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 rounded-lg p-2",children:e.jsx(Ie,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["Room ",w.roomNumber]}),e.jsxs("p",{className:"text-sm opacity-90",children:[(G=w.floorId)==null?void 0:G.name," • ",w.sharingType]})]})]}),e.jsx("button",{onClick:()=>k(!1),className:"rounded-full p-2 hover:bg-white/20 transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-3 text-white",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["₹",w.cost.toLocaleString()]}),e.jsx("div",{className:"text-xs opacity-90",children:"Monthly Rent"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-3 text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:w.availableBedCount||0}),e.jsx("div",{className:"text-xs opacity-90",children:"Available Beds"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-3 text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:w.beds.filter(A=>A.isOccupied).length}),e.jsx("div",{className:"text-xs opacity-90",children:"Occupied Beds"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Floor"}),e.jsx("span",{className:"font-medium",children:(U=w.floorId)==null?void 0:U.name})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Sharing Type"}),e.jsx("span",{className:"font-medium",children:w.sharingType})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Cost per Bed"}),e.jsxs("span",{className:"font-medium",children:["₹",Math.round(w.cost/w.numberOfBeds).toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Total Beds"}),e.jsx("span",{className:"font-medium",children:w.numberOfBeds})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Occupancy"}),e.jsxs("span",{className:"font-medium",children:[Math.round(w.beds.filter(A=>A.isOccupied).length/w.numberOfBeds*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.beds.some(A=>A.isOccupied&&A.residentStatus==="notice_period")?"bg-yellow-100 text-yellow-800":w.roomStatus==="fully_available"?"bg-green-100 text-green-800":w.roomStatus==="fully_occupied"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:F(w)})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Bed Details"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:w.beds.map((A,q)=>{const Y=A.isOccupied,O=Y&&A.residentStatus==="notice_period";return e.jsxs("div",{className:`rounded-lg border ${Y?O?"border-yellow-200 bg-yellow-50":"border-blue-200 bg-blue-50":"border-green-200 bg-green-50"} p-3`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:A.bedNumber}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Y?O?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"}`,children:B(A)})]}),Y&&A.resident&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(jt,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[A.resident.firstName," ",A.resident.lastName]})]}),O&&e.jsxs("div",{className:"text-xs space-y-1 text-yellow-800",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[A.resident.noticeDays||"N/A"," days notice"]})]}),A.resident.checkOutDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:["Checkout: ",new Date(A.resident.checkOutDate).toLocaleDateString()]})]})]}),e.jsxs("button",{onClick:()=>{k(!1),L(A.resident)},className:"text-xs text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[e.jsx(ot,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]},q)})})]})]})]})})}),f&&y&&e.jsx(Yy,{isOpen:f,onClose:()=>b(!1),resident:y,onEdit:()=>{b(!1)}})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Room Availability"}),e.jsx("p",{className:"text-gray-600",children:"Please use the branch selector in the header."})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ie,{className:"h-10 w-10 text-blue-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select a Branch"}),e.jsx("p",{className:"text-gray-600",children:"Choose a branch to view room availability and bed status"})]})]})},gne=Ke.memo(fne);class pne{async getPaymentInfo(s){try{return(await we.get(`/payment-info/admin/${s}`)).data}catch(r){throw console.error("Error fetching payment info:",r),r}}async savePaymentInfo(s,r){try{return(await we.put(`/payment-info/admin/${s}`,r)).data}catch(a){throw console.error("Error saving payment info:",a),a}}async updatePaymentInfo(s,r){return this.savePaymentInfo(s,r)}async deletePaymentInfo(s){try{return(await we.delete(`/payment-info/admin/${s}`)).data}catch(r){throw console.error("Error deleting payment info:",r),r}}async getAllPaymentInfo(s={}){try{const r=new URLSearchParams(s).toString(),a=`/payment-info/admin/all${r?`?${r}`:""}`;return(await we.get(a)).data}catch(r){throw console.error("Error fetching all payment info:",r),r}}async getPaymentInfoByQRCode(s){try{return(await we.get(`/public/qr/${s}/payment-info`)).data}catch(r){throw console.error("Error fetching payment info by QR code:",r),r}}}const vx=new pne,bne=()=>{const{qrCode:t}=Nx(),s=Ms(),[r,a]=h.useState(null),[n,i]=h.useState(null),[l,o]=h.useState(!0),[c,u]=h.useState(!1),[d,m]=h.useState(null),[x,g]=h.useState(!1),[p,f]=h.useState(!1),[b,y]=h.useState(!1),[v,N]=h.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",permanentAddress:{street:"",city:"",state:"",pincode:""},workDetails:{company:"",designation:"",workAddress:""},emergencyContact:{name:"",relationship:"",phone:"",address:""},checkInDate:"",contractStartDate:"",status:"pending"}),[S,w]=h.useState(!1);h.useEffect(()=>{C()},[t]),h.useEffect(()=>{b&&t&&j()},[b,t]);const C=async()=>{var I,V,_,G;try{o(!0),console.log("🔍 QRInterface: Fetching QR data for code:",t);const U=await Tt.get(`/public/qr/${t}`);console.log("🔍 QRInterface: Full QR response:",U.data),U.data.success?(console.log("✅ QRInterface: QR data fetched successfully:",U.data.data),a(U.data.data)):(console.log("❌ QRInterface: Invalid QR code response:",U.data),M.error(U.data.message||"Invalid QR code"),s("/"))}catch(U){if(console.error("❌ QRInterface: Error fetching QR data:",U),console.error("Error details:",{status:(I=U.response)==null?void 0:I.status,statusText:(V=U.response)==null?void 0:V.statusText,data:(_=U.response)==null?void 0:_.data,message:U.message}),U.response){const A=U.response.status,q=((G=U.response.data)==null?void 0:G.message)||"Unknown error";A===404?(console.log("❌ QR Code not found - this could mean:"),console.log("1. QR code does not exist in database"),console.log("2. QR code is inactive"),console.log("3. QR code format is incorrect"),M.error("QR code not found. Please check the URL or contact the PG admin.")):A===400?M.error("Invalid QR code format."):A===500?M.error("Server error. Please try again later."):M.error(`Error: ${q}`)}else M.error("Network error. Please check your connection.");s("/")}finally{o(!1)}},j=async()=>{var I,V,_;try{u(!0),console.log("🔍 QRInterface: Fetching payment info for QR code:",t),console.log("🌐 Current hostname:",window.location.hostname),console.log("🌐 Full URL:",window.location.href);const G=await vx.getPaymentInfoByQRCode(t);if(console.log("🔍 QRInterface: Full payment info response:",G),G.success&&G.data){const U=G.data.paymentInfo||G.data;U&&(U.upiId||U.accountNumber)?(console.log("✅ QRInterface: Payment info fetched successfully:",U),i(U)):(console.log("⚠️ QRInterface: No payment info configured"),i(null))}else console.log("⚠️ QRInterface: No payment info configured - response not successful"),i(null)}catch(G){console.error("❌ QRInterface: Error fetching payment info:",G),console.error("Error details:",{status:(I=G.response)==null?void 0:I.status,statusText:(V=G.response)==null?void 0:V.statusText,data:(_=G.response)==null?void 0:_.data}),i(null)}finally{u(!1)}},k=(I,V)=>{if(I.includes(".")){const[_,G]=I.split(".");N(U=>({...U,[_]:{...U[_],[G]:V}}))}else N(_=>({..._,[I]:V}))},E=async I=>{I.preventDefault();try{w(!0),console.log("🔍 QRInterface: Submitting resident data for QR code:",t);const V={...v,workDetails:{company:v.workDetails.company||void 0,designation:v.workDetails.designation||void 0,workAddress:v.workDetails.workAddress||void 0},emergencyContact:{name:v.emergencyContact.name,relationship:v.emergencyContact.relationship,phone:v.emergencyContact.phone,address:v.emergencyContact.address||void 0}};Object.keys(V.workDetails).forEach(G=>{V.workDetails[G]===void 0&&delete V.workDetails[G]}),Object.keys(V.emergencyContact).forEach(G=>{V.emergencyContact[G]===void 0&&delete V.emergencyContact[G]}),console.log("📝 Cleaned form data:",V);const _=await Tt.post(`/public/qr/${t}/resident`,V);_.data.success?(console.log("✅ QRInterface: Resident registration successful:",_.data.data),M.success("Registration successful! Please contact the PG admin for room assignment."),f(!1),N({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",permanentAddress:{street:"",city:"",state:"",pincode:""},emergencyContact:{name:"",relationship:"",phone:""},workDetails:{company:"",designation:"",workAddress:"",workPhone:"",workEmail:"",salary:""}})):(console.log("❌ QRInterface: Registration failed:",_.data),M.error(_.data.message||"Registration failed"))}catch(V){console.error("❌ QRInterface: Error submitting form:",V),M.error("Registration failed. Please try again.")}finally{w(!1)}},R=(I,V)=>{try{const _=[`tez://upi/pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR`,`gpay://upi/pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR&mode=02&purpose=00`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`],G=(U=0)=>{if(U>=_.length){confirm("Google Pay app not found or unable to pre-fill payment details. Would you like to install Google Pay from Play Store?")&&window.open("https://play.google.com/store/apps/details?id=com.google.android.apps.nfc.payment","_blank");return}console.log(`Trying Google Pay URL ${U+1}:`,_[U]);const A=document.createElement("iframe");A.style.display="none",A.src=_[U],document.body.appendChild(A),setTimeout(()=>{document.body.removeChild(A),document.visibilityState==="visible"&&G(U+1)},1e3)};G(),M.success("Opening Google Pay with payment details...")}catch(_){console.error("Error opening Google Pay:",_),M.error("Failed to open Google Pay")}},D=I=>{try{const _=`tez://upi/pay?pa=${I.replace(/^\+91-?/,"")}@paytm&pn=${encodeURIComponent("PG Payment")}`;window.location.href=_,M.success("Opening Google Pay with number...")}catch(V){console.error("Error opening Google Pay with number:",V),M.error("Failed to open Google Pay")}},P=(I,V)=>{try{const _=[`paytmmp://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR`,`paytmmp://upi/pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR&mode=02&purpose=00`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`],G=(U=0)=>{if(U>=_.length){confirm("Paytm app not found or unable to pre-fill payment details. Would you like to install Paytm from Play Store?")&&window.open("https://play.google.com/store/apps/details?id=net.one97.paytm","_blank");return}console.log(`Trying Paytm URL ${U+1}:`,_[U]);const A=document.createElement("iframe");A.style.display="none",A.src=_[U],document.body.appendChild(A),setTimeout(()=>{document.body.removeChild(A),document.visibilityState==="visible"&&G(U+1)},1e3)};G(),M.success("Opening Paytm with payment details...")}catch(_){console.error("Error opening Paytm:",_),M.error("Failed to open Paytm")}},T=I=>{try{const _=`paytmmp://upi/pay?pa=${I.replace(/^\+91-?/,"")}@paytm&pn=${encodeURIComponent("PG Payment")}`;window.location.href=_,M.success("Opening Paytm with number...")}catch(V){console.error("Error opening Paytm with number:",V),M.error("Failed to open Paytm")}},B=(I,V)=>{try{const _=[`phonepe://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR&mode=02`,`phonepe://upi/pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR&mode=02&purpose=00`,`phonepe://transaction?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR`,`phonepe://upi?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`],G=(U=0)=>{if(U>=_.length){confirm("PhonePe app not found or unable to pre-fill payment details. Would you like to install PhonePe from Play Store?")&&window.open("https://play.google.com/store/apps/details?id=com.phonepe.app","_blank");return}console.log(`Trying PhonePe URL ${U+1}:`,_[U]);const A=document.createElement("iframe");A.style.display="none",A.src=_[U],document.body.appendChild(A),setTimeout(()=>{document.body.removeChild(A),document.visibilityState==="visible"&&G(U+1)},1e3)};G(),M.success("Opening PhonePe with payment details...")}catch(_){console.error("Error opening PhonePe:",_),M.error("Failed to open PhonePe")}},F=I=>{try{const _=`phonepe://upi/pay?pa=${I.replace(/^\+91-?/,"")}@ybl&pn=${encodeURIComponent("PG Payment")}`;window.location.href=_,M.success("Opening PhonePe with number...")}catch(V){console.error("Error opening PhonePe with number:",V),M.error("Failed to open PhonePe")}},L=(I,V,_="")=>{try{const G=[`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}&cu=INR&mode=02&purpose=00`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}&tn=${encodeURIComponent(`Payment to ${V}`)}`,`upi://pay?pa=${I}&pn=${encodeURIComponent(V)}`],U=(A=0)=>{if(A>=G.length){M.error("Unable to open UPI app. Please ensure you have a UPI app installed (Google Pay, PhonePe, Paytm, etc.)");return}console.log(`Trying UPI URL ${A+1}:`,G[A]);const q=document.createElement("iframe");q.style.display="none",q.src=G[A],document.body.appendChild(q),setTimeout(()=>{document.body.removeChild(q),document.visibilityState==="visible"?U(A+1):M.success("UPI app opened successfully!")},1e3)};U(),M.success("Opening UPI app...")}catch(G){console.error("Error opening UPI app:",G),M.error("Failed to open UPI app")}};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(vr,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:r.pgName||"PG Name"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Welcome to our PG"})]})]})})}),e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-4",children:!p&&!b?e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:e.jsx(Ie,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:r.pgName||"PG Name"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.pgAddress||"PG Address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Contact"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.pgAddress||"Contact PG admin"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(sr,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Address"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.pgAddress||"PG Address"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:[r.createdBy&&e.jsxs("div",{className:"p-2 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Admin"})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:[r.createdBy.firstName," ",r.createdBy.lastName]})]}),e.jsxs("div",{className:"p-2 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Usage"})]}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[r.usageCount||0," scans"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ae.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>f(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-all cursor-pointer",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center mx-auto mb-3",children:e.jsx(Je,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-sm font-bold mb-1",children:"Add New Tenant"}),e.jsx("p",{className:"text-xs opacity-90",children:"Register as a new tenant"})]})}),e.jsx(ae.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>y(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-all cursor-pointer",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center mx-auto mb-3",children:e.jsx(Ks,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-sm font-bold mb-1",children:"Update Payment"}),e.jsx("p",{className:"text-xs opacity-90",children:"Mark payment as completed"})]})})]})]}):p?e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(vr,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Add New Tenant"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Register as a new tenant"})]})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(jt,{className:"h-4 w-4 mr-2 text-sky-600"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,value:v.firstName,onChange:I=>k("firstName",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,value:v.lastName,onChange:I=>k("lastName",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:v.email,onChange:I=>k("email",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",required:!0,value:v.phone,onChange:I=>k("phone",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date of Birth *"}),e.jsx("input",{type:"date",required:!0,value:v.dateOfBirth,onChange:I=>k("dateOfBirth",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Gender *"}),e.jsxs("select",{required:!0,value:v.gender,onChange:I=>k("gender",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(sr,{className:"h-4 w-4 mr-2 text-sky-600"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Street Address *"}),e.jsx("input",{type:"text",required:!0,value:v.permanentAddress.street,onChange:I=>k("permanentAddress.street",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"City *"}),e.jsx("input",{type:"text",required:!0,value:v.permanentAddress.city,onChange:I=>k("permanentAddress.city",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("input",{type:"text",required:!0,value:v.permanentAddress.state,onChange:I=>k("permanentAddress.state",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pincode *"}),e.jsx("input",{type:"text",required:!0,value:v.permanentAddress.pincode,onChange:I=>k("permanentAddress.pincode",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2 text-sky-600"}),"Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:v.emergencyContact.name,onChange:I=>k("emergencyContact.name",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Relationship *"}),e.jsx("input",{type:"text",required:!0,value:v.emergencyContact.relationship,onChange:I=>k("emergencyContact.relationship",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",required:!0,value:v.emergencyContact.phone,onChange:I=>k("emergencyContact.phone",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:v.emergencyContact.address,onChange:I=>k("emergencyContact.address",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-sky-600"}),"Contract Dates"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Check-in Date *"}),e.jsx("input",{type:"date",required:!0,value:v.checkInDate,onChange:I=>k("checkInDate",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Contract Start Date *"}),e.jsx("input",{type:"date",required:!0,value:v.contractStartDate,onChange:I=>k("contractStartDate",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:v.emergencyContact.name,onChange:I=>k("emergencyContact.name",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship *"}),e.jsx("input",{type:"text",required:!0,value:v.emergencyContact.relationship,onChange:I=>k("emergencyContact.relationship",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",required:!0,value:v.emergencyContact.phone,onChange:I=>k("emergencyContact.phone",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2 text-sky-600"}),"Work Details (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Company"}),e.jsx("input",{type:"text",value:v.workDetails.company,onChange:I=>k("workDetails.company",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Designation"}),e.jsx("input",{type:"text",value:v.workDetails.designation,onChange:I=>k("workDetails.designation",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Work Address"}),e.jsx("input",{type:"text",value:v.workDetails.workAddress,onChange:I=>k("workDetails.workAddress",I.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:S,className:"px-4 py-2 bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded-lg hover:from-sky-600 hover:to-blue-600 transition-all disabled:opacity-50 flex items-center space-x-2 text-sm",children:[S?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:S?"Submitting...":"Submit Registration"})]})]})]})]}):x?e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(vr,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Payment Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:d==="upi"?"UPI Payment Information":d==="bank"?"Bank Account Details":"Payment App Numbers"})]})]}),e.jsxs("div",{className:"space-y-4",children:[d==="upi"&&n.upiId&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx(Ks,{className:"h-4 w-4 mr-2"}),"UPI Payment Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"UPI ID"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-mono text-gray-900",children:n.upiId}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.upiId),M.success("UPI ID copied to clipboard!")},className:"text-xs text-blue-600 hover:text-blue-700 px-2 py-1 bg-blue-50 rounded",children:"Copy"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Account Name"}),e.jsx("span",{className:"text-sm text-gray-900",children:n.upiName})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-blue-200",children:[e.jsxs("button",{onClick:()=>L(n.upiId,n.upiName),className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-all text-sm font-medium",children:[e.jsx("span",{children:"🚀"}),e.jsx("span",{children:"Open Any UPI App"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"Works with any UPI app installed on your device"})]})]}),d==="bank"&&n.accountNumber&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-green-900 mb-3 flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Bank Account Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Account Holder"}),e.jsx("span",{className:"text-sm text-gray-900",children:n.accountHolderName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Bank Name"}),e.jsx("span",{className:"text-sm text-gray-900",children:n.bankName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Account Number"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-mono text-gray-900",children:n.accountNumber}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.accountNumber),M.success("Account number copied to clipboard!")},className:"text-xs text-green-600 hover:text-green-700 px-2 py-1 bg-green-50 rounded",children:"Copy"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"IFSC Code"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-mono text-gray-900",children:n.ifscCode}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.ifscCode),M.success("IFSC code copied to clipboard!")},className:"text-xs text-green-600 hover:text-green-700 px-2 py-1 bg-green-50 rounded",children:"Copy"})]})]})]})]}),d==="apps"&&(n.gpayNumber||n.paytmNumber||n.phonepeNumber)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-purple-900 mb-3 flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Choose Payment App"]}),e.jsxs("div",{className:"space-y-3",children:[n.gpayNumber&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"G"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Google Pay"}),e.jsx("p",{className:"text-xs text-gray-600",children:n.gpayNumber})]})]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.gpayNumber),M.success("GPay number copied!")},className:"text-xs text-gray-500 hover:text-gray-700 px-2 py-1 bg-gray-50 rounded",children:"Copy"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>R(n.upiId,n.upiName),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all text-sm font-medium",children:[e.jsx("span",{children:"📱"}),e.jsx("span",{children:"Open Google Pay"})]}),e.jsx("button",{onClick:()=>D(n.gpayNumber),className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-sm",children:"Pay to Number"})]})]}),n.paytmNumber&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Paytm"}),e.jsx("p",{className:"text-xs text-gray-600",children:n.paytmNumber})]})]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.paytmNumber),M.success("Paytm number copied!")},className:"text-xs text-gray-500 hover:text-gray-700 px-2 py-1 bg-gray-50 rounded",children:"Copy"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>P(n.upiId,n.upiName),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all text-sm font-medium",children:[e.jsx("span",{children:"📱"}),e.jsx("span",{children:"Open Paytm"})]}),e.jsx("button",{onClick:()=>T(n.paytmNumber),className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-sm",children:"Pay to Number"})]})]}),n.phonepeNumber&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"Pe"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"PhonePe"}),e.jsx("p",{className:"text-xs text-gray-600",children:n.phonepeNumber})]})]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.phonepeNumber),M.success("PhonePe number copied!")},className:"text-xs text-gray-500 hover:text-gray-700 px-2 py-1 bg-gray-50 rounded",children:"Copy"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>B(n.upiId,n.upiName),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all text-sm font-medium",children:[e.jsx("span",{children:"📱"}),e.jsx("span",{children:"Open PhonePe"})]}),e.jsx("button",{onClick:()=>F(n.phonepeNumber),className:"px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all text-sm",children:"Pay to Number"})]})]})]})]}),n.paymentInstructions&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 border border-orange-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-orange-900 mb-2 flex items-center",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Payment Instructions"]}),e.jsx("p",{className:"text-sm text-orange-800",children:n.paymentInstructions})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 border border-gray-200 mt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2 text-blue-600"}),"How to Pay"]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-700",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("span",{children:"Click on your preferred payment app button above"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("span",{children:"The app will open with UPI ID and name pre-filled"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Enter the payment amount"})," and complete the transaction"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"4"}),e.jsx("span",{children:'Take a screenshot and click "Update Status" below'})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800 flex items-center",children:[e.jsx("span",{className:"font-bold mr-1",children:"💡"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Note:"})," You'll need to enter the payment amount manually in the app to avoid transaction limit errors."]})]})})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:()=>{M.success("Payment update feature will be implemented next!")},className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-lg font-medium text-sm hover:from-green-700 hover:to-emerald-700 transition-all flex items-center justify-center space-x-2",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"I Made This Payment - Update Status"})]})})]})]}):e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(vr,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Choose Payment Method"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select your preferred payment option"})]})]}),c?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:"Loading payment options..."})]}):n?e.jsxs("div",{className:"space-y-3",children:[n.upiId&&e.jsx(ae.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>m("upi"),className:`w-full p-4 rounded-xl border-2 transition-all ${d==="upi"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center",children:e.jsx(Ks,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"UPI Payment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay using UPI ID or QR scan"})]}),d==="upi"&&e.jsx(Be,{className:"h-5 w-5 text-blue-500"})]})}),n.accountNumber&&n.bankName&&e.jsx(ae.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>m("bank"),className:`w-full p-4 rounded-xl border-2 transition-all ${d==="bank"?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bank Transfer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Direct bank account transfer"})]}),d==="bank"&&e.jsx(Be,{className:"h-5 w-5 text-green-500"})]})}),(n.gpayNumber||n.paytmNumber||n.phonepeNumber)&&e.jsx(ae.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>m("apps"),className:`w-full p-4 rounded-xl border-2 transition-all ${d==="apps"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(Cs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Apps"}),e.jsx("p",{className:"text-sm text-gray-600",children:"GPay, Paytm, PhonePe numbers"})]}),d==="apps"&&e.jsx(Be,{className:"h-5 w-5 text-purple-500"})]})}),d&&e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"pt-4",children:e.jsxs("button",{onClick:()=>g(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-medium text-sm hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center space-x-2",children:[e.jsxs("span",{children:["Continue with ",d==="upi"?"UPI":d==="bank"?"Bank Transfer":"Payment Apps"]}),e.jsx(vr,{className:"h-4 w-4 rotate-180"})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ze,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment Info Not Available"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Payment information is not configured for this PG."}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Please contact the PG admin to set up payment details."}),e.jsx("button",{onClick:()=>{M.success("Contact PG admin to configure payment information for this branch.")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all text-sm",children:"Contact Admin"})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Invalid QR code"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please check the QR code and try again"})]})})},yne=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(!1),[l,o]=h.useState(null),[c,u]=h.useState({name:"",address:{street:"",city:"",state:"",pincode:"",landmark:""},maintainer:{name:"",mobile:"",email:""},contact:{phone:"",email:"",alternatePhone:""},capacity:{totalRooms:0,totalBeds:0,availableRooms:0},amenities:[],status:"active"}),d=[{name:"WiFi",icon:o2,color:"blue"},{name:"AC",icon:RE,color:"cyan"},{name:"Food",icon:FE,color:"orange"},{name:"Cleaning",icon:nc,color:"green"},{name:"Security",icon:is,color:"red"},{name:"Parking",icon:DE,color:"gray"},{name:"Gym",icon:IE,color:"pink"},{name:"TV",icon:OE,color:"indigo"},{name:"Refrigerator",icon:ME,color:"yellow"},{name:"Geyser",icon:BE,color:"blue"},{name:"Furnished",icon:LE,color:"brown"}];h.useEffect(()=>{m()},[]);const m=async()=>{try{const w=new Date().getTime(),j=await(await fetch(`/api/branches?t=${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})).json();if(j.success){console.log("Fetched branches:",j.data);const k=j.data.filter((R,D,P)=>D===P.findIndex(T=>T._id===R._id));if(k.filter(R=>R.isDefault).length>1){console.warn("Multiple default branches found, keeping the first one");const R=k.map((D,P)=>D.isDefault&&P!==k.findIndex(T=>T.isDefault)?{...D,isDefault:!1}:D);s(R)}else s(k)}else M.error(j.message||"Failed to fetch branches")}catch(w){console.error("Error fetching branches:",w),M.error("Failed to fetch branches")}finally{a(!1)}},x=async w=>{w.preventDefault();try{const C=l?`/api/branches/${l._id}`:"/api/branches",E=await(await fetch(C,{method:l?"PUT":"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify(c)})).json();E.success?(M.success(l?"Branch updated successfully":"Branch created successfully"),i(!1),o(null),v(),m()):M.error(E.message||"Failed to save branch")}catch(C){console.error("Error saving branch:",C),M.error("Failed to save branch")}},g=w=>{o(w),u({name:w.name,address:w.address,maintainer:w.maintainer,contact:w.contact,capacity:w.capacity,amenities:w.amenities||[],status:w.status}),i(!0)},p=async w=>{if(window.confirm("Are you sure you want to delete this branch?"))try{const j=await(await fetch(`/api/branches/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();j.success?(M.success("Branch deleted successfully"),m()):M.error(j.message||"Failed to delete branch")}catch(C){console.error("Error deleting branch:",C),M.error("Failed to delete branch")}},f=async w=>{var C;try{const j=M.loading("Setting default branch..."),E=await(await fetch(`/api/branches/${w}/set-default`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json","Cache-Control":"no-cache"}})).json();M.dismiss(j),E.success?(console.log("Default branch set successfully:",E.data),await new Promise(R=>setTimeout(R,500)),a(!0),await m(),M.success(`Default branch updated to "${((C=E.data)==null?void 0:C.name)||"selected branch"}" successfully!`)):(console.error("Failed to set default branch:",E),E.error&&E.error.includes("index constraint")?M.error("Database index issue detected",{duration:5e3,action:{label:"Fix Now",onClick:()=>b()}}):M.error(E.message||"Failed to set default branch"))}catch(j){console.error("Error setting default branch:",j),M.error("Failed to set default branch")}},b=async()=>{try{const w=M.loading("Fixing database index..."),j=await(await fetch("/api/branches/fix-index",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();M.dismiss(w),j.success?M.success("Database index fixed successfully!"):M.error(j.message||"Failed to fix database index")}catch(w){console.error("Error fixing index:",w),M.error("Failed to fix database index")}},y=async()=>{if(window.confirm("Are you sure you want to clean up duplicate branches? This will mark duplicate branches as inactive."))try{const w=M.loading("Cleaning up duplicate branches..."),j=await(await fetch("/api/branches/cleanup-duplicates",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();M.dismiss(w),j.success?(M.success(`Cleaned up ${j.duplicatesRemoved||0} duplicate branches!`),a(!0),await m()):M.error(j.message||"Failed to cleanup duplicate branches")}catch(w){console.error("Error cleaning up duplicates:",w),M.error("Failed to cleanup duplicate branches")}},v=()=>{u({name:"",address:{street:"",city:"",state:"",pincode:"",landmark:""},maintainer:{name:"",mobile:"",email:""},contact:{phone:"",email:"",alternatePhone:""},capacity:{totalRooms:0,totalBeds:0,availableRooms:0},amenities:[],status:"active"})},N=(w,C,j)=>{u(k=>({...k,[w]:{...k[w],[C]:j}}))},S=w=>{u(C=>({...C,amenities:C.amenities.includes(w)?C.amenities.filter(j=>j!==w):[...C.amenities,w]}))};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"PG Branches"}),e.jsx("p",{className:"text-gray-600",children:"Manage your PG branches and locations"})]}),e.jsxs("button",{onClick:()=>{i(!0),o(null),v()},className:"flex items-center space-x-3 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Add Branch"})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-6 py-4 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l?"Edit Branch":"Add New Branch"}),e.jsx("p",{className:"text-sm text-gray-600",children:l?"Update your branch information":"Create a new branch for your PG"})]})]}),e.jsx("button",{onClick:()=>{i(!1),o(null),v()},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Name *"}),e.jsx("input",{type:"text",value:c.name,onChange:w=>u(C=>({...C,name:w.target.value})),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter branch name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:c.status,onChange:w=>u(C=>({...C,status:w.target.value})),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"full",children:"Full"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(sr,{className:"h-4 w-4 mr-2 text-green-600"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street *"}),e.jsx("input",{type:"text",value:c.address.street,onChange:w=>N("address","street",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter street address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e.jsx("input",{type:"text",value:c.address.city,onChange:w=>N("address","city",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter city",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),e.jsx("input",{type:"text",value:c.address.state,onChange:w=>N("address","state",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter state",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),e.jsx("input",{type:"text",value:c.address.pincode,onChange:w=>N("address","pincode",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter pincode",pattern:"[0-9]{6}",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Landmark"}),e.jsx("input",{type:"text",value:c.address.landmark,onChange:w=>N("address","landmark",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter landmark (optional)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2 text-purple-600"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",value:c.contact.phone,onChange:w=>N("contact","phone",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter phone number",pattern:"[0-9]{10}",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:c.contact.email,onChange:w=>N("contact","email",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alternate Phone"}),e.jsx("input",{type:"tel",value:c.contact.alternatePhone,onChange:w=>N("contact","alternatePhone",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter alternate phone",pattern:"[0-9]{10}"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-orange-600"}),"Maintainer Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:c.maintainer.name,onChange:w=>N("maintainer","name",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter maintainer name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile *"}),e.jsx("input",{type:"tel",value:c.maintainer.mobile,onChange:w=>N("maintainer","mobile",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter mobile number",pattern:"[0-9]{10}",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:c.maintainer.email,onChange:w=>N("maintainer","email",w.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter maintainer email",required:!0})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-indigo-600"}),"Capacity Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Rooms"}),e.jsx("input",{type:"number",value:c.capacity.totalRooms,onChange:w=>N("capacity","totalRooms",parseInt(w.target.value)||0),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter total rooms",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Beds"}),e.jsx("input",{type:"number",value:c.capacity.totalBeds,onChange:w=>N("capacity","totalBeds",parseInt(w.target.value)||0),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter total beds",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Rooms"}),e.jsx("input",{type:"number",value:c.capacity.availableRooms,onChange:w=>N("capacity","availableRooms",parseInt(w.target.value)||0),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter available rooms",min:"0"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Es,{className:"h-4 w-4 mr-2 text-pink-600"}),"Amenities"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:d.map(w=>{const C=w.icon,j=c.amenities.includes(w.name);return e.jsxs("button",{type:"button",onClick:()=>S(w.name),className:`p-3 rounded-lg border-2 transition-all duration-200 flex flex-col items-center space-y-1.5 ${j?"border-blue-500 bg-blue-50 text-blue-700 shadow-sm":"border-gray-200 bg-white text-gray-600 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${j?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(C,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-xs font-medium",children:w.name}),j&&e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(hi,{className:"h-2.5 w-2.5 text-white"})})]},w.name)})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),o(null),v()},className:"px-5 py-2.5 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:l?"Update Branch":"Create Branch"})]})]})})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Branches"}),t.length>0&&e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[t.length," branch",t.length!==1?"es":""]}),(()=>{const w=t.find(C=>C.isDefault);return w?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-800 rounded-full border border-yellow-200",children:[e.jsx(Fs,{className:"h-3 w-3 fill-current"}),e.jsxs("span",{className:"text-sm font-medium",children:["Default: ",w.name]})]}):e.jsx("span",{className:"text-sm text-orange-600 bg-orange-100 px-3 py-1 rounded-full border border-orange-200",children:"No default branch set"})})()]})]}),t.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>{a(!0),m()},className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200",title:"Refresh branches",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",title:"Fix database index issues",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{children:"Fix Index"})]}),e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-orange-600 bg-orange-100 hover:bg-orange-200 rounded-lg transition-colors duration-200",title:"Clean up duplicate branches",children:[e.jsx(Pr,{className:"h-4 w-4"}),e.jsx("span",{children:"Clean Duplicates"})]})]})]}),t.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(Ie,{className:"h-10 w-10 text-blue-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Branches Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first branch to get started with managing your PG locations."}),e.jsxs("button",{onClick:()=>{i(!0),o(null),v()},className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{children:"Create First Branch"})]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(w=>e.jsxs("div",{className:`group bg-white rounded-lg shadow-sm border transition-all duration-200 overflow-hidden hover:shadow-md ${w.isDefault?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`p-6 border-b ${w.isDefault?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.isDefault?"bg-blue-600":"bg-gray-600"}`,children:e.jsx(Ie,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-lg truncate",children:w.name}),w.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded",children:"DEFAULT"})]}),w.isDefault&&e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Primary Branch"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${w.status==="active"?"bg-green-100 text-green-700":w.status==="inactive"?"bg-gray-100 text-gray-700":w.status==="maintenance"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)}),w.isActive&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[!w.isDefault&&e.jsx("button",{onClick:()=>f(w._id),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-md border border-yellow-200 hover:border-yellow-300 transition-colors",title:"Make Default",children:e.jsx(Fs,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>g(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md border border-blue-200 hover:border-blue-300 transition-colors",title:"Edit",children:e.jsx(fa,{className:"h-4 w-4"})}),!w.isDefault&&e.jsx("button",{onClick:()=>p(w._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md border border-red-200 hover:border-red-300 transition-colors",title:"Delete",children:e.jsx(Pr,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx(sr,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.address.street}),e.jsx("p",{className:"text-xs text-gray-500",children:w.address.city})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.contact.phone})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx(Tr,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.contact.email})})]})]})]}),e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Je,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:w.capacity.totalRooms}),e.jsx("p",{className:"text-xs text-gray-600",children:"Rooms"})]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:w.capacity.totalBeds}),e.jsx("p",{className:"text-xs text-gray-600",children:"Beds"})]})]})}),w.amenities&&w.amenities.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-900",children:"AMENITIES"}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:[w.amenities.length," available"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.amenities.slice(0,4).map(C=>e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded",children:C},C)),w.amenities.length>4&&e.jsxs("span",{className:"px-3 py-1 bg-gray-600 text-white text-xs font-medium rounded",children:["+",w.amenities.length-4]})]})]})]}),e.jsx("div",{className:`px-6 py-4 border-t ${w.isDefault?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Updated ",new Date(w.updatedAt||w.createdAt).toLocaleDateString()]}),w.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"Primary Branch"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!w.isDefault&&e.jsxs("button",{onClick:()=>f(w._id),className:"flex items-center space-x-1 px-3 py-1 text-xs font-medium text-yellow-700 bg-yellow-100 hover:bg-yellow-200 rounded border border-yellow-200 transition-colors",children:[e.jsx(Fs,{className:"h-3 w-3"}),e.jsx("span",{children:"Make Default"})]}),e.jsxs("button",{onClick:()=>g(w),className:"flex items-center space-x-1 px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded border border-blue-200 transition-colors",children:[e.jsx("span",{children:"Manage"}),e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})]},w._id))})]})]})},vne=({data:t,onEdit:s})=>e.jsx("div",{className:"space-y-6",children:e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ks,{className:"h-5 w-5 mr-2 text-blue-600"}),"Payment Summary"]}),e.jsxs("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors flex items-center",children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Edit Settings"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"UPI Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"UPI ID:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.upiId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"UPI Name:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.upiName})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Pricing Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Per Day Cost:"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",t.perDayCost]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Advance Amount:"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",t.advanceAmount]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Payment Apps"}),e.jsxs("div",{className:"space-y-2",children:[t.gpayNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Google Pay:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.gpayNumber})]}),t.paytmNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Paytm:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.paytmNumber})]}),t.phonepeNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"PhonePe:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.phonepeNumber})]}),!t.gpayNumber&&!t.paytmNumber&&!t.phonepeNumber&&e.jsx("p",{className:"text-sm text-gray-500",children:"No payment apps configured"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"PG Rules"}),t.pgRules&&t.pgRules.length>0?e.jsx("ul",{className:"space-y-1",children:t.pgRules.map((r,a)=>e.jsxs("li",{className:"text-sm text-gray-900 flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"•"}),r]},a))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No rules configured"})]})]})]})}),jne=()=>{const t=He(Nr),[s,r]=h.useState(null),[a,n]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[u,d]=h.useState(!1),[m,x]=h.useState(!1),[g,p]=h.useState({upiId:"",upiName:"",accountHolderName:"",bankName:"",accountNumber:"",ifscCode:"",gpayNumber:"",paytmNumber:"",phonepeNumber:"",paymentInstructions:"Please make payment and upload screenshot for verification.",perDayCost:0,advanceAmount:0,pgRules:[],qrCodeImagePath:""}),[f,b]=h.useState(null);h.useEffect(()=>{!s&&t&&r(t)},[t,s]),h.useEffect(()=>{s&&y()},[s]);const y=async()=>{var w,C;try{n(!0);const j=await vx.getPaymentInfo(s._id);if(j.success&&j.data){const k=j.data;p({upiId:k.upiId||"",upiName:k.upiName||"",accountHolderName:k.accountHolderName||"",bankName:k.bankName||"",accountNumber:k.accountNumber||"",ifscCode:k.ifscCode||"",gpayNumber:k.gpayNumber||"",paytmNumber:k.paytmNumber||"",phonepeNumber:k.phonepeNumber||"",paymentInstructions:k.paymentInstructions||"Please make payment and upload screenshot for verification.",perDayCost:k.perDayCost||0,advanceAmount:k.advanceAmount||0,pgRules:k.pgRules||[],qrCodeImagePath:k.qrCodeImagePath||""}),b(k)}else{try{const k=await fetch("/api/onboarding/status",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(k.ok){const E=await k.json();if(E.success&&E.data){const R=(w=E.data.steps)==null?void 0:w.find(D=>D.stepId==="payment_settings");if(R&&R.data){const D=R.data;p({upiId:D.upiId||"",upiName:D.upiName||"",accountHolderName:D.accountHolderName||"",bankName:D.bankName||"",accountNumber:D.accountNumber||"",ifscCode:D.ifscCode||"",gpayNumber:D.gpayNumber||"",paytmNumber:D.paytmNumber||"",phonepeNumber:D.phonepeNumber||"",paymentInstructions:D.paymentInstructions||"Please make payment and upload screenshot for verification.",perDayCost:D.perDayCost||0,advanceAmount:D.advanceAmount||0,pgRules:D.pgRules||[],qrCodeImagePath:""}),b(D);return}}}}catch(k){console.log("No onboarding data available:",k)}b(null),p(k=>({...k,upiId:"",upiName:"",accountHolderName:"",bankName:"",accountNumber:"",ifscCode:"",gpayNumber:"",paytmNumber:"",phonepeNumber:"",perDayCost:0,advanceAmount:0,pgRules:[],qrCodeImagePath:""}))}}catch(j){console.error("Error fetching payment info:",j),((C=j.response)==null?void 0:C.status)!==404&&M.error("Failed to load payment information")}finally{n(!1)}},v=(w,C)=>{p(j=>({...j,[w]:C}))},N=()=>f?Object.keys(g).some(w=>g[w]!==(f[w]||"")):!0;if(a)return e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const S=async w=>{if(w.success){M.success("Payment information saved successfully");const C=w.data;b(C),p({upiId:C.upiId||"",upiName:C.upiName||"",accountHolderName:C.accountHolderName||"",bankName:C.bankName||"",accountNumber:C.accountNumber||"",ifscCode:C.ifscCode||"",gpayNumber:C.gpayNumber||"",paytmNumber:C.paytmNumber||"",phonepeNumber:C.phonepeNumber||"",paymentInstructions:C.paymentInstructions||"Please make payment and upload screenshot for verification.",perDayCost:C.perDayCost||0,advanceAmount:C.advanceAmount||0,pgRules:C.pgRules||[],qrCodeImagePath:C.qrCodeImagePath||""}),d(!0),x(!1),setTimeout(()=>d(!1),3e3)}else M.error(w.message||"Failed to save payment information")};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ks,{className:"h-6 w-6 mr-3 text-blue-600"}),"Payment Information"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure payment details for your PG branches. The same UPI ID or app number can be reused across branches."})]}),e.jsx("div",{className:"mb-6",children:e.jsx(tS,{selectedBranch:s,onBranchChange:w=>{r(w),x(!1)}})}),s?!m&&f?e.jsx(vne,{data:f,onEdit:()=>x(!0)}):e.jsxs("form",{onSubmit:async w=>{w.preventDefault();try{l(!0);const C=await vx.savePaymentInfo(s._id,g);await S(C)}catch(C){console.error("Error saving payment info:",C),M.error("Failed to save payment information")}finally{l(!1)}},className:"space-y-6",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ks,{className:"h-5 w-5 mr-2 text-blue-600"}),"UPI Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["UPI ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:g.upiId,onChange:w=>v("upiId",w.target.value),placeholder:"example@paytm",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["UPI Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:g.upiName,onChange:w=>v("upiName",w.target.value),placeholder:"Name as registered in UPI",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-green-600"}),"Account Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Account Holder Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:g.accountHolderName,onChange:w=>v("accountHolderName",w.target.value),placeholder:"Full name as per bank records",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bank Account Details (Optional)"}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:"flex items-center text-blue-600 hover:text-blue-700 text-sm",children:o?e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"h-4 w-4 mr-1"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),"Show"]})})]}),o&&e.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:g.bankName,onChange:w=>v("bankName",w.target.value),placeholder:"Bank Name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:g.accountNumber,onChange:w=>v("accountNumber",w.target.value),placeholder:"Account Number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IFSC Code"}),e.jsx("input",{type:"text",value:g.ifscCode,onChange:w=>v("ifscCode",w.target.value),placeholder:"IFSC Code",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2 text-purple-600"}),"Payment App Numbers (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GPay Number"}),e.jsx("input",{type:"tel",value:g.gpayNumber,onChange:w=>v("gpayNumber",w.target.value),placeholder:"GPay registered number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Paytm Number"}),e.jsx("input",{type:"tel",value:g.paytmNumber,onChange:w=>v("paytmNumber",w.target.value),placeholder:"Paytm registered number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PhonePe Number"}),e.jsx("input",{type:"tel",value:g.phonepeNumber,onChange:w=>v("phonepeNumber",w.target.value),placeholder:"PhonePe registered number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2 text-green-600"}),"Pricing Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Per Day Cost (₹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:g.perDayCost,onChange:w=>v("perDayCost",parseFloat(w.target.value)||0),placeholder:"Enter per day cost",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advance Amount (₹)"}),e.jsx("input",{type:"number",value:g.advanceAmount,onChange:w=>v("advanceAmount",parseFloat(w.target.value)||0),placeholder:"Enter advance amount",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," These pricing details will be used for resident billing and payment calculations."]})})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-red-600"}),"PG Rules & Regulations"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select the rules that apply to your PG. These will be displayed to residents."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["No smoking inside the premises","No alcohol consumption","No loud music after 10 PM","Visitors allowed only during day time","Maintain cleanliness in common areas","No cooking in rooms","Respect other residents privacy","Follow COVID-19 safety guidelines","No pets allowed","Monthly rent to be paid in advance"].map(w=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.pgRules.includes(w),onChange:C=>{C.target.checked?v("pgRules",[...g.pgRules,w]):v("pgRules",g.pgRules.filter(j=>j!==w))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:w})]},w))})]}),g.pgRules.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsxs("strong",{children:["Selected Rules (",g.pgRules.length,"):"]})," ",g.pgRules.join(", ")]})})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ze,{className:"h-5 w-5 mr-2 text-orange-600"}),"Payment Instructions"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions for Residents"}),e.jsx("textarea",{rows:3,value:g.paymentInstructions,onChange:w=>v("paymentInstructions",w.target.value),placeholder:"Enter instructions that will be shown to residents...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These instructions will be displayed to residents when they make payments via QR code"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:u?e.jsxs("div",{className:"flex items-center text-green-600 animate-pulse",children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"font-medium",children:"Just saved!"})]}):f?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-4 w-4 text-green-600 mr-1"}),"Last updated: ",new Date(f.updatedAt).toLocaleDateString()," at ",new Date(f.updatedAt).toLocaleTimeString()]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"h-4 w-4 text-orange-600 mr-1"}),"No payment information configured"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{f?(x(!1),p({...f,pgRules:f.pgRules||[]})):y()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:f?"Cancel":"Reset"}),e.jsxs("button",{type:"submit",disabled:i||!N(),className:`px-6 py-2 rounded-lg transition-all flex items-center ${!N()&&!i?"bg-green-100 text-green-700 border border-green-200 cursor-default":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):N()?e.jsx(Za,{className:"h-4 w-4 mr-2"}):e.jsx(Be,{className:"h-4 w-4 mr-2"}),i?"Saving...":N()?"Save Payment Info":"All Changes Saved"]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Branch"}),e.jsx("p",{className:"text-gray-600",children:"Please select a branch above to configure payment information"})]})]})},wne=()=>{const t=He(Nr),[s,r]=h.useState(null),[a,n]=h.useState(!0),[i,l]=h.useState(null);h.useEffect(()=>{t&&o()},[t]);const o=async()=>{try{n(!0),l(null);const u=await vx.getPaymentInfo(t._id);u.success&&u.data?r(u.data):l("No payment information found")}catch(u){console.error("Error fetching payment data:",u),l("Failed to load payment information")}finally{n(!1)}},c=u=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(u);return a?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center justify-center text-center",children:e.jsxs("div",{children:[e.jsx(Ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment Information"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i}),e.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-4 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})})}):s?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Ks,{className:"h-6 w-6 mr-3 text-blue-600"}),"Payment Summary"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Complete payment information for ",(t==null?void 0:t.name)||"selected branch"]})]}),e.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ks,{className:"h-5 w-5 mr-2 text-green-600"}),"UPI Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"UPI ID:"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.upiId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"UPI Name:"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.upiName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Account Holder:"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.accountHolderName})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2 text-blue-600"}),"Pricing Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Per Day Cost:"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c(s.perDayCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Advance Amount:"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:c(s.advanceAmount)})]}),e.jsxs("div",{className:"pt-2 border-t border-blue-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Monthly Estimate:"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:c(s.perDayCost*30)})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2 text-purple-600"}),"Payment Methods"]}),e.jsxs("div",{className:"space-y-3",children:[s.gpayNumber&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Google Pay:"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.gpayNumber})]})]}),s.paytmNumber&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Paytm:"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.paytmNumber})]})]}),s.phonepeNumber&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"PhonePe:"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.phonepeNumber})]})]}),!s.gpayNumber&&!s.paytmNumber&&!s.phonepeNumber&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No mobile payment numbers configured"})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 border border-orange-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-orange-600"}),"Bank Information"]}),e.jsxs("div",{className:"space-y-3",children:[s.bankName&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Bank Name:"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.bankName})]}),s.accountNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Account Number:"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.accountNumber.replace(/(.{4})/g,"$1 ").trim()})]}),s.ifscCode&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"IFSC Code:"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.ifscCode})]}),!s.bankName&&!s.accountNumber&&!s.ifscCode&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No bank information configured"})]})]})]}),s.pgRules&&s.pgRules.length>0&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-6 bg-gradient-to-br from-red-50 to-pink-50 rounded-xl p-6 border border-red-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-red-600"}),"PG Rules & Regulations"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.pgRules.map((u,d)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white rounded-lg border border-red-200",children:[e.jsx(Be,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:u})]},d))})]}),s.paymentInstructions&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ze,{className:"h-5 w-5 mr-2 text-gray-600"}),"Payment Instructions"]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:s.paymentInstructions})})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Payment information configured"})]}),e.jsxs("span",{children:["Last updated: ",new Date(s.updatedAt||s.createdAt).toLocaleDateString()]})]})})]}):null},W1=({plan:t,isSelected:s=!1,onSelect:r,showSelectButton:a=!0,compact:n=!1})=>{if(!t)return null;const i=m=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(m),l=m=>m.includes("Free Trial")?vn:m.includes("Basic")||m.includes("Starter")?Fs:m.includes("Pro")||m.includes("Professional")?xi:m.includes("Enterprise")?Ie:is,o=m=>m.includes("Free Trial")?"from-blue-500 to-purple-600":m.includes("Basic")||m.includes("Starter")?"from-green-500 to-emerald-600":m.includes("Pro")||m.includes("Professional")?"from-orange-500 to-red-600":m.includes("Enterprise")?"from-indigo-500 to-purple-600":"from-gray-500 to-gray-600",c=l(t.planName),u=o(t.planName);t.features;const d=t.modules||[];return n?e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`relative bg-white rounded-2xl shadow-lg border-2 transition-all duration-300 overflow-hidden ${s?"border-blue-500 shadow-blue-200 shadow-2xl":"border-gray-200 hover:border-gray-300 hover:shadow-xl"}`,children:[e.jsx("div",{className:`bg-gradient-to-r ${u} p-4 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(c,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:t.planName}),e.jsx("p",{className:"text-sm opacity-90",children:t.planDescription})]})]}),t.isPopular&&e.jsx("div",{className:"px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full",children:"POPULAR"})]})}),e.jsx("div",{className:"p-4 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.basePrice===0?"FREE":i(t.basePrice)}),e.jsx("div",{className:"text-sm text-gray-600",children:t.billingCycle==="monthly"?"/month":t.billingCycle==="annual"?"/year":""}),t.annualDiscount>0&&e.jsxs("div",{className:"text-xs text-green-600 font-medium mt-1",children:["Save ",t.annualDiscount,"% annually"]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(xs,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{children:["Up to ",t.baseBedCount," beds"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:t.allowMultipleBranches?"Multi-branch":"Single branch"})]}),t.billingCycle!=="trial"&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Jt,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{children:"Advanced analytics"})]})]})}),a&&e.jsx("div",{className:"p-4 pt-0",children:e.jsx("button",{onClick:()=>r(t),className:`w-full py-3 px-4 rounded-xl font-semibold transition-all duration-200 ${s?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s?"Selected":"Select Plan"})})]}):e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`relative bg-white rounded-3xl shadow-2xl border-2 transition-all duration-500 overflow-hidden ${s?"border-blue-500 shadow-blue-200 shadow-2xl scale-105":"border-gray-200 hover:border-gray-300 hover:shadow-xl"}`,children:[e.jsxs("div",{className:`bg-gradient-to-br ${u} p-8 text-white relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm",children:e.jsx(c,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.planName}),e.jsx("p",{className:"text-blue-100 text-sm leading-relaxed max-w-md",children:t.planDescription})]})]}),t.isPopular&&e.jsx(ae.div,{initial:{scale:0},animate:{scale:1},className:"px-4 py-2 bg-yellow-400 text-yellow-900 font-bold rounded-full text-sm shadow-lg",children:"⭐ MOST POPULAR"})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-5xl font-bold text-gray-900",children:t.basePrice===0?"FREE":i(t.basePrice)}),t.basePrice>0&&e.jsxs("span",{className:"text-lg text-gray-600 self-end mb-2",children:["/",t.billingCycle==="monthly"?"month":t.billingCycle==="annual"?"year":"trial"]})]}),t.annualDiscount>0&&t.billingCycle==="monthly"&&e.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium mb-4",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsxs("span",{children:["Save ",t.annualDiscount,"% with annual billing"]})]}),t.billingCycle==="trial"&&e.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium mb-4",children:[e.jsx(vn,{className:"h-4 w-4"}),e.jsx("span",{children:"14-day free trial"})]})]})}),e.jsxs("div",{className:"p-8 bg-white",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Plan Includes"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx(xs,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.baseBedCount}),e.jsx("div",{className:"text-sm text-blue-700",children:"Beds Included"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsx(Ie,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.allowMultipleBranches?"∞":"1"}),e.jsx("div",{className:"text-sm text-green-700",children:t.allowMultipleBranches?"Multi-branch":"Single Branch"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Module Access"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:d.slice(0,6).map((m,x)=>e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${m.enabled?"bg-green-100":"bg-gray-100"}`,children:m.enabled?e.jsx(hi,{className:"h-4 w-4 text-green-600"}):e.jsx(ct,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:m.moduleName.replace("_"," ")}),e.jsx("div",{className:"text-xs text-gray-600",children:m.enabled?"Full access":"Not included"})]})]},m.moduleName))})]})]}),a&&e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(t),className:`w-full py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300 shadow-lg ${s?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-blue-200 hover:shadow-blue-300":"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 hover:from-gray-200 hover:to-gray-300"}`,children:s?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(hi,{className:"h-5 w-5"}),e.jsx("span",{children:"Currently Selected"})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Fs,{className:"h-5 w-5"}),e.jsx("span",{children:"Choose This Plan"})]})})})]})},Nne=()=>{const t=cr();He(Pl);const s=He(J2),r=He(xA),a=He(Q2),n=He(Z2),i=He(hA),l=He(gA),o=He(fA),c=i.filter(ee=>ee.planName!=="Free Trial Plan"&&ee.planName!=="Trial Expired Plan"),[u,d]=h.useState((s==null?void 0:s._id)||null),[m,x]=h.useState(!1),[g,p]=h.useState(null),[f,b]=h.useState(!1),[y,v]=h.useState(null),[N,S]=h.useState(!1),[w,C]=h.useState(1),[j,k]=h.useState(1),[E,R]=h.useState(null),[D,P]=h.useState({}),[T,B]=h.useState(!0),[F,L]=h.useState(!1),[I,V]=h.useState(null),[_,G]=h.useState(!1),[U,A]=h.useState(null),[q,Y]=h.useState(1),[O,W]=h.useState(!1),[z,H]=h.useState(null),[Q,J]=h.useState(1),[ie,K]=h.useState(!1),[oe,le]=h.useState({requestedBeds:(n==null?void 0:n.bedsUsed)||0,requestedBranches:1,requestMessage:""});h.useEffect(()=>{(async()=>{try{const me=await Lt.getCurrentUser();await t(i0({role:me.role,pgId:me.pgId,email:me.email}))}catch(me){console.error("Error fetching available plans:",me),M.error("Failed to fetch available plans")}})()},[t]),h.useEffect(()=>{s&&d(s._id)},[s]);const Se=ee=>{const me=it(ee);C(me.bedCount),k(me.branchCount),R(ee),S(!0)},Ee=ee=>{V(ee),L(!0)},ye=ee=>{G(!0),A(ee)},We=ee=>{W(!0),H(ee)},fe=ee=>{const me=document.getElementById("available-plans-section");me&&(me.scrollIntoView({behavior:"smooth"}),M("Scroll down to see available plans and make changes",{icon:"ℹ️"}))},Fe=async()=>{if(!U||q<1){M.error("Please specify the number of beds to add");return}try{const me=await(await fetch("http://localhost:5000/api/users/subscription/add-beds",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({additionalBeds:q,newMaxBeds:(a.maxBeds||s.baseBedCount)+q})})).json();me.success?(M.success(me.message||"Beds added successfully!"),await t(Ql()),await t(Md()),G(!1),A(null),Y(1)):M.error(me.message||"Failed to add beds")}catch(ee){console.error("Error adding beds:",ee),M.error("Failed to add beds. Please try again.")}},ce=async()=>{if(!z||Q<1){M.error("Please specify the number of branches to add");return}try{const ee=await et.addBranchesToSubscription(Q,(a.maxBranches||1)+Q);ee.success?(M.success(ee.message||"Branches added successfully!"),await t(Ql()),await t(Md()),W(!1),H(null),J(1)):M.error(ee.message||"Failed to add branches")}catch(ee){console.error("Error adding branches:",ee),M.error("Failed to add branches. Please try again.")}},Ce=ee=>{K(!0),le({requestedBeds:Math.max(((n==null?void 0:n.bedsUsed)||0)+5,ee.baseBedCount),requestedBranches:1,requestMessage:""})},ze=async()=>{if(!s||oe.requestedBeds<((n==null?void 0:n.bedsUsed)||0)){M.error("Requested beds cannot be less than current usage");return}try{const ee=await et.requestUpgrade(s._id,oe);ee.success?(M.success(ee.message||"Upgrade request submitted successfully!"),K(!1),le({requestedBeds:(n==null?void 0:n.bedsUsed)||0,requestedBranches:1,requestMessage:""})):M.error(ee.message||"Failed to submit upgrade request")}catch(ee){console.error("Error requesting upgrade:",ee),M.error("Failed to submit upgrade request")}},De=()=>{Xe(E._id,{bedCount:w,branchCount:j});const ee={bedCount:w,branchCount:j},me={...E,selectedBedCount:ee.bedCount,selectedBranchCount:ee.branchCount};if(p(me),s&&s._id!==E._id){const Te=st(s,me);v(Te),b(!0)}else x(!0);S(!1),R(null)},st=(ee,me)=>{var Gr,Xs,_s,ds;const Te=it(ee),qe=it(me),gt=ft(ee,Te.bedCount,Te.branchCount),Nt=ft(me,qe.bedCount,qe.branchCount),mt={priceChange:{from:gt.monthlyPrice,to:Nt.monthlyPrice,difference:Nt.monthlyPrice-gt.monthlyPrice,percentage:gt.monthlyPrice>0?(Nt.monthlyPrice-gt.monthlyPrice)/gt.monthlyPrice*100:0},bedChange:{from:Te.bedCount,to:qe.bedCount,difference:qe.bedCount-Te.bedCount},branchChange:{from:Te.branchCount,to:qe.branchCount,difference:qe.branchCount-Te.branchCount},billingCycleChange:{from:ee.billingCycle,to:me.billingCycle,changed:ee.billingCycle!==me.billingCycle},branchSupportChange:{from:ee.allowMultipleBranches,to:me.allowMultipleBranches,changed:ee.allowMultipleBranches!==me.allowMultipleBranches},featuresAdded:[],featuresRemoved:[],modulesAdded:[],modulesRemoved:[]},Wt=((Gr=ee.features)==null?void 0:Gr.map(St=>St.name))||[],Le=((Xs=me.features)==null?void 0:Xs.map(St=>St.name))||[];mt.featuresAdded=Le.filter(St=>!Wt.includes(St)),mt.featuresRemoved=Wt.filter(St=>!Le.includes(St));const cs=((_s=ee.modules)==null?void 0:_s.map(St=>St.moduleName))||[],Gs=((ds=me.modules)==null?void 0:ds.map(St=>St.moduleName))||[];return mt.modulesAdded=Gs.filter(St=>!cs.includes(St)),mt.modulesRemoved=cs.filter(St=>!Gs.includes(St)),mt},Xe=(ee,me)=>{P(Te=>({...Te,[ee]:{...Te[ee],...me}}))},it=ee=>{const me=D[ee._id]||{};return{bedCount:me.bedCount||ee.baseBedCount,branchCount:me.branchCount||1}},ft=(ee,me,Te)=>{if(!ee)return 0;let qe=ee.basePrice,gt=0,Nt=0;if(me>ee.baseBedCount&&(gt=me-ee.baseBedCount,qe+=gt*ee.topUpPricePerBed),Te>1&&(Nt=Te-1,qe+=Nt*ee.costPerBranch),ee.billingCycle==="annual"){const mt=qe*12,Wt=mt*ee.annualDiscount/100;qe=(mt-Wt)/12}return{monthlyPrice:qe,annualPrice:qe*12,extraBeds:gt,extraBranches:Nt,basePrice:ee.basePrice,topUpCost:gt*ee.topUpPricePerBed,branchCost:Nt*ee.costPerBranch}},be=async()=>{try{const ee=it(g),me={planId:g._id,bedCount:ee.bedCount,branchCount:ee.branchCount},Te=await t(n0(me)).unwrap();M.success(Te.message||"Subscription plan updated successfully!"),await t(Ql()),x(!1),d(g._id)}catch(ee){M.error(ee||"Failed to select subscription plan")}},Pe=ee=>{switch(ee){case"active":return"text-green-600 bg-green-100 border-green-200";case"trial":return"text-blue-600 bg-blue-100 border-blue-200";case"expired":return"text-red-600 bg-red-100 border-red-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}};return l?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(gm,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[s&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Ur,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Current Plan"})]}),e.jsx("p",{className:"text-gray-600",children:"Your active subscription"})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${Pe(r)}`,children:r.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Plan Name"}),e.jsx(Fs,{className:"h-4 w-4 text-yellow-500"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.planName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Beds Limit"}),e.jsx(xs,{className:"h-4 w-4 text-purple-500"})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[n.bedsUsed||0," / ",a.maxBeds||"Unlimited"]}),a.maxBeds&&e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,(n.bedsUsed||0)/a.maxBeds*100)}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Billing"}),e.jsx(xt,{className:"h-4 w-4 text-green-500"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.billingCycle==="monthly"?"Monthly":"Annual"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:et.formatCurrency(s.basePrice)})]})]}),a.enabledModules.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Enabled Modules:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.enabledModules.slice(0,6).map((ee,me)=>e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:ee.replace(/_/g," ").toUpperCase()},me)),a.enabledModules.length>6&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded",children:["+",a.enabledModules.length-6," more"]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-blue-200",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>Ee(s),className:"flex items-center space-x-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:"Preview"})]}),e.jsxs("button",{onClick:()=>ye(s),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 border border-blue-600 text-white rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Beds"})]}),(s==null?void 0:s.allowMultipleBranches)&&e.jsxs("button",{onClick:()=>We(s),className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 border border-purple-600 text-white rounded-lg hover:bg-purple-700 hover:border-purple-700 transition-colors",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Branches"})]}),(s==null?void 0:s.isCustomPlan)&&e.jsxs("button",{onClick:()=>Ce(s),className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 border border-orange-600 text-white rounded-lg hover:bg-orange-700 hover:border-orange-700 transition-colors",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Request Upgrade"})]}),e.jsxs("button",{onClick:()=>fe(),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 border border-green-600 text-white rounded-lg hover:bg-green-700 hover:border-green-700 transition-colors",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Change Plan"})]})]})})]}),e.jsxs("div",{id:"available-plans-section",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Available Plans"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose the plan that fits your needs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"View:"}),e.jsx("button",{onClick:()=>B(!0),className:`px-3 py-1 text-sm rounded-md transition-colors ${T?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Modern"}),e.jsx("button",{onClick:()=>B(!1),className:`px-3 py-1 text-sm rounded-md transition-colors ${T?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white"}`,children:"Classic"})]})]}),c.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-200",children:[e.jsx(Ur,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Plans Available"}),e.jsx("p",{className:"text-gray-600",children:"No subscription plans are currently available."})]}):T?e.jsx("div",{className:"space-y-8",children:c.map(ee=>e.jsx(W1,{plan:ee,isSelected:u===ee._id,onSelect:Se,showSelectButton:!0,compact:!1},ee._id))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(ee=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`relative bg-white rounded-xl shadow-sm border-2 transition-all duration-200 hover:shadow-lg overflow-hidden ${u===ee._id?"border-blue-500 ring-2 ring-blue-200 shadow-blue-100":"border-gray-200 hover:border-blue-300"} ${ee.isRecommended?"ring-2 ring-purple-200 shadow-purple-100":""} ${ee.isPopular?"shadow-yellow-100":""}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2",children:[ee.isRecommended&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs font-bold rounded-full shadow-lg",children:[e.jsx(Fa,{className:"h-3 w-3"}),e.jsx("span",{children:"BEST VALUE"})]}),ee.isPopular&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold rounded-full shadow-lg",children:[e.jsx(Fs,{className:"h-3 w-3"}),e.jsx("span",{children:"POPULAR"})]}),s&&s._id===ee._id&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-green-600 text-white text-xs font-bold rounded-full shadow-lg",children:[e.jsx(Be,{className:"h-3 w-3"}),e.jsx("span",{children:"CURRENT"})]})]}),u===ee._id&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Be,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-1",children:ee.planName}),ee.planDescription&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ee.planDescription})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["₹",ee.basePrice.toLocaleString()]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["/",ee.billingCycle==="monthly"?"month":"year"]})]}),ee.billingCycle==="annual"&&ee.annualDiscount>0&&e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["Save ",ee.annualDiscount,"%"]}),e.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["₹",(ee.basePrice*12).toLocaleString(),"/year"]})]})]})]}),(ee.maxBedsAllowed>ee.baseBedCount||ee.allowMultipleBranches)&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Configure Your Plan"}),e.jsxs("div",{className:"space-y-3",children:[ee.maxBedsAllowed>ee.baseBedCount&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Number of Beds: ",it(ee).bedCount]}),e.jsx("input",{type:"range",min:ee.baseBedCount,max:ee.maxBedsAllowed,value:it(ee).bedCount,onChange:me=>Xe(ee._id,{bedCount:parseInt(me.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[ee.baseBedCount," beds"]}),e.jsxs("span",{children:[ee.maxBedsAllowed," beds"]})]})]}),ee.allowMultipleBranches&&ee.branchCount>1&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Number of Branches: ",it(ee).branchCount]}),e.jsx("input",{type:"range",min:"1",max:ee.branchCount,value:it(ee).branchCount,onChange:me=>Xe(ee._id,{branchCount:parseInt(me.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"1 branch"}),e.jsxs("span",{children:[ee.branchCount," branches"]})]})]})]})]}),e.jsx("div",{className:"mb-6 pb-6 border-b border-gray-200",children:(()=>{const me=it(ee),Te=ft(ee,me.bedCount,me.branchCount);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:et.formatCurrency(Te.monthlyPrice)}),e.jsxs("span",{className:"text-gray-600",children:["/",ee.billingCycle==="monthly"?"month":"year"]})]}),ee.billingCycle==="annual"&&ee.annualDiscount>0&&e.jsxs("p",{className:"text-sm text-green-600 font-medium mt-1",children:["Save ",ee.annualDiscount,"% with annual billing"]}),(Te.extraBeds>0||Te.extraBranches>0)&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[Te.extraBeds>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Base (",ee.baseBedCount," beds):"]}),e.jsx("span",{children:et.formatCurrency(Te.basePrice)})]}),Te.extraBeds>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Extra beds (",Te.extraBeds,"):"]}),e.jsx("span",{children:et.formatCurrency(Te.topUpCost)})]}),Te.extraBranches>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Extra branches (",Te.extraBranches,"):"]}),e.jsx("span",{children:et.formatCurrency(Te.branchCost)})]})]})]})})()}),e.jsxs("div",{className:"space-y-3 mb-6",children:[(()=>{const me=it(ee);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xs,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:me.bedCount})," beds configured",me.bedCount>ee.baseBedCount&&e.jsxs("span",{className:"text-green-600 ml-1",children:["(+",me.bedCount-ee.baseBedCount," extra)"]})]})]}),ee.maxBedsAllowed>ee.baseBedCount&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[et.formatCurrency(ee.topUpPricePerBed),"/bed top-up"]})]}),ee.allowMultipleBranches&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-purple-600 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:me.branchCount})," branch",me.branchCount!==1?"es":""," configured",me.branchCount>1&&e.jsxs("span",{className:"text-green-600 ml-1",children:["(+",me.branchCount-1," extra)"]})]})]}),ee.allowMultipleBranches&&ee.costPerBranch>0&&me.branchCount>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-orange-600 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[et.formatCurrency(ee.costPerBranch),"/additional branch"]})]})]})})(),ee.features&&ee.features.slice(0,3).map((me,Te)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[me.enabled?e.jsx(Be,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}):e.jsx(Yt,{className:"h-4 w-4 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:`text-sm ${me.enabled?"text-gray-700":"text-gray-400 line-through"}`,children:me.name})]},Te)),ee.features&&ee.features.length>3&&e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["+",ee.features.length-3," more features"]})]}),e.jsx("div",{className:"space-y-3",children:(()=>{const me=s&&s._id===ee._id,Te=s&&ee.basePrice>s.basePrice,qe=s&&ee.basePrice<s.basePrice,gt=s&&ee.basePrice===s.basePrice;return e.jsxs(e.Fragment,{children:[s&&!me&&e.jsxs("div",{className:`flex items-center justify-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium ${Te?"bg-green-50 text-green-700 border border-green-200":qe?"bg-orange-50 text-orange-700 border border-orange-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[Te&&e.jsxs(e.Fragment,{children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Upgrade Plan"}),e.jsxs("span",{className:"text-xs bg-green-100 px-2 py-0.5 rounded",children:["+₹",(ee.basePrice-s.basePrice).toLocaleString()]})]}),qe&&e.jsxs(e.Fragment,{children:[e.jsx(TrendingDown,{className:"h-4 w-4"}),e.jsx("span",{children:"Downgrade Plan"}),e.jsxs("span",{className:"text-xs bg-orange-100 px-2 py-0.5 rounded",children:["-₹",(s.basePrice-ee.basePrice).toLocaleString()]})]}),gt&&e.jsxs(e.Fragment,{children:[e.jsx(ArrowRight,{className:"h-4 w-4"}),e.jsx("span",{children:"Switch Plan"}),e.jsx("span",{className:"text-xs bg-blue-100 px-2 py-0.5 rounded",children:"Same Price"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>Ee(ee),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-lg hover:from-gray-200 hover:to-gray-300 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5 font-medium",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Preview"})]}),e.jsx("button",{onClick:()=>Se(ee),disabled:u===ee._id||o,className:`flex items-center justify-center space-x-2 px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5 ${u===ee._id?"bg-green-100 text-green-700 border-2 border-green-300 cursor-not-allowed":me?"bg-gray-100 text-gray-600 cursor-not-allowed border-2 border-gray-300":s?Te?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800":"bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-700 hover:to-purple-800"}`,children:o?e.jsx(gm,{className:"h-4 w-4 animate-spin"}):u===ee._id?e.jsxs(e.Fragment,{children:[e.jsx(hi,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Selected"})]}):me?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Current"})]}):s?e.jsxs(e.Fragment,{children:[e.jsx(ArrowRight,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:Te?"Upgrade":qe?"Downgrade":"Switch"})]}):e.jsxs(e.Fragment,{children:[e.jsx(hi,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Start"})]})})]}),u===ee._id&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:'Click "Confirm Selection" below to proceed'})})]})})()})]})]},ee._id))})]}),e.jsx(vt,{children:f&&y&&g&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(_t,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Plan Change Summary"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review changes before switching plans"})]})]}),e.jsx("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:e.jsx(ct,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Current Plan"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:s.planName}),e.jsxs("p",{className:"text-sm text-red-700",children:[et.formatCurrency(s.basePrice),"/",s.billingCycle==="monthly"?"month":"year"]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"New Plan"}),e.jsx("p",{className:"text-lg font-bold text-green-900",children:g.planName}),e.jsxs("p",{className:"text-sm text-green-700",children:[et.formatCurrency(g.basePrice),"/",g.billingCycle==="monthly"?"month":"year"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Price Change"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:et.formatCurrency(y.priceChange.from)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"New"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:et.formatCurrency(y.priceChange.to)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("p",{className:`text-lg font-bold ${y.priceChange.difference>=0?"text-red-600":"text-green-600"}`,children:[y.priceChange.difference>=0?"+":"",et.formatCurrency(y.priceChange.difference),y.priceChange.percentage!==0&&e.jsxs("span",{className:"text-sm ml-1",children:["(",y.priceChange.percentage>=0?"+":"",y.priceChange.percentage.toFixed(1),"%)"]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Capacity Changes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[y.bedChange.from," beds"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[y.branchChange.from," branch",y.branchChange.from!==1?"es":""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"New"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[y.bedChange.to," beds"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[y.branchChange.to," branch",y.branchChange.to!==1?"es":""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("p",{className:`text-lg font-bold ${y.bedChange.difference>=0?"text-green-600":"text-red-600"}`,children:[y.bedChange.difference>=0?"+":"",y.bedChange.difference," beds"]}),e.jsxs("p",{className:`text-sm font-medium ${y.branchChange.difference>=0?"text-green-600":"text-red-600"}`,children:[y.branchChange.difference>=0?"+":"",y.branchChange.difference," branch",y.branchChange.difference!==1?"es":""]})]})]})]}),y.billingCycleChange.changed&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-yellow-800 mb-2 flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Billing Cycle Change"]}),e.jsxs("p",{className:"text-yellow-700",children:["Changing from ",e.jsx("strong",{children:y.billingCycleChange.from})," to ",e.jsx("strong",{children:y.billingCycleChange.to})," billing."]})]}),y.branchSupportChange.changed&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Branch Support"}),e.jsx("p",{className:"text-blue-700",children:y.branchSupportChange.to?"New plan supports multiple branches":"New plan does not support multiple branches"})]}),(y.featuresAdded.length>0||y.featuresRemoved.length>0)&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Feature Changes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.featuresAdded.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Added Features:"}),e.jsx("ul",{className:"space-y-1",children:y.featuresAdded.map((ee,me)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(Be,{className:"h-3 w-3 mr-2"}),ee]},me))})]}),y.featuresRemoved.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Removed Features:"}),e.jsx("ul",{className:"space-y-1",children:y.featuresRemoved.map((ee,me)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(Yt,{className:"h-3 w-3 mr-2"}),ee]},me))})]})]})]}),(y.modulesAdded.length>0||y.modulesRemoved.length>0)&&e.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-indigo-800 mb-3",children:"Module Changes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.modulesAdded.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Added Modules:"}),e.jsx("ul",{className:"space-y-1",children:y.modulesAdded.map((ee,me)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(Be,{className:"h-3 w-3 mr-2"}),ee.replace(/_/g," ")]},me))})]}),y.modulesRemoved.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Removed Modules:"}),e.jsx("ul",{className:"space-y-1",children:y.modulesRemoved.map((ee,me)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(Yt,{className:"h-3 w-3 mr-2"}),ee.replace(/_/g," ")]},me))})]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{b(!1),x(!0)},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:"Continue to Confirmation"})]})]})]})})}),e.jsx(vt,{children:m&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ze,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s?"Confirm Plan Change":"Confirm Plan Selection"}),e.jsx("p",{className:"text-sm text-gray-600",children:s?"Are you sure you want to change your subscription plan?":"Are you sure you want to select this plan?"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:g.planName}),e.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:(()=>{var Te;const ee=it(g),me=ft(g,ee.bedCount,ee.branchCount);return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["• ",et.formatCurrency(me.monthlyPrice),"/",g.billingCycle==="monthly"?"month":"year"]}),e.jsxs("p",{children:["• ",ee.bedCount," bed",ee.bedCount!==1?"s":""," configured"]}),ee.branchCount>1&&e.jsxs("p",{children:["• ",ee.branchCount," branch",ee.branchCount!==1?"es":""," configured"]}),e.jsxs("p",{children:["• ",((Te=g.modules)==null?void 0:Te.length)||0," modules included"]}),(me.extraBeds>0||me.extraBranches>0)&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-300",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Cost Breakdown:"}),e.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[e.jsxs("p",{children:["• Base: ",et.formatCurrency(me.basePrice)]}),me.extraBeds>0&&e.jsxs("p",{children:["• Extra beds (",me.extraBeds,"): ",et.formatCurrency(me.topUpCost)]}),me.extraBranches>0&&e.jsxs("p",{children:["• Extra branches (",me.extraBranches,"): ",et.formatCurrency(me.branchCost)]})]})]})]})})()})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>x(!1),disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:be,disabled:o,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:o?e.jsx(gm,{className:"h-5 w-5 animate-spin mx-auto"}):"Confirm Selection"})]})]})})}),e.jsx(vt,{children:N&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(xs,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Configure Your Plan"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Customize bed and branch counts for ",E.planName]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Beds"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>C(Math.max(1,w-1)),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(Io,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:"1",max:"1000",value:w,onChange:ee=>C(Math.max(1,parseInt(ee.target.value)||1)),className:"flex-1 text-center py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>C(w+1),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Base: ",E.baseBedCount," beds included"]})]}),E.allowMultipleBranches&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Branches"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>k(Math.max(1,j-1)),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(Io,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:"1",max:"50",value:j,onChange:ee=>k(Math.max(1,parseInt(ee.target.value)||1)),className:"flex-1 text-center py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>k(j+1),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Additional branches: ₹",E.costPerBranch,"/month each"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Pricing Summary"}),e.jsx("div",{className:"space-y-1 text-sm",children:(()=>{const ee=ft(E,w,j);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Price:"}),e.jsxs("span",{children:["₹",et.formatCurrency(ee.basePrice)]})]}),ee.extraBeds>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Extra Beds (",ee.extraBeds,"):"]}),e.jsxs("span",{children:["₹",et.formatCurrency(ee.topUpCost)]})]}),ee.extraBranches>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Extra Branches (",ee.extraBranches,"):"]}),e.jsxs("span",{children:["₹",et.formatCurrency(ee.branchCost)]})]}),e.jsxs("div",{className:"border-t pt-1 mt-2",children:[e.jsxs("div",{className:"flex justify-between font-semibold text-gray-900",children:[e.jsx("span",{children:"Monthly Total:"}),e.jsxs("span",{children:["₹",et.formatCurrency(ee.monthlyPrice)]})]}),E.billingCycle==="annual"&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"Annual Total:"}),e.jsxs("span",{children:["₹",et.formatCurrency(ee.annualPrice)]})]})]})]})})()})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{S(!1),R(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:De,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:"Continue"})]})]})})}),e.jsxs(vt,{children:[F&&I&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>L(!1),children:e.jsx(ae.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:ee=>ee.stopPropagation(),className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl",children:e.jsx(W1,{plan:I,isSelected:u===I._id,onSelect:ee=>{L(!1),Se(ee)},showSelectButton:!0,compact:!1})})}),_&&U&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>G(!1),children:e.jsx(ae.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:ee=>ee.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add More Beds"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:U.planName}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("p",{children:["Current beds: ",n.bedsUsed||0," / ",a.maxBeds||"Unlimited"]}),e.jsxs("p",{children:["Base beds: ",U.baseBedCount]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Additional Beds"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>Y(Math.max(1,q-1)),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(Io,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:"1",max:"100",value:q,onChange:ee=>Y(Math.max(1,parseInt(ee.target.value)||1)),className:"flex-1 text-center py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>Y(q+1),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Additional beds: ₹",U.topUpPricePerBed,"/month each"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Cost Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Additional beds:"}),e.jsx("span",{children:q})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost per bed:"}),e.jsxs("span",{children:["₹",et.formatCurrency(U.topUpPricePerBed)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[e.jsx("span",{children:"Total monthly cost:"}),e.jsxs("span",{children:["₹",et.formatCurrency(q*U.topUpPricePerBed)]})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:Fe,disabled:o,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center space-x-2",children:[o?e.jsx(gm,{className:"h-4 w-4 animate-spin"}):e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Beds"})]})]})]})]})})}),ie&&s&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>K(!1),children:e.jsx(ae.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:ee=>ee.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Plan Upgrade"}),e.jsx("button",{onClick:()=>K(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-orange-900 mb-2",children:["Current Plan: ",s.planName]}),e.jsxs("div",{className:"text-sm text-orange-800",children:[e.jsxs("p",{children:["Current beds: ",(n==null?void 0:n.bedsUsed)||0," / ",a.maxBeds||"Unlimited"]}),e.jsx("p",{children:"Current branches: 1"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Requested Beds ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>le(ee=>({...ee,requestedBeds:Math.max((n==null?void 0:n.bedsUsed)||0,ee.requestedBeds-1)})),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(Io,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:(n==null?void 0:n.bedsUsed)||0,value:oe.requestedBeds,onChange:ee=>le(me=>({...me,requestedBeds:Math.max((n==null?void 0:n.bedsUsed)||0,parseInt(ee.target.value)||0)})),className:"flex-1 text-center py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>le(ee=>({...ee,requestedBeds:ee.requestedBeds+1})),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum: ",(n==null?void 0:n.bedsUsed)||0," beds (current usage)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Branches"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>le(ee=>({...ee,requestedBranches:Math.max(1,ee.requestedBranches-1)})),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(Io,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:"1",max:"10",value:oe.requestedBranches,onChange:ee=>le(me=>({...me,requestedBranches:Math.max(1,parseInt(ee.target.value)||1)})),className:"flex-1 text-center py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>le(ee=>({...ee,requestedBranches:Math.min(10,ee.requestedBranches+1)})),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of branches you need"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Message (Optional)"}),e.jsx("textarea",{value:oe.requestMessage,onChange:ee=>le(me=>({...me,requestMessage:ee.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3,placeholder:"Explain why you need this upgrade..."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Upgrade Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Additional beds needed:"}),e.jsx("span",{children:Math.max(0,oe.requestedBeds-(a.maxBeds||0))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Additional branches needed:"}),e.jsx("span",{children:Math.max(0,oe.requestedBranches-1)})]}),e.jsx("div",{className:"flex justify-between font-semibold border-t pt-2",children:e.jsx("span",{children:"This request will be reviewed by admin"})})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>K(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:ze,disabled:o,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 flex items-center justify-center space-x-2",children:[o?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Submit Request"})]})]})]})]})})}),O&&z&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>W(!1),children:e.jsx(ae.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:ee=>ee.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add More Branches"}),e.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:z.planName}),e.jsxs("div",{className:"text-sm text-purple-800",children:[e.jsxs("p",{children:["Current branches: ",a.maxBranches||1]}),e.jsxs("p",{children:["Current beds: ",(n==null?void 0:n.bedsUsed)||0," / ",a.maxBeds||"Unlimited"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Number of Additional Branches ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>J(Math.max(1,Q-1)),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(Io,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:"1",max:"10",value:Q,onChange:ee=>J(Math.max(1,parseInt(ee.target.value)||1)),className:"flex-1 text-center py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>J(Math.min(10,Q+1)),className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Additional branches: ₹",z.costPerBranch,"/month each"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Cost Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Additional branches:"}),e.jsx("span",{children:Q})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost per branch:"}),e.jsxs("span",{children:["₹",et.formatCurrency(z.costPerBranch)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[e.jsx("span",{children:"Total monthly cost:"}),e.jsxs("span",{children:["₹",et.formatCurrency(Q*z.costPerBranch)]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Additional branches will be added immediately to your subscription and billing will be updated accordingly."]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>W(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:ce,disabled:o,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center space-x-2",children:[o?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Branches"})]})]})]})]})})})]})]})},Sne=()=>{var F,L;const{user:t}=He(I=>I.auth),s=He(Nr),r=Ms(),[a,n]=h.useState("profile"),[i,l]=h.useState(!1),[o,c]=h.useState({firstName:"",lastName:"",email:"",phone:"",language:"en",theme:"light"}),[u,d]=h.useState({name:"",description:"",address:"",phone:"",email:""}),[m,x]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,p]=h.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,paymentReminders:!0,maintenanceUpdates:!0,newResidentAlerts:!0,systemUpdates:!0}),[f,b]=h.useState({current:!1,new:!1,confirm:!1}),[y,v]=h.useState(!1),N=[{id:"profile",name:"Profile",icon:jt},{id:"security",name:"Security",icon:is},{id:"subscription",name:"Subscription",icon:Ur},{id:"notifications",name:"Notifications",icon:Ln},{id:"branches",name:"PG Branches",icon:Ie},...y?[{id:"payment-info",name:"Payment Info",icon:Ks}]:[]];h.useEffect(()=>{if(!t){r("/admin/login");return}if((t==null?void 0:t.role)!=="admin"){M.error("Access denied. Admin privileges required."),r("/login");return}C(),S(),w()},[t,r,s]);const S=async()=>{try{const I=await we.get("/pg");if(I.data.success){const V=I.data.data;d({name:V.name||"",description:V.description||"",address:V.address||"",phone:V.phone||"",email:V.email||""}),v(!0)}}catch(I){console.error("Error loading PG data:",I)}},w=async()=>{try{if(s){const I=await we.get(`/payment-info/${s._id}`);if(I.data.success&&I.data.data){const V=I.data.data;d(_=>({..._,paymentInfo:{upiId:V.upiId||"",upiName:V.upiName||"",accountHolderName:V.accountHolderName||"",bankName:V.bankName||"",accountNumber:V.accountNumber||"",ifscCode:V.ifscCode||"",gpayNumber:V.gpayNumber||"",paytmNumber:V.paytmNumber||"",phonepeNumber:V.phonepeNumber||"",paymentInstructions:V.paymentInstructions||"Please make payment and upload screenshot for verification."}}))}}}catch(I){console.error("Error loading payment data:",I)}},C=async()=>{var I;try{l(!0);const V=localStorage.getItem("accessToken");console.log("🔍 Debug: Token exists:",!!V);const _=await we.get("/users/profile");if(console.log("✅ Profile loaded:",_.data),_.data.success){const{user:G,pgInfo:U}=_.data.data;c({firstName:G.firstName||"",lastName:G.lastName||"",email:G.email||"",phone:G.phone||"",language:G.language||"en",theme:G.theme||"light"});try{const A=await we.get("/users/notifications");console.log("✅ Notifications loaded:",A.data),A.data.success&&p(A.data.data.preferences)}catch(A){console.log("⚠️ Using default notification preferences:",A.message)}}}catch(V){console.error("❌ Error loading profile data:",V),console.error("❌ Error response:",(I=V.response)==null?void 0:I.data),M.error("Failed to load profile data")}finally{l(!1)}},j=async()=>{var I,V,_,G;try{l(!0),(await we.put("/users/profile",o)).data.success&&M.success("Profile updated successfully")}catch(U){console.error("Error updating profile:",U),(V=(I=U.response)==null?void 0:I.data)!=null&&V.errors?U.response.data.errors.forEach(A=>M.error(A)):M.error(((G=(_=U.response)==null?void 0:_.data)==null?void 0:G.message)||"Failed to update profile")}finally{l(!1)}},k=async()=>{var I,V,_,G;try{if(m.newPassword!==m.confirmPassword){M.error("New passwords do not match");return}l(!0),(await we.put("/users/change-password",{currentPassword:m.currentPassword,newPassword:m.newPassword,confirmPassword:m.confirmPassword})).data.success&&(M.success("Password changed successfully"),x({currentPassword:"",newPassword:"",confirmPassword:""}))}catch(U){console.error("Error changing password:",U),(V=(I=U.response)==null?void 0:I.data)!=null&&V.errors?U.response.data.errors.forEach(A=>M.error(A)):M.error(((G=(_=U.response)==null?void 0:_.data)==null?void 0:G.message)||"Failed to change password")}finally{l(!1)}},E=async()=>{var I,V,_,G;try{l(!0),(await we.put("/users/notifications",g)).data.success&&M.success("Notification preferences updated successfully")}catch(U){console.error("Error updating notifications:",U),(V=(I=U.response)==null?void 0:I.data)!=null&&V.errors?U.response.data.errors.forEach(A=>M.error(A)):M.error(((G=(_=U.response)==null?void 0:_.data)==null?void 0:G.message)||"Failed to update notification preferences")}finally{l(!1)}},R=I=>{b(V=>({...V,[I]:!V[I]}))};if(!t||(t==null?void 0:t.role)!=="admin")return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-md mx-auto p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(is,{className:"h-8 w-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Admin privileges required to access settings."})]})})});if(!(s!=null&&s.isDefault))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"max-w-xl w-full bg-white rounded-2xl shadow-lg border border-gray-100 p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white shadow-md",children:e.jsx(Er,{className:"h-7 w-7"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Settings available only for default branch"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please select your default branch from the header branch selector to manage settings."}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Current branch: ",e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.name)||"None"})]})]})});const D=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(jt,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 text-sm max-w-xl mx-auto",children:"Manage your personal information and account details."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(jt,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your personal details"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:o.firstName,onChange:I=>c(V=>({...V,firstName:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"pg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:o.lastName,onChange:I=>c(V=>({...V,lastName:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"new"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",value:o.email,onChange:I=>c(V=>({...V,email:I.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"lkjoih@gmail.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",value:o.phone,onChange:I=>c(V=>({...V,phone:I.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"3214569874"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Es,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Preferences"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Customize your experience"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Language"}),e.jsxs("div",{className:"relative",children:[e.jsx($E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsxs("select",{value:o.language,onChange:I=>c(V=>({...V,language:I.target.value})),className:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors appearance-none bg-white",children:[e.jsx("option",{value:"en",children:"🇺🇸 English"}),e.jsx("option",{value:"hi",children:"🇮🇳 Hindi"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Theme"}),e.jsxs("div",{className:"relative",children:[e.jsx(c2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsxs("select",{value:o.theme,onChange:I=>c(V=>({...V,theme:I.target.value})),className:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors appearance-none bg-white",children:[e.jsx("option",{value:"light",children:"☀️ Light"}),e.jsx("option",{value:"dark",children:"🌙 Dark"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Be,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-900",children:"Quick Settings"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Instant access to common preferences"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-lg mb-1",children:"🔔"}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Notifications"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-lg mb-1",children:"🔒"}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Privacy"})]})]})]})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:j,disabled:i,className:"flex items-center px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(Za,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:i?"Saving Changes...":"Save Changes"}),i&&e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"})})]})})]}),P=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your password and security preferences."})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx(is,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-gray-600",children:"Update your password to keep your account secure"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f.current?"text":"password",value:m.currentPassword,onChange:I=>x(V=>({...V,currentPassword:I.target.value})),className:"w-full pr-12 pl-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>R("current"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:f.current?e.jsx(rr,{className:"h-5 w-5"}):e.jsx(ot,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f.new?"text":"password",value:m.newPassword,onChange:I=>x(V=>({...V,newPassword:I.target.value})),className:"w-full pr-12 pl-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>R("new"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:f.new?e.jsx(rr,{className:"h-5 w-5"}):e.jsx(ot,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f.confirm?"text":"password",value:m.confirmPassword,onChange:I=>x(V=>({...V,confirmPassword:I.target.value})),className:"w-full pr-12 pl-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>R("confirm"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:f.confirm?e.jsx(rr,{className:"h-5 w-5"}):e.jsx(ot,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:k,disabled:i,className:"flex items-center px-8 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(is,{className:"h-5 w-5 mr-3"}),i?"Updating...":"Change Password"]})})]})]})})]}),T=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Configure your email and notification preferences."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx(Ln,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:"Notification Preferences"}),e.jsx("p",{className:"text-gray-600",children:"Choose how you want to receive notifications"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border border-gray-200 rounded-xl hover:border-blue-300 transition-all duration-200 bg-gray-50 hover:bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx(Tr,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.emailNotifications,onChange:I=>p(V=>({...V,emailNotifications:I.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border border-gray-200 rounded-xl hover:border-blue-300 transition-all duration-200 bg-gray-50 hover:bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx(Cs,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via SMS"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.smsNotifications,onChange:I=>p(V=>({...V,smsNotifications:I.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border border-gray-200 rounded-xl hover:border-blue-300 transition-all duration-200 bg-gray-50 hover:bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx(Be,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Payment Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about payment due dates"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.paymentReminders,onChange:I=>p(V=>({...V,paymentReminders:I.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border border-gray-200 rounded-xl hover:border-blue-300 transition-all duration-200 bg-gray-50 hover:bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx(Ze,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Maintenance Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about maintenance requests"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.maintenanceUpdates,onChange:I=>p(V=>({...V,maintenanceUpdates:I.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-8",children:e.jsxs("button",{onClick:E,disabled:i,className:"flex items-center px-8 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(Za,{className:"h-5 w-5 mr-3"}),i?"Saving...":"Save Preferences"]})})]})})]}),B=()=>{switch(a){case"profile":return D();case"security":return P();case"subscription":return e.jsx(Nne,{});case"notifications":return T();case"branches":return e.jsx(yne,{});case"payment-info":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(jne,{}),e.jsx(wne,{})]});default:return null}};return i&&a==="profile"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your settings..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-tl from-pink-400/20 to-orange-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"backdrop-blur-xl bg-white/80 border-b border-white/20 shadow-lg px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl flex items-center justify-center shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-300",children:e.jsx(Es,{className:"h-7 w-7 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full border-2 border-white shadow-lg"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-indigo-900 bg-clip-text text-transparent",children:"Settings"}),e.jsx("p",{className:"text-gray-600 text-base font-medium",children:"Manage your account settings and preferences"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t==null?void 0:t.role})]}),e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-lg",children:[(F=t==null?void 0:t.firstName)==null?void 0:F.charAt(0),(L=t==null?void 0:t.lastName)==null?void 0:L.charAt(0)]})]})]})}),e.jsxs("div",{className:"flex h-[calc(100vh-100px)]",children:[e.jsxs("div",{className:"w-64 backdrop-blur-xl bg-white/70 border-r border-white/20 p-4 shadow-xl",children:[e.jsx("nav",{className:"space-y-3","aria-label":"Tabs",children:N.map(I=>{const V=I.icon,_=a===I.id;return e.jsxs("button",{onClick:()=>n(I.id),className:`group w-full flex items-center space-x-4 p-4 rounded-2xl font-medium text-sm transition-all duration-300 transform hover:scale-[1.02] ${_?"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white shadow-2xl shadow-blue-500/25 border border-blue-400/20":"text-gray-700 hover:text-gray-900 hover:bg-white/60 backdrop-blur-sm border border-transparent hover:border-white/30 hover:shadow-lg"}`,children:[e.jsx("div",{className:`p-3 rounded-xl transition-all duration-300 ${_?"bg-white/20":"bg-gray-100 group-hover:bg-white/80"}`,children:e.jsx(V,{className:"h-6 w-6"})}),e.jsx("div",{className:"font-semibold text-left",children:I.name})]},I.id)})}),e.jsx("div",{className:"mt-8 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(Be,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"All Settings Saved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Your preferences are up to date"})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-12 max-w-7xl mx-auto",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:B()})})})]})]})]})};class Cne{async getTickets(s={}){try{const r=new URLSearchParams(s);return(await we.get(`/tickets/?${r}`)).data}catch(r){throw this.handleError(r)}}async getAllTickets(s={}){return this.getTickets(s)}async getMyTickets(s={}){try{const r=new URLSearchParams({...s,assigned:"me"});return(await we.get(`/tickets/?${r}`)).data}catch(r){throw this.handleError(r)}}async getAnalytics(s="week"){try{return(await we.get(`/tickets/analytics?timeRange=${s}`)).data}catch(r){return console.error("Error fetching analytics:",r),{success:!0,data:{overview:{totalTickets:150,openTickets:25,resolvedTickets:100,avgResponseTime:"2.5 hours",avgResolutionTime:"1.2 days",satisfactionScore:4.2},trends:{daily:[{date:"2024-01-01",tickets:12,resolved:8},{date:"2024-01-02",tickets:15,resolved:10},{date:"2024-01-03",tickets:8,resolved:12},{date:"2024-01-04",tickets:20,resolved:15},{date:"2024-01-05",tickets:18,resolved:14},{date:"2024-01-06",tickets:10,resolved:8},{date:"2024-01-07",tickets:14,resolved:11}],weekly:[{week:"Week 1",tickets:85,resolved:65},{week:"Week 2",tickets:92,resolved:78},{week:"Week 3",tickets:78,resolved:82},{week:"Week 4",tickets:95,resolved:88}],monthly:[{month:"Jan",tickets:320,resolved:285},{month:"Feb",tickets:345,resolved:310},{month:"Mar",tickets:310,resolved:295},{month:"Apr",tickets:380,resolved:350}]},categories:[{name:"Maintenance",count:45,percentage:30},{name:"Billing",count:30,percentage:20},{name:"Technical",count:25,percentage:17},{name:"General",count:20,percentage:13},{name:"Emergency",count:15,percentage:10},{name:"Other",count:15,percentage:10}],topIssues:[{issue:"Payment Processing",count:25,avgResolution:"4 hours"},{issue:"Room Maintenance",count:20,avgResolution:"1 day"},{issue:"WiFi Connectivity",count:15,avgResolution:"2 hours"},{issue:"Cleaning Services",count:12,avgResolution:"6 hours"},{issue:"Security Concerns",count:8,avgResolution:"1 hour"}],staffPerformance:[{name:"John Doe",tickets:45,avgResolution:"3.2 hours",satisfaction:4.5},{name:"Jane Smith",tickets:38,avgResolution:"2.8 hours",satisfaction:4.3},{name:"Mike Johnson",tickets:32,avgResolution:"4.1 hours",satisfaction:4.1},{name:"Sarah Wilson",tickets:28,avgResolution:"3.5 hours",satisfaction:4.4},{name:"David Brown",tickets:25,avgResolution:"3.8 hours",satisfaction:4.2}]}}}}async getSuperadminAnalytics(s="week",r={}){try{const a=new URLSearchParams;return a.append("timeRange",s),r.pg&&a.append("pg",r.pg),r.category&&a.append("category",r.category),r.status&&a.append("status",r.status),(await we.get(`/tickets/superadmin-analytics?${a.toString()}`)).data}catch(a){throw console.error("Error fetching superadmin analytics:",a),new Error("Failed to fetch superadmin analytics")}}async getTicketStats(){try{return(await we.get("/tickets/stats")).data}catch(s){return console.error("Error fetching ticket stats:",s),{success:!0,data:{total:150,open:25,inProgress:15,resolved:85,closed:25}}}}async getTicketById(s){try{return(await we.get(`/tickets/${s}`)).data}catch(r){throw this.handleError(r)}}async createTicket(s){try{return(await we.post("/tickets",s)).data}catch(r){throw this.handleError(r)}}async updateTicket(s,r){try{return(await we.put(`/tickets/${s}`,r)).data}catch(a){throw this.handleError(a)}}async addComment(s,r){try{return(await we.post(`/tickets/${s}/comments`,{message:r})).data}catch(a){throw this.handleError(a)}}async deleteTicket(s){try{return(await we.delete(`/tickets/${s}`)).data}catch(r){throw this.handleError(r)}}async assignTicket(s,r){try{return(await we.post(`/tickets/${s}/assign`,{assignedToId:r})).data}catch(a){throw this.handleError(a)}}async updateTicketStatus(s,r,a){try{return(await we.post(`/tickets/${s}/update-status`,{status:r,resolution:a})).data}catch(n){throw this.handleError(n)}}async getSupportStaff(){try{return(await we.get("/tickets/support-staff/list")).data}catch(s){throw this.handleError(s)}}async resolveTicket(s,r){try{return(await we.post(`/tickets/${s}/resolve`,r)).data}catch(a){throw this.handleError(a)}}async closeTicket(s){try{return(await we.post(`/tickets/${s}/close`)).data}catch(r){throw this.handleError(r)}}async getTicketStats(){try{return(await we.get("/tickets/stats")).data}catch(s){return console.error("Error fetching ticket stats:",s),{success:!0,data:{total:150,open:25,inProgress:15,resolved:85,closed:25}}}}async getTicketCategories(){try{return(await we.get("/tickets/categories")).data}catch(s){return console.error("Error fetching categories:",s),{success:!0,data:[{value:"maintenance",label:"Maintenance"},{value:"billing",label:"Billing"},{value:"complaint",label:"Complaint"},{value:"suggestion",label:"Suggestion"},{value:"emergency",label:"Emergency"},{value:"other",label:"Other"}]}}}async getPriorityLevels(){try{return(await we.get("/tickets/priorities")).data}catch{return{success:!0,data:[{value:"low",label:"Low",color:"green"},{value:"medium",label:"Medium",color:"yellow"},{value:"high",label:"High",color:"orange"},{value:"urgent",label:"Urgent",color:"red"}]}}}async getStatusOptions(){try{return(await we.get("/tickets/statuses")).data}catch{return{success:!0,data:[{value:"open",label:"Open",color:"blue"},{value:"in_progress",label:"In Progress",color:"yellow"},{value:"resolved",label:"Resolved",color:"green"},{value:"closed",label:"Closed",color:"gray"},{value:"cancelled",label:"Cancelled",color:"red"}]}}}async uploadAttachments(s,r){try{const a=new FormData;return r.forEach(i=>{a.append("attachments",i)}),(await we.post(`/tickets/${s}/attachments`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw this.handleError(a)}}handleError(s){if(console.error("Ticket service error:",s),s.response){const{status:r,data:a}=s.response;switch(r){case 400:return new Error(a.message||"Invalid request data");case 401:return new Error("Authentication required");case 403:return new Error("Access denied");case 404:return new Error("Ticket not found");case 500:return new Error("Server error occurred");default:return new Error(a.message||"An error occurred")}}else return s.request?new Error("Network error - please check your connection"):new Error("An unexpected error occurred")}validateTicketData(s){const r=[];return(!s.title||s.title.trim().length<3)&&r.push({field:"title",message:"Title must be at least 3 characters long"}),(!s.description||s.description.trim().length<10)&&r.push({field:"description",message:"Description must be at least 10 characters long"}),s.category||r.push({field:"category",message:"Category is required"}),{isValid:r.length===0,errors:r}}formatTicketData(s){return{...s,createdAt:s.createdAt?new Date(s.createdAt).toLocaleDateString():"",updatedAt:s.updatedAt?new Date(s.updatedAt).toLocaleDateString():"",status:s.status?s.status.replace("_"," "):"Unknown",priority:s.priority?s.priority.charAt(0).toUpperCase()+s.priority.slice(1):"Unknown"}}isTicketEditable(s){return["open","in_progress"].includes(s.status)}isTicketDeletable(s){return s.status==="open"}getStatusColor(s){const r={open:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"};return r[s]||r.open}getPriorityColor(s){const r={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"};return r[s]||r.medium}}const us=new Cne,kne=({isOpen:t,onClose:s,ticket:r=null,onSuccess:a})=>{const[n,i]=h.useState(!1),[l,o]=h.useState({title:"",description:"",category:"",status:"open"}),[c,u]=h.useState({}),[d,m]=h.useState([]),[x,g]=h.useState([]),[p,f]=h.useState([]),b=!!r;h.useEffect(()=>{y(),b&&r&&o({title:r.title||"",description:r.description||"",category:r.category||"",status:r.status||"open"})},[r,b]);const y=async()=>{try{const j=await us.getTicketCategories();j&&j.success?g(j.data):(console.error("Failed to load categories:",(j==null?void 0:j.message)||"No response"),g([{value:"maintenance",label:"Maintenance"},{value:"billing",label:"Billing"},{value:"complaint",label:"Complaint"},{value:"suggestion",label:"Suggestion"},{value:"emergency",label:"Emergency"},{value:"other",label:"Other"}]));const k=await us.getStatusOptions();k&&k.success?f(k.data):f([{value:"open",label:"Open",color:"blue"},{value:"in_progress",label:"In Progress",color:"yellow"},{value:"resolved",label:"Resolved",color:"green"},{value:"closed",label:"Closed",color:"gray"},{value:"cancelled",label:"Cancelled",color:"red"}])}catch(j){console.error("Error loading form options:",j),M.error("Failed to load form options"),g([{value:"maintenance",label:"Maintenance"},{value:"billing",label:"Billing"},{value:"complaint",label:"Complaint"},{value:"suggestion",label:"Suggestion"},{value:"emergency",label:"Emergency"},{value:"other",label:"Other"}]),f([{value:"open",label:"Open",color:"blue"},{value:"in_progress",label:"In Progress",color:"yellow"},{value:"resolved",label:"Resolved",color:"green"},{value:"closed",label:"Closed",color:"gray"},{value:"cancelled",label:"Cancelled",color:"red"}])}},v=(j,k)=>{o(E=>({...E,[j]:k})),c[j]&&u(E=>({...E,[j]:""}))},N=j=>{const k=Array.from(j.target.files);m(E=>[...E,...k])},S=j=>{m(k=>k.filter((E,R)=>R!==j))},w=async j=>{j.preventDefault(),i(!0);try{console.log("Form data being submitted:",l);const k=us.validateTicketData(l);if(console.log("Validation result:",k),!k.isValid){const R={};k.errors.forEach(D=>{R[D.field]=D.message}),console.log("Validation errors:",R),u(R),M.error("Please fix the validation errors");return}let E;b?E=await us.updateTicket(r._id,l):E=await us.createTicket(l),console.log("API response:",E),E.success?(M.success(b?"Ticket updated successfully!":"Ticket created successfully!"),a(),s()):M.error(E.message||"Operation failed")}catch(k){console.error("Error:",k),M.error(k.message||"An error occurred")}finally{i(!1)}},C=!b||r&&us.isTicketEditable(r);return e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ns,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:b?"Edit Ticket":"Create New Ticket"}),e.jsx("p",{className:"text-sm text-gray-600",children:b?"Update ticket information":"Submit a new support ticket"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[b&&!C&&e.jsx(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"This ticket can no longer be edited. Tickets can only be edited within 1 hour of creation and when status is open."})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 mr-2"}),"Ticket Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:l.title,onChange:j=>v("title",j.target.value),disabled:!C,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.title?"border-red-500":"border-gray-300"} ${C?"":"bg-gray-100 cursor-not-allowed"}`,placeholder:"Enter ticket title"}),c.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:l.category,onChange:j=>v("category",j.target.value),disabled:!C,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.category?"border-red-500":"border-gray-300"} ${C?"":"bg-gray-100 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Category"}),x.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]}),c.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{value:l.status,onChange:j=>v("status",j.target.value),disabled:!C,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.status?"border-red-500":"border-gray-300"} ${C?"":"bg-gray-100 cursor-not-allowed"}`,children:p.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))}),c.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:l.description,onChange:j=>v("description",j.target.value),disabled:!C,rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.description?"border-red-500":"border-gray-300"} ${C?"":"bg-gray-100 cursor-not-allowed"}`,placeholder:"Describe the issue in detail"}),c.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.description})]})]}),C&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Bi,{className:"h-5 w-5 mr-2"}),"Attachments"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),e.jsx("input",{type:"file",multiple:!0,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",accept:"image/*,.pdf,.doc,.docx"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Supported formats: Images, PDF, DOC, DOCX (Max 5MB each)"})]}),d.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),d.map((j,k)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600",children:j.name}),e.jsx("button",{type:"button",onClick:()=>S(k),className:"text-red-600 hover:text-red-800",children:e.jsx(ct,{className:"h-4 w-4"})})]},k))]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),C&&e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(no,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{className:"h-4 w-4"}),e.jsx("span",{children:b?"Update Ticket":"Create Ticket"})]})})]})]})]})})})},gE=({isOpen:t,onClose:s,ticket:r,onStatusUpdate:a})=>{var x,g,p,f,b,y,v,N,S;const[n,i]=h.useState("overview");if(!r)return null;const l=w=>{switch(w){case"open":return e.jsx(Ze,{className:"h-4 w-4"});case"in_progress":return e.jsx(Sx,{className:"h-4 w-4"});case"resolved":return e.jsx(Be,{className:"h-4 w-4"});case"closed":return e.jsx(Yt,{className:"h-4 w-4"});default:return e.jsx(ut,{className:"h-4 w-4"})}},o=w=>{switch(w){case"open":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=w=>{switch(w){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=w=>new Date(w).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=w=>{switch(w){case"created":return e.jsx(ns,{className:"h-4 w-4 text-blue-500"});case"assigned":return e.jsx(Je,{className:"h-4 w-4 text-green-500"});case"status_updated":return e.jsx(ys,{className:"h-4 w-4 text-purple-500"});case"resolved":return e.jsx(Be,{className:"h-4 w-4 text-green-500"});case"closed":return e.jsx(Yt,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(pg,{className:"h-4 w-4 text-blue-500"})}},m=[{id:"overview",label:"Overview",icon:e.jsx(ns,{className:"h-4 w-4"})},{id:"timeline",label:"Timeline",icon:e.jsx(ys,{className:"h-4 w-4"})},{id:"details",label:"Details",icon:e.jsx(pg,{className:"h-4 w-4"})}];return e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",onClick:w=>w.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(Rs,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Ticket #",r._id.slice(-8)]}),e.jsx("p",{className:"text-blue-100",children:"Complete ticket overview and timeline"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-colors",children:e.jsx(ct,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex space-x-1 p-4",children:m.map(w=>e.jsxs("button",{onClick:()=>i(w.id),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${n===w.id?"bg-white text-blue-600 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[w.icon,e.jsx("span",{children:w.label})]},w.id))})}),e.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:e.jsxs(vt,{mode:"wait",children:[n==="overview"&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:r.description})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold border ${o(r.status)}`,children:[l(r.status),e.jsx("span",{className:"ml-1.5 capitalize",children:r.status.replace("_"," ")})]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold border ${c(r.priority)}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current mr-2"}),r.priority]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Created"}),e.jsx("p",{className:"text-xl font-bold",children:u(r.createdAt)})]}),e.jsx(xt,{className:"h-8 w-8 text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Category"}),e.jsx("p",{className:"text-xl font-bold capitalize",children:r.category})]}),e.jsx(UE,{className:"h-8 w-8 text-green-200"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-4 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Age"}),e.jsxs("p",{className:"text-xl font-bold",children:[r.age||0," days"]})]}),e.jsx(ut,{className:"h-8 w-8 text-purple-200"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 mr-2 text-blue-500"}),"Ticket Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Status"}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${o(r.status)}`,children:[l(r.status),e.jsx("span",{className:"ml-1 capitalize",children:r.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Priority"}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${c(r.priority)}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current mr-1"}),r.priority]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Category"}),e.jsx("span",{className:"text-gray-900 font-semibold capitalize",children:r.category})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Created"}),e.jsx("span",{className:"text-gray-900",children:u(r.createdAt)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-green-500"}),"Location & Contact"]}),e.jsxs("div",{className:"space-y-3",children:[((x=r.location)==null?void 0:x.room)&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Room"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:r.location.room})]}),((g=r.location)==null?void 0:g.floor)&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Floor"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:r.location.floor})]}),((p=r.location)==null?void 0:p.building)&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Building"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:r.location.building})]}),r.contactPhone&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Contact"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:r.contactPhone})]})]})]})]}),r.assignedTo&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[e.jsx(Je,{className:"h-5 w-5 mr-2 text-blue-600"}),"Assigned To"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl mr-4",children:e.jsx(jt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-blue-900",children:[r.assignedTo.firstName," ",r.assignedTo.lastName]}),e.jsx("p",{className:"text-blue-700",children:r.assignedTo.email})]})]})]}),r.resolution&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[e.jsx(Fa,{className:"h-5 w-5 mr-2 text-green-600"}),"Resolution"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("p",{className:"text-gray-900 font-medium mb-2",children:"Solution:"}),e.jsx("p",{className:"text-gray-700",children:r.resolution.solution})]}),r.resolution.rating&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-700 font-medium mr-3",children:"Rating:"}),e.jsx("div",{className:"flex",children:[...Array(5)].map((w,C)=>e.jsx(Fs,{className:`h-5 w-5 ${C<r.resolution.rating?"text-yellow-400 fill-current":"text-gray-300"}`},C))})]}),r.resolution.feedback&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("p",{className:"text-green-700 font-medium mb-2",children:"Feedback:"}),e.jsx("p",{className:"text-gray-700",children:r.resolution.feedback})]})]})]})]},"overview"),n==="timeline"&&e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[e.jsx(ys,{className:"h-5 w-5 mr-2 text-purple-600"}),"Ticket Timeline"]}),e.jsx("div",{className:"space-y-4",children:r.timeline&&r.timeline.length>0?r.timeline.map((w,C)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-full border-2 border-purple-200 flex items-center justify-center",children:d(w.action)}),C<r.timeline.length-1&&e.jsx("div",{className:"w-0.5 h-8 bg-purple-200 ml-4"})]}),e.jsxs("div",{className:"flex-1 bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900 capitalize",children:w.action.replace("_"," ")}),e.jsx("span",{className:"text-xs text-gray-500",children:u(w.timestamp)})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:w.description}),w.performedBy&&e.jsxs("p",{className:"text-xs text-purple-600 mt-2",children:["by ",w.performedBy.firstName," ",w.performedBy.lastName]})]})]},C)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No timeline entries yet"})]})})]})},"timeline"),n==="details"&&e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-blue-500"}),"PG Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"PG Name"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:((f=r.pg)==null?void 0:f.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"PG ID"}),e.jsx("span",{className:"text-gray-900 font-mono text-sm",children:((b=r.pg)==null?void 0:b._id)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(jt,{className:"h-5 w-5 mr-2 text-green-500"}),"Created By"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Name"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[(y=r.user)==null?void 0:y.firstName," ",(v=r.user)==null?void 0:v.lastName]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Email"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:(N=r.user)==null?void 0:N.email})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"User ID"}),e.jsx("span",{className:"text-gray-900 font-mono text-sm",children:(S=r.user)==null?void 0:S._id})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(is,{className:"h-5 w-5 mr-2 text-gray-500"}),"Technical Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Ticket ID"}),e.jsx("span",{className:"text-gray-900 font-mono text-sm",children:r._id})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Created At"}),e.jsx("span",{className:"text-gray-900",children:u(r.createdAt)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Last Updated"}),e.jsx("span",{className:"text-gray-900",children:u(r.updatedAt)})]}),r.dueDate&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Due Date"}),e.jsx("span",{className:"text-gray-900",children:u(r.dueDate)})]}),r.closedAt&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Closed At"}),e.jsx("span",{className:"text-gray-900",children:u(r.closedAt)})]})]})]}),r.attachments&&r.attachments.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 mr-2 text-orange-500"}),"Attachments"]}),e.jsx("div",{className:"space-y-2",children:r.attachments.map((w,C)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.filename}),e.jsx("p",{className:"text-xs text-gray-500",children:w.fileType})]})]}),e.jsx("a",{href:w.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View"})]},C))})]})]},"details")]})}),e.jsx("div",{className:"border-t border-gray-200 bg-gray-50 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Ticket #",r._id.slice(-8)," • Last updated ",u(r.updatedAt)]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:s,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),a&&e.jsx("button",{onClick:()=>a(r),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Status"})]})]})})]})})})},Ene=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState({}),[l,o]=h.useState({status:"",priority:"",category:"",search:""}),[c,u]=h.useState(!1),[d,m]=h.useState("cards"),[x,g]=h.useState(!1),[p,f]=h.useState(!1),[b,y]=h.useState(!1),[v,N]=h.useState(null),[S,w]=h.useState(!1);h.useEffect(()=>{C(),j()},[l]),h.useEffect(()=>{const _=setInterval(()=>{C(),j()},15e3);return()=>clearInterval(_)},[]);const C=async()=>{try{a(!0);const _=await us.getTickets(l);if(_.success){const G=_.data.map(U=>{try{return us.formatTicketData(U)}catch(A){return console.error("Error formatting ticket:",A,U),{...U,createdAt:U.createdAt?new Date(U.createdAt).toLocaleDateString():"",updatedAt:U.updatedAt?new Date(U.updatedAt).toLocaleDateString():"",status:U.status||"Unknown",priority:U.priority||"Unknown"}}});s(G)}}catch(_){M.error("Failed to load tickets"),console.error("Error loading tickets:",_)}finally{a(!1)}},j=async()=>{try{const _=await us.getTicketStats();_.success&&i(_.data)}catch(_){console.error("Error loading stats:",_)}},k=()=>{N(null),g(!0)},E=_=>{N(_),g(!0)},R=_=>{N(_),f(!0)},D=_=>{N(_),y(!0)},P=async()=>{if(v)try{w(!0);const _=await us.deleteTicket(v._id);_.success?(M.success("Ticket deleted successfully"),C(),j(),f(!1),N(null)):M.error(_.message||"Failed to delete ticket")}catch(_){M.error("Failed to delete ticket"),console.error("Error deleting ticket:",_)}finally{w(!1)}},T=()=>{C(),j()},B=()=>{o({status:"",priority:"",category:"",search:""})},F=_=>({open:e.jsx(Ze,{className:"h-4 w-4 text-blue-600"}),in_progress:e.jsx(ut,{className:"h-4 w-4 text-yellow-600"}),resolved:e.jsx(Be,{className:"h-4 w-4 text-green-600"}),closed:e.jsx(Be,{className:"h-4 w-4 text-gray-600"}),cancelled:e.jsx(Yt,{className:"h-4 w-4 text-red-600"})})[_]||e.jsx(Ze,{className:"h-4 w-4 text-gray-600"}),L=_=>({open:"bg-blue-50 text-blue-700 border-blue-200",in_progress:"bg-yellow-50 text-yellow-700 border-yellow-200",resolved:"bg-green-50 text-green-700 border-green-200",closed:"bg-gray-50 text-gray-700 border-gray-200",cancelled:"bg-red-50 text-red-700 border-red-200"})[_]||"bg-gray-50 text-gray-700 border-gray-200",I=_=>({low:"bg-green-50 text-green-700 border-green-200",medium:"bg-yellow-50 text-yellow-700 border-yellow-200",high:"bg-orange-50 text-orange-700 border-orange-200",urgent:"bg-red-50 text-red-700 border-red-200"})[_]||"bg-gray-50 text-gray-700 border-gray-200",V=({ticket:_})=>{var G,U,A,q;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden transform hover:-translate-y-1",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${L(_.status).replace("border","bg").replace("text","bg").replace("bg-gray","bg-blue").replace("bg-red","bg-red").replace("bg-green","bg-green").replace("bg-yellow","bg-yellow").replace("bg-orange","bg-orange")}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl opacity-50"}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2 group-hover:text-blue-600 transition-colors",children:_.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 leading-relaxed",children:_.description})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm ${L(_.status)}`,children:[F(_.status),e.jsx("span",{className:"ml-1.5 capitalize",children:_.status.replace("_"," ")})]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm ${I(_.priority)}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current mr-2"}),_.priority]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ie,{className:"h-4 w-4 mr-3 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Category"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 capitalize",children:_.category})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(xt,{className:"h-4 w-4 mr-3 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Created"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_.formattedCreatedAt})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(sr,{className:"h-4 w-4 mr-3 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Location"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[((G=_.location)==null?void 0:G.room)&&`Room ${_.location.room}`,((U=_.location)==null?void 0:U.floor)&&` | Floor ${_.location.floor}`]})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(jt,{className:"h-4 w-4 mr-3 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Created By"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[(A=_.user)==null?void 0:A.firstName," ",(q=_.user)==null?void 0:q.lastName]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>D(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-green-600 bg-green-50 rounded-xl hover:bg-green-100 hover:text-green-700 transition-all duration-200 shadow-sm",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"View"]}),_.isEditable&&e.jsxs("button",{onClick:()=>E(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-blue-600 bg-blue-50 rounded-xl hover:bg-blue-100 hover:text-blue-700 transition-all duration-200 shadow-sm",children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Edit"]}),_.isDeletable&&e.jsxs("button",{onClick:()=>R(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-red-600 bg-red-50 rounded-xl hover:bg-red-100 hover:text-red-700 transition-all duration-200 shadow-sm",children:[e.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Delete"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-gray-100 px-2 py-1 rounded",children:["#",_._id.slice(-6)]})})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Support Tickets"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage support tickets for your PG"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsxs("div",{className:"flex items-center bg-white rounded-lg border border-gray-200 p-1",children:[e.jsx("button",{onClick:()=>m("cards"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${d==="cards"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:"Cards"}),e.jsx("button",{onClick:()=>m("table"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${d==="table"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:"Table"})]}),e.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-blue-500 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(ns,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-100",children:"Total Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n.total||0})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"group relative bg-gradient-to-br from-yellow-500 to-yellow-600 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(Ze,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-100",children:"Open"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n.open||0})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"group relative bg-gradient-to-br from-orange-500 to-orange-600 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400 to-orange-500 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(ut,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-orange-100",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n.inProgress||0})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"group relative bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(Be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-100",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n.resolved||0})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"group relative bg-gradient-to-br from-gray-500 to-gray-600 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-400 to-gray-500 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(Yt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Closed"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n.closed||0})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:l.search,onChange:_=>o({...l,search:_.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>u(!c),className:"flex items-center px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(aa,{className:"h-5 w-5 mr-2"}),"Filters",c?e.jsx(Bc,{className:"h-4 w-4 ml-2"}):e.jsx(zn,{className:"h-4 w-4 ml-2"})]}),e.jsx("button",{onClick:B,className:"px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"Clear"}),e.jsxs("button",{className:"flex items-center px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(xr,{className:"h-5 w-5 mr-2"}),"Export"]})]})]}),e.jsx(vt,{children:c&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:_=>o({...l,status:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:l.priority,onChange:_=>o({...l,priority:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:l.category,onChange:_=>o({...l,category:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"complaint",children:"Complaint"}),e.jsx("option",{value:"suggestion",children:"Suggestion"}),e.jsx("option",{value:"emergency",children:"Emergency"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading tickets..."})]}):t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tickets Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No tickets match your current filters."}),e.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Create Your First Ticket"]})]}):d==="cards"?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(_=>e.jsx(V,{ticket:_},_._id))})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(_=>{var G,U,A;return e.jsxs(ae.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:_.description}),e.jsxs("div",{className:"text-xs text-gray-400",children:[((G=_.location)==null?void 0:G.room)&&`Room: ${_.location.room}`,((U=_.location)==null?void 0:U.floor)&&` | Floor: ${_.location.floor}`,((A=_.location)==null?void 0:A.building)&&` | Building: ${_.location.building}`]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[F(_.status),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.statusColor}`,children:_.status.replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.priorityColor}`,children:_.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 capitalize",children:_.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.formattedCreatedAt})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D(_),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors",title:"View Ticket Details",children:e.jsx(ot,{className:"h-4 w-4"})}),_.isEditable&&e.jsx("button",{onClick:()=>E(_),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"Edit Ticket",children:e.jsx(fa,{className:"h-4 w-4"})}),_.isDeletable&&e.jsx("button",{onClick:()=>R(_),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete Ticket",children:e.jsx(Pr,{className:"h-4 w-4"})})]})})]},_._id)})})]})})}),e.jsx(kne,{isOpen:x,onClose:()=>{g(!1),N(null)},ticket:v,onSuccess:T}),e.jsx(lh,{isOpen:p,onClose:()=>{f(!1),N(null)},onConfirm:P,itemName:(v==null?void 0:v.title)||"",itemType:"Ticket",loading:S}),e.jsx(gE,{isOpen:b,onClose:()=>y(!1),ticket:v,onStatusUpdate:_=>{y(!1),console.log("Status update requested for ticket:",_._id)}})]})};class Pne{async generateResidentsReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/residents?${r}`)).data}catch(r){throw new Error(`Failed to generate residents report: ${r.message}`)}}async generatePaymentsReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/payments?${r}`)).data}catch(r){throw new Error(`Failed to generate payments report: ${r.message}`)}}async generateTicketsReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/tickets?${r}`)).data}catch(r){throw new Error(`Failed to generate tickets report: ${r.message}`)}}async generateOnboardingReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/onboarding?${r}`)).data}catch(r){throw new Error(`Failed to generate onboarding report: ${r.message}`)}}async generateOffboardingReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/offboarding?${r}`)).data}catch(r){throw new Error(`Failed to generate offboarding report: ${r.message}`)}}async generateOccupancyReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/occupancy?${r}`)).data}catch(r){throw new Error(`Failed to generate occupancy report: ${r.message}`)}}async generateFinancialSummaryReport(s={}){try{const r=new URLSearchParams;return Object.entries(s).forEach(([n,i])=>{i&&i!=="all"&&r.append(n,i)}),(await we.get(`/reports/financial-summary?${r}`)).data}catch(r){throw new Error(`Failed to generate financial summary report: ${r.message}`)}}async getReportAnalytics(s,r={}){try{const a=new URLSearchParams;return Object.entries(r).forEach(([i,l])=>{l&&l!=="all"&&a.append(i,l)}),a.append("reportType",s),(await we.get(`/reports/analytics?${a}`)).data}catch(a){throw new Error(`Failed to get report analytics: ${a.message}`)}}async exportReport(s,r,a){try{return(await we.post("/reports/export",{reportType:s,filters:r,format:a})).data}catch(n){throw console.error("Export error:",n),n}}async getExportFormats(){try{return(await we.get("/reports/export-formats")).data}catch(s){throw console.error("Get export formats error:",s),s}}async getReportOptions(){try{return(await we.get("/reports/options")).data}catch(s){throw new Error(`Failed to get report options: ${s.message}`)}}async generateReportByType(s,r={}){switch(s){case"residents":return await this.generateResidentsReport(r);case"payments":return await this.generatePaymentsReport(r);case"tickets":return await this.generateTicketsReport(r);case"onboarding":return await this.generateOnboardingReport(r);case"offboarding":return await this.generateOffboardingReport(r);case"occupancy":return await this.generateOccupancyReport(r);case"financial-summary":return await this.generateFinancialSummaryReport(r);default:throw new Error(`Unknown report type: ${s}`)}}async downloadReport(s,r){try{const a=await we.get(s,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=n,i.setAttribute("download",r),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(n)}catch(a){throw new Error(`Failed to download report: ${a.message}`)}}}const Nd=new Pne,V1=()=>{var O,W;const{user:t}=He(z=>z.auth),s=Ms(),r=He(Nr),[a,n]=h.useState("residents"),[i,l]=h.useState(!1),[o,c]=h.useState(null),[u,d]=h.useState(null),[m,x]=h.useState(null),[g,p]=h.useState({startDate:"",endDate:"",pgId:"",status:"all",paymentMethod:"all",priority:"all",vacationType:"all"}),[f,b]=h.useState("last30days"),[y,v]=h.useState(!1),[N,S]=h.useState(""),w=[{id:"residents",name:"Residents",icon:Je,description:"Resident management and occupancy reports",color:"bg-gradient-to-br from-blue-400 to-indigo-500",bgColor:"bg-blue-50",textColor:"text-blue-600"},{id:"payments",name:"Payments",icon:Ks,description:"Payment tracking and financial reports",color:"bg-gradient-to-br from-green-400 to-emerald-500",bgColor:"bg-green-50",textColor:"text-green-600"},{id:"tickets",name:"Tickets",icon:Rs,description:"Support ticket and maintenance reports",color:"bg-gradient-to-br from-purple-400 to-pink-500",bgColor:"bg-purple-50",textColor:"text-purple-600"},{id:"onboarding",name:"Onboarding",icon:Pa,description:"Resident onboarding and admission reports",color:"bg-gradient-to-br from-orange-400 to-red-500",bgColor:"bg-orange-50",textColor:"text-orange-600"},{id:"offboarding",name:"Offboarding",icon:fb,description:"Resident vacation and departure reports",color:"bg-gradient-to-br from-red-400 to-pink-500",bgColor:"bg-red-50",textColor:"text-red-600"},{id:"occupancy",name:"Occupancy",icon:Ie,description:"Room occupancy and utilization reports",color:"bg-gradient-to-br from-indigo-400 to-purple-500",bgColor:"bg-indigo-50",textColor:"text-indigo-600"},{id:"financial-summary",name:"Financial Summary",icon:Jt,description:"Comprehensive financial analysis",color:"bg-gradient-to-br from-emerald-400 to-teal-500",bgColor:"bg-emerald-50",textColor:"text-emerald-600"}];h.useEffect(()=>{if(!t){s("/admin/login");return}if((t==null?void 0:t.role)!=="admin"){M.error("Access denied. Admin privileges required."),s("/login");return}j(),C()},[t,s]),h.useEffect(()=>{m&&k()},[a,g,m]);const C=()=>{const z=new Date,H=new Date;H.setDate(H.getDate()-30),p(Q=>({...Q,startDate:H.toISOString().split("T")[0],endDate:z.toISOString().split("T")[0]}))},j=async()=>{try{const z=await Nd.getReportOptions();z.success&&x(z.data)}catch(z){console.error("Error loading report options:",z),M.error("Failed to load report options")}},k=async()=>{try{l(!0);const z={...g,branchId:r==null?void 0:r._id},H=await Nd.generateReportByType(a,z);H.success&&(c(H.data),await E(z))}catch(z){console.error("Error generating report:",z),M.error("Failed to generate report")}finally{l(!1)}},E=async(z=g)=>{try{const H={...z,branchId:r==null?void 0:r._id},Q=await Nd.getReportAnalytics(a,H);Q.success&&d(Q.data)}catch(H){console.error("Error loading analytics:",H)}},R=z=>{b(z);const H=new Date,Q=new Date;switch(z){case"last7days":Q.setDate(Q.getDate()-7);break;case"last30days":Q.setDate(Q.getDate()-30);break;case"last3months":Q.setMonth(Q.getMonth()-3);break;case"last6months":Q.setMonth(Q.getMonth()-6);break;case"last12months":Q.setMonth(Q.getMonth()-12);break;default:return}p(J=>({...J,startDate:Q.toISOString().split("T")[0],endDate:H.toISOString().split("T")[0]}))},D=(z,H)=>{p(Q=>({...Q,[z]:H}))},[P,T]=h.useState([]),[B,F]=h.useState(!1);h.useEffect(()=>{L()},[]);const L=async()=>{try{const z=await Nd.getExportFormats();z.success&&T(z.data)}catch(z){console.error("Error loading export formats:",z)}},I=async z=>{try{F(!0);const H={...g,branchId:r==null?void 0:r._id},Q=await Nd.exportReport(a,H,z);if(Q.success){const J=document.createElement("a");J.href=`data:text/${z};charset=utf-8,${encodeURIComponent(Q.data)}`,J.download=`${a}-report-${new Date().toISOString().split("T")[0]}.${z}`,document.body.appendChild(J),J.click(),document.body.removeChild(J),M.success(`${z.toUpperCase()} report exported successfully`)}else M.error(Q.message||"Export failed")}catch(H){console.error("Error exporting report:",H),M.error("Failed to export report")}finally{F(!1)}},V=e.jsx(jo,{children:P.map(z=>e.jsxs(jo.Item,{icon:z.value==="pdf"?e.jsx(pm,{}):z.value==="excel"?e.jsx(pm,{}):e.jsx(pm,{}),onClick:()=>I(z.value),children:[z.icon," ",z.label]},z.value))}),_=()=>{var J;let z={};if(a==="tickets"&&((J=o==null?void 0:o.data)!=null&&J.statistics))z=o.data.statistics;else if(o!=null&&o.statistics)z=o.statistics;else return null;const H=w.find(ie=>ie.id===a);return Object.entries(z).filter(([ie,K])=>typeof K=="number"?K>0||ie==="total":!1).length===0?e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-20 h-20 ${H==null?void 0:H.bgColor} rounded-2xl flex items-center justify-center mx-auto mb-6`,children:(H==null?void 0:H.icon)&&e.jsx(H.icon,{className:`h-10 w-10 ${H==null?void 0:H.textColor}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No data available"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["No ",H==null?void 0:H.name.toLowerCase()," data found for the selected filters."]}),e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),"Adjust Filters"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:Object.entries(z).map(([ie,K],oe)=>{if(typeof K=="number"){const le=ie.includes("Rate")||ie.includes("percentage"),Se=ie.includes("Amount")||ie.includes("Revenue")||ie.includes("total"),Ee=K===0,We=(Fe=>({total:{icon:Je,color:"from-blue-400 to-indigo-500",bgColor:"bg-blue-50"},active:{icon:Be,color:"from-green-400 to-emerald-500",bgColor:"bg-green-50"},inactive:{icon:Ze,color:"from-gray-400 to-slate-500",bgColor:"bg-gray-50"},pending:{icon:ut,color:"from-yellow-400 to-orange-500",bgColor:"bg-yellow-50"},movedOut:{icon:ea,color:"from-red-400 to-pink-500",bgColor:"bg-red-50"},paid:{icon:Ft,color:"from-green-400 to-emerald-500",bgColor:"bg-green-50"},overdue:{icon:Ze,color:"from-red-400 to-pink-500",bgColor:"bg-red-50"},open:{icon:Rs,color:"from-blue-400 to-indigo-500",bgColor:"bg-blue-50"},inProgress:{icon:ut,color:"from-yellow-400 to-orange-500",bgColor:"bg-yellow-50"},resolved:{icon:Be,color:"from-green-400 to-emerald-500",bgColor:"bg-green-50"},closed:{icon:ct,color:"from-gray-400 to-slate-500",bgColor:"bg-gray-50"},urgent:{icon:Rt,color:"from-red-400 to-pink-500",bgColor:"bg-red-50"},high:{icon:Ze,color:"from-orange-400 to-red-500",bgColor:"bg-orange-50"},medium:{icon:ut,color:"from-yellow-400 to-orange-500",bgColor:"bg-yellow-50"},low:{icon:Be,color:"from-green-400 to-emerald-500",bgColor:"bg-green-50"},totalRevenue:{icon:Ft,color:"from-emerald-400 to-teal-500",bgColor:"bg-emerald-50"},averageRent:{icon:ga,color:"from-purple-400 to-pink-500",bgColor:"bg-purple-50"},thisMonth:{icon:xt,color:"from-blue-400 to-indigo-500",bgColor:"bg-blue-50"},lastMonth:{icon:xt,color:"from-gray-400 to-slate-500",bgColor:"bg-gray-50"}})[Fe]||{icon:Jt,color:"from-blue-400 to-indigo-500",bgColor:"bg-blue-50"})(ie),fe=We.icon;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:oe*.1},className:`bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 group ${Ee?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 capitalize mb-1",children:ie.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:`text-3xl font-bold ${Ee?"text-gray-400":"text-gray-900"}`,children:Se?`₹${K.toLocaleString()}`:le?`${K}%`:K.toLocaleString()})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${We.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 ${Ee?"opacity-50":""}`,children:e.jsx(fe,{className:"h-7 w-7 text-white"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleTimeString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(kl,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:"Hover for details"})]})]}),e.jsxs("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:[ie.replace(/([A-Z])/g," $1").trim(),": ",K.toLocaleString(),e.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]},ie)}return null})})},G=()=>{var Q;let z=[];if(a==="tickets"&&((Q=o==null?void 0:o.data)!=null&&Q.monthlyTrend))z=o.data.monthlyTrend;else if(o!=null&&o.monthlyTrend)z=o.monthlyTrend;else return null;if(!z||z.length===0)return e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(Jt,{className:"h-10 w-10 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No trend data available"}),e.jsx("p",{className:"text-gray-600",children:"Monthly trend data will appear here when available."})]})});const H=Math.max(...z.map(J=>J.count||0));return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Monthly Trend"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Last 12 months"})]})]}),e.jsx("div",{className:"flex items-end space-x-2 h-48",children:z.map((J,ie)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-blue-500 to-blue-400 rounded-t transition-all duration-300 hover:from-blue-600 hover:to-blue-500 cursor-pointer",style:{height:`${H>0?J.count/H*100:0}%`,minHeight:J.count>0?"20px":"4px"}}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center group-hover:text-gray-700 transition-colors",children:new Date(J.month).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700 mt-1 group-hover:text-blue-600 transition-colors",children:J.count})]},ie))})]})},U=()=>{var K;let z=null;if(a==="tickets"&&((K=o==null?void 0:o.data)!=null&&K.comparisonData))z=o.data.comparisonData;else if(o!=null&&o.comparisonData)z=o.comparisonData;else return null;if(!z)return null;const{currentPeriod:H,previousPeriod:Q,change:J}=z,ie=J.count>=0;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Period Comparison"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[ie?e.jsx(_t,{className:"h-4 w-4 text-green-500"}):e.jsx(Jd,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:`text-sm font-medium ${ie?"text-green-600":"text-red-600"}`,children:[ie?"+":"",J.count," (",ie?"+":"",J.percentage.toFixed(1),"%)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Period"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:H.count}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Previous Period"}),e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:Q.count}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Change"}),e.jsxs("p",{className:`text-3xl font-bold ${ie?"text-green-600":"text-red-600"}`,children:[ie?"+":"",J.count]}),e.jsxs("p",{className:`text-xs ${ie?"text-green-500":"text-red-500"} mt-1`,children:[ie?"+":"",J.percentage.toFixed(1),"%"]})]})]})]})},A=()=>{var K;let z=null;if(a==="tickets"&&((K=o==null?void 0:o.data)!=null&&K.resolutionTimeData))z=o.data.resolutionTimeData;else if(o!=null&&o.resolutionTimeData)z=o.resolutionTimeData;else return null;if(!z||a!=="tickets")return null;const{averageResolutionTime:H,minResolutionTime:Q,maxResolutionTime:J,totalResolved:ie}=z;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Resolution Time Analytics"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ys,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Performance metrics"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Resolution"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[H>0?H.toFixed(1):"0"," days"]})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Fastest Resolution"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Q>0?Q.toFixed(1):"0"," days"]})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl border border-orange-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Slowest Resolution"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[J>0?J.toFixed(1):"0"," days"]})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Total Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ie}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"tickets"})]})]})]})},q=()=>{var ie,K;if(!o)return null;let z=[];a==="tickets"&&((ie=o.data)!=null&&ie.data)?z=o.data.data:o.data&&Array.isArray(o.data)?z=o.data:o.data&&typeof o.data=="object"?z=o.data.data||[]:z=[],Array.isArray(z)||(console.error("Data is not an array:",z),z=[]);const H=z.filter(oe=>{if(!N)return!0;const le=N.toLowerCase();return Object.values(oe).some(Se=>Se&&Se.toString().toLowerCase().includes(le))}),Q=()=>{switch(a){case"residents":return["Name","Phone","Room","Status","Check-in Date","Actions"];case"payments":return["Resident","Amount","Method","Status","Date","Actions"];case"tickets":return["Subject","Priority","Status","Category","Created","Assigned To","Actions"];case"onboarding":return["Resident","Room","Check-in Date","Rent Amount","Actions"];case"offboarding":return["Resident","Vacation Type","Notice Days","Check-out Date","Actions"];default:return[]}},J=(oe,le)=>{var Se,Ee,ye,We,fe,Fe;switch(a){case"residents":return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center mr-3",children:e.jsx(Je,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[oe.firstName," ",oe.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:oe.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Se=oe.roomId)==null?void 0:Se.roomNumber)||"Not Assigned"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.status==="active"?"bg-green-100 text-green-800":oe.status==="inactive"?"bg-red-100 text-red-800":oe.status==="notice_period"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:oe.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.checkInDate?new Date(oe.checkInDate).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})})})]},oe._id||le);case"payments":return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(Ee=oe.residentId)==null?void 0:Ee.firstName," ",(ye=oe.residentId)==null?void 0:ye.lastName]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",(We=oe.amount)==null?void 0:We.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.paymentMethod}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.status==="paid"?"bg-green-100 text-green-800":oe.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:oe.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(oe.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})})})]},oe._id||le);case"tickets":return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:oe.subject}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:oe.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.priority==="urgent"?"bg-red-100 text-red-800":oe.priority==="high"?"bg-orange-100 text-orange-800":oe.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:oe.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.status==="open"?"bg-blue-100 text-blue-800":oe.status==="in_progress"?"bg-yellow-100 text-yellow-800":oe.status==="resolved"?"bg-green-100 text-green-800":oe.status==="closed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:oe.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"capitalize",children:oe.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(oe.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.assignedTo}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})})})]},oe.id||le);case"onboarding":return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[oe.firstName," ",oe.lastName]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((fe=oe.roomId)==null?void 0:fe.roomNumber)||"Not Assigned"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.checkInDate?new Date(oe.checkInDate).toLocaleDateString():"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",((Fe=oe.rentAmount)==null?void 0:Fe.toLocaleString())||"N/A"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})})})]},oe._id||le);case"offboarding":return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[oe.firstName," ",oe.lastName]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.vacationType||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.noticeDays||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe.checkOutDate?new Date(oe.checkOutDate).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})})})]},oe._id||le);default:return null}};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[(K=w.find(oe=>oe.id===a))==null?void 0:K.name," Data"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:N,onChange:oe=>S(oe.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:Q().map((oe,le)=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:oe},le))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map((oe,le)=>J(oe,le))})]})}),H.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ns,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No data found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your filters or search terms."})]})]})},Y=()=>{var z,H,Q,J,ie,K,oe;return m?e.jsx(vt,{children:y&&e.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsx("select",{value:f,onChange:le=>R(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(z=m.dateRanges)==null?void 0:z.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:g.startDate,onChange:le=>D("startDate",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:g.endDate,onChange:le=>D("endDate",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a==="residents"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{value:g.status,onChange:le=>D("status",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(H=m.statusOptions)==null?void 0:H.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]}),a==="payments"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),e.jsx("select",{value:g.status,onChange:le=>D("status",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(Q=m.paymentStatusOptions)==null?void 0:Q.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]}),a==="payments"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsx("select",{value:g.paymentMethod,onChange:le=>D("paymentMethod",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(J=m.paymentMethodOptions)==null?void 0:J.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]}),a==="tickets"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ticket Status"}),e.jsx("select",{value:g.status,onChange:le=>D("status",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(ie=m.ticketStatusOptions)==null?void 0:ie.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]}),a==="tickets"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsx("select",{value:g.priority,onChange:le=>D("priority",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(K=m.priorityOptions)==null?void 0:K.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]}),a==="offboarding"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vacation Type"}),e.jsx("select",{value:g.vacationType,onChange:le=>D("vacationType",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(oe=m.vacationTypeOptions)==null?void 0:oe.map(le=>e.jsx("option",{value:le.value,children:le.label},le.value))})]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsxs("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ct,{className:"h-4 w-4 mr-2 inline"}),"Close"]}),e.jsxs("button",{onClick:()=>{p({startDate:"",endDate:"",pgId:"",status:"all",paymentMethod:"all",priority:"all",vacationType:"all"}),S("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4 mr-2 inline"}),"Reset"]})]})]})}):null};return!t||(t==null?void 0:t.role)!=="admin"?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive reports and insights for your PG management"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>v(!y),className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),y?"Hide Filters":"Show Filters"]}),e.jsx(Z3,{overlay:V,trigger:["click"],children:e.jsxs(Au,{type:"primary",loading:B,className:"flex items-center",children:[e.jsx(pm,{className:"h-4 w-4 mr-2"}),"Export Report"]})})]})]})}),Y(),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:w.map(z=>{const H=z.icon,Q=a===z.id;return e.jsxs("button",{onClick:()=>n(z.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition duration-200 ${Q?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{children:z.name})]},z.id)})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:[(O=w.find(z=>z.id===a))==null?void 0:O.name," Report"]}),e.jsx("p",{className:"text-gray-600",children:(W=w.find(z=>z.id===a))==null?void 0:W.description})]}),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",children:[_(),G(),U(),A(),q()]})]})]})]})}):e.jsx("div",{className:"p-6 text-center text-gray-600",children:"Please select a branch from the header to view reports."})},Tne=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState({}),[l,o]=h.useState([]),[c,u]=h.useState({status:"all",priority:"all",category:"all",pg:"all",search:"",startDate:null,endDate:null}),[d,m]=h.useState(!1),[x,g]=h.useState(null),p=Ms(),[f,b]=h.useState(!1),[y,v]=h.useState(!1),[N,S]=h.useState("cards");h.useEffect(()=>{(async()=>{try{const G=await xa.getAllPGs();G.success&&o(G.data)}catch(G){console.error("Error loading PGs:",G)}})()},[]),h.useEffect(()=>{w(),C()},[c]),h.useEffect(()=>{const _=setInterval(()=>{w(),C()},15e3);return()=>clearInterval(_)},[]);const w=async()=>{try{a(!0);const _={...c};Object.keys(_).forEach(U=>{_[U]==="all"&&delete _[U]});const G=await us.getTickets(_);if(G.success){const U=G.data.map(A=>us.formatTicketData(A));s(U)}}catch(_){M.error("Failed to load tickets"),console.error("Error loading tickets:",_)}finally{a(!1)}},C=async()=>{try{const _=await us.getTicketStats();_.success&&i(_.data)}catch(_){console.error("Error loading stats:",_)}},j=_=>{g(_),p(`/superadmin/tickets/${_._id}?section=overview`)},k=_=>{g(_),p(`/superadmin/tickets/${_._id}?section=assign`)},E=_=>{g(_),b(!0)},R=_=>{g(_),p(`/superadmin/tickets/${_._id}?section=priority`)},D=async _=>{try{v(!0);const G=await us.closeTicket(_);G.success?(M.success("Ticket closed successfully"),w(),C()):M.error(G.message||"Failed to close ticket")}catch(G){M.error("Failed to close ticket"),console.error("Error closing ticket:",G)}finally{v(!1)}},P=()=>{u({status:"all",priority:"all",category:"all",pg:"all",search:"",startDate:null,endDate:null})},T=_=>{u(G=>{const U={...G,..._};return Object.keys(U).forEach(A=>{U[A]===""&&(U[A]="all")}),U})},B=_=>({open:e.jsx(Ze,{className:"h-4 w-4 text-blue-600"}),in_progress:e.jsx(ut,{className:"h-4 w-4 text-yellow-600"}),resolved:e.jsx(Be,{className:"h-4 w-4 text-green-600"}),closed:e.jsx(Be,{className:"h-4 w-4 text-gray-600"}),cancelled:e.jsx(Yt,{className:"h-4 w-4 text-red-600"})})[_]||e.jsx(Ze,{className:"h-4 w-4 text-gray-600"}),F=_=>({open:"bg-blue-50 text-blue-700 border-blue-200",in_progress:"bg-yellow-50 text-yellow-700 border-yellow-200",resolved:"bg-green-50 text-green-700 border-green-200",closed:"bg-gray-50 text-gray-700 border-gray-200",cancelled:"bg-red-50 text-red-700 border-red-200"})[_]||"bg-gray-50 text-gray-700 border-gray-200",L=_=>({low:"bg-green-50 text-green-700 border-green-200",medium:"bg-yellow-50 text-yellow-700 border-yellow-200",high:"bg-orange-50 text-orange-700 border-orange-200",urgent:"bg-red-50 text-red-700 border-red-200"})[_]||"bg-gray-50 text-gray-700 border-gray-200",I=()=>e.jsx(vt,{children:d&&e.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),e.jsxs(ls,{value:c.status,onValueChange:_=>T({status:_}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Status"})}),e.jsx(Zt,{children:e.jsxs(mi,{children:[e.jsx(Dn,{children:"Ticket Status"}),e.jsx(ke,{value:"all",children:"All Status"}),e.jsx(ke,{value:"open",children:"Open"}),e.jsx(ke,{value:"in_progress",children:"In Progress"}),e.jsx(ke,{value:"resolved",children:"Resolved"}),e.jsx(ke,{value:"closed",children:"Closed"}),e.jsx(ke,{value:"cancelled",children:"Cancelled"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Priority"}),e.jsxs(ls,{value:c.priority,onValueChange:_=>T({priority:_}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Priority"})}),e.jsx(Zt,{children:e.jsxs(mi,{children:[e.jsx(Dn,{children:"Ticket Priority"}),e.jsx(ke,{value:"all",children:"All Priority"}),e.jsx(ke,{value:"low",children:"Low"}),e.jsx(ke,{value:"medium",children:"Medium"}),e.jsx(ke,{value:"high",children:"High"}),e.jsx(ke,{value:"urgent",children:"Urgent"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Category"}),e.jsxs(ls,{value:c.category,onValueChange:_=>T({category:_}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Categories"})}),e.jsx(Zt,{children:e.jsxs(mi,{children:[e.jsx(Dn,{children:"Ticket Categories"}),e.jsx(ke,{value:"all",children:"All Categories"}),e.jsx(ke,{value:"maintenance",children:"Maintenance"}),e.jsx(ke,{value:"billing",children:"Billing"}),e.jsx(ke,{value:"complaint",children:"Complaint"}),e.jsx(ke,{value:"suggestion",children:"Suggestion"}),e.jsx(ke,{value:"emergency",children:"Emergency"}),e.jsx(ke,{value:"other",children:"Other"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Start Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),c.startDate?new Date(c.startDate).toLocaleDateString():"Select Start Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:c.startDate?new Date(c.startDate):void 0,onSelect:_=>T({startDate:_?_.toISOString():null}),initialFocus:!0})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 space-x-3",children:e.jsx("button",{onClick:P,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters"})})]})}),V=({ticket:_})=>{var G,U,A,q,Y;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden transform hover:-translate-y-1",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${F(_.status).replace("border","bg").replace("text","bg").replace("bg-gray","bg-blue").replace("bg-red","bg-red").replace("bg-green","bg-green").replace("bg-yellow","bg-yellow").replace("bg-orange","bg-orange")}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl opacity-50"}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:_.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 leading-relaxed",children:_.description})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm ${F(_.status)}`,children:[B(_.status),e.jsx("span",{className:"ml-1.5 capitalize",children:_.status.replace("_"," ")})]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm ${L(_.priority)}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current mr-2"}),_.priority]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ie,{className:"h-4 w-4 mr-3 text-indigo-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"PG Property"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:((G=_.pg)==null?void 0:G.name)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(jt,{className:"h-4 w-4 mr-3 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Created By"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[(U=_.user)==null?void 0:U.firstName," ",(A=_.user)==null?void 0:A.lastName]})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(xt,{className:"h-4 w-4 mr-3 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Created"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_.formattedCreatedAt})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(sr,{className:"h-4 w-4 mr-3 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Location"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[((q=_.location)==null?void 0:q.room)&&`Room ${_.location.room}`,((Y=_.location)==null?void 0:Y.floor)&&` | Floor ${_.location.floor}`]})]})]})]}),_.assignedTo&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx(Je,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:"ASSIGNED TO"}),e.jsxs("p",{className:"text-sm font-bold text-blue-900",children:[_.assignedTo.firstName," ",_.assignedTo.lastName]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>j(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-blue-600 bg-blue-50 rounded-xl hover:bg-blue-100 hover:text-blue-700 transition-all duration-200 shadow-sm",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs("button",{onClick:()=>R(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-orange-600 bg-orange-50 rounded-xl hover:bg-orange-100 hover:text-orange-700 transition-all duration-200 shadow-sm",children:[e.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Priority"]}),_.status==="open"&&e.jsxs("button",{onClick:()=>k(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-green-600 bg-green-50 rounded-xl hover:bg-green-100 hover:text-green-700 transition-all duration-200 shadow-sm",children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Assign"]}),_.status==="in_progress"&&e.jsxs("button",{onClick:()=>E(_),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-orange-600 bg-orange-50 rounded-xl hover:bg-orange-100 hover:text-orange-700 transition-all duration-200 shadow-sm",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Resolve"]}),_.status==="resolved"&&e.jsxs("button",{onClick:()=>D(_._id),disabled:y,className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-600 bg-gray-50 rounded-xl hover:bg-gray-100 hover:text-gray-700 transition-all duration-200 shadow-sm disabled:opacity-50",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Close"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-gray-100 px-2 py-1 rounded",children:["#",_._id.slice(-6)]})})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ticket Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all support tickets from different PGs"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:e.jsxs("div",{className:"flex items-center bg-white rounded-lg border border-gray-200 p-1",children:[e.jsx("button",{onClick:()=>S("cards"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${N==="cards"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:"Cards"}),e.jsx("button",{onClick:()=>S("table"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${N==="table"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:"Table"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-xl",children:e.jsx(ns,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.total||0})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-xl border border-yellow-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-500 rounded-xl",children:e.jsx(Ze,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Open"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:n.open||0})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl border border-orange-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-500 rounded-xl",children:e.jsx(ut,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-orange-700",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:n.inProgress||0})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-xl",children:e.jsx(Be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.resolved||0})]})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-gray-500 rounded-xl",children:e.jsx(Be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Closed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.closed||0})]})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:c.search,onChange:_=>T({search:_.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(aa,{className:"h-5 w-5 mr-2"}),"Filters",d?e.jsx(Bc,{className:"h-4 w-4 ml-2"}):e.jsx(zn,{className:"h-4 w-4 ml-2"})]}),e.jsx("button",{onClick:P,className:"px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"Clear"}),e.jsxs("button",{className:"flex items-center px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(xr,{className:"h-5 w-5 mr-2"}),"Export"]})]})]}),I()]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading tickets..."})]}):t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tickets Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No tickets match your current filters."})]}):N==="cards"?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(_=>e.jsx(V,{ticket:_},_._id))})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PG"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(_=>{var G,U,A,q,Y,O;return e.jsxs(ae.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:_.description}),e.jsxs("div",{className:"text-xs text-gray-400",children:[((G=_.location)==null?void 0:G.room)&&`Room: ${_.location.room}`,((U=_.location)==null?void 0:U.floor)&&` | Floor: ${_.location.floor}`,((A=_.location)==null?void 0:A.building)&&` | Building: ${_.location.building}`]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:((q=_.pg)==null?void 0:q.name)||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(Y=_.user)==null?void 0:Y.firstName," ",(O=_.user)==null?void 0:O.lastName]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[B(_.status),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.statusColor}`,children:_.status.replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.priorityColor}`,children:_.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.assignedTo?`${_.assignedTo.firstName} ${_.assignedTo.lastName}`:"Unassigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.formattedCreatedAt})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(_),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View Details",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(_),className:"text-orange-600 hover:text-orange-900 p-1 rounded hover:bg-orange-50 transition-colors",title:"Update Priority",children:e.jsx(Rt,{className:"h-4 w-4"})}),_.status==="open"&&e.jsx("button",{onClick:()=>k(_),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors",title:"Assign Ticket",children:e.jsx(jt,{className:"h-4 w-4"})}),_.status==="in_progress"&&e.jsx("button",{onClick:()=>E(_),className:"text-orange-600 hover:text-orange-900 p-1 rounded hover:bg-orange-50 transition-colors",title:"Resolve Ticket",children:e.jsx(Be,{className:"h-4 w-4"})}),_.status==="resolved"&&e.jsx("button",{onClick:()=>D(_._id),disabled:y,className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Close Ticket",children:e.jsx(Yt,{className:"h-4 w-4"})})]})})]},_._id)})})]})})})]})},_ne=()=>{var D,P,T,B;const t=Ms(),{id:s}=Nx(),[r,a]=r2(),[n,i]=h.useState(null),[l,o]=h.useState(!0),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[x,g]=h.useState([]),[p,f]=h.useState(""),[b,y]=h.useState([]),[v,N]=h.useState(""),[S,w]=h.useState(""),C=h.useMemo(()=>r.get("section")||"overview",[r]);h.useEffect(()=>{let F=!0;return(async()=>{var I,V,_;try{o(!0);const[G,U]=await Promise.all([us.getTicketById(s),us.getPriorityLevels()]);F&&(G!=null&&G.success&&(i(G.data),N(((I=G.data)==null?void 0:I.priority)||""),f(((_=(V=G.data)==null?void 0:V.assignedTo)==null?void 0:_._id)||"")),y((U==null?void 0:U.data)||[]))}catch{M.error("Failed to load ticket")}finally{F&&o(!1)}})(),()=>{F=!1}},[s]),h.useEffect(()=>{if(C!=="assign")return;let F=!0;return(async()=>{try{m(!0);const I=await us.getSupportStaff();F&&(I!=null&&I.success)&&g(I.data||[])}catch{M.error("Failed to fetch support staff")}finally{F&&m(!1)}})(),()=>{F=!1}},[C]);const j=()=>t("/superadmin/tickets"),k=async()=>{if(!p){M.error("Select a support staff member");return}try{u(!0);const F=await us.assignTicket(s,p);F!=null&&F.success?(M.success("Ticket assigned"),i(F.data),a({section:"overview"})):M.error((F==null?void 0:F.message)||"Failed to assign ticket")}catch(F){M.error(F.message||"Failed to assign")}finally{u(!1)}},E=async()=>{if(v)try{u(!0);const F=await us.updateTicket(s,{priority:v});F!=null&&F.success?(M.success("Priority updated"),i(F.data),a({section:"overview"})):M.error((F==null?void 0:F.message)||"Failed to update priority")}catch(F){M.error(F.message||"Failed to update priority")}finally{u(!1)}},R=F=>({open:e.jsx(Ze,{className:"h-4 w-4 text-blue-600"}),in_progress:e.jsx(ut,{className:"h-4 w-4 text-yellow-600"}),resolved:e.jsx(Be,{className:"h-4 w-4 text-green-600"}),closed:e.jsx(Be,{className:"h-4 w-4 text-gray-600"}),cancelled:e.jsx(Yt,{className:"h-4 w-4 text-red-600"})})[F]||e.jsx(Ze,{className:"h-4 w-4 text-gray-600"});return l?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ticket..."})]}):n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:j,className:"mr-3 inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(vr,{className:"h-4 w-4 mr-1"})," Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Ticket #",(D=n==null?void 0:n._id)==null?void 0:D.slice(-6)]}),e.jsx("p",{className:"text-gray-600",children:n.title})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-gray-50 text-gray-700 border border-gray-200",children:[R(n.status),e.jsx("span",{className:"ml-1.5 capitalize",children:(n.status||"").replace("_"," ")})]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-orange-50 text-orange-700 border border-orange-200",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current mr-2"}),n.priority]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 pt-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:["overview","assign","priority"].map(F=>e.jsxs("button",{onClick:()=>a({section:F}),className:`px-4 py-2 text-sm font-medium rounded-lg ${C===F?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[F==="overview"&&"Overview",F==="assign"&&"Assign",F==="priority"&&"Priority"]},F))})}),e.jsxs("div",{className:"p-6 border-t border-gray-200",children:[C==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-green-600"}),"Created"]}),e.jsx("div",{className:"text-sm font-semibold",children:new Date(n.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-purple-600"}),"Created By"]}),e.jsxs("div",{className:"text-sm font-semibold",children:[(P=n.user)==null?void 0:P.firstName," ",(T=n.user)==null?void 0:T.lastName]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(sr,{className:"h-4 w-4 mr-2 text-orange-600"}),"PG"]}),e.jsx("div",{className:"text-sm font-semibold",children:((B=n.pg)==null?void 0:B.name)||"N/A"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:"DESCRIPTION"}),e.jsx("p",{className:"mt-1 text-sm text-blue-900 leading-relaxed",children:n.description})]}),n.assignedTo&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold",children:"ASSIGNED TO"}),e.jsxs("p",{className:"mt-1 text-sm text-green-900 font-bold",children:[n.assignedTo.firstName," ",n.assignedTo.lastName]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Rs,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Comments"})]}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto pr-1",children:(n.comments||[]).length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No comments yet."}):n.comments.slice().sort((F,L)=>new Date(F.createdAt)-new Date(L.createdAt)).map((F,L)=>{var I,V;return e.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[(I=F.author)==null?void 0:I.firstName," ",(V=F.author)==null?void 0:V.lastName,e.jsx("span",{className:"ml-2 text-xs text-gray-500 uppercase",children:F.authorRole})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(F.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-wrap",children:F.message})]},L)})}),e.jsxs("div",{className:"mt-4 flex items-end space-x-2",children:[e.jsx("textarea",{value:S,onChange:F=>w(F.target.value),rows:2,placeholder:"Add a comment...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"}),e.jsxs("button",{onClick:async()=>{if(S.trim())try{u(!0);const F=await us.addComment(s,S.trim());F!=null&&F.success?(i(F.data),w(""),M.success("Comment added")):M.error((F==null?void 0:F.message)||"Failed to add comment")}catch(F){M.error(F.message||"Failed to add comment")}finally{u(!1)}},disabled:c||!S.trim(),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(d2,{className:"h-4 w-4 mr-2"})," Post"]})]})]})]}),C==="assign"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Assign this ticket to an active support staff member."}),d?e.jsxs("div",{className:"py-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Loading staff..."})]}):x.length===0?e.jsxs("div",{className:"p-6 text-center bg-gray-50 rounded-lg border border-dashed",children:[e.jsx(Je,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No active support staff available."})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ls,{value:p,onValueChange:F=>f(F),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Support Staff"})}),e.jsx(Zt,{children:e.jsxs(mi,{children:[e.jsx(Dn,{children:"Available Support Staff"}),x.map(F=>e.jsxs(ke,{value:F._id,children:[F.firstName," ",F.lastName," (",F.email,")"]},F._id))]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:k,disabled:c||!p,className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"})," Assign Ticket"]})})]})]}),C==="priority"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Set a new priority level for this ticket."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(F=>e.jsxs("button",{onClick:()=>N(F.value),className:`flex items-start p-4 rounded-lg border text-left transition-colors ${v===F.value?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,children:[e.jsx(Rt,{className:`h-5 w-5 mr-3 ${F.value==="low"?"text-green-600":F.value==="medium"?"text-yellow-600":F.value==="high"?"text-orange-600":"text-red-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold capitalize",children:F.label||F.value}),e.jsx("div",{className:"text-xs text-gray-600",children:F.description||""})]})]},F.value))}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:E,disabled:c||!v,className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-orange-600 rounded-lg hover:bg-orange-700 disabled:opacity-50",children:[e.jsx(Rt,{className:"h-4 w-4 mr-2"})," Update Priority"]})})]})]})]})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Ticket not found"}),e.jsxs("button",{onClick:j,className:"mt-4 inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"})," Back to Tickets"]})]})},Ane=({isOpen:t,onClose:s,ticket:r,onSuccess:a})=>{var f;const[n,i]=h.useState(!1),[l,o]=h.useState({status:"",feedback:"",resolution:""}),[c,u]=h.useState({});Ke.useEffect(()=>{if(r){let b="";switch(r.status){case"open":b="in_progress";break;case"in_progress":b="resolved";break;case"resolved":b="closed";break;default:b=r.status}o(y=>({...y,status:b}))}},[r]);const d=(b,y)=>{o(v=>({...v,[b]:y})),c[b]&&u(v=>({...v,[b]:""}))},x=(b=>{switch(b){case"in_progress":return{icon:e.jsx(Sx,{className:"h-6 w-6 text-blue-600"}),title:"Start Working on Ticket",description:"Mark this ticket as in progress and provide initial feedback",color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-700"};case"resolved":return{icon:e.jsx(Be,{className:"h-6 w-6 text-green-600"}),title:"Mark as Resolved",description:"Provide details about the solution and what was fixed",color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-700"};case"closed":return{icon:e.jsx(ns,{className:"h-6 w-6 text-gray-600"}),title:"Close Ticket",description:"Finalize the ticket with closing remarks",color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-700"};default:return{icon:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"}),title:"Update Status",description:"Update ticket status with feedback",color:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-700"}}})(l.status),g=async b=>{b.preventDefault(),i(!0);try{const y={};if(l.feedback.trim()||(y.feedback="Feedback is required"),l.status==="resolved"&&!l.resolution.trim()&&(y.resolution="Resolution details are required when marking as resolved"),Object.keys(y).length>0){u(y),M.error("Please fix the validation errors");return}const v=await us.updateTicketStatus(r._id,l.status,l.resolution||l.feedback);v.success?(M.success("Ticket status updated successfully!"),a(),s()):M.error(v.message||"Failed to update ticket status")}catch(y){console.error("Error updating ticket status:",y),M.error(y.message||"An error occurred while updating the ticket")}finally{i(!1)}},p=b=>{switch(b){case"in_progress":return"In Progress";case"resolved":return"Resolved";case"closed":return"Closed";default:return b}};return e.jsx(vt,{children:t&&e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:`flex items-center justify-between p-6 ${x.bgColor} ${x.borderColor} border-b`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 ${x.bgColor} rounded-xl`,children:x.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:x.title}),e.jsx("p",{className:`text-sm ${x.textColor}`,children:x.description})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Ticket Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Title:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:r==null?void 0:r.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Status:"}),e.jsx("span",{className:"font-semibold text-gray-900 capitalize",children:(f=r==null?void 0:r.status)==null?void 0:f.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Status:"}),e.jsx("span",{className:`font-semibold px-2 py-1 rounded-full text-xs ${x.bgColor} ${x.textColor}`,children:p(l.status)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Status To *"}),e.jsxs("select",{value:l.status,onChange:b=>d("status",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(r==null?void 0:r.status)==="open"&&e.jsx("option",{value:"in_progress",children:"In Progress - Start working on the ticket"}),(r==null?void 0:r.status)==="in_progress"&&e.jsx("option",{value:"resolved",children:"Resolved - Mark as completed"}),(r==null?void 0:r.status)==="resolved"&&e.jsx("option",{value:"closed",children:"Closed - Finalize the ticket"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback / Work Details *"}),e.jsx("textarea",{value:l.feedback,onChange:b=>d("feedback",b.target.value),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.feedback?"border-red-500":"border-gray-300"}`,placeholder:l.status==="in_progress"?"Describe what you're working on and any initial findings...":l.status==="resolved"?"Describe the solution implemented and what was fixed...":"Provide closing remarks and final notes..."}),c.feedback&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.feedback})]}),l.status==="resolved"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Details *"}),e.jsx("textarea",{value:l.resolution,onChange:b=>d("resolution",b.target.value),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.resolution?"border-red-500":"border-gray-300"}`,placeholder:"Provide detailed information about the solution, what was fixed, and any follow-up actions needed..."}),c.resolution&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.resolution}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be stored as the official resolution for the ticket"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:`px-6 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 ${l.status==="in_progress"?"bg-blue-600 hover:bg-blue-700":l.status==="resolved"?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(no,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{className:"h-4 w-4"}),e.jsx("span",{children:l.status==="in_progress"?"Start Work":l.status==="resolved"?"Mark Resolved":"Close Ticket"})]})})]})]})]})})})},Rne=()=>{const t=Ms(),[s,r]=h.useState([]),[a,n]=h.useState([]),[i,l]=h.useState(!0),[o,c]=h.useState(""),[u,d]=h.useState(""),[m,x]=h.useState("all"),[g,p]=h.useState("all"),[f,b]=h.useState("all"),[y,v]=h.useState(!1),[N,S]=h.useState("me"),[w,C]=h.useState("cards"),[j,k]=h.useState(!1),[E,R]=h.useState(!1),[D,P]=h.useState(null),[T,B]=h.useState({total:0,open:0,inProgress:0,resolved:0,closed:0});h.useEffect(()=>{L(),I()},[N]);const F=He(Pl);h.useEffect(()=>{V()},[s,m,g,f,u]);const L=async()=>{var H;try{l(!0);const Q=N==="me"?await us.getMyTickets():await us.getTickets();if(Q.success){const J=(H=F==null?void 0:F._id)==null?void 0:H.toString(),ie=Array.isArray(Q.data)?Q.data:[],K=J?ie.filter(oe=>{const le=oe.assignedTo,Se=typeof le=="string"?le:le==null?void 0:le._id;return Se&&Se.toString()===J}):ie;r(K)}else c("Failed to load tickets")}catch(Q){console.error("Error loading tickets:",Q),c("Failed to load tickets")}finally{l(!1)}},I=async()=>{try{const H=await us.getTicketStats();H.success&&B(H.data)}catch(H){console.error("Error loading stats:",H)}},V=()=>{let H=[...s];if(m!=="all"&&(H=H.filter(Q=>Q.status===m)),g!=="all"&&(H=H.filter(Q=>Q.priority===g)),f!=="all"&&(H=H.filter(Q=>Q.category===f)),u){const Q=u.toLowerCase();H=H.filter(J=>{var ie,K;return J.title.toLowerCase().includes(Q)||J.description.toLowerCase().includes(Q)||(((ie=J.user)==null?void 0:ie.firstName)+" "+((K=J.user)==null?void 0:K.lastName)).toLowerCase().includes(Q)||J.category.toLowerCase().includes(Q)})}n(H)},_=H=>{x(m===H?"all":H)},G=H=>{P(H),R(!0)},U=()=>{L(),I(),R(!1),P(null)},A=H=>{t(`/support/tickets/${H._id}`)},q=()=>{x("all"),p("all"),b("all"),d("")},Y=H=>{switch(H){case"open":return"bg-blue-50 text-blue-700 border-blue-200";case"in_progress":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"resolved":return"bg-green-50 text-green-700 border-green-200";case"closed":return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},O=H=>{switch(H){case"low":return"bg-green-50 text-green-700 border-green-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"urgent":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},W=H=>{switch(H){case"open":return e.jsx(Ze,{className:"h-4 w-4"});case"in_progress":return e.jsx(ut,{className:"h-4 w-4"});case"resolved":return e.jsx(Be,{className:"h-4 w-4"});case"closed":return e.jsx(Yt,{className:"h-4 w-4"});default:return e.jsx(Rs,{className:"h-4 w-4"})}},z=({ticket:H})=>{var Q,J,ie;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden transform hover:-translate-y-1",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${Y(H.status).replace("border","bg").replace("text","bg").replace("bg-gray","bg-blue").replace("bg-red","bg-red").replace("bg-green","bg-green").replace("bg-yellow","bg-yellow").replace("bg-orange","bg-orange")}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl opacity-50"}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2 group-hover:text-emerald-600 transition-colors",children:H.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 leading-relaxed",children:H.description})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm ${Y(H.status)}`,children:[W(H.status),e.jsx("span",{className:"ml-1.5 capitalize",children:H.status.replace("_"," ")})]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm ${O(H.priority)}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current mr-2"}),H.priority]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(yg,{className:"h-4 w-4 mr-3 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"PG Property"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:((Q=H.pg)==null?void 0:Q.name)||H.pgName||"Unknown PG"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(jt,{className:"h-4 w-4 mr-3 text-teal-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Created By"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[(J=H.user)==null?void 0:J.firstName," ",(ie=H.user)==null?void 0:ie.lastName]})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(xt,{className:"h-4 w-4 mr-3 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Created"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:new Date(H.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(sr,{className:"h-4 w-4 mr-3 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Category"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 capitalize",children:H.category})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>A(H),className:"flex items-center px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"View"]}),H.status==="open"&&e.jsxs("button",{onClick:()=>G(H),className:"flex items-center px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:[e.jsx(Sx,{className:"h-4 w-4 mr-2"}),"Start Work"]}),H.status==="in_progress"&&e.jsxs("button",{onClick:()=>G(H),className:"flex items-center px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:[e.jsx(hi,{className:"h-4 w-4 mr-2"}),"Mark Resolved"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(io,{className:"h-4 w-4"})})})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Tickets"}),e.jsx("p",{className:"text-gray-600",children:"Manage and resolve support tickets from all PG properties"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>C("cards"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${w==="cards"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Cards"}),e.jsx("button",{onClick:()=>C("table"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${w==="table"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Table"})]}),e.jsx("div",{className:"flex items-center bg-white border border-gray-200 rounded-lg p-1",children:e.jsx("button",{onClick:()=>S("me"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${N==="me"?"bg-emerald-100 text-emerald-700":"text-gray-600 hover:text-gray-900"}`,children:"Assigned to me"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>_("all"),className:`bg-white p-6 rounded-xl shadow-sm border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${m==="all"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Rs,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},onClick:()=>_("open"),className:`bg-white p-6 rounded-xl shadow-sm border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${m==="open"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Open"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.open})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},onClick:()=>_("in_progress"),className:`bg-white p-6 rounded-xl shadow-sm border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${m==="in_progress"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.inProgress})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-orange-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},onClick:()=>_("resolved"),className:`bg-white p-6 rounded-xl shadow-sm border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${m==="resolved"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.resolved})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},onClick:()=>_("closed"),className:`bg-white p-6 rounded-xl shadow-sm border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${m==="closed"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Closed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.closed})]}),e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(Yt,{className:"h-6 w-6 text-gray-600"})})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:u,onChange:H=>d(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:()=>v(!y),className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),"Filters",y?e.jsx(Bc,{className:"h-4 w-4 ml-2"}):e.jsx(zn,{className:"h-4 w-4 ml-2"})]}),(m!=="all"||g!=="all"||f!=="all"||u)&&e.jsx("button",{onClick:q,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Clear Filters"})]}),(m!=="all"||g!=="all"||f!=="all"||u)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),m!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Status: ",m.replace("_"," "),e.jsx("button",{onClick:()=>x("all"),className:"ml-1 hover:text-blue-600",children:e.jsx(ct,{className:"h-3 w-3"})})]}),g!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Priority: ",g,e.jsx("button",{onClick:()=>p("all"),className:"ml-1 hover:text-green-600",children:e.jsx(ct,{className:"h-3 w-3"})})]}),f!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Category: ",f,e.jsx("button",{onClick:()=>b("all"),className:"ml-1 hover:text-purple-600",children:e.jsx(ct,{className:"h-3 w-3"})})]}),u&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:['Search: "',u,'"',e.jsx("button",{onClick:()=>d(""),className:"ml-1 hover:text-yellow-600",children:e.jsx(ct,{className:"h-3 w-3"})})]})]}),e.jsx(vt,{children:y&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:g,onChange:H=>p(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:f,onChange:H=>b(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"complaint",children:"Complaint"}),e.jsx("option",{value:"suggestion",children:"Suggestion"}),e.jsx("option",{value:"emergency",children:"Emergency"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",a.length," of ",s.length," tickets",m!=="all"&&` (filtered by ${m.replace("_"," ")} status)`]})}),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:o})}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No tickets found"}),(m!=="all"||g!=="all"||f!=="all"||u)&&e.jsx("button",{onClick:q,className:"mt-2 px-4 py-2 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:"Clear filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(vt,{children:a.map(H=>e.jsx(z,{ticket:H},H._id))})}),e.jsx(gE,{isOpen:j,ticket:D,onClose:()=>{k(!1),P(null)}}),e.jsx(Ane,{isOpen:E,ticket:D,onClose:()=>{R(!1),P(null)},onSuccess:U})]})},Fne=()=>{const[t,s]=h.useState({totalTickets:0,openTickets:0,inProgressTickets:0,resolvedTickets:0,closedTickets:0}),[r,a]=h.useState({avgResponseTime:0,avgResolutionTime:0,satisfactionScore:0,ticketsThisWeek:0}),[n,i]=h.useState([]),[l,o]=h.useState(!0);h.useEffect(()=>{c()},[]);const c=async()=>{try{o(!0);const x=(await us.getAllTickets()).data||[],g=x.length,p=x.filter(k=>k.status==="open").length,f=x.filter(k=>k.status==="in_progress").length,b=x.filter(k=>k.status==="resolved").length,y=x.filter(k=>k.status==="closed").length,v=new Date;v.setDate(v.getDate()-7);const N=x.filter(k=>new Date(k.createdAt)>v).length,S=2.5,w=8.3,C=4.6;s({totalTickets:g,openTickets:p,inProgressTickets:f,resolvedTickets:b,closedTickets:y}),a({avgResponseTime:S,avgResolutionTime:w,satisfactionScore:C,ticketsThisWeek:N});const j=x.sort((k,E)=>new Date(E.createdAt)-new Date(k.createdAt)).slice(0,5).map(k=>{var E;return{id:k._id,title:k.title,status:k.status,priority:k.priority,createdAt:new Date(k.createdAt).toLocaleDateString(),description:((E=k.description)==null?void 0:E.substring(0,50))+"..."}});i(j)}catch(m){console.error("Error loading dashboard data:",m),s({totalTickets:156,openTickets:12,inProgressTickets:8,resolvedTickets:89,closedTickets:47}),a({avgResponseTime:2.5,avgResolutionTime:8.3,satisfactionScore:4.6,ticketsThisWeek:23}),i([{id:1,title:"Login System Issue",status:"open",priority:"high",createdAt:"2024-01-15",description:"Users unable to access login system..."},{id:2,title:"Payment Processing Error",status:"in_progress",priority:"medium",createdAt:"2024-01-14",description:"Payment gateway not responding..."},{id:3,title:"Account Access Request",status:"resolved",priority:"low",createdAt:"2024-01-13",description:"User needs access to admin panel..."}])}finally{o(!1)}},u=m=>{switch(m){case"open":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=m=>{switch(m){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your support overview"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalTickets})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Rs,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Open"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.openTickets})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.inProgressTickets})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-orange-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.resolvedTickets})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Closed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.closedTickets})]}),e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(Yt,{className:"h-6 w-6 text-gray-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Jt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ut,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Avg Response Time"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Time to first response"})]})]}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[r.avgResponseTime,"h"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Avg Resolution Time"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Time to complete resolution"})]})]}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[r.avgResolutionTime,"h"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fs,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Satisfaction Score"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Customer satisfaction rating"})]})]}),e.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[r.satisfactionScore,"/5"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xt,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"This Week"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets handled this week"})]})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:r.ticketsThisWeek})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Je,{className:"h-5 w-5 mr-2 text-green-600"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Rs,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"View All Tickets"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Browse all support tickets"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.totalTickets," tickets"]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ys,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"My Assigned"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets assigned to me"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.inProgressTickets," active"]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Jt,{className:"h-5 w-5 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Analytics"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View performance metrics"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{className:"px-3 py-1 bg-indigo-600 text-white text-xs rounded-lg hover:bg-indigo-700 transition-colors",children:"View"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Es,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Configure preferences"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white text-xs rounded-lg hover:bg-gray-700 transition-colors",children:"Configure"})})]})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Rs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Recent Tickets"]}),e.jsx("div",{className:"space-y-4",children:n.length>0?n.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:m.title}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u(m.status)}`,children:m.status.replace("_"," ")}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d(m.priority)}`,children:m.priority})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:m.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created: ",m.createdAt]})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-colors",children:"View"})]},m.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent tickets found"})]})})]})]})},Dne=()=>{var p;const{user:t}=Uc(),[s,r]=h.useState({name:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`,email:t==null?void 0:t.email,role:"Support Staff",joinDate:"January 2024",avatar:((p=t==null?void 0:t.firstName)==null?void 0:p.charAt(0))||"S"}),[a,n]=h.useState({totalTickets:0,resolvedTickets:0,avgResponseTime:0,satisfactionScore:0,ticketsThisWeek:0,ticketsThisMonth:0}),[i,l]=h.useState([]),[o,c]=h.useState([]),[u,d]=h.useState(!0);h.useEffect(()=>{m()},[]);const m=async()=>{try{d(!0);const b=(await us.getMyTickets()).data||[],y=b.length,v=b.filter(E=>E.status==="resolved"||E.status==="closed").length,N=new Date;N.setDate(N.getDate()-7);const S=b.filter(E=>new Date(E.createdAt)>N).length,w=new Date;w.setMonth(w.getMonth()-1);const C=b.filter(E=>new Date(E.createdAt)>w).length,j=2.5,k=4.6;n({totalTickets:y,resolvedTickets:v,avgResponseTime:j,satisfactionScore:k,ticketsThisWeek:S,ticketsThisMonth:C}),l([{id:1,action:"Resolved ticket",description:"Technical issue with login system",time:"2 hours ago",type:"resolved"},{id:2,action:"Updated ticket status",description:"Payment processing inquiry",time:"4 hours ago",type:"updated"},{id:3,action:"Assigned new ticket",description:"Account access request",time:"6 hours ago",type:"assigned"},{id:4,action:"Resolved ticket",description:"Feature request for mobile app",time:"1 day ago",type:"resolved"},{id:5,action:"Updated ticket status",description:"Billing question resolved",time:"2 days ago",type:"updated"}]),c([{id:1,name:"First Responder",description:"Respond to your first ticket",icon:Rs,earned:!0,date:"Jan 15, 2024"},{id:2,name:"Problem Solver",description:"Resolve 50 tickets",icon:Be,earned:y>=50,date:y>=50?"Feb 20, 2024":null},{id:3,name:"Speed Demon",description:"Maintain < 2h average response time for a week",icon:xi,earned:j<2,date:j<2?"Mar 10, 2024":null},{id:4,name:"Customer Champion",description:"Achieve 4.5+ satisfaction score for a month",icon:Fs,earned:k>=4.5,date:k>=4.5?"Mar 15, 2024":null},{id:5,name:"Consistency King",description:"Handle 100+ tickets",icon:ga,earned:y>=100,date:(y>=100,null)},{id:6,name:"Team Player",description:"Collaborate on 25+ tickets",icon:ys,earned:!1,date:null}])}catch(f){console.error("Error loading profile data:",f)}finally{d(!1)}},x=f=>{switch(f){case"resolved":return e.jsx(Be,{className:"h-4 w-4 text-green-600"});case"updated":return e.jsx(ys,{className:"h-4 w-4 text-blue-600"});case"assigned":return e.jsx(Rs,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(ys,{className:"h-4 w-4 text-gray-600"})}},g=f=>{switch(f){case"resolved":return"bg-green-50 border-green-200";case"updated":return"bg-blue-50 border-blue-200";case"assigned":return"bg-purple-50 border-purple-200";default:return"bg-gray-50 border-gray-200"}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),e.jsx("p",{className:"text-gray-600",children:"Your support performance and achievements"})]}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:s.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[e.jsx(is,{className:"h-4 w-4 mr-1"}),s.role]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Joined ",s.joinDate]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalTickets})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Rs,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.resolvedTickets})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[a.avgResponseTime,"h"]})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Satisfaction Score"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[a.satisfactionScore,"/5"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Fs,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.ticketsThisWeek})]}),e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(xt,{className:"h-6 w-6 text-indigo-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.ticketsThisMonth})]}),e.jsx("div",{className:"p-3 bg-pink-100 rounded-lg",children:e.jsx(_t,{className:"h-6 w-6 text-pink-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:i.map(f=>e.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg border ${g(f.type)}`,children:[x(f.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.action}),e.jsx("p",{className:"text-xs text-gray-600",children:f.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.time})]})]},f.id))})]}),e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.9},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Achievements"}),e.jsx("div",{className:"space-y-4",children:o.map(f=>{const b=f.icon;return e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg border ${f.earned?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${f.earned?"bg-green-100":"bg-gray-100"}`,children:e.jsx(b,{className:`h-4 w-4 ${f.earned?"text-green-600":"text-gray-400"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${f.earned?"text-green-900":"text-gray-500"}`,children:f.name}),e.jsx("p",{className:"text-xs text-gray-600",children:f.description}),f.earned&&f.date&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Earned ",f.date]})]}),f.earned&&e.jsx(Fa,{className:"h-4 w-4 text-green-600"})]},f.id)})})]})]})]})},Ine=()=>{const{user:t,logout:s}=Uc(),[r,a]=h.useState("profile"),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||""}),[x,g]=h.useState({currentPassword:"",newPassword:"",confirmPassword:"",showCurrentPassword:!1,showNewPassword:!1,showConfirmPassword:!1}),[p,f]=h.useState({emailNotifications:!0,pushNotifications:!0,ticketUpdates:!0,weeklyReports:!1,urgentAlerts:!0}),[b,y]=h.useState({theme:"light",compactMode:!1,showNotifications:!0,autoRefresh:!0}),v=async()=>{var k,E;try{i(!0),(await we.put("/api/user/profile",d)).data.success&&M.success("Profile updated successfully!")}catch(R){M.error(((E=(k=R.response)==null?void 0:k.data)==null?void 0:E.message)||"Failed to update profile")}finally{i(!1)}},N=async()=>{var k,E;if(x.newPassword!==x.confirmPassword){M.error("New passwords do not match");return}if(x.newPassword.length<8){M.error("Password must be at least 8 characters long");return}try{i(!0),(await we.put("/api/user/change-password",{currentPassword:x.currentPassword,newPassword:x.newPassword,confirmPassword:x.confirmPassword})).data.success&&(M.success("Password changed successfully! You will be logged out."),u(!1),g({currentPassword:"",newPassword:"",confirmPassword:"",showCurrentPassword:!1,showNewPassword:!1,showConfirmPassword:!1}),setTimeout(()=>{o(!0)},1500))}catch(R){M.error(((E=(k=R.response)==null?void 0:k.data)==null?void 0:E.message)||"Failed to change password")}finally{i(!1)}},S=async()=>{try{i(!0),(await we.put("/api/user/notifications",p)).data.success&&M.success("Notification preferences updated!")}catch{M.error("Failed to update notification preferences")}finally{i(!1)}},w=async()=>{try{i(!0),(await we.put("/api/user/display",b)).data.success&&M.success("Display preferences updated!")}catch{M.error("Failed to update display preferences")}finally{i(!1)}},C=async()=>{try{await s(),window.location.href="/support-login"}catch(k){console.error("Logout error:",k)}},j=[{id:"profile",name:"Profile",icon:jt},{id:"notifications",name:"Notifications",icon:Ln},{id:"display",name:"Display",icon:c2},{id:"security",name:"Security",icon:is}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account preferences and security settings"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:j.map(k=>{const E=k.icon;return e.jsxs("button",{onClick:()=>a(k.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r===k.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:k.name})]},k.id)})})}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:d.firstName,onChange:k=>m({...d,firstName:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:d.lastName,onChange:k=>m({...d,lastName:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:d.email,onChange:k=>m({...d,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:d.phone,onChange:k=>m({...d,phone:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("button",{onClick:v,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"Updating...":"Update Profile"})]}),r==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-4",children:Object.entries(p).map(([k,E])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 capitalize",children:k.replace(/([A-Z])/g," $1").replace(/^./,R=>R.toUpperCase())}),e.jsxs("p",{className:"text-xs text-gray-600",children:[k==="emailNotifications"&&"Receive notifications via email",k==="pushNotifications"&&"Receive push notifications",k==="ticketUpdates"&&"Get notified about ticket updates",k==="weeklyReports"&&"Receive weekly performance reports",k==="urgentAlerts"&&"Get urgent ticket alerts"]})]}),e.jsx("button",{onClick:()=>f({...p,[k]:!E}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E?"translate-x-6":"translate-x-1"}`})})]},k))}),e.jsx("button",{onClick:S,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"Updating...":"Update Notifications"})]}),r==="display"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Display Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Theme"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Choose your preferred theme"})]}),e.jsxs("select",{value:b.theme,onChange:k=>y({...b,theme:k.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Compact Mode"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Use compact layout for more content"})]}),e.jsx("button",{onClick:()=>y({...b,compactMode:!b.compactMode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b.compactMode?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b.compactMode?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Show Notifications"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Display notification badges"})]}),e.jsx("button",{onClick:()=>y({...b,showNotifications:!b.showNotifications}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b.showNotifications?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b.showNotifications?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Auto Refresh"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Automatically refresh data"})]}),e.jsx("button",{onClick:()=>y({...b,autoRefresh:!b.autoRefresh}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b.autoRefresh?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b.autoRefresh?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsx("button",{onClick:w,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"Updating...":"Update Display"})]}),r==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Er,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Change Password"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Update your account password for enhanced security"})]})]}),e.jsx("button",{onClick:()=>u(!0),className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Change Password"})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Account Logout"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Sign out from all devices and clear session data"})]})]}),e.jsx("button",{onClick:()=>o(!0),className:"mt-3 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Logout & Clear Session"})]})]})]})]},r),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.showCurrentPassword?"text":"password",value:x.currentPassword,onChange:k=>g({...x,currentPassword:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),e.jsx("button",{onClick:()=>g({...x,showCurrentPassword:!x.showCurrentPassword}),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:x.showCurrentPassword?e.jsx(rr,{className:"h-4 w-4 text-gray-400"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.showNewPassword?"text":"password",value:x.newPassword,onChange:k=>g({...x,newPassword:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),e.jsx("button",{onClick:()=>g({...x,showNewPassword:!x.showNewPassword}),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:x.showNewPassword?e.jsx(rr,{className:"h-4 w-4 text-gray-400"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.showConfirmPassword?"text":"password",value:x.confirmPassword,onChange:k=>g({...x,confirmPassword:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),e.jsx("button",{onClick:()=>g({...x,showConfirmPassword:!x.showConfirmPassword}),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:x.showConfirmPassword?e.jsx(rr,{className:"h-4 w-4 text-gray-400"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"Changing...":"Change Password"})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You will be logged out and redirected to login page"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]})]})})]})},One=()=>{var c,u,d,m,x,g,p,f,b,y,v,N,S,w,C,j,k;const[t,s]=h.useState({overview:{totalTickets:0,openTickets:0,inProgressTickets:0,resolvedTickets:0,closedTickets:0,avgResponseTime:"0 hours",avgResolutionTime:"0 days",satisfactionScore:0},trends:{daily:[],weekly:[],monthly:[]},categories:[],topIssues:[],staffPerformance:[]}),[r,a]=h.useState(!0),[n,i]=h.useState("week");h.useEffect(()=>{l()},[n]);const l=async()=>{try{a(!0);const E=await us.getAnalytics(n);E.success&&E.data?s(E.data):s({overview:{totalTickets:156,openTickets:12,inProgressTickets:8,resolvedTickets:89,closedTickets:47,avgResponseTime:"2.5 hours",avgResolutionTime:"1.2 days",satisfactionScore:4.6},trends:{daily:[{date:"Mon",tickets:15,resolved:12},{date:"Tue",tickets:18,resolved:14},{date:"Wed",tickets:22,resolved:19},{date:"Thu",tickets:16,resolved:13},{date:"Fri",tickets:20,resolved:17},{date:"Sat",tickets:8,resolved:6},{date:"Sun",tickets:5,resolved:4}],weekly:[],monthly:[]},categories:[{name:"Technical Issues",count:45,percentage:28.8},{name:"Billing Questions",count:32,percentage:20.5},{name:"Account Access",count:28,percentage:17.9},{name:"Feature Requests",count:25,percentage:16},{name:"General Support",count:26,percentage:16.7}],topIssues:[{issue:"Login Problems",count:18,trend:"up"},{issue:"Payment Processing",count:15,trend:"down"},{issue:"System Slowdown",count:12,trend:"up"},{issue:"Feature Not Working",count:10,trend:"stable"},{issue:"Account Locked",count:8,trend:"down"}],staffPerformance:[{name:"John Smith",tickets:45,avgTime:2.1,satisfaction:4.8},{name:"Sarah Johnson",tickets:38,avgTime:2.3,satisfaction:4.7},{name:"Mike Davis",tickets:42,avgTime:2,satisfaction:4.9},{name:"Lisa Wilson",tickets:31,avgTime:2.5,satisfaction:4.6}]})}catch(E){console.error("Error loading analytics:",E),s({overview:{totalTickets:156,openTickets:12,inProgressTickets:8,resolvedTickets:89,closedTickets:47,avgResponseTime:"2.5 hours",avgResolutionTime:"1.2 days",satisfactionScore:4.6},trends:{daily:[{date:"Mon",tickets:15,resolved:12},{date:"Tue",tickets:18,resolved:14},{date:"Wed",tickets:22,resolved:19},{date:"Thu",tickets:16,resolved:13},{date:"Fri",tickets:20,resolved:17},{date:"Sat",tickets:8,resolved:6},{date:"Sun",tickets:5,resolved:4}],weekly:[],monthly:[]},categories:[{name:"Technical Issues",count:45,percentage:28.8},{name:"Billing Questions",count:32,percentage:20.5},{name:"Account Access",count:28,percentage:17.9},{name:"Feature Requests",count:25,percentage:16},{name:"General Support",count:26,percentage:16.7}],topIssues:[{issue:"Login Problems",count:18,trend:"up"},{issue:"Payment Processing",count:15,trend:"down"},{issue:"System Slowdown",count:12,trend:"up"},{issue:"Feature Not Working",count:10,trend:"stable"},{issue:"Account Locked",count:8,trend:"down"}],staffPerformance:[{name:"John Smith",tickets:45,avgTime:2.1,satisfaction:4.8},{name:"Sarah Johnson",tickets:38,avgTime:2.3,satisfaction:4.7},{name:"Mike Davis",tickets:42,avgTime:2,satisfaction:4.9},{name:"Lisa Wilson",tickets:31,avgTime:2.5,satisfaction:4.6}]})}finally{a(!1)}},o=E=>{switch(E){case"up":return e.jsx(_t,{className:"h-4 w-4 text-green-600"});case"down":return e.jsx(_t,{className:"h-4 w-4 text-red-600 transform rotate-180"});default:return e.jsx(ys,{className:"h-4 w-4 text-gray-600"})}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ticket Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights into ticket performance and trends"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:n,onChange:E=>i(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((c=t.overview)==null?void 0:c.totalTickets)||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Rs,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Open Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((u=t.overview)==null?void 0:u.openTickets)||0})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((d=t.overview)==null?void 0:d.avgResponseTime)||"0 hours"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Satisfaction Score"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((m=t.overview)==null?void 0:m.satisfactionScore)||0,"/5"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Fs,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ut,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Avg Response Time"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Time to first response"})]})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:((x=t.overview)==null?void 0:x.avgResponseTime)||"0 hours"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Avg Resolution Time"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Time to complete resolution"})]})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:((g=t.overview)==null?void 0:g.avgResolutionTime)||"0 days"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fs,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Satisfaction Score"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Customer satisfaction rating"})]})]}),e.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[((p=t.overview)==null?void 0:p.satisfactionScore)||0,"/5"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xt,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Resolved This Week"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets resolved this week"})]})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:((f=t.overview)==null?void 0:f.resolvedTickets)||0})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ticket Status Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Open"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets awaiting response"})]})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:((b=t.overview)==null?void 0:b.openTickets)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ut,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets being worked on"})]})]}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:((y=t.overview)==null?void 0:y.inProgressTickets)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Resolved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Successfully resolved tickets"})]})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:((v=t.overview)==null?void 0:v.resolvedTickets)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Yt,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Closed"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Closed tickets"})]})]}),e.jsx("p",{className:"text-lg font-bold text-gray-600",children:((N=t.overview)==null?void 0:N.closedTickets)||0})]})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Trends"}),e.jsx("div",{className:"grid grid-cols-7 gap-4",children:((w=(S=t.trends)==null?void 0:S.daily)==null?void 0:w.map((E,R)=>e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:E.date}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:E.tickets}),e.jsxs("p",{className:"text-xs text-green-600",children:["+",E.resolved]})]})},R)))||e.jsx("div",{className:"col-span-7 text-center py-8 text-gray-500",children:"No trend data available"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ticket Categories"}),e.jsx("div",{className:"space-y-3",children:((C=t.categories)==null?void 0:C.map((E,R)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:E.count}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",E.percentage,"%)"]})]})]},R)))||e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No category data available"})})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Issues"}),e.jsx("div",{className:"space-y-3",children:((j=t.topIssues)==null?void 0:j.map((E,R)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[o(E.trend),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.issue})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:E.count})]},R)))||e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No issue data available"})})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Staff Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets Handled"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Satisfaction"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((k=t.staffPerformance)==null?void 0:k.map((E,R)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:E.name.split(" ").map(D=>D[0]).join("")})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:E.tickets})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:E.avgTime||E.avgResolution||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[E.satisfaction,"/5"]}),e.jsx("div",{className:"ml-2 flex items-center",children:[...Array(5)].map((D,P)=>e.jsx(Fs,{className:`h-4 w-4 ${P<Math.floor(E.satisfaction)?"text-yellow-400 fill-current":"text-gray-300"}`},P))})]})})]},R)))||e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No staff performance data available"})})})]})})]})]})},Mne=()=>{var y,v,N;const t=Ms(),{id:s}=Nx(),[r,a]=h.useState(null),[n,i]=h.useState(!0),[l,o]=h.useState(!1),[c,u]=h.useState(""),[d,m]=h.useState("in_progress"),[x,g]=h.useState("");h.useEffect(()=>{(async()=>{try{i(!0);const w=await us.getTicketById(s);w!=null&&w.success&&a(w.data)}catch{M.error("Failed to load ticket")}finally{i(!1)}})()},[s]);const p=()=>t("/support/tickets"),f=async()=>{if(c.trim())try{o(!0);const S=await us.addComment(s,c.trim());S!=null&&S.success?(a(S.data),u(""),M.success("Comment added")):M.error((S==null?void 0:S.message)||"Failed to add comment")}catch(S){M.error(S.message||"Failed to add comment")}finally{o(!1)}},b=async()=>{if(d)try{o(!0);const S=await us.updateTicketStatus(s,d,x);S!=null&&S.success?(a(S.data),M.success("Status updated")):M.error((S==null?void 0:S.message)||"Failed to update status")}catch(S){M.error(S.message||"Failed to update status")}finally{o(!1)}};return n?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ticket..."})]}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:p,className:"mr-3 inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(vr,{className:"h-4 w-4 mr-1"})," Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Ticket #",(y=r._id)==null?void 0:y.slice(-6)]}),e.jsx("p",{className:"text-gray-600",children:r.title})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-gray-50 text-gray-700 border border-gray-200",children:[r.status==="open"&&e.jsx(Ze,{className:"h-4 w-4 mr-1"})||r.status==="in_progress"&&e.jsx(ut,{className:"h-4 w-4 mr-1"})||r.status==="resolved"&&e.jsx(Be,{className:"h-4 w-4 mr-1"})||r.status==="closed"&&e.jsx(Yt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"capitalize",children:(v=r.status)==null?void 0:v.replace("_"," ")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-green-600"}),"Created"]}),e.jsx("div",{className:"text-sm font-semibold",children:new Date(r==null?void 0:r.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"Category"}),e.jsx("div",{className:"text-sm font-semibold capitalize",children:r==null?void 0:r.category})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"Priority"}),e.jsx("div",{className:"text-sm font-semibold capitalize",children:r==null?void 0:r.priority})]})]}),e.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap",children:r==null?void 0:r.description})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Rs,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Comments"})]}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto pr-1",children:((r==null?void 0:r.comments)||[]).length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No comments yet."}):(N=r==null?void 0:r.comments)==null?void 0:N.slice().sort((S,w)=>new Date(S.createdAt)-new Date(w.createdAt)).map((S,w)=>{var C,j;return e.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[(C=S==null?void 0:S.author)==null?void 0:C.firstName," ",(j=S==null?void 0:S.author)==null?void 0:j.lastName,e.jsx("span",{className:"ml-2 text-xs text-gray-500 uppercase",children:S.authorRole})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(S==null?void 0:S.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-wrap",children:S==null?void 0:S.message})]},w)})}),e.jsxs("div",{className:"mt-4 flex items-end space-x-2",children:[e.jsx("textarea",{value:c,onChange:S=>u(S.target.value),rows:2,placeholder:"Add a comment...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"}),e.jsxs("button",{onClick:f,disabled:l||!c.trim(),className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(d2,{className:"h-4 w-4 mr-2"})," Post"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 h-fit",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Update Status"}),e.jsxs("select",{value:d,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-3",children:[e.jsx("option",{value:"in_progress",children:"In Progress - Start working"}),e.jsx("option",{value:"resolved",children:"Resolved - Work completed"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx("textarea",{value:x,onChange:S=>g(S.target.value),rows:5,placeholder:"Feedback / Work details (required for resolved/closed)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-3"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:b,disabled:l,className:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[d==="in_progress"?e.jsx(Sx,{className:"h-4 w-4 mr-2"}):e.jsx(hi,{className:"h-4 w-4 mr-2"}),"Update Status"]})})]})]})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Ticket not found"}),e.jsx("button",{onClick:p,className:"mt-4 inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Back"})]})},Bne=()=>{var S,w,C,j,k,E,R,D,P,T,B,F,L,I,V,_,G,U,A,q,Y,O,W;const[t,s]=h.useState({overview:{totalTickets:0,openTickets:0,inProgressTickets:0,resolvedTickets:0,closedTickets:0,avgResponseTime:"0 hours",avgResolutionTime:"0 days",satisfactionScore:0,totalRevenue:0,activePGs:0,totalResidents:0},trends:{daily:[],weekly:[],monthly:[]},categories:[],topIssues:[],staffPerformance:[],pgPerformance:[],realTimeStats:{ticketsCreatedToday:0,ticketsResolvedToday:0,activeSupportStaff:0,avgWaitTime:"0 minutes"}}),[r,a]=h.useState(!0),[n,i]=h.useState("week"),[l,o]=h.useState("all"),[c,u]=h.useState("all"),[d,m]=h.useState("all"),[x,g]=h.useState(!0),[p,f]=h.useState(new Date);h.useEffect(()=>{if(b(),x){const z=setInterval(()=>{b(),f(new Date)},3e4);return()=>clearInterval(z)}},[n,l,c,d,x]);const b=async()=>{try{a(!0);const z=await us.getSuperadminAnalytics(n,{pg:l,category:c,status:d});z.success&&z.data?s(z.data):s({overview:{totalTickets:1250,openTickets:45,inProgressTickets:28,resolvedTickets:980,closedTickets:197,avgResponseTime:"2.3 hours",avgResolutionTime:"1.1 days",satisfactionScore:4.6,totalRevenue:125e3,activePGs:15,totalResidents:450},trends:{daily:[{date:"Mon",tickets:25,resolved:22,revenue:2500},{date:"Tue",tickets:32,resolved:28,revenue:3200},{date:"Wed",tickets:28,resolved:25,revenue:2800},{date:"Thu",tickets:35,resolved:30,revenue:3500},{date:"Fri",tickets:30,resolved:27,revenue:3e3},{date:"Sat",tickets:15,resolved:12,revenue:1500},{date:"Sun",tickets:12,resolved:10,revenue:1200}],weekly:[],monthly:[]},categories:[{name:"Maintenance",count:320,percentage:25.6,avgResolution:"1.2 days"},{name:"Billing",count:280,percentage:22.4,avgResolution:"0.8 days"},{name:"Technical",count:200,percentage:16,avgResolution:"1.5 days"},{name:"General",count:180,percentage:14.4,avgResolution:"1.0 days"},{name:"Emergency",count:150,percentage:12,avgResolution:"0.5 days"},{name:"Other",count:120,percentage:9.6,avgResolution:"1.8 days"}],topIssues:[{issue:"Payment Processing",count:85,trend:"up",avgResolution:"4 hours"},{issue:"Room Maintenance",count:72,trend:"down",avgResolution:"1 day"},{issue:"WiFi Connectivity",count:65,trend:"up",avgResolution:"2 hours"},{issue:"Cleaning Services",count:58,trend:"stable",avgResolution:"6 hours"},{issue:"Security Concerns",count:45,trend:"down",avgResolution:"1 hour"}],staffPerformance:[{name:"John Doe",tickets:145,avgResolution:"2.1 hours",satisfaction:4.8,efficiency:95},{name:"Sarah Johnson",tickets:132,avgResolution:"2.3 hours",satisfaction:4.7,efficiency:92},{name:"Mike Davis",tickets:128,avgResolution:"2.0 hours",satisfaction:4.9,efficiency:98},{name:"Lisa Wilson",tickets:118,avgResolution:"2.5 hours",satisfaction:4.6,efficiency:89},{name:"David Brown",tickets:105,avgResolution:"2.8 hours",satisfaction:4.5,efficiency:87}],pgPerformance:[{name:"Sunrise PG",tickets:180,avgResolution:"1.8 days",satisfaction:4.7,revenue:25e3},{name:"Green Valley",tickets:165,avgResolution:"2.1 days",satisfaction:4.6,revenue:22e3},{name:"City Center",tickets:142,avgResolution:"1.9 days",satisfaction:4.8,revenue:2e4},{name:"University Heights",tickets:128,avgResolution:"2.3 days",satisfaction:4.5,revenue:18e3},{name:"Downtown Plaza",tickets:115,avgResolution:"2.0 days",satisfaction:4.7,revenue:16e3}],realTimeStats:{ticketsCreatedToday:12,ticketsResolvedToday:15,activeSupportStaff:8,avgWaitTime:"15 minutes"}})}catch(z){console.error("Error loading analytics:",z),s({overview:{totalTickets:1250,openTickets:45,inProgressTickets:28,resolvedTickets:980,closedTickets:197,avgResponseTime:"2.3 hours",avgResolutionTime:"1.1 days",satisfactionScore:4.6,totalRevenue:125e3,activePGs:15,totalResidents:450},trends:{daily:[{date:"Mon",tickets:25,resolved:22,revenue:2500},{date:"Tue",tickets:32,resolved:28,revenue:3200},{date:"Wed",tickets:28,resolved:25,revenue:2800},{date:"Thu",tickets:35,resolved:30,revenue:3500},{date:"Fri",tickets:30,resolved:27,revenue:3e3},{date:"Sat",tickets:15,resolved:12,revenue:1500},{date:"Sun",tickets:12,resolved:10,revenue:1200}],weekly:[],monthly:[]},categories:[{name:"Maintenance",count:320,percentage:25.6,avgResolution:"1.2 days"},{name:"Billing",count:280,percentage:22.4,avgResolution:"0.8 days"},{name:"Technical",count:200,percentage:16,avgResolution:"1.5 days"},{name:"General",count:180,percentage:14.4,avgResolution:"1.0 days"},{name:"Emergency",count:150,percentage:12,avgResolution:"0.5 days"},{name:"Other",count:120,percentage:9.6,avgResolution:"1.8 days"}],topIssues:[{issue:"Payment Processing",count:85,trend:"up",avgResolution:"4 hours"},{issue:"Room Maintenance",count:72,trend:"down",avgResolution:"1 day"},{issue:"WiFi Connectivity",count:65,trend:"up",avgResolution:"2 hours"},{issue:"Cleaning Services",count:58,trend:"stable",avgResolution:"6 hours"},{issue:"Security Concerns",count:45,trend:"down",avgResolution:"1 hour"}],staffPerformance:[{name:"John Doe",tickets:145,avgResolution:"2.1 hours",satisfaction:4.8,efficiency:95},{name:"Sarah Johnson",tickets:132,avgResolution:"2.3 hours",satisfaction:4.7,efficiency:92},{name:"Mike Davis",tickets:128,avgResolution:"2.0 hours",satisfaction:4.9,efficiency:98},{name:"Lisa Wilson",tickets:118,avgResolution:"2.5 hours",satisfaction:4.6,efficiency:89},{name:"David Brown",tickets:105,avgResolution:"2.8 hours",satisfaction:4.5,efficiency:87}],pgPerformance:[{name:"Sunrise PG",tickets:180,avgResolution:"1.8 days",satisfaction:4.7,revenue:25e3},{name:"Green Valley",tickets:165,avgResolution:"2.1 days",satisfaction:4.6,revenue:22e3},{name:"City Center",tickets:142,avgResolution:"1.9 days",satisfaction:4.8,revenue:2e4},{name:"University Heights",tickets:128,avgResolution:"2.3 days",satisfaction:4.5,revenue:18e3},{name:"Downtown Plaza",tickets:115,avgResolution:"2.0 days",satisfaction:4.7,revenue:16e3}],realTimeStats:{ticketsCreatedToday:12,ticketsResolvedToday:15,activeSupportStaff:8,avgWaitTime:"15 minutes"}})}finally{a(!1)}},y=z=>{switch(z){case"up":return e.jsx(_t,{className:"h-4 w-4 text-green-600"});case"down":return e.jsx(Jd,{className:"h-4 w-4 text-red-600"});default:return e.jsx(ys,{className:"h-4 w-4 text-gray-600"})}},v=z=>z>=90?"text-green-600":z>=80?"text-yellow-600":"text-red-600",N=()=>{const z=JSON.stringify(t,null,2),H=new Blob([z],{type:"application/json"}),Q=URL.createObjectURL(H),J=document.createElement("a");J.href=Q,J.download=`ticket-analytics-${new Date().toISOString().split("T")[0]}.json`,J.click(),URL.revokeObjectURL(Q)};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Real-time Ticket Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights across all PG properties"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm text-gray-600",children:x?"Auto-refresh ON":"Auto-refresh OFF"})]}),e.jsxs("button",{onClick:()=>g(!x),className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(wt,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),x?"Disable":"Enable"," Auto-refresh"]}),e.jsxs("button",{onClick:b,className:"flex items-center px-3 py-2 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:N,className:"flex items-center px-3 py-2 text-sm text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:[e.jsx(xr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-800",children:["Last updated: ",p.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:n,onChange:z=>i(z.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("select",{value:l,onChange:z=>o(z.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All PGs"}),e.jsx("option",{value:"sunrise",children:"Sunrise PG"}),e.jsx("option",{value:"green-valley",children:"Green Valley"}),e.jsx("option",{value:"city-center",children:"City Center"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-100",children:"Tickets Created Today"}),e.jsx("p",{className:"text-2xl font-bold",children:((S=t.realTimeStats)==null?void 0:S.ticketsCreatedToday)||0})]}),e.jsx("div",{className:"p-3 bg-blue-400 rounded-lg",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-100",children:"Tickets Resolved Today"}),e.jsx("p",{className:"text-2xl font-bold",children:((w=t.realTimeStats)==null?void 0:w.ticketsResolvedToday)||0})]}),e.jsx("div",{className:"p-3 bg-green-400 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-100",children:"Active Support Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:((C=t.realTimeStats)==null?void 0:C.activeSupportStaff)||0})]}),e.jsx("div",{className:"p-3 bg-purple-400 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-orange-500 to-orange-600 p-6 rounded-xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-100",children:"Avg Wait Time"}),e.jsx("p",{className:"text-2xl font-bold",children:((j=t.realTimeStats)==null?void 0:j.avgWaitTime)||"0 minutes"})]}),e.jsx("div",{className:"p-3 bg-orange-400 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((k=t.overview)==null?void 0:k.totalTickets)||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Jt,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",((R=(E=t.overview)==null?void 0:E.totalRevenue)==null?void 0:R.toLocaleString())||0]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ga,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active PGs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((D=t.overview)==null?void 0:D.activePGs)||0})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(yg,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Residents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((P=t.overview)==null?void 0:P.totalResidents)||0})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ut,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Avg Response Time"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Time to first response"})]})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:((T=t.overview)==null?void 0:T.avgResponseTime)||"0 hours"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Avg Resolution Time"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Time to complete resolution"})]})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:((B=t.overview)==null?void 0:B.avgResolutionTime)||"0 days"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fs,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Satisfaction Score"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Customer satisfaction rating"})]})]}),e.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[((F=t.overview)==null?void 0:F.satisfactionScore)||0,"/5"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Open Tickets"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets awaiting response"})]})]}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:((L=t.overview)==null?void 0:L.openTickets)||0})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ticket Status Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Open"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets awaiting response"})]})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:((I=t.overview)==null?void 0:I.openTickets)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ut,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Tickets being worked on"})]})]}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:((V=t.overview)==null?void 0:V.inProgressTickets)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Resolved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Successfully resolved tickets"})]})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:((_=t.overview)==null?void 0:_.resolvedTickets)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Yt,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Closed"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Closed tickets"})]})]}),e.jsx("p",{className:"text-lg font-bold text-gray-600",children:((G=t.overview)==null?void 0:G.closedTickets)||0})]})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Trends"}),e.jsx("div",{className:"grid grid-cols-7 gap-4",children:((A=(U=t.trends)==null?void 0:U.daily)==null?void 0:A.map((z,H)=>e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-50 to-blue-100 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:z.date}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:z.tickets}),e.jsxs("p",{className:"text-xs text-green-600",children:["+",z.resolved]}),e.jsxs("p",{className:"text-xs text-purple-600",children:["₹",z.revenue]})]})},H)))||e.jsx("div",{className:"col-span-7 text-center py-8 text-gray-500",children:"No trend data available"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ticket Categories"}),e.jsx("div",{className:"space-y-3",children:((q=t.categories)==null?void 0:q.map((z,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:z.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",z.avgResolution]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:z.count}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",z.percentage,"%)"]})]})]},H)))||e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No category data available"})})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.3},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Issues"}),e.jsx("div",{className:"space-y-3",children:((Y=t.topIssues)==null?void 0:Y.map((z,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[y(z.trend),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:z.issue}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",z.avgResolution]})]})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:z.count})]},H)))||e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No issue data available"})})]})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Staff Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets Handled"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Resolution"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Satisfaction"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Efficiency"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((O=t.staffPerformance)==null?void 0:O.map((z,H)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:z.name.split(" ").map(Q=>Q[0]).join("")})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:z.tickets})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:z.avgResolution})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[z.satisfaction,"/5"]}),e.jsx("div",{className:"ml-2 flex items-center",children:[...Array(5)].map((Q,J)=>e.jsx(Fs,{className:`h-4 w-4 ${J<Math.floor(z.satisfaction)?"text-yellow-400 fill-current":"text-gray-300"}`},J))})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`text-sm font-bold ${v(z.efficiency)}`,children:[z.efficiency,"%"]})})]},H)))||e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No staff performance data available"})})})]})})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"PG Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PG Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Tickets"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Resolution"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Satisfaction"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((W=t.pgPerformance)==null?void 0:W.map((z,H)=>{var Q;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(yg,{className:"h-4 w-4 text-purple-600"})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:z.tickets})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:z.avgResolution})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[z.satisfaction,"/5"]}),e.jsx("div",{className:"ml-2 flex items-center",children:[...Array(5)].map((J,ie)=>e.jsx(Fs,{className:`h-4 w-4 ${ie<Math.floor(z.satisfaction)?"text-yellow-400 fill-current":"text-gray-300"}`},ie))})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-600",children:["₹",(Q=z.revenue)==null?void 0:Q.toLocaleString()]})})]},H)}))||e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No PG performance data available"})})})]})})]})]})},Lne=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!1),[n,i]=h.useState({page:1,limit:20,sort:"-timestamp"}),[l,o]=h.useState({page:1,limit:20,total:0,pages:0}),[c,u]=h.useState(""),[d,m]=h.useState(""),[x,g]=h.useState(""),[p,f]=h.useState(""),[b,y]=h.useState("");h.useEffect(()=>{v()},[n]);const v=async()=>{try{a(!0);const S=await en.getSuperadminActivities({...n,q:c,type:d,category:x,status:p,userRole:b});S.success?(s(S.data),o(S.pagination)):M.error(S.message||"Failed to load activities")}catch{M.error("Failed to load activities")}finally{a(!1)}},N=S=>new Date(S).toLocaleString("en-IN");return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ys,{className:"h-7 w-7 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recent Activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:v,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsx(wt,{className:`h-5 w-5 ${r?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search activities...",value:c,onChange:S=>u(S.target.value),onKeyDown:S=>{S.key==="Enter"&&i(w=>({...w,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:x,onChange:S=>{g(S.target.value),i(w=>({...w,page:1}))},children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"authentication",children:"Authentication"}),e.jsx("option",{value:"pg",children:"PG"}),e.jsx("option",{value:"branch",children:"Branch"}),e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"support",children:"Support/Tickets"}),e.jsx("option",{value:"report",children:"Report"}),e.jsx("option",{value:"notification",children:"Notification"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p,onChange:S=>{f(S.target.value),i(w=>({...w,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"info",children:"Info"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:b,onChange:S=>{y(S.target.value),i(w=>({...w,page:1}))},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"superadmin",children:"Superadmin"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"support",children:"Support"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:n.sort,onChange:S=>i(w=>({...w,sort:S.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",l.page," of ",l.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading activities..."})]}):t.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"No activities found"}):t.map(S=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.title}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-700",children:S.category}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${S.status==="success"?"bg-green-100 text-green-700":S.status==="failed"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:S.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["User: ",S.userEmail," (",S.userRole,")"]}),S.branchName&&e.jsxs("span",{children:["Branch: ",S.branchName]}),S.entityName&&e.jsxs("span",{children:["Entity: ",S.entityName]}),e.jsx("span",{children:N(S.timestamp)})]})]})})},S._id))}),l.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," - ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===1,onClick:()=>i(S=>({...S,page:S.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===l.pages,onClick:()=>i(S=>({...S,page:S.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]})]})},$ne=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!1),[n,i]=h.useState({page:1,limit:20,sort:"-timestamp",category:"support"}),[l,o]=h.useState({page:1,limit:20,total:0,pages:0}),[c,u]=h.useState(""),[d,m]=h.useState(""),[x,g]=h.useState(""),[p,f]=h.useState("");h.useEffect(()=>{b()},[n]);const b=async()=>{try{a(!0);const v=await en.getSuperadminActivities({...n,q:c,status:d,userRole:x,type:p});v.success?(s(v.data),o(v.pagination)):M.error(v.message||"Failed to load ticket activities")}catch{M.error("Failed to load ticket activities")}finally{a(!1)}},y=v=>new Date(v).toLocaleString("en-IN");return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Cr,{className:"h-7 w-7 text-orange-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ticket Activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:b,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsx(wt,{className:`h-5 w-5 ${r?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search ticket activities...",value:c,onChange:v=>u(v.target.value),onKeyDown:v=>{v.key==="Enter"&&i(N=>({...N,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p,onChange:v=>{f(v.target.value),i(N=>({...N,page:1}))},children:[e.jsx("option",{value:"",children:"All Ticket Types"}),e.jsx("option",{value:"ticket_create",children:"Created"}),e.jsx("option",{value:"ticket_update",children:"Updated"}),e.jsx("option",{value:"ticket_assign",children:"Assigned"}),e.jsx("option",{value:"ticket_resolve",children:"Resolved"}),e.jsx("option",{value:"ticket_close",children:"Closed"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:d,onChange:v=>{m(v.target.value),i(N=>({...N,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"info",children:"Info"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:x,onChange:v=>{g(v.target.value),i(N=>({...N,page:1}))},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"superadmin",children:"Superadmin"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"support",children:"Support"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:n.sort,onChange:v=>i(N=>({...N,sort:v.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",l.page," of ",l.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading ticket activities..."})]}):t.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"No ticket activities found"}):t.map(v=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:v.title}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-orange-100 text-orange-700",children:"Support"}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${v.status==="success"?"bg-green-100 text-green-700":v.status==="failed"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:v.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:v.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["User: ",v.userEmail," (",v.userRole,")"]}),v.entityName&&e.jsxs("span",{children:["Ticket: ",v.entityName]}),e.jsx("span",{children:y(v.timestamp)})]})]})})},v._id))}),l.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," - ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===1,onClick:()=>i(v=>({...v,page:v.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===l.pages,onClick:()=>i(v=>({...v,page:v.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]})]})},Une=t=>({wrap:"p-2 rounded-lg",icon:t==="payment"?{wrap:"bg-emerald-100 text-emerald-600",Icon:Ft}:t==="support"?{wrap:"bg-orange-100 text-orange-600",Icon:Cr}:t==="authentication"?{wrap:"bg-purple-100 text-purple-600",Icon:is}:t==="management"?{wrap:"bg-blue-100 text-blue-600",Icon:Ie}:t==="resident"?{wrap:"bg-teal-100 text-teal-600",Icon:Je}:t==="document"?{wrap:"bg-amber-100 text-amber-600",Icon:ns}:t==="system"?{wrap:"bg-red-100 text-red-600",Icon:Es}:{wrap:"bg-gray-100 text-gray-600",Icon:ys}}),pc=({children:t,color:s="gray"})=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${s==="green"?"bg-green-50 text-green-700 border-green-200":s==="red"?"bg-red-50 text-red-700 border-red-200":s==="yellow"?"bg-yellow-50 text-yellow-700 border-yellow-200":s==="blue"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:t}),Hne=({open:t,onClose:s,item:r})=>{const[a,n]=h.useState([]),[i,l]=h.useState(!1);h.useEffect(()=>{t&&(async()=>{if(!(r!=null&&r.entityType)||!(r!=null&&r.entityId)){n([]);return}try{l(!0);const u=await en.getEntityTimeline(r.entityType,r.entityId);u!=null&&u.success?n(u.data||[]):n([])}catch{n([])}finally{l(!1)}})()},[t,r==null?void 0:r.entityType,r==null?void 0:r.entityId]);const o=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),M.success("Details copied")}catch{M.error("Copy failed")}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"flex-1 bg-black/30",onClick:s}),e.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl border-l border-gray-200 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Activity Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50",children:e.jsx(Cx,{className:"h-4 w-4 text-gray-500"})}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"Close"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Title:"})," ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Description:"})," ",e.jsx("span",{children:r==null?void 0:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pc,{children:(r==null?void 0:r.category)||"general"}),e.jsx(pc,{color:(r==null?void 0:r.status)==="success"?"green":(r==null?void 0:r.status)==="failed"?"red":"yellow",children:(r==null?void 0:r.status)||"info"}),e.jsx(pc,{color:(r==null?void 0:r.userRole)==="superadmin"?"blue":"gray",children:r==null?void 0:r.userRole})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"})," ",e.jsx("span",{children:r==null?void 0:r.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Priority:"})," ",e.jsx("span",{children:(r==null?void 0:r.priority)||"normal"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"User:"})," ",e.jsxs("span",{children:[r==null?void 0:r.userEmail," (",r==null?void 0:r.userRole,")"]})]}),(r==null?void 0:r.branchName)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Branch:"})," ",e.jsx("span",{children:r.branchName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Time:"})," ",e.jsx("span",{children:new Date(r==null?void 0:r.timestamp).toLocaleString("en-IN")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"IP:"})," ",e.jsx("span",{children:(r==null?void 0:r.ipAddress)||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Agent:"})," ",e.jsx("span",{className:"break-all",children:(r==null?void 0:r.userAgent)||"-"})]})]}),(r==null?void 0:r.entityType)&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-500",children:"Entity"}),e.jsx("div",{className:"text-xs text-gray-400",children:r.entityType})]}),e.jsx("div",{className:"text-xs",children:r.entityName||r.entityId})]}),(r==null?void 0:r.metadata)&&Object.keys(r.metadata).length>0&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Metadata"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded border border-gray-200 text-xs whitespace-pre-wrap break-all",children:JSON.stringify(r.metadata,null,2)})]}),(r==null?void 0:r.entityType)&&(r==null?void 0:r.entityId)&&e.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:"Recent Timeline"}),i?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading timeline…"}):a.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No related activity"}):e.jsx("div",{className:"space-y-2",children:a.slice(0,6).map(c=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900",children:c.title}),e.jsx("div",{className:"text-gray-600",children:c.description}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[new Date(c.timestamp).toLocaleString("en-IN")," • ",c.userEmail]})]})]},c._id))})]})]})]})]}):null},Wne=()=>{He(Pl);const[t,s]=h.useState([]),[r,a]=h.useState(!1),[n,i]=h.useState({page:1,limit:20,sort:"-timestamp"}),[l,o]=h.useState({page:1,limit:20,total:0,pages:0}),[c,u]=h.useState(""),[d,m]=h.useState(""),[x,g]=h.useState(""),[p,f]=h.useState(""),[b,y]=h.useState(""),[v,N]=h.useState(null);h.useEffect(()=>{S()},[n]);const S=async()=>{try{a(!0);const j=await en.getSuperadminActivities({...n,q:c,type:d,category:x,status:p,userRole:b});j.success?(s(j.data),o(j.pagination)):M.error(j.message||"Failed to load superadmin activities")}catch{M.error("Failed to load superadmin activities")}finally{a(!1)}},w=j=>new Date(j).toLocaleString("en-IN"),C=async()=>{try{const j=new URLSearchParams({...n,q:c,type:d,category:x,status:p,userRole:b}),E=`${"/api".replace(/\/$/,"")}/activities/export/csv?${j.toString()}`;window.open(E,"_blank")}catch{M.error("Export failed")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vn,{className:"h-7 w-7 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Superadmin & Support Activities"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View and track superadmin and support staff actions and logs"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:C,className:"px-3 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm shadow-sm",children:[e.jsx(xr,{className:"h-4 w-4"})," CSV"]}),e.jsx("button",{onClick:S,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(wt,{className:`h-5 w-5 ${r?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search superadmin activities...",value:c,onChange:j=>u(j.target.value),onKeyDown:j=>{j.key==="Enter"&&i(k=>({...k,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:x,onChange:j=>{g(j.target.value),i(k=>({...k,page:1}))},children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"authentication",children:"Authentication"}),e.jsx("option",{value:"management",children:"Management"}),e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"support",children:"Support/Tickets"}),e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:d,onChange:j=>{m(j.target.value),i(k=>({...k,page:1}))},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"user_login",children:"User Login"}),e.jsx("option",{value:"pg_create",children:"PG Created"}),e.jsx("option",{value:"pg_update",children:"PG Updated"}),e.jsx("option",{value:"support_staff_create",children:"Support Staff Created"}),e.jsx("option",{value:"support_staff_update",children:"Support Staff Updated"}),e.jsx("option",{value:"ticket_assign",children:"Ticket Assigned"}),e.jsx("option",{value:"ticket_resolve",children:"Ticket Resolved"}),e.jsx("option",{value:"system_backup",children:"System Backup"}),e.jsx("option",{value:"system_maintenance",children:"System Maintenance"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p,onChange:j=>{f(j.target.value),i(k=>({...k,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:b,onChange:j=>{y(j.target.value),i(k=>({...k,page:1}))},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"superadmin",children:"Superadmin"}),e.jsx("option",{value:"support",children:"Support"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:n.sort,onChange:j=>i(k=>({...k,sort:j.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",l.page," of ",l.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:r?e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-3",children:"Loading superadmin activities..."})]}):t.length===0?e.jsxs("div",{className:"p-16 text-center",children:[e.jsx(vn,{className:"h-10 w-10 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No superadmin activities found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Superadmin and support activities will appear here"})]}):t.map(j=>{const k=Une(j.category),{wrap:E,icon:R}=k,D=R.wrap,P=R.Icon;return e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>N(j),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`${E} ${D}`,children:e.jsx(P,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:j.title}),e.jsx(pc,{children:j.category||"general"}),e.jsx(pc,{color:j.status==="success"?"green":j.status==="failed"?"red":"yellow",children:j.status}),e.jsx(pc,{color:j.userRole==="superadmin"?"blue":"gray",children:j.userRole})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:j.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:[j.userRole==="superadmin"?"Superadmin":"Support",": ",j.userEmail]}),j.branchName&&e.jsxs("span",{children:["Branch: ",j.branchName]}),e.jsx("span",{children:w(j.timestamp)})]})]})]})},j._id)})}),l.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," - ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===1,onClick:()=>i(j=>({...j,page:j.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===l.pages,onClick:()=>i(j=>({...j,page:j.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]}),e.jsx(Hne,{open:!!v,onClose:()=>N(null),item:v})]})},Vne=()=>{const t=He(Nr),s=(t==null?void 0:t._id)||(t==null?void 0:t.id),[r,a]=h.useState([]),[n,i]=h.useState(!1),[l,o]=h.useState({page:1,limit:20,sort:"-timestamp",category:"branch"}),[c,u]=h.useState({page:1,limit:20,total:0,pages:0}),[d,m]=h.useState(""),[x,g]=h.useState(""),[p,f]=h.useState(""),[b,y]=h.useState("");h.useEffect(()=>{s&&v()},[s,l]);const v=async()=>{try{i(!0);const S=await en.getAdminActivities({...l,q:d,type:x,status:p,branchId:s});S.success?(a(S.data),u(S.pagination)):M.error(S.message||"Failed to load branch activities")}catch{M.error("Failed to load branch activities")}finally{i(!1)}},N=S=>new Date(S).toLocaleString("en-IN");return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ie,{className:"h-7 w-7 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Branch Activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:v,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsx(wt,{className:`h-5 w-5 ${n?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),!s&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 text-yellow-700 rounded-lg border border-yellow-100",children:"Please select a branch to view its activities."}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search branch activities...",value:d,onChange:S=>m(S.target.value),onKeyDown:S=>{S.key==="Enter"&&o(w=>({...w,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:x,onChange:S=>{g(S.target.value),o(w=>({...w,page:1}))},children:[e.jsx("option",{value:"",children:"All Branch Types"}),e.jsx("option",{value:"branch_create",children:"Created"}),e.jsx("option",{value:"branch_update",children:"Updated"}),e.jsx("option",{value:"branch_delete",children:"Deleted"}),e.jsx("option",{value:"branch_set_default",children:"Set Default"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p,onChange:S=>{f(S.target.value),o(w=>({...w,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"info",children:"Info"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:b,onChange:S=>{y(S.target.value),o(w=>({...w,page:1}))},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"superadmin",children:"Superadmin"}),e.jsx("option",{value:"support",children:"Support"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:l.sort,onChange:S=>o(w=>({...w,sort:S.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",c.page," of ",c.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:n?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading branch activities..."})]}):r.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"No branch activities found"}):r.map(S=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.title}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700",children:"Branch"}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${S.status==="success"?"bg-green-100 text-green-700":S.status==="failed"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:S.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["User: ",S.userEmail," (",S.userRole,")"]}),S.branchName&&e.jsxs("span",{children:["Branch: ",S.branchName]}),e.jsx("span",{children:N(S.timestamp)})]})]})})},S._id))}),c.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(c.page-1)*c.limit+1," - ",Math.min(c.page*c.limit,c.total)," of ",c.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:c.page===1,onClick:()=>o(S=>({...S,page:S.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:c.page===c.pages,onClick:()=>o(S=>({...S,page:S.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]})]})},zne=t=>({wrap:"p-2 rounded-lg",icon:t==="payment"?{wrap:"bg-emerald-100 text-emerald-600",Icon:Ft}:t==="support"?{wrap:"bg-orange-100 text-orange-600",Icon:Cr}:t==="authentication"?{wrap:"bg-purple-100 text-purple-600",Icon:is}:t==="branch"?{wrap:"bg-blue-100 text-blue-600",Icon:Ie}:t==="resident"?{wrap:"bg-teal-100 text-teal-600",Icon:Je}:t==="document"?{wrap:"bg-amber-100 text-amber-600",Icon:ns}:{wrap:"bg-gray-100 text-gray-600",Icon:ys}}),jx=({children:t,color:s="gray"})=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${s==="green"?"bg-green-50 text-green-700 border-green-200":s==="red"?"bg-red-50 text-red-700 border-red-200":s==="yellow"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:t}),Gne=({open:t,onClose:s,item:r})=>{const[a,n]=h.useState([]),[i,l]=h.useState(!1);h.useEffect(()=>{t&&(async()=>{if(!(r!=null&&r.entityType)||!(r!=null&&r.entityId)){n([]);return}try{l(!0);const u=await en.getEntityTimeline(r.entityType,r.entityId);u!=null&&u.success?n(u.data||[]):n([])}catch{n([])}finally{l(!1)}})()},[t,r==null?void 0:r.entityType,r==null?void 0:r.entityId]);const o=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),M.success("Details copied")}catch{M.error("Copy failed")}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"flex-1 bg-black/30",onClick:s}),e.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl border-l border-gray-200 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Activity Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50",children:e.jsx(Cx,{className:"h-4 w-4 text-gray-500"})}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"Close"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Title:"})," ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Description:"})," ",e.jsx("span",{children:r==null?void 0:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jx,{children:(r==null?void 0:r.category)||"general"}),e.jsx(jx,{color:(r==null?void 0:r.status)==="success"?"green":(r==null?void 0:r.status)==="failed"?"red":"yellow",children:(r==null?void 0:r.status)||"info"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"})," ",e.jsx("span",{children:r==null?void 0:r.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Priority:"})," ",e.jsx("span",{children:(r==null?void 0:r.priority)||"normal"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"User:"})," ",e.jsxs("span",{children:[r==null?void 0:r.userEmail," (",r==null?void 0:r.userRole,")"]})]}),(r==null?void 0:r.branchName)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Branch:"})," ",e.jsx("span",{children:r.branchName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Time:"})," ",e.jsx("span",{children:new Date(r==null?void 0:r.timestamp).toLocaleString("en-IN")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"IP:"})," ",e.jsx("span",{children:(r==null?void 0:r.ipAddress)||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Agent:"})," ",e.jsx("span",{className:"break-all",children:(r==null?void 0:r.userAgent)||"-"})]})]}),(r==null?void 0:r.entityType)&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-500",children:"Entity"}),e.jsx("div",{className:"text-xs text-gray-400",children:r.entityType})]}),e.jsx("div",{className:"text-xs",children:r.entityName||r.entityId})]}),(r==null?void 0:r.metadata)&&Object.keys(r.metadata).length>0&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Metadata"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded border border-gray-200 text-xs whitespace-pre-wrap break-all",children:JSON.stringify(r.metadata,null,2)})]}),(r==null?void 0:r.entityType)&&(r==null?void 0:r.entityId)&&e.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:"Recent Timeline"}),i?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading timeline…"}):a.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No related activity"}):e.jsx("div",{className:"space-y-2",children:a.slice(0,6).map(c=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900",children:c.title}),e.jsx("div",{className:"text-gray-600",children:c.description}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[new Date(c.timestamp).toLocaleString("en-IN")," • ",c.userEmail]})]})]},c._id))})]})]})]})]}):null},qne=()=>{const t=He(Nr),[s,r]=h.useState([]),[a,n]=h.useState(!1),[i,l]=h.useState({page:1,limit:20,sort:"-timestamp"}),[o,c]=h.useState({page:1,limit:20,total:0,pages:0}),[u,d]=h.useState(""),[m,x]=h.useState(""),[g,p]=h.useState(""),[f,b]=h.useState(""),[y,v]=h.useState(""),[N,S]=h.useState(null);h.useEffect(()=>{w()},[i]);const w=async()=>{try{n(!0);const k=await en.getAdminActivities({...i,q:u,type:m,category:g,status:f,branchId:t==null?void 0:t._id});k.success?(r(k.data),c(k.pagination)):M.error(k.message||"Failed to load activities")}catch{M.error("Failed to load activities")}finally{n(!1)}},C=k=>new Date(k).toLocaleString("en-IN"),j=async()=>{try{const k=new URLSearchParams({...i,q:u,type:m,category:g,status:f,branchId:t==null?void 0:t._id}),R=`${"/api".replace(/\/$/,"")}/activities/admin/export/csv?${k.toString()}`;window.open(R,"_blank")}catch{M.error("Export failed")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(kl,{className:"h-7 w-7 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:j,className:"px-3 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm shadow-sm",children:[e.jsx(xr,{className:"h-4 w-4"})," CSV"]}),e.jsx("button",{onClick:w,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(wt,{className:`h-5 w-5 ${a?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search activities...",value:u,onChange:k=>d(k.target.value),onKeyDown:k=>{k.key==="Enter"&&l(E=>({...E,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:g,onChange:k=>{p(k.target.value),l(E=>({...E,page:1}))},children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"authentication",children:"Authentication"}),e.jsx("option",{value:"pg",children:"PG"}),e.jsx("option",{value:"branch",children:"Branch"}),e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"support",children:"Support/Tickets"}),e.jsx("option",{value:"report",children:"Report"}),e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:m,onChange:k=>{x(k.target.value),l(E=>({...E,page:1}))},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"user_login",children:"User Login"}),e.jsx("option",{value:"pg_create",children:"PG Created"}),e.jsx("option",{value:"branch_update",children:"Branch Updated"}),e.jsx("option",{value:"resident_create",children:"Resident Created"}),e.jsx("option",{value:"payment_update",children:"Payment Updated"}),e.jsx("option",{value:"ticket_update",children:"Ticket Updated"}),e.jsx("option",{value:"report_generate",children:"Report Generated"}),e.jsx("option",{value:"document_upload",children:"Document Uploaded"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:f,onChange:k=>{b(k.target.value),l(E=>({...E,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"info",children:"Info"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:y,onChange:k=>{v(k.target.value),l(E=>({...E,page:1}))},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"superadmin",children:"Superadmin"}),e.jsx("option",{value:"support",children:"Support"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:i.sort,onChange:k=>l(E=>({...E,sort:k.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",o.page," of ",o.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:a?e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-3",children:"Loading activities..."})]}):s.length===0?e.jsxs("div",{className:"p-16 text-center",children:[e.jsx(ys,{className:"h-10 w-10 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No activities found"})]}):s.map(k=>{const E=zne(k.category),{wrap:R,icon:D}=E,P=D.wrap,T=D.Icon;return e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>S(k),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`${R} ${P}`,children:e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:k.title}),e.jsx(jx,{children:k.category||"general"}),e.jsx(jx,{color:k.status==="success"?"green":k.status==="failed"?"red":"yellow",children:k.status})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:k.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["User: ",k.userEmail," (",k.userRole,")"]}),k.branchName&&e.jsxs("span",{children:["Branch: ",k.branchName]}),e.jsx("span",{children:C(k.timestamp)})]})]})]})},k._id)})}),o.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(o.page-1)*o.limit+1," - ",Math.min(o.page*o.limit,o.total)," of ",o.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:o.page===1,onClick:()=>l(k=>({...k,page:k.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:o.page===o.pages,onClick:()=>l(k=>({...k,page:k.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]}),e.jsx(Gne,{open:!!N,onClose:()=>S(null),item:N})]})},Yne=t=>({wrap:"p-2 rounded-lg",icon:t==="payment"?{wrap:"bg-emerald-100 text-emerald-600",Icon:Ft}:t==="support"?{wrap:"bg-orange-100 text-orange-600",Icon:Cr}:t==="authentication"?{wrap:"bg-purple-100 text-purple-600",Icon:is}:t==="management"?{wrap:"bg-blue-100 text-blue-600",Icon:Ie}:t==="resident"?{wrap:"bg-teal-100 text-teal-600",Icon:Je}:t==="document"?{wrap:"bg-amber-100 text-amber-600",Icon:ns}:{wrap:"bg-gray-100 text-gray-600",Icon:ys}}),wx=({children:t,color:s="gray"})=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${s==="green"?"bg-green-50 text-green-700 border-green-200":s==="red"?"bg-red-50 text-red-700 border-red-200":s==="yellow"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:t}),Kne=({open:t,onClose:s,item:r})=>{const[a,n]=h.useState([]),[i,l]=h.useState(!1);h.useEffect(()=>{t&&(async()=>{if(!(r!=null&&r.entityType)||!(r!=null&&r.entityId)){n([]);return}try{l(!0);const u=await en.getEntityTimeline(r.entityType,r.entityId);u!=null&&u.success?n(u.data||[]):n([])}catch{n([])}finally{l(!1)}})()},[t,r==null?void 0:r.entityType,r==null?void 0:r.entityId]);const o=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),M.success("Details copied")}catch{M.error("Copy failed")}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"flex-1 bg-black/30",onClick:s}),e.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl border-l border-gray-200 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Activity Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50",children:e.jsx(Cx,{className:"h-4 w-4 text-gray-500"})}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"Close"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Title:"})," ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Description:"})," ",e.jsx("span",{children:r==null?void 0:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wx,{children:(r==null?void 0:r.category)||"general"}),e.jsx(wx,{color:(r==null?void 0:r.status)==="success"?"green":(r==null?void 0:r.status)==="failed"?"red":"yellow",children:(r==null?void 0:r.status)||"info"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"})," ",e.jsx("span",{children:r==null?void 0:r.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Priority:"})," ",e.jsx("span",{children:(r==null?void 0:r.priority)||"normal"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"User:"})," ",e.jsxs("span",{children:[r==null?void 0:r.userEmail," (",r==null?void 0:r.userRole,")"]})]}),(r==null?void 0:r.branchName)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Branch:"})," ",e.jsx("span",{children:r.branchName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Time:"})," ",e.jsx("span",{children:new Date(r==null?void 0:r.timestamp).toLocaleString("en-IN")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"IP:"})," ",e.jsx("span",{children:(r==null?void 0:r.ipAddress)||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Agent:"})," ",e.jsx("span",{className:"break-all",children:(r==null?void 0:r.userAgent)||"-"})]})]}),(r==null?void 0:r.entityType)&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-500",children:"Entity"}),e.jsx("div",{className:"text-xs text-gray-400",children:r.entityType})]}),e.jsx("div",{className:"text-xs",children:r.entityName||r.entityId})]}),(r==null?void 0:r.metadata)&&Object.keys(r.metadata).length>0&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Metadata"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded border border-gray-200 text-xs whitespace-pre-wrap break-all",children:JSON.stringify(r.metadata,null,2)})]}),(r==null?void 0:r.entityType)&&(r==null?void 0:r.entityId)&&e.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:"Recent Timeline"}),i?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading timeline…"}):a.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No related activity"}):e.jsx("div",{className:"space-y-2",children:a.slice(0,6).map(c=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900",children:c.title}),e.jsx("div",{className:"text-gray-600",children:c.description}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[new Date(c.timestamp).toLocaleString("en-IN")," • ",c.userEmail]})]})]},c._id))})]})]})]})]}):null},Xne=()=>{const t=He(Nr);He(Pl);const[s,r]=h.useState([]),[a,n]=h.useState(!1),[i,l]=h.useState({page:1,limit:20,sort:"-timestamp"}),[o,c]=h.useState({page:1,limit:20,total:0,pages:0}),[u,d]=h.useState(""),[m,x]=h.useState(""),[g,p]=h.useState(""),[f,b]=h.useState(""),[y,v]=h.useState(null);h.useEffect(()=>{N()},[i]);const N=async()=>{try{n(!0);const C=await en.getAdminActivities({...i,q:u,type:m,category:g,status:f,branchId:t==null?void 0:t._id});C.success?(r(C.data),c(C.pagination)):M.error(C.message||"Failed to load admin activities")}catch{M.error("Failed to load admin activities")}finally{n(!1)}},S=C=>new Date(C).toLocaleString("en-IN"),w=async()=>{try{const C=new URLSearchParams({...i,q:u,type:m,category:g,status:f,branchId:t==null?void 0:t._id}),k=`${"/api".replace(/\/$/,"")}/activities/export/csv?${C.toString()}`;window.open(k,"_blank")}catch{M.error("Export failed")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_0,{className:"h-7 w-7 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Activities"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View and track admin-specific actions and logs"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:w,className:"px-3 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm shadow-sm",children:[e.jsx(xr,{className:"h-4 w-4"})," CSV"]}),e.jsx("button",{onClick:N,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(wt,{className:`h-5 w-5 ${a?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search admin activities...",value:u,onChange:C=>d(C.target.value),onKeyDown:C=>{C.key==="Enter"&&l(j=>({...j,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:g,onChange:C=>{p(C.target.value),l(j=>({...j,page:1}))},children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"authentication",children:"Authentication"}),e.jsx("option",{value:"management",children:"Management"}),e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"support",children:"Support/Tickets"}),e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:m,onChange:C=>{x(C.target.value),l(j=>({...j,page:1}))},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"user_login",children:"User Login"}),e.jsx("option",{value:"resident_create",children:"Resident Created"}),e.jsx("option",{value:"resident_update",children:"Resident Updated"}),e.jsx("option",{value:"payment_create",children:"Payment Created"}),e.jsx("option",{value:"payment_update",children:"Payment Updated"}),e.jsx("option",{value:"ticket_create",children:"Ticket Created"}),e.jsx("option",{value:"ticket_update",children:"Ticket Updated"}),e.jsx("option",{value:"room_create",children:"Room Created"}),e.jsx("option",{value:"room_update",children:"Room Updated"}),e.jsx("option",{value:"branch_update",children:"Branch Updated"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:f,onChange:C=>{b(C.target.value),l(j=>({...j,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:i.sort,onChange:C=>l(j=>({...j,sort:C.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",o.page," of ",o.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:a?e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-3",children:"Loading admin activities..."})]}):s.length===0?e.jsxs("div",{className:"p-16 text-center",children:[e.jsx(_0,{className:"h-10 w-10 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No admin activities found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Admin activities will appear here when you perform actions"})]}):s.map(C=>{const j=Yne(C.category),{wrap:k,icon:E}=j,R=E.wrap,D=E.Icon;return e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>v(C),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`${k} ${R}`,children:e.jsx(D,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:C.title}),e.jsx(wx,{children:C.category||"general"}),e.jsx(wx,{color:C.status==="success"?"green":C.status==="failed"?"red":"yellow",children:C.status})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:C.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["Admin: ",C.userEmail]}),C.branchName&&e.jsxs("span",{children:["Branch: ",C.branchName]}),e.jsx("span",{children:S(C.timestamp)})]})]})]})},C._id)})}),o.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(o.page-1)*o.limit+1," - ",Math.min(o.page*o.limit,o.total)," of ",o.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:o.page===1,onClick:()=>l(C=>({...C,page:C.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:o.page===o.pages,onClick:()=>l(C=>({...C,page:C.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]}),e.jsx(Kne,{open:!!y,onClose:()=>v(null),item:y})]})},Jne=t=>({wrap:"p-2 rounded-lg",icon:t==="payment"?{wrap:"bg-emerald-100 text-emerald-600",Icon:Ft}:t==="support"?{wrap:"bg-orange-100 text-orange-600",Icon:Cr}:t==="authentication"?{wrap:"bg-purple-100 text-purple-600",Icon:is}:t==="management"?{wrap:"bg-blue-100 text-blue-600",Icon:Ie}:t==="resident"?{wrap:"bg-teal-100 text-teal-600",Icon:Je}:t==="document"?{wrap:"bg-amber-100 text-amber-600",Icon:ns}:t==="system"?{wrap:"bg-red-100 text-red-600",Icon:ys}:{wrap:"bg-gray-100 text-gray-600",Icon:ys}}),bc=({children:t,color:s="gray"})=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${s==="green"?"bg-green-50 text-green-700 border-green-200":s==="red"?"bg-red-50 text-red-700 border-red-200":s==="yellow"?"bg-yellow-50 text-yellow-700 border-yellow-200":s==="orange"?"bg-orange-50 text-orange-700 border-orange-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:t}),Qne=({open:t,onClose:s,item:r})=>{const[a,n]=h.useState([]),[i,l]=h.useState(!1);h.useEffect(()=>{t&&(async()=>{if(!(r!=null&&r.entityType)||!(r!=null&&r.entityId)){n([]);return}try{l(!0);const u=await en.getEntityTimeline(r.entityType,r.entityId);u!=null&&u.success?n(u.data||[]):n([])}catch{n([])}finally{l(!1)}})()},[t,r==null?void 0:r.entityType,r==null?void 0:r.entityId]);const o=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),M.success("Details copied")}catch{M.error("Copy failed")}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"flex-1 bg-black/30",onClick:s}),e.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl border-l border-gray-200 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Activity Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50",children:e.jsx(Cx,{className:"h-4 w-4 text-gray-500"})}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"Close"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Title:"})," ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Description:"})," ",e.jsx("span",{children:r==null?void 0:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bc,{children:(r==null?void 0:r.category)||"general"}),e.jsx(bc,{color:(r==null?void 0:r.status)==="success"?"green":(r==null?void 0:r.status)==="failed"?"red":"yellow",children:(r==null?void 0:r.status)||"info"}),e.jsx(bc,{color:"orange",children:"Support"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"})," ",e.jsx("span",{children:r==null?void 0:r.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Priority:"})," ",e.jsx("span",{children:(r==null?void 0:r.priority)||"normal"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"User:"})," ",e.jsxs("span",{children:[r==null?void 0:r.userEmail," (",r==null?void 0:r.userRole,")"]})]}),(r==null?void 0:r.branchName)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Branch:"})," ",e.jsx("span",{children:r.branchName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Time:"})," ",e.jsx("span",{children:new Date(r==null?void 0:r.timestamp).toLocaleString("en-IN")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"IP:"})," ",e.jsx("span",{children:(r==null?void 0:r.ipAddress)||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Agent:"})," ",e.jsx("span",{className:"break-all",children:(r==null?void 0:r.userAgent)||"-"})]})]}),(r==null?void 0:r.entityType)&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-500",children:"Entity"}),e.jsx("div",{className:"text-xs text-gray-400",children:r.entityType})]}),e.jsx("div",{className:"text-xs",children:r.entityName||r.entityId})]}),(r==null?void 0:r.metadata)&&Object.keys(r.metadata).length>0&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Metadata"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded border border-gray-200 text-xs whitespace-pre-wrap break-all",children:JSON.stringify(r.metadata,null,2)})]}),(r==null?void 0:r.entityType)&&(r==null?void 0:r.entityId)&&e.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:"Recent Timeline"}),i?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading timeline…"}):a.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No related activity"}):e.jsx("div",{className:"space-y-2",children:a.slice(0,6).map(c=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-orange-500"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900",children:c.title}),e.jsx("div",{className:"text-gray-600",children:c.description}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[new Date(c.timestamp).toLocaleString("en-IN")," • ",c.userEmail]})]})]},c._id))})]})]})]})]}):null},Zne=()=>{He(Pl);const[t,s]=h.useState([]),[r,a]=h.useState(!1),[n,i]=h.useState({page:1,limit:20,sort:"-timestamp"}),[l,o]=h.useState({page:1,limit:20,total:0,pages:0}),[c,u]=h.useState(""),[d,m]=h.useState(""),[x,g]=h.useState(""),[p,f]=h.useState(""),[b,y]=h.useState(null);h.useEffect(()=>{v()},[n]);const v=async()=>{try{a(!0);const w=await en.getSupportActivities({...n,q:c,type:d,category:x,status:p});w.success?(s(w.data),o(w.pagination)):M.error(w.message||"Failed to load support activities")}catch{M.error("Failed to load support activities")}finally{a(!1)}},N=w=>new Date(w).toLocaleString("en-IN"),S=async()=>{try{const w=new URLSearchParams({...n,q:c,type:d,category:x,status:p}),j=`${"/api".replace(/\/$/,"")}/activities/export/csv?${w.toString()}`;window.open(j,"_blank")}catch{M.error("Export failed")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Cr,{className:"h-7 w-7 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Activities"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View and track support staff actions and ticket-related logs"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:S,className:"px-3 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm shadow-sm",children:[e.jsx(xr,{className:"h-4 w-4"})," CSV"]}),e.jsx("button",{onClick:v,className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(wt,{className:`h-5 w-5 ${r?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:e.jsx(aa,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search support activities...",value:c,onChange:w=>u(w.target.value),onKeyDown:w=>{w.key==="Enter"&&i(C=>({...C,page:1}))}})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:x,onChange:w=>{g(w.target.value),i(C=>({...C,page:1}))},children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"authentication",children:"Authentication"}),e.jsx("option",{value:"support",children:"Support/Tickets"}),e.jsx("option",{value:"management",children:"Management"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:d,onChange:w=>{m(w.target.value),i(C=>({...C,page:1}))},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"user_login",children:"User Login"}),e.jsx("option",{value:"ticket_create",children:"Ticket Created"}),e.jsx("option",{value:"ticket_update",children:"Ticket Updated"}),e.jsx("option",{value:"ticket_assign",children:"Ticket Assigned"}),e.jsx("option",{value:"ticket_resolve",children:"Ticket Resolved"}),e.jsx("option",{value:"ticket_close",children:"Ticket Closed"}),e.jsx("option",{value:"support_staff_create",children:"Support Staff Created"}),e.jsx("option",{value:"support_staff_update",children:"Support Staff Updated"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p,onChange:w=>{f(w.target.value),i(C=>({...C,page:1}))},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:n.sort,onChange:w=>i(C=>({...C,sort:w.target.value})),children:[e.jsx("option",{value:"-timestamp",children:"Newest first"}),e.jsx("option",{value:"timestamp",children:"Oldest first"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Page ",l.page," of ",l.pages]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:r?e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-3",children:"Loading support activities..."})]}):t.length===0?e.jsxs("div",{className:"p-16 text-center",children:[e.jsx(Cr,{className:"h-10 w-10 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No support activities found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Support activities will appear here when you perform actions"})]}):t.map(w=>{const C=Jne(w.category),{wrap:j,icon:k}=C,E=k.wrap,R=k.Icon;return e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>y(w),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`${j} ${E}`,children:e.jsx(R,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:w.title}),e.jsx(bc,{children:w.category||"general"}),e.jsx(bc,{color:w.status==="success"?"green":w.status==="failed"?"red":"yellow",children:w.status}),e.jsx(bc,{color:"orange",children:"Support"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:w.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["Support: ",w.userEmail]}),w.branchName&&e.jsxs("span",{children:["Branch: ",w.branchName]}),e.jsx("span",{children:N(w.timestamp)})]})]})]})},w._id)})}),l.pages>1&&e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," - ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===1,onClick:()=>i(w=>({...w,page:w.page-1})),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:l.page===l.pages,onClick:()=>i(w=>({...w,page:w.page+1})),children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]}),e.jsx(Qne,{open:!!b,onClose:()=>y(null),item:b})]})},eie=({baseBedCount:t,basePrice:s,topUpPricePerBed:r,billingCycle:a,annualDiscount:n=0,allowMultipleBranches:i=!1,branchCount:l=1,bedsPerBranch:o=null,costPerBranch:c=0})=>{const[u,d]=h.useState(t),[m,x]=h.useState(1),p=(()=>{const f=Math.max(0,u-t),b=f*r,y=Math.max(0,m-1),v=y*c,N=s+b+v;let S=N*12;if(a==="annual"&&n>0){const w=S*n/100;S=S-w}return{extraBeds:f,topUpCost:b,extraBranches:y,branchCost:v,totalMonthly:N,totalAnnual:S,effectiveMonthly:S/12,savingsAnnual:a==="annual"&&n>0?N*12*n/100:0}})();return e.jsxs("div",{className:"bg-white rounded-lg border-2 border-purple-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ic,{className:"h-5 w-5 text-purple-600"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Price Calculator"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Beds"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d(Math.max(1,u-1)),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"−"}),e.jsx("input",{type:"number",min:"1",value:u,onChange:f=>d(parseInt(f.target.value)||1),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>d(u+1),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"+"})]})]}),i&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Branches"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>x(Math.max(1,m-1)),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"−"}),e.jsx("input",{type:"number",min:"1",max:l,value:m,onChange:f=>x(Math.min(l,Math.max(1,parseInt(f.target.value)||1))),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>x(Math.min(l,m+1)),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"+"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Max: ",l]})]})]}),e.jsxs("div",{className:"space-y-3 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xs,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-gray-700",children:["Base (",t," beds)"]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:et.formatCurrency(s)})]}),p.extraBeds>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-gray-700",children:["Top-up (",p.extraBeds," extra beds)"]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:et.formatCurrency(p.topUpCost)})]}),i&&p.extraBranches>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-teal-600"}),e.jsxs("span",{className:"text-gray-700",children:["Branch cost (",p.extraBranches," extra branches)"]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:et.formatCurrency(p.branchCost)})]}),e.jsx("div",{className:"border-t border-purple-200 my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Monthly Total"})]}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:et.formatCurrency(p.totalMonthly)})]}),a==="annual"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-purple-200 my-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Annual Total"}),e.jsx("span",{className:"font-semibold text-gray-900",children:et.formatCurrency(p.totalAnnual)})]}),n>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700",children:"Annual Savings"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["- ",et.formatCurrency(p.savingsAnnual)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Effective Monthly"}),e.jsx("span",{className:"font-semibold text-purple-600",children:et.formatCurrency(p.effectiveMonthly)})]})]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-blue-800",children:["💡 ",e.jsx("strong",{children:"Pricing Formula:"})," Base Price + (Extra Beds × Top-up Price)",i&&e.jsx("span",{children:" + (Extra Branches × Branch Cost)"}),a==="annual"&&n>0&&e.jsxs("span",{children:[" with ",n,"% annual discount"]})]}),i&&e.jsxs("p",{className:"text-xs text-blue-800 mt-1",children:["🏢 ",e.jsx("strong",{children:"Branch Pricing:"})," First branch included in base price. Each additional branch costs ₹",c,"/month."]})]})]})},tie=({isOpen:t,onClose:s,subscription:r,onSuccess:a})=>{var _;const[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState(null),[x,g]=h.useState([]),[p,f]=h.useState(""),[b,y]=h.useState(!1),[v,N]=h.useState({planName:"",planDescription:"",billingCycle:"monthly",basePrice:0,annualDiscount:0,baseBedCount:10,topUpPricePerBed:0,maxBedsAllowed:null,allowMultipleBranches:!1,branchCount:1,bedsPerBranch:null,costPerBranch:0,features:[],modules:[],status:"active",isPopular:!1,isRecommended:!1,trialPeriodDays:0,setupFee:0,isCustomPlan:!1,assignedPG:null}),[S,w]=h.useState({name:"",description:"",enabled:!0}),C=et.getAvailableModules();h.useEffect(()=>{r&&(N({...r,isCustomPlan:r.isCustomPlan||!1,assignedPG:r.assignedPG||null}),r.isCustomPlan&&r.assignedPG&&E(r.assignedPG.name))},[r]),h.useEffect(()=>{const G=async()=>{try{y(!0);const U=await Lt.getCurrentUser(),A=await et.getPGsForCustomPlans("",{role:U.role,userPGId:U.pgId});A.success?g(A.data):M.error(A.message||"Failed to load PGs")}catch(U){console.error("Error loading PGs:",U),M.error("Failed to load PGs for custom plan")}finally{y(!1)}};v.isCustomPlan&&G()},[v.isCustomPlan]),Ke.useEffect(()=>{if(d&&x.length>0){const G=x.find(U=>U._id===d._id);G&&d.adminName==="N/A"&&m(U=>({...U,adminName:G.adminName||"N/A"}))}},[x,d]);const j=(G,U)=>{N(A=>({...A,[G]:U}))},k=async G=>{u(G),N(U=>({...U,isCustomPlan:G,assignedPG:G?U.assignedPG:null})),G&&x.length===0&&await E(),G||m(null)},E=async(G="")=>{try{y(!0);const A=await(await fetch(`http://localhost:5000/api/subscriptions/pgs-for-custom-plans?search=${encodeURIComponent(G)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).json();A.success?g(A.data):M.error("Failed to load PGs")}catch(U){console.error("Error loading PGs:",U),M.error("Failed to load PGs")}finally{y(!1)}},R=()=>{if(!S.name.trim()){M.error("Feature name is required");return}N(G=>({...G,features:[...G.features,{...S}]})),w({name:"",description:"",enabled:!0})},D=G=>{N(U=>({...U,features:U.features.filter((A,q)=>q!==G)}))},P=G=>{N(U=>({...U,features:U.features.map((A,q)=>q===G?{...A,enabled:!A.enabled}:A)}))},T=G=>({resident_management:[{key:"residents",label:"Residents"},{key:"onboarding",label:"Onboarding"},{key:"offboarding",label:"Offboarding"},{key:"room_switching",label:"Room Switching"},{key:"moved_out",label:"Moved Out"}],payment_tracking:[{key:"payments",label:"Payments"},{key:"payment_history",label:"Payment History"},{key:"payment_reports",label:"Payment Reports"}],room_allocation:[{key:"rooms",label:"Rooms"},{key:"room_availability",label:"Room Availability"},{key:"room_assignments",label:"Room Assignments"}],qr_code_payments:[{key:"qr_generation",label:"QR Generation"},{key:"qr_scanning",label:"QR Scanning"},{key:"payment_processing",label:"Payment Processing"}],ticket_system:[{key:"tickets",label:"Tickets"},{key:"ticket_categories",label:"Ticket Categories"},{key:"ticket_priorities",label:"Ticket Priorities"}],analytics_reports:[{key:"dashboard",label:"Dashboard"},{key:"reports",label:"Reports"},{key:"charts",label:"Charts"},{key:"exports",label:"Exports"}],bulk_upload:[{key:"file_upload",label:"File Upload"},{key:"data_validation",label:"Data Validation"},{key:"bulk_import",label:"Bulk Import"}],email_notifications:[{key:"email_templates",label:"Email Templates"},{key:"email_sending",label:"Email Sending"},{key:"email_history",label:"Email History"}],sms_notifications:[{key:"sms_templates",label:"SMS Templates"},{key:"sms_sending",label:"SMS Sending"},{key:"sms_history",label:"SMS History"}],multi_branch:[{key:"branch_management",label:"Branch Management"},{key:"branch_switching",label:"Branch Switching"},{key:"branch_reports",label:"Branch Reports"}],custom_reports:[{key:"report_builder",label:"Report Builder"},{key:"custom_queries",label:"Custom Queries"},{key:"report_scheduling",label:"Report Scheduling"}],api_access:[{key:"api_keys",label:"API Keys"},{key:"api_endpoints",label:"API Endpoints"},{key:"api_logs",label:"API Logs"}],mobile_app:[{key:"mobile_sync",label:"Mobile Sync"},{key:"push_notifications",label:"Push Notifications"},{key:"offline_mode",label:"Offline Mode"}],advanced_analytics:[{key:"advanced_charts",label:"Advanced Charts"},{key:"predictive_analytics",label:"Predictive Analytics"},{key:"data_insights",label:"Data Insights"}]})[G]||[],B=(G,U)=>{N(A=>{const q=A.modules.findIndex(Y=>Y.moduleName===G);if(q>=0){const Y=[...A.modules];return Y[q]={...Y[q],enabled:U},{...A,modules:Y}}else{const Y={};return T(G).forEach(O=>{Y[O.key]={create:!0,read:!0,update:!0,delete:!0}}),{...A,modules:[...A.modules,{moduleName:G,enabled:!0,limit:null,permissions:Y}]}}})},F=(G,U)=>{N(A=>{const q=A.modules.map(Y=>Y.moduleName===G?{...Y,limit:U}:Y);return{...A,modules:q}})},L=(G,U,A,q)=>{N(Y=>{const O=Y.modules.map(W=>{if(W.moduleName===G){const z=W.permissions||{},H=z[U]||{create:!0,read:!0,update:!0,delete:!0},Q={...z,[U]:{...H,[A]:q}};return{...W,permissions:Q}}return W});return{...Y,modules:O}})},I=(G,U)=>{N(A=>{const q=A.modules.map(Y=>{if(Y.moduleName===G){const O=Y.permissions||{},W=O[U]||{create:!0,read:!0,update:!0,delete:!0},H=!Object.values(W).every(J=>J),Q={...O,[U]:{create:H,read:H,update:H,delete:H}};return{...Y,permissions:Q}}return Y});return{...A,modules:q}})},V=async G=>{if(G.preventDefault(),v.isCustomPlan){if(!v.assignedPG){M.error("Please select a PG for the custom plan");return}const U=x.find(A=>A._id===v.assignedPG);if(!U||!U.email){M.error("Invalid PG selection. Please choose a PG with a valid email.");return}}try{i(!0);const U={...v,modules:v.modules.map(q=>({...q,permissions:q.permissions instanceof Map?Object.fromEntries(q.permissions):q.permissions||{}}))};let A;r?A=await et.updateSubscription(r._id,U):A=await et.createSubscription(U),A.success?(M.success(A.message),a()):M.error(A.message)}catch(U){console.error("Error saving subscription:",U),M.error("Failed to save subscription plan")}finally{i(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Ur,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r?"Edit Subscription Plan":"Create New Subscription Plan"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure pricing and features for your subscription plan"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5 text-gray-600"})})]}),e.jsxs("form",{onSubmit:V,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ur,{className:"h-5 w-5 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Plan Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v.planName,onChange:G=>j("planName",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Starter Plan, Professional, Enterprise",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:v.planDescription,onChange:G=>j("planDescription",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Describe your subscription plan..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Billing Cycle ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:v.billingCycle,onChange:G=>j("billingCycle",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"annual",children:"Annual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:v.status,onChange:G=>j("status",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-purple-600"}),"Custom Plan Settings"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:G=>k(G.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Create Custom Plan for Specific PG"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-3",children:"Enable this option to create a custom plan that will only be visible to a specific PG"})]}),c&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select PG for Custom Plan"}),e.jsxs(ls,{value:v.assignedPG,onValueChange:G=>{N(U=>({...U,assignedPG:G}))},disabled:b,children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Search and select a PG..."})}),e.jsx(Zt,{children:b?e.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"Loading PGs..."}):x.length===0?e.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No PGs found"}):x.map(G=>e.jsx(ke,{value:G._id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:G.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[G.email," • ",G.phone||"No phone"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Admin: ",G.adminName]})]})},G._id))})]})]}),v.assignedPG&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["This custom plan will only be visible to the selected PG: ",e.jsx("strong",{children:(_=x.find(G=>G._id===v.assignedPG))==null?void 0:_.name})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2 text-green-600"}),"Pricing Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Base Price (₹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.basePrice,onChange:G=>j("basePrice",parseFloat(G.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter base price",required:!0})]}),v.billingCycle==="annual"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Discount (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:v.annualDiscount,onChange:G=>j("annualDiscount",parseFloat(G.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Setup Fee (₹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.setupFee,onChange:G=>j("setupFee",parseFloat(G.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trial Period (Days)"}),e.jsx("input",{type:"number",min:"0",value:v.trialPeriodDays,onChange:G=>j("trialPeriodDays",parseInt(G.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(xs,{className:"h-5 w-5 mr-2 text-purple-600"}),"Bed Management & Top-up Pricing"]}),e.jsxs("button",{type:"button",onClick:()=>o(!l),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:[l?"Hide":"Show"," Calculator"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Base Bed Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",value:v.baseBedCount,onChange:G=>j("baseBedCount",parseInt(G.target.value)||1),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Beds included in base price"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Top-up Price per Bed (₹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.topUpPricePerBed,onChange:G=>j("topUpPricePerBed",parseFloat(G.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Price for each extra bed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Beds Allowed"}),e.jsx("input",{type:"number",min:"1",value:v.maxBedsAllowed||"",onChange:G=>j("maxBedsAllowed",G.target.value?parseInt(G.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited"})]})]}),l&&e.jsx("div",{className:"mt-4",children:e.jsx(eie,{baseBedCount:v.baseBedCount,basePrice:v.basePrice,topUpPricePerBed:v.topUpPricePerBed,billingCycle:v.billingCycle,annualDiscount:v.annualDiscount,allowMultipleBranches:v.allowMultipleBranches,branchCount:v.branchCount,bedsPerBranch:v.bedsPerBranch,costPerBranch:v.costPerBranch})})]}),e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2 text-green-600"}),"Multiple Branch Support"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:v.allowMultipleBranches,onChange:G=>{const U=G.target.checked;j("allowMultipleBranches",U),U||(j("branchCount",1),j("bedsPerBranch",null),j("costPerBranch",0))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Allow Multiple Branches"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-3",children:"Enable this option to allow users to create multiple PG branches with this subscription plan"})]}),v.allowMultipleBranches&&e.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-green-200",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Max Branches ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",max:"50",value:v.branchCount,onChange:G=>j("branchCount",parseInt(G.target.value)||1),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Max branches allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of branches a user can create"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beds per Branch"}),e.jsx("input",{type:"number",min:"1",value:v.bedsPerBranch||"",onChange:G=>j("bedsPerBranch",G.target.value?parseInt(G.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Default: ${v.baseBedCount}`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use base bed count per branch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost per Branch (₹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.costPerBranch,onChange:G=>j("costPerBranch",parseFloat(G.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Additional cost per branch"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional monthly cost for each extra branch"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"💡 Branch Pricing:"})," First branch is included in base price. Additional branches are charged at the specified cost per branch rate.",v.allowMultipleBranches&&e.jsxs("span",{className:"block mt-1",children:[e.jsx("strong",{children:"Example:"})," With ",v.branchCount," max branches and ₹",v.costPerBranch,"/month per additional branch, total cost increases by ₹",(v.branchCount-1)*v.costPerBranch," for maximum branches."]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Plan Features"]}),e.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",value:S.name,onChange:G=>w({...S,name:G.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Feature name"}),e.jsx("input",{type:"text",value:S.description,onChange:G=>w({...S,description:G.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Description (optional)"}),e.jsxs("button",{type:"button",onClick:R,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Feature"})]})]})}),v.features.length>0&&e.jsx("div",{className:"space-y-2",children:v.features.map((G,U)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("button",{type:"button",onClick:()=>P(U),className:`p-1 rounded ${G.enabled?"text-green-600":"text-gray-400"}`,children:e.jsx(Be,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:G.name}),G.description&&e.jsx("p",{className:"text-xs text-gray-600",children:G.description})]})]}),e.jsx("button",{type:"button",onClick:()=>D(U),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(Pr,{className:"h-4 w-4"})})]},U))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ur,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Module Permissions"]}),e.jsx("div",{className:"space-y-4",children:C.map(G=>{const U=v.modules.find(q=>q.moduleName===G.value),A=(U==null?void 0:U.enabled)||!1;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:q=>B(G.value,q.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-lg",children:G.icon}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:G.label})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Limit:"}),e.jsx("input",{type:"number",min:"1",value:(U==null?void 0:U.limit)||"",onChange:q=>F(G.value,q.target.value?parseInt(q.target.value):null),disabled:!A,className:"w-20 px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 disabled:bg-gray-100 disabled:text-gray-400",placeholder:"Unlimited"})]})]}),A&&e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Permissions by Feature:"}),e.jsx("div",{className:"space-y-3",children:T(G.value).map(q=>{var O;const Y=((O=U==null?void 0:U.permissions)==null?void 0:O[q.key])||{create:!0,read:!0,update:!0,delete:!0};return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:q.label}),e.jsx("button",{type:"button",onClick:()=>I(G.value,q.key),className:"text-xs text-blue-600 hover:text-blue-800",children:Object.values(Y).every(W=>W)?"Disable All":"Enable All"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{key:"create",label:"Create",color:"green"},{key:"read",label:"Read",color:"blue"},{key:"update",label:"Update",color:"yellow"},{key:"delete",label:"Delete",color:"red"}].map(W=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y[W.key]||!1,onChange:z=>L(G.value,q.key,W.key,z.target.checked),className:`w-3 h-3 text-${W.color}-600 border-gray-300 rounded focus:ring-${W.color}-500`}),e.jsx("span",{className:`text-xs text-${W.color}-700`,children:W.label})]},W.key))})]},q.key)})})]})]},G.value)})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:v.isPopular,onChange:G=>j("isPopular",G.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mark as Popular"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:v.isRecommended,onChange:G=>j("isRecommended",G.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kl,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mark as Recommended"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:s,disabled:n,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{className:"h-4 w-4"}),e.jsx("span",{children:r?"Update Plan":"Create Plan"})]})})]})]})}):null},sie=({subscription:t,index:s,onEdit:r,onDelete:a,onDuplicate:n,onTogglePopular:i,onToggleRecommended:l})=>{const[o,c]=h.useState(!1),[u,d]=h.useState(t.subscribedCount||0),[m,x]=h.useState(!1);h.useEffect(()=>{(async()=>{try{x(!0);const b=await et.getActiveSubscriptionsByPlan();if(b.success&&b.data){const y=b.data.find(v=>v._id===t._id);y&&d(y.count||0)}}catch(b){console.error("Error fetching subscriber count:",b)}finally{x(!1)}})()},[t._id]);const g=f=>{switch(f){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"archived":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=f=>f==="monthly"?"bg-blue-100 text-blue-800 border-blue-200":"bg-purple-100 text-purple-800 border-purple-200";return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:s*.05},className:`bg-white rounded-xl shadow-sm border-2 transition-all duration-200 hover:shadow-lg hover:-translate-y-1 ${t.isRecommended?"border-blue-300 ring-2 ring-blue-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.planName}),t.isPopular&&e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full border border-yellow-200",children:[e.jsx(Fs,{className:"h-3 w-3 fill-current"}),e.jsx("span",{children:"Popular"})]}),t.isRecommended&&e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-medium rounded-full border border-blue-200",children:[e.jsx(Fa,{className:"h-3 w-3"}),e.jsx("span",{children:"Recommended"})]})]}),t.planDescription&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:t.planDescription})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!o),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(io,{className:"h-5 w-5 text-gray-600"})}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20",children:[e.jsxs("button",{onClick:()=>{r(t),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>{n(t),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(bg,{className:"h-4 w-4"}),e.jsx("span",{children:"Duplicate"})]}),e.jsxs("button",{onClick:()=>{i(t),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),e.jsx("span",{children:t.isPopular?"Remove Popular":"Mark Popular"})]}),e.jsxs("button",{onClick:()=>{l(t),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Fa,{className:"h-4 w-4"}),e.jsx("span",{children:t.isRecommended?"Remove Recommended":"Mark Recommended"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{a(t),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx(Pr,{className:"h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded border ${g(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded border ${p(t.billingCycle)}`,children:t.billingCycle==="monthly"?"Monthly":"Annual"})]})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:et.formatCurrency(t.basePrice)}),e.jsxs("span",{className:"text-gray-600",children:["/",t.billingCycle==="monthly"?"month":"year"]})]}),t.billingCycle==="annual"&&t.annualDiscount>0&&e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Save ",t.annualDiscount,"% with annual billing"]}),t.setupFee>0&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["+ ",et.formatCurrency(t.setupFee)," setup fee"]})]}),e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xs,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Base Beds"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:t.baseBedCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Top-up per Bed"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:et.formatCurrency(t.topUpPricePerBed)})]}),t.maxBedsAllowed&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ur,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Max Beds"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:t.maxBedsAllowed})]})]})}),t.allowMultipleBranches&&e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-teal-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Max Branches"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:t.branchCount})]}),t.bedsPerBranch&&t.bedsPerBranch!==t.baseBedCount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xs,{className:"h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Beds per Branch"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:t.bedsPerBranch})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Branch Cost"})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[et.formatCurrency(t.costPerBranch),"/month"]})]}),e.jsx("div",{className:"mt-3 p-2 bg-teal-50 border border-teal-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-teal-800",children:[e.jsx("strong",{children:"Multi-branch enabled:"})," Users can create up to ",t.branchCount," branches. Each additional branch costs ",et.formatCurrency(t.costPerBranch),"/month."]})})]})}),t.features&&t.features.length>0&&e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Features"}),e.jsxs("div",{className:"space-y-2",children:[t.features.slice(0,4).map((f,b)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[f.enabled?e.jsx(Be,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}):e.jsx(Yt,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${f.enabled?"text-gray-700":"text-gray-400 line-through"}`,children:f.name})]},b)),t.features.length>4&&e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["+",t.features.length-4," more features"]})]})]}),t.modules&&t.modules.length>0&&e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Modules"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.modules.slice(0,6).map((f,b)=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${f.enabled?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-500"}`,children:f.moduleName.replace(/_/g," ").toUpperCase()},b)),t.modules.length>6&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-600",children:["+",t.modules.length-6]})]})]}),e.jsx("div",{className:"p-6 bg-gray-50 rounded-b-xl",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(Je,{className:"h-4 w-4"}),m?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Loading..."})]}):e.jsxs("span",{children:[u," subscriber",u!==1?"s":""]})]}),t.trialPeriodDays>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.trialPeriodDays," day trial"]})]})]})})]})},rie=()=>{var T;const{user:t}=Uc(),[s,r]=h.useState([]),[a,n]=h.useState([]),[i,l]=h.useState(!0),[o,c]=h.useState(!1),[u,d]=h.useState(null),[m,x]=h.useState({show:!1,subscription:null}),[g,p]=h.useState(null),[f,b]=h.useState(null),[y,v]=h.useState({search:"",status:"all",billingCycle:"all",isPopular:!1});h.useEffect(()=>{if(!t){b("User not authenticated. Please log in."),l(!1);return}if((t==null?void 0:t.role)!=="superadmin"){b("Access denied. Superadmin privileges required."),l(!1);return}N()},[t]),h.useEffect(()=>{S()},[y,s]);const N=async()=>{var B;try{l(!0);const[F,L]=await Promise.all([et.getAllSubscriptions(),et.getStatistics()]);F.success&&r(F.data),L.success&&p(L.data)}catch(F){console.error("Error loading data:",F),((B=F.response)==null?void 0:B.status)===403?b("Access denied. Please check your permissions or contact support."):M.error("Failed to load subscriptions")}finally{l(!1)}},S=()=>{let B=[...s];if(y.search){const F=y.search.toLowerCase();B=B.filter(L=>{var I;return L.planName.toLowerCase().includes(F)||((I=L.planDescription)==null?void 0:I.toLowerCase().includes(F))})}y.status!=="all"&&(B=B.filter(F=>F.status===y.status)),y.billingCycle!=="all"&&(B=B.filter(F=>F.billingCycle===y.billingCycle)),y.isPopular&&(B=B.filter(F=>F.isPopular)),n(B)},w=()=>{d(null),c(!0)},C=B=>{d(B),c(!0)},j=B=>{x({show:!0,subscription:B})},k=async()=>{try{const B=await et.deleteSubscription(m.subscription._id);B.success?(M.success(B.message),N(),x({show:!1,subscription:null})):M.error(B.message)}catch(B){console.error("Error deleting subscription:",B),M.error("Failed to delete subscription")}},E=async B=>{try{const F=await et.duplicateSubscription(B._id);F.success?(M.success("Subscription plan duplicated successfully"),N()):M.error(F.message)}catch(F){console.error("Error duplicating subscription:",F),M.error("Failed to duplicate subscription")}},R=async B=>{try{const F=await et.togglePopular(B._id);F.success?(M.success(F.message),N()):M.error(F.message)}catch(F){console.error("Error toggling popularity:",F),M.error("Failed to update popularity")}},D=async B=>{try{const F=await et.toggleRecommended(B._id);F.success?(M.success(F.message),N()):M.error(F.message)}catch(F){console.error("Error toggling recommended:",F),M.error("Failed to update recommended status")}},P=()=>{N(),c(!1),d(null)};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):f?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ct,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:f}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Current user role: ",(t==null?void 0:t.role)||"Not logged in",e.jsx("br",{}),"Current user email: ",(t==null?void 0:t.email)||"N/A"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ur,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Subscription Plans"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage subscription plans and pricing"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-sm",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{children:"Create Plan"})]})]})]}),g&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Plans"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:g.totalPlans})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:e.jsx(Ur,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Plans"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:g.activePlans})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Subscribers"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:g.totalSubscribers})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg flex items-center justify-center",children:e.jsx(Je,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Plans"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:g.monthlyPlans})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg flex items-center justify-center",children:e.jsx(xt,{className:"h-6 w-6 text-orange-600"})})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search plans...",value:y.search,onChange:B=>v({...y,search:B.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("select",{value:y.status,onChange:B=>v({...y,status:B.target.value}),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:y.billingCycle,onChange:B=>v({...y,billingCycle:B.target.value}),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"all",children:"All Billing Cycles"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"annual",children:"Annual"})]}),e.jsxs("label",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"checkbox",checked:y.isPopular,onChange:B=>v({...y,isPopular:B.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx(Fs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Popular Only"})]})]}),(y.search||y.status!=="all"||y.billingCycle!=="all"||y.isPopular)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",a.length," of ",s.length," plans"]}),e.jsx("button",{onClick:()=>v({search:"",status:"all",billingCycle:"all",isPopular:!1}),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear Filters"})]})]}),a.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[e.jsx(Ur,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Subscription Plans Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:y.search||y.status!=="all"||y.billingCycle!=="all"||y.isPopular?"Try adjusting your filters":"Create your first subscription plan to get started"}),!y.search&&y.status==="all"&&y.billingCycle==="all"&&!y.isPopular&&e.jsxs("button",{onClick:w,className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{children:"Create First Plan"})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.jsx(vt,{children:a.map((B,F)=>e.jsx(sie,{subscription:B,index:F,onEdit:C,onDelete:j,onDuplicate:E,onTogglePopular:R,onToggleRecommended:D},B._id))})}),o&&e.jsx(tie,{isOpen:o,onClose:()=>{c(!1),d(null)},subscription:u,onSuccess:P}),e.jsx(lh,{isOpen:m.show,onClose:()=>x({show:!1,subscription:null}),onConfirm:k,title:"Delete Subscription Plan",message:`Are you sure you want to delete "${(T=m.subscription)==null?void 0:T.planName}"? This action cannot be undone.`})]})},z1=()=>{const{user:t}=He(r=>r.auth),s=Ms();return h.useEffect(()=>{(()=>{if(console.log("🔄 RoleRedirect: Starting redirect check..."),console.log("👤 User:",t?{id:t._id,email:t.email,role:t==null?void 0:t.role}:"No user"),!t||!(t!=null&&t.role)){console.log("🚫 RoleRedirect: No user or role found, redirecting to login"),s("/login");return}switch(console.log("🎯 RoleRedirect: User authenticated, checking role:",t==null?void 0:t.role),t==null?void 0:t.role){case"admin":console.log("👨‍💼 RoleRedirect: Redirecting admin to dashboard"),s("/admin/dashboard");break;case"superadmin":console.log("👑 RoleRedirect: Redirecting superadmin to dashboard"),s("/superadmin/dashboard");break;case"support":console.log("🛠️ RoleRedirect: Redirecting support staff to dashboard"),s("/support/dashboard");break;case"user":console.log("👤 RoleRedirect: Redirecting user to dashboard"),s("/user/dashboard");break;default:console.warn("⚠️ RoleRedirect: Unknown user role:",t==null?void 0:t.role),s("/login");break}})()},[t,s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Redirecting to your dashboard..."}),t&&e.jsx("div",{className:"mt-4 text-sm text-gray-500",children:e.jsxs("p",{children:["User Role: ",t==null?void 0:t.role]})})]})})},gr=({children:t,requireOnboarding:s=!1})=>{const{user:r,isAuthenticated:a}=He(o=>o.auth),{canAccessRoute:n}=Wc(),i=wo(),l=Lt.isAuthenticated();if(console.log("🔍 ProtectedRoute: Auth check for path:",i.pathname),console.log("🔍 ProtectedRoute: Redux auth:",{isAuthenticated:a,user:!!r,userRole:r==null?void 0:r.role}),console.log("🔍 ProtectedRoute: Direct auth check:",l),!l||!a||!r){console.log("🔒 ProtectedRoute: User not authenticated, redirecting to login");const o=window.location.pathname;let c="/login";return o.startsWith("/admin")?c="/admin/login":o.startsWith("/superadmin")&&(c="/login"),console.log(`🔒 ProtectedRoute: Redirecting to ${c}`),e.jsx(T0,{to:c,replace:!0})}return(r==null?void 0:r.role)==="admin"&&!n(i.pathname)?(console.log("🚫 ProtectedRoute: User subscription does not allow access to this route, redirecting to dashboard"),e.jsx(T0,{to:"/admin",replace:!0})):(console.log("✅ ProtectedRoute: Allowing access"),t)},aie=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!1),[n,i]=h.useState(!1),[l,o]=h.useState(null),{showExpiryModal:c,closeExpiryModal:u,handleRefreshToken:d,checkTokenExpiry:m,isTokenExpired:x}=Ox(),g=(j,k,E,R={})=>{const D={id:Date.now(),test:j,status:k,message:E,details:R,timestamp:new Date().toISOString()};s(P=>[D,...P])},p=()=>{s([])},f=()=>{g("Simulate Token Expiry","info","Simulating token expiry event...",{action:"manual_simulation"});const j=new CustomEvent("tokenExpired",{detail:{message:"Test: Your session has expired. Please log in again.",reason:"test_simulation",timestamp:new Date().toISOString()}});window.dispatchEvent(j),i(!0)},b=()=>{g("Simulate API Error","info","Simulating 401 API error...",{action:"api_error_simulation"});const j=new CustomEvent("apiError",{detail:{status:401,message:"Invalid token",error:{message:"Invalid token."},timestamp:new Date().toISOString()}});window.dispatchEvent(j)},y=()=>{g("Token Validation Test","info","Testing token validation...",{action:"token_validation"});try{const j=Lt.isAuthenticated(),k=Lt.getAccessToken();if(k){const E=JSON.parse(atob(k.split(".")[1])),R=Date.now()/1e3,D=E.exp<R-30;g("Token Validation Test",D?"error":"success",`Token is ${D?"expired":"valid"}`,{tokenExists:!!k,isValid:j,isExpired:D,expiresAt:new Date(E.exp*1e3).toISOString(),currentTime:new Date(R*1e3).toISOString()})}else g("Token Validation Test","warning","No token found",{tokenExists:!1})}catch(j){g("Token Validation Test","error",`Token validation failed: ${j.message}`,{error:j.message})}},v=async()=>{a(!0),g("Refresh Token Test","info","Testing token refresh...",{action:"refresh_test"});try{const j=await d();g("Refresh Token Test",j?"success":"error",j?"Token refreshed successfully":"Token refresh failed",{success:j})}catch(j){g("Refresh Token Test","error",`Token refresh failed: ${j.message}`,{error:j.message})}finally{a(!1)}},N=()=>{g("Manual Token Expiry Test","info","Manually triggering token expiry check...",{action:"manual_check"});try{const j=m();g("Manual Token Expiry Test",j?"error":"success",`Token expiry check: ${j?"expired":"valid"}`,{isExpired:j})}catch(j){g("Manual Token Expiry Test","error",`Token expiry check failed: ${j.message}`,{error:j.message})}},S=async()=>{a(!0),p(),g("Test Suite","info","Starting comprehensive token expiry tests...",{action:"test_suite_start"}),y(),await new Promise(j=>setTimeout(j,500)),N(),await new Promise(j=>setTimeout(j,500)),Lt.getAccessToken()&&(await v(),await new Promise(j=>setTimeout(j,500))),f(),await new Promise(j=>setTimeout(j,500)),b(),g("Test Suite","success","All tests completed!",{action:"test_suite_complete"}),a(!1)},w=j=>{switch(j){case"success":return e.jsx(Be,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(Yt,{className:"w-4 h-4 text-red-500"});case"warning":return e.jsx(Rt,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(ut,{className:"w-4 h-4 text-blue-500"})}},C=j=>{switch(j){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Token Expiry Test Suite"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive testing for token expiry functionality"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Tests"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(j=>j.status==="success").length}),e.jsx("div",{className:"text-sm text-green-700",children:"Passed"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.filter(j=>j.status==="error").length}),e.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(j=>j.status==="warning").length}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Warnings"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Controls"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:S,disabled:r,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(wt,{className:`w-4 h-4 ${r?"animate-spin":""}`}),e.jsx("span",{children:r?"Running Tests...":"Run All Tests"})]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border border-gray-200",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Token Validation"})]}),e.jsxs("button",{onClick:N,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border border-gray-200",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Manual Check"})]}),e.jsxs("button",{onClick:v,disabled:r,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border border-gray-200 disabled:opacity-50",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Token Refresh"})]}),e.jsxs("button",{onClick:f,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors border border-orange-200",children:[e.jsx(Rt,{className:"w-4 h-4"}),e.jsx("span",{children:"Simulate Token Expiry"})]}),e.jsxs("button",{onClick:b,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors border border-red-200",children:[e.jsx(Yt,{className:"w-4 h-4"}),e.jsx("span",{children:"Simulate API Error"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Results"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Current Token Status: ",x?"Expired":"Valid"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Results"}),t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(is,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:'No tests run yet. Click "Run All Tests" to start testing.'})]}):e.jsx("div",{className:"space-y-3",children:t.map(j=>e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`border rounded-lg p-4 ${C(j.status)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[w(j.status),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:j.test}),e.jsx("span",{className:"text-xs opacity-75",children:new Date(j.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm mt-1",children:j.message}),Object.keys(j.details).length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs cursor-pointer opacity-75",children:"View Details"}),e.jsx("pre",{className:"text-xs mt-2 bg-black/10 p-2 rounded overflow-x-auto",children:JSON.stringify(j.details,null,2)})]})]})]})},j.id))})]})]}),n&&e.jsx(Zd,{isOpen:n,onClose:()=>i(!1),onRefresh:d}),e.jsx(Zd,{isOpen:c,onClose:u,onRefresh:d})]})},nie=({module:t,submodule:s,actions:r=["create","read","update","delete"],showLabels:a=!1,size:n="sm"})=>{const{getSubmodulePermissions:i}=Wc(),l=i(t,s);if(!l)return null;const o=()=>{switch(n){case"xs":return"w-3 h-3";case"sm":return"w-4 h-4";case"md":return"w-5 h-5";case"lg":return"w-6 h-6";default:return"w-4 h-4"}},c=u=>({create:"Create",read:"Read",update:"Update",delete:"Delete"})[u]||u;return e.jsx("div",{className:"flex items-center space-x-1",children:r.map(u=>{const d=l[u],m=d?u2:Er,x=d?"text-green-600":"text-red-600";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(m,{className:`${o()} ${x}`}),a&&e.jsx("span",{className:`text-xs ${d?"text-green-700":"text-red-700"}`,children:c(u)})]},u)})})},iie=[{name:"Dashboard",href:"/admin"},{name:"My PG",href:"/admin/pg-management"},{name:"Resident Management",hasDropdown:!0,dropdownItems:[{name:"All Residents",href:"/admin/residents"},{name:"Offboarding",href:"/admin/offboarding"}]},{name:"Payments",href:"/admin/payments"},{name:"Tickets",href:"/admin/tickets"},{name:"Reports",href:"/admin/reports"},{name:"QR Codes",href:"/admin/qr-management"},{name:"Branch Activities",href:"/admin/branch-activities"}],lie=()=>{var n,i,l,o,c,u,d,m,x;const t=He(Y2),s=He(Pl),r=Wc(),a=()=>iie.filter(g=>["Dashboard","My PG"].includes(g.name)?!0:g.name==="Resident Management"?r.hasModule("resident_management"):g.name==="Payments"?r.hasModule("payment_tracking"):g.name==="Tickets"?r.hasModule("ticket_system"):g.name==="Reports"?r.hasModule("analytics_reports"):g.name==="QR Codes"?r.hasModule("qr_code_payments"):g.name==="Branch Activities"?r.allowsMultipleBranches():!0).map(g=>g.name==="Resident Management"&&g.hasDropdown?{...g,dropdownItems:g.dropdownItems.filter(p=>r.hasModule("resident_management"))}:g);return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Subscription Debug Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"User Info"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",(s==null?void 0:s._id)||"Not logged in"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",(s==null?void 0:s.email)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",(s==null?void 0:s.role)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"PG ID:"})," ",(s==null?void 0:s.pgId)||"N/A"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-3",children:"Subscription Data"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",(t==null?void 0:t.status)||"No subscription"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plan:"})," ",((n=t==null?void 0:t.plan)==null?void 0:n.planName)||"Free Plan"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plan ID:"})," ",(t==null?void 0:t.planId)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Max Beds:"})," ",((i=t==null?void 0:t.restrictions)==null?void 0:i.maxBeds)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Max Branches:"})," ",((l=t==null?void 0:t.restrictions)==null?void 0:l.maxBranches)||"N/A"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-3",children:"Usage Data"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Beds Used:"})," ",((o=t==null?void 0:t.usage)==null?void 0:o.bedsUsed)||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Branches Used:"})," ",((c=t==null?void 0:t.usage)==null?void 0:c.branchesUsed)||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Remaining Beds:"})," ",r.getRemainingBeds()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Remaining Branches:"})," ",r.getRemainingBranches()]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-3",children:"Utility Tests"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Is Subscribed:"})," ",r.isSubscribed()?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Is Free Plan:"})," ",r.isFreePlan()?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Allows Multiple Branches:"})," ",r.allowsMultipleBranches()?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Can Add Bed:"})," ",r.canAddBeds(((u=t==null?void 0:t.usage)==null?void 0:u.bedsUsed)||0,1)?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Can Add Branch:"})," ",r.canAddBranches(((d=t==null?void 0:t.usage)==null?void 0:d.branchesUsed)||0,1)?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Has Analytics:"})," ",r.hasModule("analytics_reports")?"Yes":"No"]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Filtered Navigation Items"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsx("div",{className:"space-y-2",children:a().map((g,p)=>e.jsxs("div",{className:"border-b border-blue-200 pb-2 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-blue-900",children:g.name}),g.href&&e.jsx("div",{className:"text-sm text-blue-700",children:g.href}),g.hasDropdown&&g.dropdownItems&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:g.dropdownItems.map((f,b)=>e.jsxs("div",{className:"text-sm text-blue-600",children:["• ",f.name," (",f.href,")"]},b))})]},p))})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Permission Components Demo"}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-purple-900 mb-2",children:"Residents Permission Indicator:"}),e.jsx(nie,{module:"resident_management",submodule:"residents",actions:["create","read","update","delete"],showLabels:!0})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-purple-900 mb-2",children:"Test Permission Buttons:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(b0,{module:"resident_management",submodule:"residents",action:"create",variant:"success",size:"sm",children:"Create Resident"}),e.jsx(b0,{module:"resident_management",submodule:"residents",action:"update",variant:"warning",size:"sm",children:"Edit Resident"}),e.jsx(b0,{module:"resident_management",submodule:"residents",action:"delete",variant:"danger",size:"sm",children:"Delete Resident"})]})]})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Module Permissions Details"}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsx("div",{className:"space-y-4",children:(x=(m=t==null?void 0:t.restrictions)==null?void 0:m.modules)==null?void 0:x.map((g,p)=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-green-900",children:g.moduleName}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${g.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.enabled?"Enabled":"Disabled"})]}),g.permissions&&Object.keys(g.permissions).length>0&&e.jsx("div",{className:"space-y-2",children:Object.entries(g.permissions).map(([f,b])=>e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[f,":"]}),e.jsxs("div",{className:"flex space-x-3 text-xs",children:[e.jsxs("span",{className:b.create?"text-green-600":"text-red-600",children:["Create: ",b.create?"✓":"✗"]}),e.jsxs("span",{className:b.read?"text-green-600":"text-red-600",children:["Read: ",b.read?"✓":"✗"]}),e.jsxs("span",{className:b.update?"text-green-600":"text-red-600",children:["Update: ",b.update?"✓":"✗"]}),e.jsxs("span",{className:b.delete?"text-green-600":"text-red-600",children:["Delete: ",b.delete?"✓":"✗"]})]})]},f))})]},p))})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Raw Subscription Data"}),e.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-96",children:e.jsx("pre",{className:"text-xs text-gray-800",children:JSON.stringify(t,null,2)})})]})]})},oie=()=>{var T,B;const{subscription:t,isInitialized:s,subscriptionEvents:r,canAddBed:a,canAddBranch:n,canAccessModule:i,getRemainingResources:l,getSubscriptionSummary:o,getSubscriptionHealth:c,forceRefresh:u,on:d,off:m}=Hu(),[x,g]=h.useState(!1),[p,f]=h.useState("disconnected"),[b,y]=h.useState([]),[v,N]=h.useState(!1);h.useEffect(()=>{let F;return s&&(F=setInterval(()=>{const L=o();f(L?"connected":"disconnected")},2e3)),()=>{F&&clearInterval(F)}},[s,o]),h.useEffect(()=>{const F=L=>{S("event",`Subscription event: ${L.type}`,"info",L)};return d("subscriptionChecked",L=>F({type:"subscriptionChecked",...L})),d("trialExpiringSoon",L=>F({type:"trialExpiringSoon",...L})),d("trialExpired",L=>F({type:"trialExpired",...L})),d("usageLimitWarning",L=>F({type:"usageLimitWarning",...L})),d("subscriptionExpired",L=>F({type:"subscriptionExpired",...L})),()=>{m("subscriptionChecked",F),m("trialExpiringSoon",F),m("trialExpired",F),m("usageLimitWarning",F),m("subscriptionExpired",F)}},[d,m]);const S=(F,L,I,V={})=>{const _={id:Date.now()+Math.random(),test:F,message:L,status:I,timestamp:new Date().toLocaleTimeString(),details:V};y(G=>[_,...G.slice(0,19)])},w=async()=>{g(!0),S("manual","Manual subscription refresh initiated","pending");try{await u(),S("manual","Manual subscription refresh completed","success")}catch(F){S("manual",`Manual refresh failed: ${F.message}`,"error",F)}finally{g(!1)}},C=()=>{S("permissions","Testing permission checks...","pending"),[{action:"canAddBed",result:a(),expected:!0},{action:"canAddBranch",result:n(),expected:!0},{action:"canAccessResidentModule",result:i("resident_management","residents","read"),expected:!0},{action:"canAccessPaymentModule",result:i("payment_tracking","payments","create"),expected:!0},{action:"canAccessInvalidModule",result:i("invalid_module"),expected:!1}].forEach(({action:L,result:I,expected:V})=>{const _=I===V?"success":"warning";S("permissions",`${L}: ${I} (${V?"expected":"unexpected"})`,_)})},j=()=>{var V,_;S("resources","Testing resource limits...","pending");const F=l(),L=o(),I=c();S("resources",`Remaining beds: ${F.beds}`,"info",F),S("resources",`Remaining branches: ${F.branches}`,"info",F),L&&(S("resources",`Usage - Beds: ${(V=L.usagePercentage.beds)==null?void 0:V.toFixed(1)}%`,"info",L),S("resources",`Usage - Branches: ${(_=L.usagePercentage.branches)==null?void 0:_.toFixed(1)}%`,"info",L)),I&&S("resources",`Health status: ${I.isHealthy?"Healthy":"Issues detected"}`,I.isHealthy?"success":"warning",I)},k=F=>{S("simulation",`Simulating ${F} event`,"info"),setTimeout(()=>{S("simulation",`Simulated ${F} event processed`,"success")},1e3)},E=()=>{y([])},R=F=>{switch(F){case"success":return e.jsx(Be,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(Rt,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(ut,{className:"h-4 w-4 text-yellow-500"});case"info":return e.jsx(xi,{className:"h-4 w-4 text-blue-500"});case"pending":return e.jsx(wt,{className:"h-4 w-4 text-gray-500 animate-spin"});default:return e.jsx(ut,{className:"h-4 w-4 text-gray-500"})}},D=o(),P=c();return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"🔍 Subscription Debug Console"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor real-time subscription checks and events"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p==="connected"?e.jsx(o2,{className:"h-5 w-5 text-green-500"}):e.jsx(HE,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${p==="connected"?"text-green-600":"text-red-600"}`,children:p==="connected"?"Connected":"Disconnected"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("div",{className:"font-semibold",children:(D==null?void 0:D.status)||"Unknown"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Trial Days"}),e.jsx("div",{className:"font-semibold",children:(D==null?void 0:D.trialDaysRemaining)||0})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Bed Usage"}),e.jsxs("div",{className:"font-semibold",children:[((B=(T=D==null?void 0:D.usagePercentage)==null?void 0:T.beds)==null?void 0:B.toFixed(1))||0,"%"]})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Health"}),e.jsx("div",{className:"font-semibold",children:P!=null&&P.isHealthy?"✅ Healthy":"⚠️ Issues"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🛠️ Control Panel"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:w,disabled:x,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(wt,{className:`h-4 w-4 ${x?"animate-spin":""}`}),e.jsx("span",{children:"Force Refresh"})]}),e.jsxs("button",{onClick:C,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Test Permissions"})]}),e.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{children:"Test Resources"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>k("trialExpiringSoon"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"Simulate Trial Warning"}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Clear Results"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"📊 Test Results & Events"}),e.jsxs("button",{onClick:()=>N(!v),className:"text-sm text-blue-600 hover:text-blue-800",children:[v?"Hide Events":"Show Events"," (",r.length,")"]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:b.length===0&&r.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No test results yet. Click buttons above to test subscription functionality."}):e.jsxs("div",{className:"divide-y divide-gray-100",children:[b.map(F=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[R(F.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:F.test}),e.jsx("span",{className:"text-xs text-gray-500",children:F.timestamp})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.message}),F.details&&Object.keys(F.details).length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer",children:"Show Details"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(F.details,null,2)})]})]})]})},F.id)),v&&r.map((F,L)=>e.jsx("div",{className:"p-4 hover:bg-gray-50 bg-blue-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(xi,{className:"h-4 w-4 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Real-time Event"}),e.jsx("span",{className:"text-xs text-blue-600",children:new Date(F.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm text-blue-800 mt-1",children:F.type}),e.jsx("pre",{className:"text-xs bg-blue-100 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(F.data,null,2)})]})]})},`event-${L}`))]})})]}),t&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"📋 Current Subscription Data"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("pre",{className:"text-xs overflow-x-auto max-h-64",children:JSON.stringify(t,null,2)})})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:"📖 How Real-time Checks Work"}),e.jsxs("div",{className:"space-y-3 text-sm text-yellow-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"1. Initialization:"})," Subscription manager starts when user logs in (see App.jsx)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"2. WebSocket Connection:"})," Connects to backend for real-time updates"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"3. Periodic Checks:"})," Backend checks subscription every 5 minutes"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"4. Event Broadcasting:"})," Backend sends events for expiry warnings, usage limits"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"5. UI Updates:"})," Frontend updates in real-time without page refresh"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"6. API Middleware:"})," Every API call is checked for subscription permissions"]})]})]})]})},cie=()=>{const{user:t,subscription:s}=He(y=>y.auth),{subscription:r,isInitialized:a,subscriptionEvents:n,canAddBed:i,canAddBranch:l,canAccessModule:o,getRemainingResources:c,getSubscriptionSummary:u,getSubscriptionHealth:d,forceRefresh:m}=Hu(),x=s,g=r,p=[{name:"Redux Auth Subscription",data:x,status:x?"success":"error"},{name:"Hook Subscription",data:g,status:g?"success":"error"},{name:"Subscription Summary",data:u(),status:u()?"success":"error"},{name:"Subscription Health",data:d(),status:d()?"success":"error"},{name:"Remaining Resources",data:c(),status:"info"},{name:"Permission Tests",data:{canAddBed:i(),canAddBranch:l(),canAccessResidents:o("resident_management","residents","read"),canAccessPayments:o("payment_tracking","payments","create")},status:"info"}],f=y=>{switch(y){case"success":return"text-green-600";case"error":return"text-red-600";case"warning":return"text-yellow-600";default:return"text-blue-600"}},b=y=>{switch(y){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return"ℹ️"}};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🔍 Subscription Debug Page"}),e.jsx("p",{className:"text-gray-600",children:"Test and debug subscription system functionality"}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Initialized"}),e.jsx("div",{className:"font-semibold",children:a?"✅ Yes":"❌ No"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Events Count"}),e.jsx("div",{className:"font-semibold",children:n.length})]}),e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Redux Sub"}),e.jsx("div",{className:"font-semibold",children:x?"✅ Yes":"❌ No"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Hook Sub"}),e.jsx("div",{className:"font-semibold",children:g?"✅ Yes":"❌ No"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map((y,v)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h3",{className:`font-semibold ${f(y.status)}`,children:[b(y.status)," ",y.name]})}),e.jsx("div",{className:"p-4",children:e.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded overflow-x-auto max-h-64",children:JSON.stringify(y.data,null,2)})})]},v))}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"📊 Recent Subscription Events"}),e.jsx("button",{onClick:m,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Force Refresh"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No subscription events yet. Events will appear here as the subscription manager runs checks."}):e.jsx("div",{className:"divide-y divide-gray-100",children:n.slice(0,20).map((y,v)=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-sm font-mono text-gray-500 min-w-0",children:new Date(y.timestamp).toLocaleTimeString()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:y.type}),e.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(y.data,null,2)})]})]})},`event-${v}`))})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"🔄 Raw Redux Auth State"}),e.jsx("pre",{className:"text-xs bg-gray-50 p-4 rounded overflow-x-auto max-h-64",children:JSON.stringify({user:t,subscription:s},null,2)})]})]})},die=()=>{cr();const[t,s]=h.useState([]),[r,a]=h.useState(!1),[n,i]=h.useState(null);h.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const x=await(await fetch("/api/users",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();x.success?s(x.data.users):M.error("Failed to fetch users")}catch(m){console.error("Error fetching users:",m),M.error("Failed to fetch users")}finally{a(!1)}},o=async(m,x)=>{try{i(m);const p=await(await fetch(`/api/users/${m}/unlock`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();p.success?(M.success(`Account unlocked for ${x}`),l()):M.error(p.message||"Failed to unlock account")}catch(g){console.error("Error unlocking user:",g),M.error("Failed to unlock account")}finally{i(null)}},c=m=>m?new Date(m).toLocaleString():"N/A",u=m=>m.isLocked?e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(Rt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:"Locked"})]}):m.loginAttempts>0?e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[m.loginAttempts," failed attempts"]})]}):e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]}),d=m=>{const x={superadmin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",user:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x[m]||x.user}`,children:m})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage user accounts and unlock locked accounts"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{className:"h-6 w-6 text-gray-600 mr-2"}),e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:["Users (",t.length,")"]})]}),e.jsxs("button",{onClick:l,disabled:r,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(wt,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Login Attempts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m.firstName.charAt(0),m.lastName.charAt(0)]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[m.firstName," ",m.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:m.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(m==null?void 0:m.role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u(m)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[m.loginAttempts," / 5"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(m.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:m.isLocked&&e.jsxs("button",{onClick:()=>o(m.id,m.email),disabled:n===m.id,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:[e.jsx(u2,{className:"h-4 w-4 mr-1"}),n===m.id?"Unlocking...":"Unlock"]})})]},m.id))})]})})}),t.length===0&&!r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new user account."})]}),r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(wt,{className:"mx-auto h-12 w-12 text-gray-400 animate-spin"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Loading users..."})]})]})},uie=()=>{const t=cr(),s=He(Nr),{items:r,pagination:a,loading:n}=He(i=>i.notifications||{items:[],pagination:{},loading:!1});return h.useEffect(()=>{t(Od({page:1,limit:20,unreadOnly:!1,branchId:s==null?void 0:s._id}))},[t,s==null?void 0:s._id]),e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-gray-600",children:"Recent events and alerts across your branches."})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[r.length," of ",a.total||r.length," items"]}),e.jsx("button",{onClick:()=>t(Sb({branchId:s==null?void 0:s._id})),className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg",children:"Mark all as read"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:n?e.jsx("div",{className:"p-6 text-gray-500",children:"Loading..."}):r.length===0?e.jsx("div",{className:"p-6 text-gray-500",children:"No notifications found."}):r.map(i=>e.jsx("div",{className:`px-4 py-3 border-b border-gray-100 ${i.isRead?"bg-white":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"pr-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:i.title}),e.jsx("div",{className:"text-sm text-gray-700",children:i.message}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(i.createdAt).toLocaleString()})]}),!i.isRead&&e.jsx("button",{onClick:()=>t(Nb(i._id)),className:"text-xs text-blue-600 hover:underline",children:"Mark read"})]})},i._id))})]})},mie=({isOpen:t,onClose:s,userId:r,userName:a})=>{var y;const[n,i]=h.useState([]),[l,o]=h.useState(!1),[c,u]=h.useState(null);h.useEffect(()=>{t&&r&&d()},[t,r]);const d=async()=>{try{o(!0);const v=await et.getUserSubscriptionHistory(r);v.success?i(v.data||[]):M.error("Failed to load subscription history")}catch(v){console.error("Error loading subscription history:",v),M.error("Failed to load subscription history")}finally{o(!1)}},m=v=>v?new Date(v).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",x=v=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(v),g=v=>{const N={active:{color:"bg-green-100 text-green-800 border-green-200",icon:Be},trial:{color:"bg-blue-100 text-blue-800 border-blue-200",icon:ut},expired:{color:"bg-red-100 text-red-800 border-red-200",icon:Yt},cancelled:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:Yt},upgraded:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:_t},downgraded:{color:"bg-orange-100 text-orange-800 border-orange-200",icon:_t}},S=N[v]||N.active,w=S.icon;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border ${S.color}`,children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),v.charAt(0).toUpperCase()+v.slice(1)]})},p=v=>{const N={monthly:"bg-blue-100 text-blue-800",annual:"bg-green-100 text-green-800",trial:"bg-purple-100 text-purple-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${N[v]||N.monthly}`,children:v.charAt(0).toUpperCase()+v.slice(1)})},f=(v,N)=>{if(!N)return null;const S=v.totalBeds||0,w=N.totalBeds||0;return v.subscriptionPlanId!==N.subscriptionPlanId?{type:"plan_change",icon:_t,color:"text-purple-600"}:S>w?{type:"bed_upgrade",icon:WE,color:"text-green-600"}:S<w?{type:"bed_downgrade",icon:VE,color:"text-orange-600"}:null},b=()=>{const v=n.map(j=>{var k;return{"Plan Name":((k=j.subscriptionPlanId)==null?void 0:k.planName)||"N/A",Status:j.status,"Billing Cycle":j.billingCycle,"Total Beds":j.totalBeds,"Total Branches":j.totalBranches,Price:x(j.totalPrice),"Start Date":m(j.startDate),"End Date":m(j.endDate),"Trial End Date":m(j.trialEndDate),Created:m(j.createdAt)}}),N=[Object.keys(v[0]).join(","),...v.map(j=>Object.values(j).join(","))].join(`
`),S=new Blob([N],{type:"text/csv"}),w=window.URL.createObjectURL(S),C=document.createElement("a");C.href=w,C.download=`subscription_history_${a}_${new Date().toISOString().split("T")[0]}.csv`,C.click(),window.URL.revokeObjectURL(w),M.success("Subscription history exported successfully")};return t?e.jsx(vt,{children:e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:e.jsxs(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(Qd,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Subscription History"}),e.jsx("p",{className:"text-sm text-gray-600",children:a?`${a}'s subscription timeline`:"User subscription history"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.length>0&&e.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ct,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex h-[calc(90vh-80px)]",children:[e.jsx("div",{className:"w-1/2 border-r border-gray-200 overflow-y-auto",children:l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(wt,{className:"h-8 w-8 animate-spin text-blue-600"})}):n.length===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(Qd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Subscription History"}),e.jsx("p",{className:"text-gray-600",children:"This user hasn't had any subscriptions yet."})]})}):e.jsx("div",{className:"p-4 space-y-3",children:n.map((v,N)=>{var C;const S=f(v,n[N+1]),w=v.status==="active"||v.status==="trial";return e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:N*.1},className:`relative p-4 rounded-lg border cursor-pointer transition-all ${(c==null?void 0:c._id)===v._id?"border-blue-300 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>u(v),children:[N<n.length-1&&e.jsx("div",{className:"absolute left-6 top-16 w-0.5 h-8 bg-gray-200"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-2 ${w?"bg-green-500":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:((C=v.subscriptionPlanId)==null?void 0:C.planName)||"Unknown Plan"}),S&&e.jsxs("div",{className:`flex items-center space-x-1 ${S.color}`,children:[e.jsx(S.icon,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:S.type.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[g(v.status),p(v.billingCycle)]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Created: ",m(v.createdAt)]}),v.upgradeDate&&e.jsxs("span",{children:["Upgraded: ",m(v.upgradeDate)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(xs,{className:"h-3 w-3 mr-1"}),v.totalBeds," beds"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),v.totalBranches," branches"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ft,{className:"h-3 w-3 mr-1"}),x(v.totalPrice)]})]})]})]})]})]},v._id)})})}),e.jsx("div",{className:"w-1/2 overflow-y-auto",children:c?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:((y=c.subscriptionPlanId)==null?void 0:y.planName)||"Unknown Plan"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[g(c.status),p(c.billingCycle)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Total Beds"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:c.totalBeds})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Total Branches"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:c.totalBranches})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Total Price"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x(c.totalPrice)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Duration"]}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[c.durationDays," days"]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Important Dates"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-blue-800",children:"Start Date"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:m(c.startDate)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-green-800",children:"End Date"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:m(c.endDate)})]}),c.trialEndDate&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-purple-800",children:"Trial End Date"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:m(c.trialEndDate)})]}),c.upgradeDate&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-orange-800",children:"Last Upgrade"}),e.jsx("span",{className:"text-sm font-medium text-orange-900",children:m(c.upgradeDate)})]})]})]}),c.notes&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Notes"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:c.notes})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Usage Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:c.currentBedUsage||0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Beds Used"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:c.currentBranchUsage||1}),e.jsx("div",{className:"text-xs text-gray-600",children:"Branches Used"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Status Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Auto Renew"}),e.jsx("span",{className:`text-sm font-medium ${c.autoRenew?"text-green-600":"text-red-600"}`,children:c.autoRenew?"Enabled":"Disabled"})]}),c.cancelledAt&&e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Yt,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Cancelled"})]}),e.jsxs("div",{className:"text-xs text-red-700",children:["Cancelled on ",m(c.cancelledAt),c.cancellationReason&&e.jsxs("span",{children:[" - ",c.cancellationReason]})]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ot,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Subscription"}),e.jsx("p",{className:"text-gray-600",children:"Click on a subscription from the list to view details"})]})})})]})]})})}):null},xie=()=>{var P;const[t,s]=h.useState([]),[r,a]=h.useState([]),[n,i]=h.useState(!0),[l,o]=h.useState(null),[c,u]=h.useState(!1),[d,m]=h.useState({search:"",status:"active",billingCycle:"all",subscriptionPlanId:"all",userRole:"all",startDate:"",endDate:""}),[x,g]=h.useState(!1),[p,f]=h.useState(null),[b,y]=h.useState(!1);h.useEffect(()=>{v()},[]),h.useEffect(()=>{v()},[b]),h.useEffect(()=>{N()},[d,t]);const v=async()=>{try{i(!0);const T=b?"all":"active",[B,F]=await Promise.all([et.getAllSubscribers({status:T}),et.getSubscriptionManagementStats()]);B.success&&s(B.data),F.success&&o(F.data)}catch(T){console.error("Error loading subscriber data:",T),M.error("Failed to load subscriber data")}finally{i(!1)}},N=()=>{let T=[...t];if(d.search){const B=d.search.toLowerCase();T=T.filter(F=>{var L,I,V,_,G,U,A,q;return((I=(L=F.userId)==null?void 0:L.firstName)==null?void 0:I.toLowerCase().includes(B))||((_=(V=F.userId)==null?void 0:V.lastName)==null?void 0:_.toLowerCase().includes(B))||((U=(G=F.userId)==null?void 0:G.email)==null?void 0:U.toLowerCase().includes(B))||((q=(A=F.subscriptionPlanId)==null?void 0:A.planName)==null?void 0:q.toLowerCase().includes(B))})}if(d.status!=="all"&&(T=T.filter(B=>B.status===d.status)),d.billingCycle!=="all"&&(T=T.filter(B=>B.billingCycle===d.billingCycle)),d.subscriptionPlanId!=="all"&&(T=T.filter(B=>{var F;return((F=B.subscriptionPlanId)==null?void 0:F._id)===d.subscriptionPlanId})),d.userRole!=="all"&&(T=T.filter(B=>{var F;return((F=B.userId)==null?void 0:F.role)===d.userRole})),d.startDate){const B=new Date(d.startDate);T=T.filter(F=>new Date(F.startDate)>=B)}if(d.endDate){const B=new Date(d.endDate);T=T.filter(F=>new Date(F.endDate)<=B)}a(T)},S=T=>T?new Date(T).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",w=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(T),C=T=>{const B={active:{color:"bg-green-100 text-green-800 border-green-200",icon:Be},trial:{color:"bg-blue-100 text-blue-800 border-blue-200",icon:ut},expired:{color:"bg-red-100 text-red-800 border-red-200",icon:Yt},cancelled:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:Yt},upgraded:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:_t},downgraded:{color:"bg-orange-100 text-orange-800 border-orange-200",icon:_t}},F=B[T]||B.active,L=F.icon;return e.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded border ${F.color}`,children:[e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{className:"capitalize",children:T})]})},j=T=>e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded border ${T==="monthly"?"bg-blue-100 text-blue-800 border-blue-200":"bg-purple-100 text-purple-800 border-purple-200"}`,children:T==="monthly"?"Monthly":"Annual"}),k=async T=>{try{const B=await et.getUserSubscriptionHistory(T.userId._id);f({subscriber:T.userId,history:B.data}),g(!0)}catch{M.error("Failed to load subscription history")}},E=T=>{k(T)},R=(T,B)=>{if(T==null)return null;let F="bg-green-100 text-green-800 border-green-200";return B?F="bg-yellow-100 text-yellow-800 border-yellow-200":T<0&&(F="bg-red-100 text-red-800 border-red-200"),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded border ${F}`,children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),T<0?"Expired":`${T} days left`]})},D=()=>t.map(B=>B.subscriptionPlanId).filter(B=>B).filter((B,F,L)=>F===L.findIndex(I=>I._id===B._id));return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Je,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Subscriber Management"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage all subscription subscribers and their history"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>u(!c),className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-sm",children:[e.jsx(aa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"})]}),e.jsxs("button",{onClick:()=>y(!b),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 shadow-sm ${b?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 bg-white border border-gray-200 hover:bg-gray-50"}`,children:[e.jsx(Qd,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:b?"All Subscriptions":"Active Only"})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-sm",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Subscription Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.totalActive||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Subscribers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w(l.totalRevenue||0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Current Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.trialActiveCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Trial Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.expiringSoonCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expiring Soon"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Subscribers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:l.totalActive||0}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2 text-xs",children:[e.jsxs("span",{className:"text-blue-600",children:["Monthly: ",l.monthlyCount||0]}),e.jsxs("span",{className:"text-purple-600",children:["Annual: ",l.annualCount||0]})]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:e.jsx(Je,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Trial Users"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:l.trialActiveCount||0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.trialExpiredCount||0," expired this month"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:e.jsx(ut,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon (30 days)"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:l.expiringSoonCount||0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.expiredCount||0," expired this month"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 text-orange-600"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:w(l.monthlyRevenue||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Monthly: ",w(l.monthlyRevenue||0)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Annual: ",w(l.annualRevenue||0)]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"h-6 w-6 text-green-600"})})]})})]})]})]}),e.jsx(vt,{children:c&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search subscribers...",value:d.search,onChange:T=>m({...d,search:T.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs(ls,{value:d.status,onValueChange:T=>m({...d,status:T}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Status"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Status"}),e.jsx(ke,{value:"active",children:"Active"}),e.jsx(ke,{value:"trial",children:"Trial"}),e.jsx(ke,{value:"expired",children:"Expired"}),e.jsx(ke,{value:"cancelled",children:"Cancelled"}),e.jsx(ke,{value:"upgraded",children:"Upgraded"}),e.jsx(ke,{value:"downgraded",children:"Downgraded"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Billing Cycle"}),e.jsxs(ls,{value:d.billingCycle,onValueChange:T=>m({...d,billingCycle:T}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Billing Cycles"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Billing Cycles"}),e.jsx(ke,{value:"monthly",children:"Monthly"}),e.jsx(ke,{value:"annual",children:"Annual"}),e.jsx(ke,{value:"trial",children:"Trial"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Plan"}),e.jsxs(ls,{value:d.subscriptionPlanId,onValueChange:T=>m({...d,subscriptionPlanId:T}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Plans"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Plans"}),D().map(T=>e.jsx(ke,{value:T._id,children:T.planName},T._id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role"}),e.jsxs(ls,{value:d.userRole,onValueChange:T=>m({...d,userRole:T}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Roles"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Roles"}),e.jsx(ke,{value:"admin",children:"Admin"}),e.jsx(ke,{value:"user",children:"User"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date From"}),e.jsx("input",{type:"date",value:d.startDate,onChange:T=>m({...d,startDate:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date To"}),e.jsx("input",{type:"date",value:d.endDate,onChange:T=>m({...d,endDate:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>m({search:"",status:"all",billingCycle:"all",subscriptionPlanId:"all",userRole:"all",startDate:"",endDate:""}),className:"w-full px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200",children:"Clear Filters"})})]})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Subscribers (",r.length,")",b&&e.jsx("span",{className:"text-sm text-blue-600 ml-2",children:"(including cancelled)"})]}),(d.search||d.status!==(b?"all":"active")||d.billingCycle!=="all"||d.subscriptionPlanId!=="all"||d.userRole!=="all"||d.startDate||d.endDate)&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Filtered from ",t.length," ",b?"total":"active"," subscribers"]})]})}),e.jsx("div",{className:"block md:hidden space-y-4 p-4",children:r.map((T,B)=>{var F,L,I,V;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:B*.05},className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(jt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[(F=T.userId)==null?void 0:F.firstName," ",(L=T.userId)==null?void 0:L.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:(I=T.userId)==null?void 0:I.email})]})]}),C(T.status)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Plan"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(V=T.subscriptionPlanId)==null?void 0:V.planName}),e.jsx("p",{className:"text-xs text-gray-600",children:T.billingCycle==="trial"?"Trial Period":`${w(T.totalPrice)}/${T.billingCycle}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Usage"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[T.currentBedUsage||0,"/",T.totalBeds," beds"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[T.currentBranchUsage||1,"/",T.totalBranches," branches"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Subscription Period"}),e.jsx("p",{className:"text-xs text-gray-900",children:T.billingCycle==="trial"?`${S(T.startDate)} - ${S(T.trialEndDate)}`:`${S(T.startDate)} - ${S(T.endDate)}`}),T.billingCycle==="trial"&&T.daysRemaining>0&&e.jsxs("p",{className:"text-xs text-blue-600",children:[T.daysRemaining," trial days remaining"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>E(T),className:"flex-1 px-3 py-2 text-xs bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors",children:"View Details"}),e.jsx("button",{onClick:()=>k(T),className:"flex-1 px-3 py-2 text-xs bg-gray-50 text-gray-700 rounded-md hover:bg-gray-100 transition-colors",children:"History"})]})]},T._id)})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscriber"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Billing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.jsx(vt,{children:r.map((T,B)=>{var F,L,I,V,_,G,U;return e.jsxs(ae.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:B*.05},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(jt,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(F=T.userId)==null?void 0:F.firstName," ",(L=T.userId)==null?void 0:L.lastName]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[e.jsx(Tr,{className:"h-3 w-3"}),e.jsx("span",{children:(I=T.userId)==null?void 0:I.email})]}),e.jsx("div",{className:"text-xs text-gray-400 capitalize",children:(V=T.userId)==null?void 0:V.role})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(_=T.subscriptionPlanId)==null?void 0:_.planName}),e.jsxs("div",{className:"text-sm text-gray-500",children:[w(T.totalPrice),"/",T.billingCycle]}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(xs,{className:"h-3 w-3"}),e.jsxs("span",{children:[T.totalBeds," beds"]})]}),T.totalBranches>1&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsxs("span",{children:[T.totalBranches," branches"]})]})]}),((U=(G=T.subscriptionPlanId)==null?void 0:G.features)==null?void 0:U.length)>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[T.subscriptionPlanId.features.slice(0,2).map((A,q)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:A.name},q)),T.subscriptionPlanId.features.length>2&&e.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:["+",T.subscriptionPlanId.features.length-2," more"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[C(T.status),T.isExpiringSoon&&T.daysRemaining>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded border bg-yellow-100 text-yellow-800 border-yellow-200",children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Expires soon"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.billingCycle==="trial"?e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded border bg-blue-100 text-blue-800 border-blue-200",children:"Trial Period"}),T.daysRemaining>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[T.daysRemaining," days left"]})]}):j(T.billingCycle)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["Start: ",S(T.startDate)]}),T.billingCycle==="trial"?e.jsxs("div",{className:"text-blue-600",children:["Trial ends: ",S(T.trialEndDate)]}):e.jsxs("div",{children:["End: ",S(T.endDate)]}),T.billingCycle!=="trial"&&T.trialEndDate&&e.jsxs("div",{className:"text-xs text-gray-400",children:["Trial ended: ",S(T.trialEndDate)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{children:["Beds: ",T.currentBedUsage,"/",T.totalBeds]}),e.jsxs("div",{children:["Branches: ",T.currentBranchUsage,"/",T.totalBranches]}),R(T.daysRemaining,T.isExpiringSoon)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E(T),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View Details & History",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(T),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors",title:"View Subscription History",children:e.jsx(Qd,{className:"h-4 w-4"})})]})})]},T._id)})})})]})}),r.length===0&&e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(Je,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Subscribers Found"}),e.jsx("p",{className:"text-gray-600",children:t.length===0?"No subscribers have been added yet.":"Try adjusting your filters to see more results."})]}),e.jsx(mie,{isOpen:x,onClose:()=>{g(!1),f(null)},userId:(P=p==null?void 0:p.subscriber)==null?void 0:P._id,userName:p?`${p.subscriber.firstName} ${p.subscriber.lastName}`:""})]})]})},hie=Array.from({length:50},(t,s)=>({id:`BILL-${1e3+s}`,date:new Date(2024,Math.floor(Math.random()*12),Math.floor(Math.random()*28)+1),amount:parseFloat((Math.random()*1e4).toFixed(2)),status:["Paid","Pending","Overdue"][Math.floor(Math.random()*3)],type:["Subscription","Bed Top-up","Branch Extension"][Math.floor(Math.random()*3)],branch:`Branch ${Math.floor(Math.random()*5)+1}`,plan:["Basic","Pro","Enterprise"][Math.floor(Math.random()*3)],description:`Sample billing record for ${["Subscription","Bed Top-up","Branch Extension"][Math.floor(Math.random()*3)]}`})),fie=({bill:t,onClose:s})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Bill Details"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Bill ID"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.date.toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsxs("p",{className:"font-bold text-green-600",children:["₹",t.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="Paid"?"bg-green-100 text-green-800":t.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Branch"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.branch})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Plan"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.plan})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Print"})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:"Close"})]})]})}):null,gie=({bill:t,onClose:s})=>{if(!t)return null;const r=[{date:new Date(t.date.getTime()-864e5),action:"Bill Generated",details:`Initial bill created for ${t.type}`},{date:new Date(t.date.getTime()-432e5),action:"Payment Processing",details:"Payment is being processed"},{date:t.date,action:"Payment Completed",details:`Successful payment of ₹${t.amount.toLocaleString()}`}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Billing History"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsx("div",{className:"space-y-4",children:r.map((a,n)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:a.date.toLocaleDateString()})}),e.jsxs("div",{className:"flex-1 border-l-2 border-gray-200 pl-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.action}),e.jsx("p",{className:"text-sm text-gray-600",children:a.details})]})]},n))})}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:e.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:"Close"})})]})})},pie=()=>{const[t,s]=h.useState("list"),[r,a]=h.useState({status:"",type:"",branch:"",plan:"",dateRange:""}),[n,i]=h.useState(""),[l,o]=h.useState(1),[c,u]=h.useState(null),[d,m]=h.useState(null),x=10,g=h.useMemo(()=>hie.filter(S=>{const w=!r.status||S.status===r.status,C=!r.type||S.type===r.type,j=!r.branch||S.branch===r.branch,k=!r.plan||S.plan===r.plan,E=S.id.toLowerCase().includes(n.toLowerCase());return w&&C&&j&&k&&E}),[r,n]),p=h.useMemo(()=>{const S=(l-1)*x;return g.slice(S,S+x)},[g,l]),f=Math.ceil(g.length/x),b=()=>{a({status:"",type:"",branch:"",plan:"",dateRange:""}),i(""),o(1)},y=()=>e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",l," of ",f]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(S=>Math.max(1,S-1)),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded-lg disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>o(S=>Math.min(f,S+1)),disabled:l===f,className:"px-3 py-1 border border-gray-300 rounded-lg disabled:opacity-50",children:"Next"})]})]}),v=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:S.id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:S.date.toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:["₹",S.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="Paid"?"bg-green-100 text-green-800":S.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:S.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:S.type}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:S.branch}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>u(S),className:"text-blue-600 hover:text-blue-800",title:"Preview Bill",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m(S),className:"text-green-600 hover:text-green-800",title:"Billing History",children:e.jsx(ut,{className:"h-4 w-4"})})]})})]},S.id))})]}),y()]}),N=()=>e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(S=>e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:S.id}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="Paid"?"bg-green-100 text-green-800":S.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:S.status})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₹",S.amount.toLocaleString()]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:S.type}),e.jsx("span",{children:S.date.toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:S.branch}),e.jsx("span",{className:"font-medium",children:S.plan})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("button",{onClick:()=>u(S),className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Preview"})]}),e.jsxs("button",{onClick:()=>m(S),className:"text-green-600 hover:text-green-800 flex items-center space-x-1",children:[e.jsx(ut,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"History"})]})]})]},S.id))}),y()]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ft,{className:"h-8 w-8 mr-3 text-blue-600"}),"Billing History"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage your billing records"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>s(t==="list"?"grid":"list"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:t==="list"?"Switch to Grid View":"Switch to List View",children:t==="list"?e.jsx(i2,{className:"h-5 w-5"}):e.jsx(l2,{className:"h-5 w-5"})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search bills...",value:n,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx(Os,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"})]}),e.jsxs(ls,{value:r.status,onValueChange:S=>a(w=>({...w,status:S})),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Status"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"Paid",children:"Paid"}),e.jsx(ke,{value:"Pending",children:"Pending"}),e.jsx(ke,{value:"Overdue",children:"Overdue"})]})]}),e.jsxs(ls,{value:r.type,onValueChange:S=>a(w=>({...w,type:S})),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Type"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"Subscription",children:"Subscription"}),e.jsx(ke,{value:"Bed Top-up",children:"Bed Top-up"}),e.jsx(ke,{value:"Branch Extension",children:"Branch Extension"})]})]}),e.jsxs(ls,{value:r.branch,onValueChange:S=>a(w=>({...w,branch:S})),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Branch"})}),e.jsx(Zt,{children:["Branch 1","Branch 2","Branch 3","Branch 4","Branch 5"].map(S=>e.jsx(ke,{value:S,children:S},S))})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset Filters"})]})})]}),e.jsx(vt,{children:t==="list"?v():N()}),c&&e.jsx(fie,{bill:c,onClose:()=>u(null)}),d&&e.jsx(gie,{bill:d,onClose:()=>m(null)})]})},Sd={getDashboard:async(t="24h")=>(await fetch(`/api/security/dashboard?timeRange=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),getAlerts:async(t="24h")=>(await fetch(`/api/security/alerts?timeRange=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),getMetrics:async(t="24h")=>(await fetch(`/api/security/metrics?timeRange=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),getUserProfile:async t=>(await fetch(`/api/security/users/${t}/profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),triggerSecurityCheck:async(t,s)=>(await fetch(`/api/security/users/${t}/check`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({reason:s})})).json()},bie=()=>{var w,C,j;const[t,s]=h.useState(null),[r,a]=h.useState([]),[n,i]=h.useState(null),[l,o]=h.useState(!0),[c,u]=h.useState("24h"),[d,m]=h.useState(null),[x,g]=h.useState(null),[p,f]=h.useState(!1);h.useEffect(()=>{b()},[c]);const b=async()=>{try{o(!0);const[k,E,R]=await Promise.all([Sd.getDashboard(c),Sd.getAlerts(c),Sd.getMetrics(c)]);k.success&&s(k.data),E.success&&a(E.data),R.success&&i(R.data)}catch(k){console.error("Failed to load security dashboard:",k),M.error("Failed to load security dashboard")}finally{o(!1)}},y=async k=>{try{const E=await Sd.getUserProfile(k.userId);E.success&&(g(E.data),m(k),f(!0))}catch{M.error("Failed to load user security profile")}},v=async k=>{try{(await Sd.triggerSecurityCheck(k,"manual_admin_check")).success?(M.success("Security check completed"),b()):M.error("Security check failed")}catch{M.error("Failed to perform security check")}},N=k=>{switch(k){case"critical":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-green-600 bg-green-100"}},S=k=>{switch(k){case"critical":return e.jsx(Yt,{className:"h-4 w-4"});case"high":return e.jsx(Rt,{className:"h-4 w-4"});case"medium":return e.jsx(Ze,{className:"h-4 w-4"});default:return e.jsx(Be,{className:"h-4 w-4"})}};return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(is,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Security Dashboard"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor system security, threats, and suspicious activities"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1h",children:"Last Hour"}),e.jsx("option",{value:"24h",children:"Last 24 Hours"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"})]}),e.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),n&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(Ys,{icon:e.jsx(is,{className:"h-6 w-6 text-blue-600"}),title:"Total Activities",value:n.summary.totalActivities.toLocaleString(),subtitle:`Last ${c}`}),e.jsx(Ys,{icon:e.jsx(Rt,{className:"h-6 w-6 text-red-600"}),title:"Security Alerts",value:n.summary.securityAlerts.toString(),subtitle:"Threats detected",change:n.summary.securityAlerts>0?"warning":"neutral"}),e.jsx(Ys,{icon:e.jsx(hg,{className:"h-6 w-6 text-orange-600"}),title:"High Risk Users",value:n.summary.highRiskUsers.toString(),subtitle:"Require attention",change:n.summary.highRiskUsers>0?"warning":"neutral"}),e.jsx(Ys,{icon:e.jsx(Yt,{className:"h-6 w-6 text-red-600"}),title:"Blocked Actions",value:n.summary.blockedActivities.toString(),subtitle:"Prevented threats",change:n.summary.blockedActivities>0?"warning":"neutral"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Rt,{className:"h-5 w-5 mr-2 text-red-600"}),"Recent Security Alerts"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," alerts in ",c]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Be,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),e.jsx("p",{children:"No security alerts in the selected time period"})]}):r.slice(0,10).map((k,E)=>{var R,D;return e.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:E*.1},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${N(k.riskLevel)}`,children:S(k.riskLevel)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(R=k.userId)==null?void 0:R.firstName," ",(D=k.userId)==null?void 0:D.lastName," • ",new Date(k.timestamp).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(k.riskLevel)}`,children:k.riskLevel}),e.jsx("button",{onClick:()=>k.userId&&y(k),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:e.jsx(ot,{className:"h-4 w-4"})})]})]},k._id||E)})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Jt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Risk Overview"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Critical Threats"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:(n==null?void 0:n.summary.criticalAlerts)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Failed Auth Attempts"}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:(n==null?void 0:n.summary.failedAuthAttempts)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Suspicious IPs"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600",children:(n==null?void 0:n.summary.suspiciousIPs)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Unique Devices"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:(n==null?void 0:n.summary.totalActivities)||0})]})]})]}),(t==null?void 0:t.topThreats)&&t.topThreats.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(_t,{className:"h-5 w-5 mr-2 text-red-600"}),"Top Threats"]}),e.jsx("div",{className:"space-y-2",children:t.topThreats.slice(0,5).map((k,E)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate",children:k._id}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:k.count})]},E))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-gray-600"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>M.success("Security scan initiated"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Run Security Scan"}),e.jsx("button",{onClick:()=>M.success("Reports generated"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Generate Report"}),e.jsx("button",{onClick:()=>M.success("Alert thresholds updated"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Configure Alerts"})]})]})]})]}),p&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Security Profile"}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:e.jsx(Yt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-medium",children:[(w=x.user.firstName)==null?void 0:w.charAt(0),(C=x.user.lastName)==null?void 0:C.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[x.user.firstName," ",x.user.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:x.user.email}),e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:(j=x.user)==null?void 0:j.role})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.securitySummary.totalActivities}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.securitySummary.highRiskActivities}),e.jsx("div",{className:"text-sm text-gray-600",children:"High Risk Activities"})]})]}),e.jsx("div",{className:`p-4 rounded-lg ${N(x.securitySummary.riskLevel)}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[S(x.securitySummary.riskLevel),e.jsxs("span",{className:"font-medium capitalize",children:["Risk Level: ",x.securitySummary.riskLevel]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Recent Activities"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:x.recentActivities.slice(0,5).map((k,E)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:k.activityType}),e.jsx("p",{className:"text-xs text-gray-500",children:k.ipAddress})]}),e.jsx("div",{className:`px-2 py-1 text-xs rounded ${N(k.riskLevel)}`,children:k.riskLevel})]},E))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>v(x.user._id),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Run Security Check"}),e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})]})]})]})})]})},G1={getForecast:async(t=12,s="realistic")=>(await fetch(`/api/advanced/revenue/forecast?timeframe=${t}&forecastType=${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),getInsights:async()=>(await fetch("/api/advanced/revenue/insights",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json()},yie=()=>{var g;const[t,s]=h.useState(null),[r,a]=h.useState(null),[n,i]=h.useState(!0),[l,o]=h.useState(12),[c,u]=h.useState("realistic");h.useEffect(()=>{d()},[l,c]);const d=async()=>{try{i(!0);const[p,f]=await Promise.all([G1.getForecast(l,c),G1.getInsights()]);p.success&&s(p.data),f.success&&a(f.data)}catch(p){console.error("Failed to load revenue data:",p),M.error("Failed to load revenue dashboard")}finally{i(!1)}},m=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(p),x=p=>`${p==null?void 0:p.toFixed(1)}%`;return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(_t,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Revenue Dashboard"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Predictive analytics and revenue forecasting"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:l,onChange:p=>o(parseInt(p.target.value)),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:6,children:"6 Months"}),e.jsx("option",{value:12,children:"12 Months"}),e.jsx("option",{value:18,children:"18 Months"}),e.jsx("option",{value:24,children:"24 Months"})]}),e.jsxs("select",{value:c,onChange:p=>u(p.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"conservative",children:"Conservative"}),e.jsx("option",{value:"realistic",children:"Realistic"}),e.jsx("option",{value:"optimistic",children:"Optimistic"}),e.jsx("option",{value:"aggressive",children:"Aggressive"})]}),e.jsxs("button",{onClick:d,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),r&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(Ys,{icon:e.jsx(Ft,{className:"h-6 w-6 text-green-600"}),title:"Current MRR",value:m(r.currentMRR),subtitle:"Monthly Recurring Revenue"}),e.jsx(Ys,{icon:e.jsx(_t,{className:"h-6 w-6 text-blue-600"}),title:"Current ARR",value:m(r.currentARR),subtitle:"Annual Recurring Revenue"}),e.jsx(Ys,{icon:e.jsx(ga,{className:"h-6 w-6 text-purple-600"}),title:"6-Month Forecast",value:m(r.projectedRevenue6Months),subtitle:"Predicted revenue"}),e.jsx(Ys,{icon:e.jsx(Jt,{className:"h-6 w-6 text-orange-600"}),title:"Growth Rate",value:x(r.growthRate*100),subtitle:"Monthly growth rate",change:r.growthRate>0?"positive":"negative"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Jt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Revenue Forecast (",l," Months)"]}),e.jsxs("span",{className:"text-sm text-gray-500 capitalize",children:[c," Model"]})]}),(t==null?void 0:t.forecast)&&e.jsx(pl,{type:"line",data:{labels:t.forecast.map(p=>p.month),values:t.forecast.map(p=>p.predictedRevenue)},height:300,options:{plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:p=>m(p)}}}}})]}),(t==null?void 0:t.confidenceIntervals)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confidence Intervals"}),e.jsx("div",{className:"space-y-3",children:t.confidenceIntervals.slice(0,6).map((p,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:p.month}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[m(p.lowerBound)," - ",m(p.upperBound)]}),e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${p.confidenceLevel>=90?"bg-green-100 text-green-800":p.confidenceLevel>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[p.confidenceLevel,"%"]})]})]},f))})]})]}),e.jsxs("div",{className:"space-y-6",children:[(r==null?void 0:r.topPerformingPlans)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(_t,{className:"h-5 w-5 mr-2 text-green-600"}),"Top Performing Plans"]}),e.jsx("div",{className:"space-y-3",children:r.topPerformingPlans.map((p,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.planName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.subscriberCount," subscribers"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:m(p.monthlyRevenue)}),e.jsx("p",{className:"text-xs text-gray-500",children:"MRR"})]})]},f))})]}),(r==null?void 0:r.recommendations)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI Recommendations"]}),e.jsx("div",{className:"space-y-3",children:r.recommendations.map((p,f)=>e.jsx("div",{className:`p-3 rounded-lg border ${p.priority==="high"?"border-red-200 bg-red-50":p.priority==="medium"?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[p.type==="positive"?e.jsx(Be,{className:"h-4 w-4 text-green-600 mt-0.5"}):p.type==="warning"?e.jsx(Rt,{className:"h-4 w-4 text-yellow-600 mt-0.5"}):e.jsx(Es,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.title}),e.jsx("p",{className:"text-xs text-gray-600",children:p.description}),p.potentialSavings&&e.jsxs("p",{className:"text-xs font-medium text-green-600 mt-1",children:["Potential savings: ",m(p.potentialSavings)]})]})]})},f))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"12-Month Forecast"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:m((r==null?void 0:r.projectedRevenue12Months)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Revenue/User"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:m((r==null?void 0:r.averageRevenuePerUser)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Potential Savings"}),e.jsx("span",{className:"text-sm font-medium text-purple-600",children:m(((g=r==null?void 0:r.recommendations)==null?void 0:g.reduce((p,f)=>p+(f.potentialSavings||0),0))||0)})]})]})]})]})]}),(t==null?void 0:t.historicalData)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Historical Performance"}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transactions"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Users"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Transaction"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.historicalData.map((p,f)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:p.month}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:m(p.revenue)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:p.transactions}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:p.uniqueUsers}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:m(p.averageTransaction)})]},f))})]})})]})]})},q1={getDashboard:async(t="30d")=>(await fetch(`/api/advanced/usage/dashboard?timeframe=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),getCostBreakdown:async()=>(await fetch("/api/advanced/usage/cost-breakdown",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json()},vie=()=>{const[t,s]=h.useState(null),[r,a]=h.useState(null),[n,i]=h.useState(!0),[l,o]=h.useState("30d");h.useEffect(()=>{c()},[l]);const c=async()=>{try{i(!0);const[m,x]=await Promise.all([q1.getDashboard(l),q1.getCostBreakdown()]);m.success&&s(m.data),x.success&&a(x.data)}catch(m){console.error("Failed to load usage data:",m),M.error("Failed to load usage dashboard")}finally{i(!1)}},u=m=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(m),d=m=>`${m==null?void 0:m.toFixed(1)}%`;return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ys,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Usage Dashboard"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Real-time usage monitoring and resource utilization"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:l,onChange:m=>o(m.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"}),e.jsx("option",{value:"1y",children:"Last Year"})]}),e.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),t&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(Ys,{icon:e.jsx(Je,{className:"h-6 w-6 text-blue-600"}),title:"Active Residents",value:t.currentUsage.residents.active.toString(),subtitle:`of ${t.limits.beds.allowed} beds`}),e.jsx(Ys,{icon:e.jsx(Ia,{className:"h-6 w-6 text-green-600"}),title:"Room Utilization",value:d(t.currentUsage.rooms.occupancyRate),subtitle:`${t.currentUsage.rooms.occupied}/${t.currentUsage.rooms.total} occupied`}),e.jsx(Ys,{icon:e.jsx(xs,{className:"h-6 w-6 text-purple-600"}),title:"Bed Utilization",value:d(t.currentUsage.beds.utilizationRate),subtitle:`${t.currentUsage.beds.occupied}/${t.currentUsage.beds.total} occupied`}),e.jsx(Ys,{icon:e.jsx(Ft,{className:"h-6 w-6 text-emerald-600"}),title:"Payment Volume",value:u(t.currentUsage.payments.totalAmount),subtitle:`${t.currentUsage.payments.transactionCount} transactions`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Jt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Resource Utilization"]}),e.jsx("span",{className:"text-sm text-gray-500",children:l})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bed Utilization"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.currentUsage.beds.occupied,"/",t.currentUsage.beds.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${t.currentUsage.beds.utilizationRate>=90?"bg-red-500":t.currentUsage.beds.utilizationRate>=70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(t.currentUsage.beds.utilizationRate,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[d(t.utilizationRates.beds.current)," utilized"]}),e.jsxs("span",{children:[t.utilizationRates.beds.remaining," beds remaining"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Room Utilization"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.currentUsage.rooms.occupied,"/",t.currentUsage.rooms.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${t.currentUsage.rooms.occupancyRate>=95?"bg-red-500":t.currentUsage.rooms.occupancyRate>=80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(t.currentUsage.rooms.occupancyRate,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[d(t.utilizationRates.rooms.current)," occupied"]}),e.jsxs("span",{children:[t.utilizationRates.rooms.remaining," rooms available"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Resident Capacity"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.currentUsage.residents.active,"/",t.limits.beds.allowed]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${t.utilizationRates.residents.utilization>=90?"bg-red-500":t.utilizationRates.residents.utilization>=70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(t.utilizationRates.residents.utilization,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[d(t.utilizationRates.residents.utilization)," capacity used"]}),e.jsxs("span",{children:[t.limits.beds.allowed-t.currentUsage.residents.active," spots available"]})]})]})]})]}),(t==null?void 0:t.trends)&&t.trends.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(_t,{className:"h-5 w-5 mr-2 text-green-600"}),"Usage Trends"]}),e.jsx(pl,{type:"line",data:{labels:t.trends.map(m=>m.date),values:t.trends.map(m=>m.beds)},height:250,options:{plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Bed Utilization"}}}}})]})]}),e.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.alerts)&&t.alerts.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Rt,{className:"h-5 w-5 mr-2 text-red-600"}),"Usage Alerts"]}),e.jsx("div",{className:"space-y-3",children:t.alerts.map((m,x)=>e.jsx("div",{className:`p-3 rounded-lg border ${m.severity==="high"?"border-red-200 bg-red-50":m.severity==="medium"?"border-yellow-200 bg-yellow-50":"border-blue-200 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Rt,{className:`h-4 w-4 mt-0.5 ${m.severity==="high"?"text-red-600":m.severity==="medium"?"text-yellow-600":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.title}),e.jsx("p",{className:"text-xs text-gray-600",children:m.message})]})]})},x))})]}),r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Base Subscription"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u(r.baseSubscription)})]}),r.extraBeds>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Extra Beds (",r.extraBeds,")"]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u(r.extraBedCost)})]}),r.extraBranches>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Extra Branches (",r.extraBranches,")"]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u(r.branchCost)})]}),r.discounts>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-green-600",children:"Discounts"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",u(r.discounts)]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Subtotal"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u(r.subtotal)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Taxes (18% GST)"}),e.jsx("span",{className:"text-sm text-gray-600",children:u(r.taxes)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-base font-bold text-green-600",children:u(r.total)})]})]})]})]}),(t==null?void 0:t.subscription)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-blue-600"}),"Subscription Info"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Plan"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.subscription.planName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t.subscription.status==="active"?"bg-green-100 text-green-800":t.subscription.status==="trial"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t.subscription.status})]}),t.subscription.endDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t.subscription.status==="trial"?"Trial Ends":"Next Billing"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(t.subscription.endDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Limits"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("p",{children:[t.limits.beds.allowed," beds allowed"]}),e.jsxs("p",{children:[t.limits.branches.allowed," branches allowed"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(xi,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Upgrade Plan"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Add More Beds"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"View Cost Calculator"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Contact Support"})]})]})]})]})]})},Cd={calculateCost:async(t,s)=>(await fetch("/api/advanced/cost/calculate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({planId:t,configuration:s})})).json(),comparePlans:async(t,s)=>(await fetch("/api/advanced/cost/compare",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({planIds:t,configuration:s})})).json(),getCurrentCost:async()=>(await fetch("/api/advanced/cost/current",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),calculateUpgrade:async(t,s,r)=>(await fetch("/api/advanced/cost/upgrade",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({currentPlanId:t,targetPlanId:s,configuration:r})})).json(),getOptimization:async()=>(await fetch("/api/advanced/cost/optimization",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),getPricingTiers:async(t,s,r)=>{const a=new URLSearchParams;return t&&a.append("beds",t),s&&a.append("branches",s),r&&a.append("billingCycle",r),(await fetch(`/api/advanced/cost/tiers?${a.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json()}},jie=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(null),[n,i]=h.useState({beds:10,branches:1,billingCycle:"monthly"}),[l,o]=h.useState(null),[c,u]=h.useState(null),[d,m]=h.useState(null),[x,g]=h.useState(null),[p,f]=h.useState(!1),[b,y]=h.useState("calculator");h.useEffect(()=>{v(),N()},[]);const v=async()=>{try{const R=await(await fetch("/api/subscriptions/active/plans",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json();R.success&&(s(R.data),R.data.length>0&&!r&&a(R.data[0]))}catch(E){console.error("Failed to load plans:",E),M.error("Failed to load subscription plans")}},N=async()=>{try{const E=await Cd.getCurrentCost();E.success&&o(E.data)}catch(E){console.error("Failed to load current cost:",E)}},S=async()=>{if(r)try{f(!0);const E=await Cd.calculateCost(r._id,n);E.success?(o(E.data),M.success("Cost calculated successfully")):M.error(E.message||"Failed to calculate cost")}catch(E){console.error("Cost calculation error:",E),M.error("Failed to calculate cost")}finally{f(!1)}},w=async()=>{try{f(!0);const E=t.slice(0,3).map(D=>D._id),R=await Cd.comparePlans(E,n);R.success?(u(R.data),y("compare"),M.success("Plans compared successfully")):M.error(R.message||"Failed to compare plans")}catch(E){console.error("Plan comparison error:",E),M.error("Failed to compare plans")}finally{f(!1)}},C=async()=>{try{f(!0);const E=await Cd.getOptimization();E.success?(m(E.data),y("optimize"),M.success("Optimization suggestions loaded")):M.error(E.message||"Failed to get optimization suggestions")}catch(E){console.error("Optimization error:",E),M.error("Failed to get optimization suggestions")}finally{f(!1)}},j=async()=>{try{f(!0);const E=await Cd.getPricingTiers(n.beds,n.branches,n.billingCycle);E.success?(g(E.data),y("tiers"),M.success("Pricing tiers loaded")):M.error(E.message||"Failed to load pricing tiers")}catch(E){console.error("Pricing tiers error:",E),M.error("Failed to load pricing tiers")}finally{f(!1)}},k=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(E);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ic,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cost Calculator"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Calculate, compare, and optimize your subscription costs"})]})]})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1",children:[{key:"calculator",label:"Calculator",icon:ic},{key:"compare",label:"Compare",icon:Jt},{key:"optimize",label:"Optimize",icon:ga},{key:"tiers",label:"Tiers",icon:_t}].map(E=>e.jsxs("button",{onClick:()=>y(E.key),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors flex items-center space-x-2 ${b===E.key?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(E.icon,{className:"h-4 w-4"}),e.jsx("span",{children:E.label})]},E.key))})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Plan"}),e.jsxs("select",{value:(r==null?void 0:r._id)||"",onChange:E=>{const R=t.find(D=>D._id===E.target.value);a(R)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a plan..."}),t.map(E=>e.jsxs("option",{value:E._id,children:[E.planName," - ",k(E.basePrice),"/",E.billingCycle]},E._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Beds"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:n.beds,onChange:E=>i(R=>({...R,beds:parseInt(E.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Branches"}),e.jsx("input",{type:"number",min:"1",max:"50",value:n.branches,onChange:E=>i(R=>({...R,branches:parseInt(E.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Billing Cycle"}),e.jsxs("select",{value:n.billingCycle,onChange:E=>i(R=>({...R,billingCycle:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"annual",children:"Annual"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsxs("button",{onClick:S,disabled:p||!r,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[p?e.jsx(wt,{className:"h-4 w-4 animate-spin"}):e.jsx(ic,{className:"h-4 w-4"}),e.jsx("span",{children:"Calculate Cost"})]}),e.jsxs("button",{onClick:w,disabled:p,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Jt,{className:"h-4 w-4"}),e.jsx("span",{children:"Compare Plans"})]}),e.jsxs("button",{onClick:C,disabled:p,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ga,{className:"h-4 w-4"}),e.jsx("span",{children:"Optimize"})]}),e.jsxs("button",{onClick:j,disabled:p,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Pricing Tiers"})]})]})]}),b==="calculator"&&l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Base Subscription"}),e.jsx("span",{className:"font-medium",children:k(l.calculation.basePrice)})]}),l.calculation.extraBeds>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:["Extra Beds (",l.calculation.extraBeds,")"]}),e.jsx("span",{className:"font-medium",children:k(l.calculation.extraBedCost)})]}),l.calculation.extraBranches>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:["Extra Branches (",l.calculation.extraBranches,")"]}),e.jsx("span",{className:"font-medium",children:k(l.calculation.branchCost)})]}),l.calculation.annualDiscount>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[e.jsx("span",{children:"Annual Discount"}),e.jsxs("span",{className:"font-medium",children:["-",k(l.calculation.annualDiscount)]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:k(l.calculation.subtotal)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"GST (18%)"}),e.jsx("span",{className:"font-medium",children:k(l.calculation.taxAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-green-600 border-t pt-2 mt-2",children:[e.jsxs("span",{children:["Total ",n.billingCycle==="annual"?"Annually":"Monthly"]}),e.jsx("span",{children:k(l.calculation.totalPrice)})]}),n.billingCycle==="annual"&&e.jsxs("div",{className:"flex justify-between items-center text-sm text-blue-600",children:[e.jsx("span",{children:"Monthly Equivalent"}),e.jsx("span",{children:k(l.calculation.monthlyEquivalent)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Plan Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Plan:"})," ",e.jsx("span",{className:"font-medium",children:l.plan.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Billing:"})," ",e.jsx("span",{className:"font-medium capitalize",children:n.billingCycle})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:n.beds})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Branches:"})," ",e.jsx("span",{className:"font-medium",children:n.branches})]})]})]})]})]}),b==="compare"&&c&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plan Comparison"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monthly"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Annual"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Features"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Best For"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.comparisons.map((E,R)=>e.jsxs("tr",{className:R===0?"bg-green-50":"",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-gray-900",children:E.plan.name}),R===0&&e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Best Value"})]}),e.jsx("td",{className:"px-4 py-3 font-medium",children:k(E.calculation.monthlyEquivalent)}),e.jsx("td",{className:"px-4 py-3 font-medium",children:k(E.calculation.totalPrice)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[E.plan.features," modules"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:E.plan.name.includes("Basic")?"Small PGs":E.plan.name.includes("Pro")?"Growing PGs":"Large Networks"})]},R))})]})})]}),b==="optimize"&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Cost Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k(d.currentCost.totalPrice)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Current Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k(d.totalPotentialSavings)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Potential Savings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k(d.currentCost.totalPrice-d.totalPotentialSavings)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Optimized Cost"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Optimization Recommendations"}),e.jsx("div",{className:"space-y-4",children:d.recommendations.map((E,R)=>e.jsx("div",{className:`p-4 rounded-lg border ${E.priority==="high"?"border-red-200 bg-red-50":E.priority==="medium"?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[E.type==="billing_cycle"?e.jsx(_t,{className:"h-5 w-5 text-green-600 mt-0.5"}):E.type==="bed_optimization"?e.jsx(ga,{className:"h-5 w-5 text-blue-600 mt-0.5"}):e.jsx(Es,{className:"h-5 w-5 text-purple-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:E.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.description}),E.potentialSavings&&e.jsxs("p",{className:"text-sm font-medium text-green-600 mt-2",children:["Potential savings: ",k(E.potentialSavings)]})]})]})},R))})]})]}),b==="tiers"&&x&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing Tiers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.tiers.map((E,R)=>e.jsxs("div",{className:`border rounded-lg p-4 ${E.recommended?"border-green-500 bg-green-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:E.name}),E.recommended&&e.jsx(Fa,{className:"h-5 w-5 text-green-600"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:k(E.cost.totalPrice)}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:E.cost.billingCycle==="annual"?"per year":"per month"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Tier: ",e.jsx("span",{className:"font-medium capitalize",children:E.tier})]}),e.jsxs("div",{children:["Features: ",e.jsxs("span",{className:"font-medium",children:[E.features," modules"]})]}),e.jsxs("div",{children:["Monthly: ",e.jsx("span",{className:"font-medium",children:k(E.cost.monthlyEquivalent)})]})]}),E.recommended&&e.jsx("div",{className:"mt-3 text-xs text-green-600 font-medium",children:"Recommended for your usage"})]},R))})]})]})},Y1={getPortalData:async()=>(await fetch("/api/advanced/subscription/self-service",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).json(),upgradePlan:async t=>(await fetch("/api/users/select-subscription",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({planId:t})})).json()},wie=()=>{var p;const[t,s]=h.useState(null),[r,a]=h.useState(!0),[n,i]=h.useState(!1);h.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const f=await Y1.getPortalData();f.success?s(f.data):M.error(f.message||"Failed to load portal data")}catch(f){console.error("Portal data error:",f),M.error("Failed to load self-service portal")}finally{a(!1)}},o=async f=>{try{i(!0);const b=await Y1.upgradePlan(f);b.success?(M.success("Plan upgrade initiated successfully!"),await l()):M.error(b.message||"Failed to upgrade plan")}catch(b){console.error("Upgrade error:",b),M.error("Failed to upgrade plan")}finally{i(!1)}},c=f=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(f),u=f=>f?new Date(f).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A";if(r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Rt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Portal"}),e.jsx("p",{className:"text-gray-600",children:"Please try again later or contact support."})]})});const{currentSubscription:d,availablePlans:m,usageData:x,costBreakdown:g}=t;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Es,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Self-Service Portal"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage your subscription, monitor usage, and optimize costs"})]})]})}),e.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ks,{className:"h-5 w-5 mr-2 text-blue-600"}),"Current Subscription"]}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${d.status==="active"?"bg-green-100 text-green-800":d.status==="trial"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:d.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:(p=d.plan)==null?void 0:p.planName}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{children:["Billing: ",e.jsx("span",{className:"font-medium capitalize",children:d.billingCycle})]}),e.jsxs("div",{children:["Beds: ",e.jsx("span",{className:"font-medium",children:d.totalBeds})]}),e.jsxs("div",{children:["Branches: ",e.jsx("span",{className:"font-medium",children:d.totalBranches})]}),e.jsxs("div",{children:["Status: ",e.jsx("span",{className:"font-medium capitalize",children:d.status})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:d.status==="trial"?"Trial Ends":"Next Billing Date"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-4",children:u(d.endDate)}),d.status==="trial"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-800",children:[Math.ceil((new Date(d.trialEndDate)-new Date)/(1e3*60*60*24))," days remaining"]})]})})]})]})]}),x&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"h-5 w-5 mr-2 text-green-600"}),"Usage Overview"]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details →"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.currentUsage.residents.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Residents"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["of ",x.limits.beds.allowed," beds"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[x.currentUsage.beds.utilizationRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bed Utilization"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.currentUsage.beds.occupied,"/",x.currentUsage.beds.total," occupied"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c(x.currentUsage.payments.totalAmount)}),e.jsx("div",{className:"text-sm text-gray-600",children:"This Month"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.currentUsage.payments.transactionCount," transactions"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(_t,{className:"h-5 w-5 mr-2 text-orange-600"}),"Available Upgrades"]}),e.jsx("div",{className:"space-y-4",children:m.map((f,b)=>{var y;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:f.planName}),f.isPopular&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Popular"}),f.isRecommended&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Recommended"})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:f.planDescription}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{children:["Up to ",f.maxBedsAllowed||f.baseBedCount," beds"]}),e.jsxs("span",{children:[((y=f.modules)==null?void 0:y.length)||0," modules"]}),e.jsxs("span",{className:"font-medium text-green-600",children:[c(f.basePrice),"/",f.billingCycle]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("button",{onClick:()=>o(f._id),disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n?e.jsx(wt,{className:"h-4 w-4 animate-spin"}):e.jsx(oi,{className:"h-4 w-4"}),e.jsx("span",{children:"Upgrade"})]})})]})},f._id)})})]})]}),e.jsxs("div",{className:"space-y-6",children:[g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2 text-green-600"}),"Current Cost"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Base Subscription"}),e.jsx("span",{className:"text-sm font-medium",children:c(g.baseSubscription)})]}),g.extraBeds>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Extra Beds"}),e.jsx("span",{className:"text-sm font-medium",children:c(g.extraBedCost)})]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total Monthly"}),e.jsx("span",{className:"text-sm font-bold text-green-600",children:c(g.total)})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(xi,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(ic,{className:"h-4 w-4"}),e.jsx("span",{children:"Cost Calculator"})]}),e.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),e.jsx("span",{children:"Usage Dashboard"})]}),e.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{children:"Billing History"})]}),e.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{children:"Account Settings"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Our support team is here to help you with your subscription and usage questions."}),e.jsxs("button",{className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{children:"Contact Support"})]})]}),(x==null?void 0:x.alerts)&&x.alerts.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Rt,{className:"h-5 w-5 mr-2 text-red-600"}),"Usage Alerts"]}),e.jsx("div",{className:"space-y-3",children:x.alerts.slice(0,2).map((f,b)=>e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:f.title}),e.jsx("p",{className:"text-xs text-red-600",children:f.message})]})]})},b))})]})]})]})]})};class Nie{_logMethodCall(s,r={}){console.group(`🚀 SalesService: ${s}`),console.log("Timestamp:",new Date().toISOString()),console.log("Parameters:",r),console.groupEnd()}_handleError(s,r){var a,n;throw console.group(`❌ SalesService Error: ${r}`),console.error("Error Message:",s.message),console.error("Error Response:",(a=s.response)==null?void 0:a.data),console.error("Error Status:",(n=s.response)==null?void 0:n.status),console.groupEnd(),s}async getMyPGs(){try{this._logMethodCall("getMyPGs");const s=await we.get("/sales/my-pgs");return console.log("✅ My PGs Retrieved:",s.data),s}catch(s){this._handleError(s,"getMyPGs")}}async getDashboardData(){try{this._logMethodCall("getDashboardData");const s=await we.get("/sales/dashboard");return console.log("✅ Dashboard Data Retrieved:",s.data),s.data}catch(s){this._handleError(s,"getDashboardData")}}async getPerformanceAnalytics(){try{this._logMethodCall("getPerformanceAnalytics");const s=await we.get("/sales/performance");return console.log("✅ Performance Analytics Retrieved:",s.data),s.data}catch(s){this._handleError(s,"getPerformanceAnalytics")}}async getSalesReports(){try{this._logMethodCall("getSalesReports");const s=await we.get("/sales/reports");return console.log("✅ Sales Reports Retrieved:",s.data),s.data}catch(s){this._handleError(s,"getSalesReports")}}async changePassword(s){try{this._logMethodCall("changePassword");const r={currentPassword:String(s.currentPassword||"").trim(),newPassword:String(s.newPassword||"").trim()};console.log("🔐 SalesService changePassword - sending data:",{endpoint:"/sales/change-password",data:{currentPassword:r.currentPassword?"***":"empty",newPassword:r.newPassword?"***":"empty"},dataTypes:{currentPassword:typeof r.currentPassword,newPassword:typeof r.newPassword}});const a=await we.put("/sales/change-password",r,{headers:{"Content-Type":"application/json"},transformRequest:[n=>JSON.stringify(n)]});return console.log("✅ Password Changed:",a.data),a.data}catch(r){console.error("❌ SalesService changePassword error:",r),this._handleError(r,"changePassword")}}async getMyFinancials(){try{this._logMethodCall("getMyFinancials");const s=await we.get("/sales/my-financials");return console.log("✅ Financial Data Retrieved:",s.data),s.data}catch(s){this._handleError(s,"getMyFinancials")}}async getMyFinancials(){try{this._logMethodCall("getMyFinancials");const s=await we.get("/sales/my-financials");return console.log("✅ My Financials Retrieved:",s.data),s}catch(s){this._handleError(s,"getMyFinancials")}}async addPG(s){try{this._logMethodCall("addPG",{pgData:s});const r=await we.post("/sales/pgs",s);return console.log("✅ PG Added Successfully:",r.data),r}catch(r){this._handleError(r,"addPG")}}async createSalesStaff(s){try{this._logMethodCall("createSalesStaff",{staffData:s});const r=["firstName","lastName","email"];for(const n of r)if(!s[n])throw new Error(`${n} is required`);const a=await we.post("/sales/staff",s);return console.log("✅ Sales Staff Created:",a.data),a.data}catch(r){this._handleError(r,"createSalesStaff")}}async getAllSalesStaff(s={}){try{this._logMethodCall("getAllSalesStaff",{filters:s});const r=new URLSearchParams;Object.entries(s).forEach(([n,i])=>{r.append(n,i)});const a=await we.get(`/sales/staff?${r.toString()}`);return console.log("✅ Sales Staff Retrieved:",a.data),a.data}catch(r){this._handleError(r,"getAllSalesStaff")}}async getSalesStaffDetails(s){try{this._logMethodCall("getSalesStaffDetails",{staffId:s});const r=await we.get(`/sales/staff/${s}`);return console.log("✅ Sales Staff Details Retrieved:",r.data),r.data}catch(r){this._handleError(r,"getSalesStaffDetails")}}async updateSalesStaff(s,r){try{this._logMethodCall("updateSalesStaff",{staffId:s,updateData:r});const a=await we.put(`/sales/staff/${s}`,r);return console.log("✅ Sales Staff Updated:",a.data),a.data}catch(a){this._handleError(a,"updateSalesStaff")}}async deleteSalesStaff(s){try{this._logMethodCall("deleteSalesStaff",{staffId:s});const r=await we.delete(`/sales/staff/${s}`);return console.log("✅ Sales Staff Deleted:",r.data),r.data}catch(r){this._handleError(r,"deleteSalesStaff")}}async getSalesHierarchy(){try{this._logMethodCall("getSalesHierarchy");const s=await we.get("/sales/hierarchy");return console.log("✅ Sales Hierarchy Retrieved:",s.data),s}catch(s){this._handleError(s,"getSalesHierarchy")}}async getTeamPGs(){try{this._logMethodCall("getTeamPGs");const s=await we.get("/sales/team/pgs");return console.log("✅ Team PGs Retrieved:",s.data),s}catch(s){this._handleError(s,"getTeamPGs")}}async getTeamFinancials(){try{this._logMethodCall("getTeamFinancials");const s=await we.get("/sales/financials");return console.log("✅ Team Financials Retrieved:",s.data),s}catch(s){this._handleError(s,"getTeamFinancials")}}async getProfile(){try{this._logMethodCall("getProfile");const s=await we.get("/sales/profile");return console.log("✅ Profile Retrieved:",s.data),s.data}catch(s){this._handleError(s,"getProfile")}}async updateProfile(s){try{this._logMethodCall("updateProfile");const r={firstName:String(s.firstName||"").trim(),lastName:String(s.lastName||"").trim(),phone:String(s.phone||"").trim(),address:s.address?{street:String(s.address.street||"").trim(),city:String(s.address.city||"").trim(),state:String(s.address.state||"").trim(),pincode:String(s.address.pincode||"").trim(),country:String(s.address.country||"India").trim()}:void 0};console.log("🔐 SalesService updateProfile - sending data:",{endpoint:"/sales/profile",data:{firstName:r.firstName?"***":"empty",lastName:r.lastName?"***":"empty",phone:r.phone?"***":"empty",hasAddress:!!r.address}});const a=await we.put("/sales/profile",r,{headers:{"Content-Type":"application/json"}});return console.log("✅ Profile Updated:",a.data),a.data}catch(r){console.error("❌ SalesService updateProfile error:",r),this._handleError(r,"updateProfile")}}}const Ea=new Nie,Sie=({children:t,className:s})=>e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${s||""}`,children:t}),Cie=({count:t=4})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(t)].map((s,r)=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 w-36 bg-gray-200 rounded"})]})]})},r))}),kie=({staff:t})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-semibold text-sm",children:[t.firstName[0],t.lastName[0]]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.salesUniqueId})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"PGs Added"}),e.jsx("p",{className:"font-semibold text-blue-600",children:t.pgsAdded})]})]}),Eie=({pg:t,userRole:s})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s==="sales_manager"&&t.addedBy?`Added by ${t.addedBy.firstName} ${t.addedBy.lastName}`:`Added ${new Date(t.createdAt).toLocaleDateString()}`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sales Info"}),e.jsx("p",{className:"font-semibold text-green-600 text-sm",children:t.salesManager&&t.salesStaff?`${t.salesManager.split(" ")[0]} → ${t.salesStaff.split(" ")[0]}`:"Direct"})]})]}),Pie=({message:t,performanceRate:s})=>{const r=n=>n>=90?"from-yellow-400 to-orange-500":n>=70?"from-blue-400 to-blue-600":n>=40?"from-green-400 to-green-600":"from-red-400 to-red-600",a=n=>n>=90?e.jsx(Fa,{className:"h-6 w-6"}):n>=70?e.jsx(Fs,{className:"h-6 w-6"}):n>=40?e.jsx(_t,{className:"h-6 w-6"}):e.jsx(ga,{className:"h-6 w-6"});return e.jsxs("div",{className:`bg-gradient-to-r ${r(s)} text-white rounded-xl p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a(s),e.jsx("h3",{className:"text-lg font-bold",children:"Motivational Message"})]}),e.jsx("p",{className:"text-white/90 leading-relaxed",children:t})]})},Tie=({data:t,userRole:s})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Overview"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.performanceRate>=70?"bg-green-500":t.performanceRate>=40?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[t.performanceRate,"%"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total PGs Added"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.totalPGsAdded})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Commission Earned"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["₹",t.totalCommissionEarned.toLocaleString()]})]}),s==="sales_manager"&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Team Size"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[t.totalSubSalesStaff," members"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Recent Activity (7 days)"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[t.recentActivity," PGs"]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(xi,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Performance Indicator"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${t.performanceRate>=90?"bg-gradient-to-r from-yellow-400 to-orange-500":t.performanceRate>=70?"bg-gradient-to-r from-blue-400 to-blue-600":t.performanceRate>=40?"bg-gradient-to-r from-green-400 to-green-600":"bg-gradient-to-r from-red-400 to-red-600"}`,style:{width:`${Math.min(t.performanceRate,100)}%`}})})]})]})]}),_ie=()=>{var l,o;const{user:t}=He(c=>c.auth),[s,r]=h.useState({totalSubSalesStaff:0,totalPGsAdded:0,totalCommissionEarned:0,performanceRate:0,recentSubSalesStaff:[],recentPGs:[],recentActivity:0,motivationalMessage:"",role:""}),[a,n]=h.useState(!0);h.useEffect(()=>{t?(async()=>{try{n(!0);const u=await Ea.getDashboardData();r(u.data)}catch(u){console.error("Failed to fetch dashboard data",u)}finally{n(!1)}})():n(!1)},[t]);const i=()=>{var c;return s.role==="sales_manager"?e.jsx(Ys,{icon:e.jsx(Pa,{className:"h-6 w-6 text-indigo-600"}),title:"Recent Activity",value:s.recentActivity,subtitle:"PGs this week"}):e.jsx(Ys,{icon:e.jsx(ga,{className:"h-6 w-6 text-indigo-600"}),title:"Manager",value:s.managerInfo?`${s.managerInfo.firstName} ${s.managerInfo.lastName}`:"N/A",subtitle:((c=s.managerInfo)==null?void 0:c.salesUniqueId)||""})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",t==null?void 0:t.firstName,"!"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.role==="sales_manager"?"Sales Manager Dashboard":"Sub-Sales Dashboard"})]}),!a&&s.motivationalMessage&&e.jsx("div",{className:"lg:max-w-md",children:e.jsx(Pie,{message:s.motivationalMessage,performanceRate:s.performanceRate})})]}),a?e.jsx(Cie,{count:s.role==="sales_manager"?5:4}):e.jsxs(Sie,{children:[s.role==="sales_manager"&&e.jsx(Ys,{icon:e.jsx(Je,{className:"h-6 w-6 text-blue-600"}),title:"Team Members",value:s.totalSubSalesStaff,subtitle:"Active sub-sales staff"}),e.jsx(Ys,{icon:e.jsx(Ie,{className:"h-6 w-6 text-green-600"}),title:"PGs Added",value:s.totalPGsAdded,subtitle:"Total properties onboarded"}),e.jsx(Ys,{icon:e.jsx(Ft,{className:"h-6 w-6 text-purple-600"}),title:"Commission Earned",value:`₹${s.totalCommissionEarned.toLocaleString()}`,subtitle:"Total earnings this month"}),e.jsx(Ys,{icon:e.jsx(_t,{className:"h-6 w-6 text-orange-600"}),title:"Performance Rate",value:`${s.performanceRate}%`,subtitle:"Monthly target achievement"}),i()]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsx(Tie,{data:s,userRole:s.role})}),e.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[s.role==="sales_manager"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Pa,{className:"h-6 w-6 mr-3 text-blue-600"}),"Recent Sub Sales Staff"]}),a?e.jsx("div",{className:"space-y-3",children:[1,2,3].map((c,u)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg animate-pulse"},u))}):((l=s.recentSubSalesStaff)==null?void 0:l.length)>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.recentSubSalesStaff.map((c,u)=>e.jsx(kie,{staff:c},c._id||u))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Pa,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No recent staff"}),e.jsx("p",{className:"text-sm",children:"New team members will appear here"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ie,{className:"h-6 w-6 mr-3 text-green-600"}),"Recently Added PGs"]}),a?e.jsx("div",{className:"space-y-3",children:[1,2,3].map((c,u)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg animate-pulse"},u))}):((o=s.recentPGs)==null?void 0:o.length)>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.recentPGs.map((c,u)=>e.jsx(Eie,{pg:c,userRole:s.role},c._id||u))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ie,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No recent PGs"}),e.jsx("p",{className:"text-sm",children:"New properties will appear here"})]})]})]})]}),s.role==="sub_sales"&&!a&&e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(zE,{className:"h-6 w-6 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-bold text-indigo-900",children:"Your Progress"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Target"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:"30 PGs"})]}),e.jsx(ga,{className:"h-8 w-8 text-indigo-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Progress"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.totalPGsAdded})]}),e.jsx(Be,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commission Rate"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"₹500/PG"})]}),e.jsx(Ft,{className:"h-8 w-8 text-purple-400"})]})})]})]})]})},Aie=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState(null),[x,g]=h.useState(null),[p,f]=h.useState({firstName:"",lastName:"",email:"",phone:"",address:{street:"",city:"",state:"",pincode:"",country:"India"},commissionRate:10}),[b,y]=h.useState({firstName:"",lastName:"",email:"",phone:"",address:{street:"",city:"",state:"",pincode:"",country:"India"},commissionRate:10});h.useEffect(()=>{v()},[]);const v=async(P=!0)=>{try{P&&a(!0);const T=await Ea.getAllSalesStaff();s(T.data||[]),P&&a(!1)}catch(T){P?(M.error("Failed to fetch sub-sales staff"),a(!1)):console.error("Failed to refresh sub-sales staff data:",T)}},N=async P=>{P.preventDefault();try{await Ea.createSalesStaff(p),M.success("Sub-sales staff added successfully"),await v(!1),i(!1),k()}catch(T){M.error(T.message||"Failed to add sub-sales staff")}},S=async P=>{P.preventDefault();try{await Ea.updateSalesStaff(x._id,b),M.success("Sub-sales staff updated successfully"),await v(!1),o(!1),g(null)}catch(T){M.error(T.message||"Failed to update sub-sales staff")}},w=async()=>{try{console.log("🗑️ Frontend: Attempting to delete staff:",{staffToDelete:d,staffId:(d==null?void 0:d._id)||(d==null?void 0:d.id),staffIdType:typeof((d==null?void 0:d._id)||(d==null?void 0:d.id))});const P=(d==null?void 0:d._id)||(d==null?void 0:d.id);if(!P)throw new Error("Staff ID not found");await Ea.deleteSalesStaff(P),M.success("Sub-sales staff deleted successfully"),await v(!1),u(!1),m(null)}catch(P){console.error("❌ Frontend: Delete failed:",P),M.error(P.message||"Failed to delete sub-sales staff")}},C=P=>{var T,B,F,L,I;g(P),y({firstName:(P==null?void 0:P.firstName)||"",lastName:(P==null?void 0:P.lastName)||"",email:(P==null?void 0:P.email)||"",phone:(P==null?void 0:P.phone)||"",address:{street:((T=P==null?void 0:P.address)==null?void 0:T.street)||"",city:((B=P==null?void 0:P.address)==null?void 0:B.city)||"",state:((F=P==null?void 0:P.address)==null?void 0:F.state)||"",pincode:((L=P==null?void 0:P.address)==null?void 0:L.pincode)||"",country:((I=P==null?void 0:P.address)==null?void 0:I.country)||"India"},commissionRate:(P==null?void 0:P.salesCommissionRate)||10}),o(!0)},j=P=>{m(P),u(!0)},k=()=>{f({firstName:"",lastName:"",email:"",phone:"",address:{street:"",city:"",state:"",pincode:"",country:"India"},commissionRate:10})},E=()=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Sub-Sales Staff"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:p.firstName,onChange:P=>f({...p,firstName:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:p.lastName,onChange:P=>f({...p,lastName:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:p.email,onChange:P=>f({...p,email:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:p.phone,onChange:P=>f({...p,phone:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Street Address",value:p.address.street,onChange:P=>f({...p,address:{...p.address,street:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"City",value:p.address.city,onChange:P=>f({...p,address:{...p.address,city:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"State",value:p.address.state,onChange:P=>f({...p,address:{...p.address,state:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Pincode",value:p.address.pincode,onChange:P=>f({...p,address:{...p.address,pincode:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"Country",value:p.address.country,onChange:P=>f({...p,address:{...p.address,country:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",defaultValue:"India"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:p.commissionRate,onChange:P=>f({...p,commissionRate:parseFloat(P.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Staff"})]})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Je,{className:"h-8 w-8 mr-3 text-blue-600"}),"Sub-Sales Staff"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and track your sub-sales team"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Pa,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Staff"})]})]}),r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unique ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PGs Added"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(P=>{var T;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[(P==null?void 0:P.firstName)||""," ",(P==null?void 0:P.lastName)||""]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:(P==null?void 0:P.email)||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-blue-600",children:(P==null?void 0:P.salesUniqueId)||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:((T=P==null?void 0:P.salesPerformanceMetrics)==null?void 0:T.totalPGsAdded)||0}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>C(P),className:"text-blue-600 hover:text-blue-800",title:"Edit Staff",children:e.jsx(fa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(P),className:"text-red-600 hover:text-red-800",title:"Remove Staff",children:e.jsx(Pr,{className:"h-4 w-4"})})]})})]},(P==null?void 0:P._id)||Math.random())})})]})}),n&&E(),l&&R(),c&&D()]});function R(){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Sub-Sales Staff"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:b.firstName,onChange:P=>y({...b,firstName:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:b.lastName,onChange:P=>y({...b,lastName:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:b.email,onChange:P=>y({...b,email:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:b.phone,onChange:P=>y({...b,phone:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Street Address",value:b.address.street,onChange:P=>y({...b,address:{...b.address,street:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"City",value:b.address.city,onChange:P=>y({...b,address:{...b.address,city:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"State",value:b.address.state,onChange:P=>y({...b,address:{...b.address,state:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Pincode",value:b.address.pincode,onChange:P=>y({...b,address:{...b.address,pincode:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"Country",value:b.address.country,onChange:P=>y({...b,address:{...b.address,country:P.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",defaultValue:"India"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:b.commissionRate,onChange:P=>y({...b,commissionRate:parseFloat(P.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update Staff"})]})]})]})})}function D(){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Sub-Sales Staff"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:["Are you sure you want to delete ",e.jsxs("strong",{children:[(d==null?void 0:d.firstName)||""," ",(d==null?void 0:d.lastName)||""]}),"?"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-800 text-sm",children:[e.jsx("strong",{children:"Warning:"})," This action cannot be undone. The staff member will be permanently removed from your team."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Staff"})]})]})})}},K1=()=>{const{user:t}=He(f=>f.auth),[s,r]=h.useState([]),[a,n]=h.useState(!0),[i,l]=h.useState(!1),[o,c]=h.useState({status:"",city:"",salesManager:""}),[u,d]=h.useState("");h.useEffect(()=>{m()},[t]);const m=async()=>{var f,b;try{let y;if((t==null?void 0:t.role)==="sales_manager")y=await Ea.getTeamPGs();else if((t==null?void 0:t.salesRole)==="sub_sales")y=await Ea.getMyPGs();else throw new Error("Unauthorized access");r(y.data.data||y.data||[]),n(!1)}catch(y){console.error("Failed to fetch PGs:",y),M.error(((b=(f=y.response)==null?void 0:f.data)==null?void 0:b.message)||"Failed to fetch PGs"),n(!1)}},x=(s||[]).filter(f=>{var w,C;const b=f.name.toLowerCase().includes(u.toLowerCase()),y=!o.status||f.status===o.status,v=((w=f.address)==null?void 0:w.city)||(typeof f.address=="string"?(C=f.address.split(",")[1])==null?void 0:C.trim():""),N=!o.city||v===o.city,S=!o.salesManager||f.salesManager===o.salesManager;return b&&y&&N&&S}),g=()=>{c({status:"",city:"",salesManager:""}),d("")},p=async f=>{var b,y;try{await xa.createPGSales(f),M.success("PG created successfully!"),l(!1),fetchTeamPGs()}catch(v){console.error("Failed to create PG:",v),M.error(((y=(b=v.response)==null?void 0:b.data)==null?void 0:y.message)||"Failed to create PG")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ie,{className:"h-8 w-8 mr-3 text-blue-600"}),"PG Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage PGs added by your team"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{children:"Add PG"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search PGs...",value:u,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx(Os,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"})]}),e.jsxs("select",{value:o.status,onChange:f=>c(b=>({...b,status:f.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:o.city,onChange:f=>c(b=>({...b,city:f.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Cities"}),[...new Set(s.map(f=>f.address.city))].map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsxs("select",{value:o.salesManager,onChange:f=>c(b=>({...b,salesManager:f.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Sales Managers"}),[...new Set(s.map(f=>f.salesManager).filter(Boolean))].map(f=>e.jsx("option",{value:f,children:f},f))]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset Filters"})]})})]}),a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales Manager"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added By"})]})}),e.jsx("tbody",{children:x.map(f=>{var b,y,v;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.name||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:((b=f.address)==null?void 0:b.city)||typeof f.address=="string"&&((y=f.address.split(",")[1])==null?void 0:y.trim())||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-blue-600",children:f.salesManager||"Direct"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.status==="active"?"bg-green-100 text-green-800":f.status==="inactive"?"bg-red-100 text-red-800":f.status==="maintenance"?"bg-yellow-100 text-yellow-800":f.status==="full"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:f.status||"active"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:((v=f.addedBy)==null?void 0:v.name)||`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`||"N/A"})]},f._id)})})]})}),e.jsx(iy,{isOpen:i,onClose:()=>l(!1),onSuccess:p,isSalesMode:!0})]})},X1=({trigger:t,children:s,align:r="right"})=>{const[a,n]=h.useState(!1),i=h.useRef(null);return h.useEffect(()=>{const l=o=>{i.current&&!i.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("div",{onClick:()=>n(!a),className:"cursor-pointer",children:t}),e.jsx(vt,{children:a&&e.jsx(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:`absolute z-50 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 ${r==="left"?"left-0":"right-0"}`,children:s})})]})},J1=({icon:t,children:s,onClick:r,className:a="",danger:n=!1})=>e.jsxs("button",{onClick:r,className:`w-full flex items-center px-4 py-2.5 text-sm transition-colors ${n?"text-red-700 hover:bg-red-50":"text-gray-700 hover:bg-gray-50"} ${a}`,children:[t&&e.jsx(t,{className:`h-4 w-4 mr-3 ${n?"text-red-500":"text-gray-500"}`}),s]}),Q1=({name:t,size:s="md",className:r=""})=>{const a={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base",xl:"h-16 w-16 text-lg"},n=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],i=o=>o?o.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2):"PG",l=o=>{if(!o)return n[0];const c=o.charCodeAt(0)%n.length;return n[c]};return e.jsx("div",{className:`${a[s]} ${l(t)} rounded-full flex items-center justify-center text-white font-semibold ${r}`,children:i(t)})},Rie=()=>{const{user:t}=He(L=>L.auth),[s,r]=h.useState([]),[a,n]=h.useState(!0),[i,l]=h.useState({}),[o,c]=h.useState({status:"",city:"",state:"",propertyType:"",minPrice:"",maxPrice:""}),[u,d]=h.useState(""),[m,x]=h.useState(1),[g,p]=h.useState(1),[f,b]=h.useState(!1),[y,v]=h.useState(!1),[N,S]=h.useState(!1),[w,C]=h.useState(null);h.useEffect(()=>{j(),k()},[m,o]);const j=async()=>{try{n(!0);const L=await xa.getSalesPGs(o,m,10);L.success&&(r(L.data),p(L.pagination.pages))}catch(L){M.error("Failed to load PGs"),console.error("Error loading PGs:",L)}finally{n(!1)}},k=async()=>{try{const L=await xa.getSalesPGStats();L.success&&l(L.data)}catch(L){console.error("Error loading stats:",L)}},E=async()=>{if(!u.trim()){j();return}try{n(!0);const L=await xa.searchPGs(u,o);L.success&&(r(L.data),p(1))}catch{M.error("Search failed")}finally{n(!1)}},R=()=>{C(null),v(!0)},D=L=>{C(L),S(!0)},P=()=>{j(),k()},T=()=>{c({status:"",city:"",state:"",propertyType:"",minPrice:"",maxPrice:""}),d("")},B=L=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",maintenance:"bg-yellow-100 text-yellow-800",full:"bg-red-100 text-red-800"})[L]||"bg-gray-100 text-gray-800",F=L=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(L);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"PG Management"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Manage and view PG properties"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsxs("button",{onClick:R,className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Add New PG"]}),e.jsx("button",{onClick:()=>j(),className:"inline-flex items-center justify-center px-4 py-3 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors shadow-sm",children:e.jsx(wt,{className:`h-5 w-5 ${a?"animate-spin":""}`})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total PGs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalPGs||0})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active PGs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activePGs||0})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl",children:e.jsx(Ia,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(i.totalRevenue||0)})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl",children:e.jsx(Ks,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Occupancy Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[i.occupancyRate||0,"%"]})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl",children:e.jsx(_t,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search PGs by name or location...",value:u,onChange:L=>d(L.target.value),onKeyPress:L=>L.key==="Enter"&&E(),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsxs("button",{onClick:()=>b(!f),className:"flex items-center justify-center px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(aa,{className:"h-5 w-5 mr-2"}),"Filters"]}),e.jsx("button",{onClick:T,className:"px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"Clear"}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(xr,{className:"h-5 w-5 mr-2"}),"Export"]})]})]}),f&&e.jsx(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o.status,onChange:L=>c({...o,status:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"full",children:"Full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",placeholder:"Enter city",value:o==null?void 0:o.city,onChange:L=>c({...o,city:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),e.jsx("input",{type:"text",placeholder:"Enter state",value:o==null?void 0:o.state,onChange:L=>c({...o,state:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),e.jsxs("select",{value:o==null?void 0:o.propertyType,onChange:L=>c({...o,propertyType:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"Gents PG",children:"Gents PG"}),e.jsx("option",{value:"Ladies PG",children:"Ladies PG"}),e.jsx("option",{value:"Coliving PG",children:"Coliving PG"}),e.jsx("option",{value:"PG",children:"PG"}),e.jsx("option",{value:"Hostel",children:"Hostel"}),e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"Independent",children:"Independent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Price"}),e.jsx("input",{type:"number",placeholder:"Min price",value:o==null?void 0:o.minPrice,onChange:L=>c({...o,minPrice:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Price"}),e.jsx("input",{type:"number",placeholder:"Max price",value:o==null?void 0:o.maxPrice,onChange:L=>c({...o,maxPrice:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:a?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-6 text-gray-600 text-lg",children:"Loading PGs..."})]}):(s==null?void 0:s.length)===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:e.jsx(Ie,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No PGs Found"}),e.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"No PGs match your current filters."}),e.jsxs("button",{onClick:R,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Add Your First PG"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PG Details"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rooms"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white",children:s==null?void 0:s.map((L,I)=>{var V,_,G,U,A;return e.jsxs(ae.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.05},className:"border-b border-gray-100 hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Q1,{name:L==null?void 0:L.name,size:"md"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:L==null?void 0:L.name}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:(V=L.property)==null?void 0:V.type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sr,{className:"h-4 w-4 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-900",children:(_=L==null?void 0:L.address)==null?void 0:_.state})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900 font-semibold",children:[(G=L.property)==null?void 0:G.availableRooms,"/",(U=L.property)==null?void 0:U.totalRooms," • ",L.occupancyRate,"% occupied"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[F((A=L.pricing)==null?void 0:A.basePrice)," per month"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full border ${B(L.status)}`,children:L.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(X1,{trigger:e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(io,{className:"h-4 w-4 text-gray-500"})}),children:e.jsx(J1,{icon:ot,onClick:()=>D(L),children:"View Details"})})})]},L._id)})})]})}),e.jsx("div",{className:"lg:hidden",children:e.jsx("div",{className:"divide-y divide-gray-100",children:s==null?void 0:s.map((L,I)=>{var V,_,G,U,A;return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.05},className:"p-6 hover:bg-gray-50/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q1,{name:L==null?void 0:L.name,size:"lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:L==null?void 0:L.name}),e.jsx("div",{className:"text-sm text-gray-500",children:(V=L.property)==null?void 0:V.type})]})]}),e.jsx(X1,{trigger:e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(io,{className:"h-5 w-5 text-gray-500"})}),align:"left",children:e.jsx(J1,{icon:ot,onClick:()=>D(L),children:"View Details"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Location"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sr,{className:"h-4 w-4 text-gray-400"}),e.jsx("div",{className:"text-gray-900",children:(_=L==null?void 0:L.address)==null?void 0:_.state})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Rooms"}),e.jsxs("div",{className:"text-gray-900 font-semibold",children:[(G=L.property)==null?void 0:G.availableRooms,"/",(U=L.property)==null?void 0:U.totalRooms," • ",L.occupancyRate,"% occupied"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Price"}),e.jsxs("div",{className:"text-gray-900 font-semibold",children:[F((A=L.pricing)==null?void 0:A.basePrice)," per month"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${B(L.status)}`,children:L.status})]})]})]},L._id)})})})]})}),g>1&&e.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",e.jsx("span",{className:"font-semibold text-gray-900",children:m})," of ",e.jsx("span",{className:"font-semibold text-gray-900",children:g})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>x(Math.max(1,m-1)),disabled:m===1,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ua,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("button",{onClick:()=>x(Math.min(g,m+1)),disabled:m===g,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",e.jsx(ra,{className:"h-4 w-4 ml-1"})]})]})]}),e.jsx(iy,{isOpen:y,onClose:()=>{v(!1),C(null)},pg:w,onSuccess:P,isSalesMode:!0}),e.jsx(P4,{isOpen:N,onClose:()=>{S(!1),C(null)},pg:w})]})})},Fie=()=>{const{user:t}=He(c=>c.auth),[s,r]=h.useState(null),[a,n]=h.useState(!0);h.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await Ea.getPerformanceAnalytics();r(c.data),n(!1)}catch{rs.error("Failed to fetch performance data"),n(!1)}},l=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(c);if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!s)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No performance data available"})});const o=(t==null?void 0:t.role)==="sales_manager";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Performance Analytics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your sales performance and achievements"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last updated: ",new Date().toLocaleDateString()]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.teamSize})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ie,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PGs This Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.pgsThisMonth}),e.jsxs("div",{className:"flex items-center text-sm",children:[s.summary.growthRate>=0?e.jsx(_t,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Jd,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:s.summary.growthRate>=0?"text-green-500":"text-red-500",children:[s.summary.growthRate,"%"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ga,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Yearly Progress"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.targets.currentProgress,"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.summary.pgsThisYear," / ",s.targets.yearlyTarget," PGs"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Earned"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l(s.summary.totalCommission)})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ie,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PGs This Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.pgsThisMonth}),e.jsxs("div",{className:"flex items-center text-sm",children:[s.summary.growthRate>=0?e.jsx(_t,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Jd,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:s.summary.growthRate>=0?"text-green-500":"text-red-500",children:[s.summary.growthRate,"%"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ga,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Yearly Progress"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.targets.currentProgress,"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.summary.pgsThisYear," / ",s.targets.yearlyTarget," PGs"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Earned"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l(s.summary.totalCommission)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Fa,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.summary.commissionRate,"%"]})]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Performance Trend"}),e.jsx(Jt,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:s.monthlyTrend.map((c,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:c.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:[c.pgs," PGs"]}),e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(c.pgs/10*100,100)}%`}})})]})]},u))})]}),o&&s.staffPerformance&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Performance"}),e.jsx(m2,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:s.staffPerformance.slice(0,5).map((c,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500",children:c.uniqueId})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[c.pgsThisYear," PGs"]}),e.jsx("p",{className:"text-xs text-green-600",children:l(c.commission)})]})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Goals"}),e.jsx(ga,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Monthly Target"}),e.jsxs("span",{children:[s.summary.pgsThisMonth||0," / ",s.targets.monthlyTarget]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((s.summary.pgsThisMonth||0)/s.targets.monthlyTarget*100,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Yearly Target"}),e.jsxs("span",{children:[s.summary.pgsThisYear||0," / ",s.targets.yearlyTarget]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((s.summary.pgsThisYear||0)/s.targets.yearlyTarget*100,100)}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Achievements"}),e.jsx(Fa,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(s.summary.pgsThisMonth||0)>=s.targets.monthlyTarget&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center",children:[e.jsx(Fa,{className:"h-6 w-6 text-yellow-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-medium text-yellow-800",children:"Monthly Target"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Achieved!"})]}),(s.summary.pgsThisYear||0)>=s.targets.yearlyTarget&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-center",children:[e.jsx(Fa,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-medium text-green-800",children:"Yearly Target"}),e.jsx("p",{className:"text-xs text-green-600",children:"Achieved!"})]}),parseFloat(s.summary.growthRate)>20&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center",children:[e.jsx(_t,{className:"h-6 w-6 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-medium text-blue-800",children:"High Growth"}),e.jsxs("p",{className:"text-xs text-blue-600",children:["+",s.summary.growthRate,"%"]})]}),o&&(s.summary.teamSize||0)>=5&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 text-center",children:[e.jsx(Je,{className:"h-6 w-6 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-medium text-purple-800",children:"Team Builder"}),e.jsxs("p",{className:"text-xs text-purple-600",children:[s.summary.teamSize," members"]})]})]})]})]})]})},Die=()=>{var g,p,f,b,y,v,N,S,w,C,j,k,E,R,D,P,T,B,F,L,I,V,_,G,U,A,q,Y,O,W,z,H,Q,J,ie,K,oe,le,Se,Ee,ye,We,fe,Fe,ce,Ce,ze,De,st,Xe,it,ft,be,Pe,ee,me,Te,qe,gt,Nt,mt,Wt;const{user:t}=He(Le=>Le.auth),[s,r]=h.useState(null),[a,n]=h.useState(!0),[i,l]=h.useState(null);h.useEffect(()=>{o()},[]);const o=async()=>{try{const Le=await Ea.getSalesReports();r(Le.data.data||Le.data),n(!1)}catch{rs.error("Failed to fetch reports data"),n(!1)}},c=Le=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Le),u=Le=>{switch(Le){case"on-target":return"text-green-600 bg-green-100";case"below-target":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},d=Le=>Le>=100?"text-green-600":Le>=75?"text-yellow-600":"text-red-600";if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!s)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No reports data available"})});const m=(t==null?void 0:t.role)==="sales_manager"||(t==null?void 0:t.salesRole)==="sales_manager",x=(t==null?void 0:t.salesRole)==="sub_sales";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:x?"My Performance Reports":"Sales Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:x?"Your personal performance and analytics reports":"Comprehensive performance and analytics reports"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Report"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Generated: ",new Date(s.generatedAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Executive Summary"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.summary.teamSize})]}),e.jsx(Je,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"PGs This Month"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:s.summary.totalPGsThisMonth}),e.jsxs("p",{className:"text-xs text-green-600",children:[s.summary.monthlyGrowth,"% growth"]})]}),e.jsx(Ie,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Earnings Earned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c(s.summary.totalEarnings)}),e.jsxs("p",{className:"text-xs text-purple-600",children:[s.summary.commissionRate,"% rate"]})]}),e.jsx(Ft,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Yearly Target"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:[Math.min(s.summary.totalPGsThisYear/s.summary.yearlyTarget*100,100).toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-yellow-600",children:[s.summary.totalPGsThisYear,"/",s.summary.yearlyTarget," PGs"]})]}),e.jsx(ga,{className:"h-8 w-8 text-yellow-600"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"PGs This Month"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:s.summary.pgsThisMonth||0}),e.jsxs("p",{className:"text-xs text-green-600",children:[s.summary.monthlyGrowth||0,"% growth"]})]}),e.jsx(Ie,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Earnings Earned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c(s.summary.totalCommission||0)}),e.jsxs("p",{className:"text-xs text-purple-600",children:[s.summary.commissionRate||0,"% rate"]})]}),e.jsx(Ft,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Monthly Achievement"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:[((f=(p=(g=s.performance)==null?void 0:g.thisMonth)==null?void 0:p.achievement)==null?void 0:f.toFixed(1))||0,"%"]}),e.jsxs("p",{className:"text-xs text-yellow-600",children:[((y=(b=s.performance)==null?void 0:b.thisMonth)==null?void 0:y.pgs)||0,"/",((N=(v=s.performance)==null?void 0:v.thisMonth)==null?void 0:N.target)||0," PGs"]})]}),e.jsx(ga,{className:"h-8 w-8 text-yellow-600"})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Yearly Progress"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[((C=(w=(S=s.performance)==null?void 0:S.thisYear)==null?void 0:w.achievement)==null?void 0:C.toFixed(1))||0,"%"]}),e.jsxs("p",{className:"text-xs text-blue-600",children:[s.summary.pgsThisYear||0,"/",s.summary.yearlyTarget||0," PGs"]})]}),e.jsx(Jt,{className:"h-8 w-8 text-blue-600"})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(GE,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Trends (12 Months)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"PGs Added"}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Earnings"})]})]}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:(j=s.monthlyTrends)==null?void 0:j.map((Le,cs)=>{var St;const Gs=Math.max(...s.monthlyTrends.map(at=>at.teamPGs||at.pgs||0)),Gr=Math.max(...s.monthlyTrends.map(at=>at.commission||0)),Xs=Le.teamPGs||Le.pgs||0,_s=Gs>0?Xs/Gs*100:0,ds=Gr>0?Le.commission/Gr*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center space-y-2",children:[e.jsxs("div",{className:"relative w-full flex justify-center",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-3/4 transition-all duration-500 hover:bg-green-600",style:{height:`${Math.max(ds,8)}px`},title:`₹${((St=Le.commission)==null?void 0:St.toLocaleString())||0}`}),e.jsx("div",{className:"bg-blue-500 rounded-t w-3/4 absolute left-1/2 transform -translate-x-1/2 transition-all duration-500 hover:bg-blue-600",style:{height:`${Math.max(_s,8)}px`,bottom:`${Math.max(ds,8)+4}px`},title:`${Xs} PGs`})]}),e.jsx("div",{className:"text-xs text-gray-500 transform -rotate-45 origin-center",children:Le.month})]},cs)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Avg Monthly PGs"}),e.jsx("p",{className:"font-semibold text-blue-600",children:((k=s.monthlyTrends)==null?void 0:k.length)>0?Math.round(s.monthlyTrends.reduce((Le,cs)=>Le+(cs.teamPGs||cs.pgs||0),0)/s.monthlyTrends.length):0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Avg Monthly Earnings"}),e.jsx("p",{className:"font-semibold text-green-600",children:c(((E=s.monthlyTrends)==null?void 0:E.length)>0?s.monthlyTrends.reduce((Le,cs)=>Le+(cs.commission||0),0)/s.monthlyTrends.length:0)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(m2,{className:"h-5 w-5 mr-2 text-purple-600"}),"Performance Distribution"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"This Year"})]}),e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-32 h-32 rounded-full border-8 border-gray-200 relative",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-blue-500 transform rotate-0",style:{clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-green-500 transform rotate-90",style:{clipPath:"polygon(50% 0, 100% 0, 100% 50%, 50% 50%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-purple-500 transform rotate-180",style:{clipPath:"polygon(50% 50%, 100% 50%, 100% 100%, 50% 100%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-yellow-500 transform rotate-270",style:{clipPath:"polygon(0 50%, 50% 50%, 50% 100%, 0 100%)"}})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-green-500 transform rotate-0",style:{clipPath:"polygon(0 0, 100% 0, 100% 30%, 0 30%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-blue-500 transform rotate-108",style:{clipPath:"polygon(0 30%, 100% 30%, 100% 70%, 0 70%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-red-500 transform rotate-252",style:{clipPath:"polygon(0 70%, 100% 70%, 100% 100%, 0 100%)"}})]})})})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"High Performers"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Good Performers"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Average"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Needs Attention"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"This Month"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"This Quarter"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"This Year"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Remaining"})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(Bv,{className:"h-6 w-6 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-bold text-indigo-900",children:"Achievement Milestones"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-indigo-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(qE,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Monthly Champion"}),e.jsx("p",{className:"text-xs text-gray-600",children:m?`${((R=s.summary)==null?void 0:R.totalPGsThisMonth)||0} team PGs`:`${((D=s.summary)==null?void 0:D.pgsThisMonth)||0} PGs`})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-indigo-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(vn,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Commission Leader"}),e.jsx("p",{className:"text-xs text-gray-600",children:c(m?((P=s.summary)==null?void 0:P.totalEarnings)||0:((T=s.summary)==null?void 0:T.totalCommission)||0)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-indigo-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Fs,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Target Achievement"}),e.jsx("p",{className:"text-xs text-gray-600",children:m?`${Math.min(((B=s.summary)==null?void 0:B.totalPGsThisYear)/((F=s.summary)==null?void 0:F.yearlyTarget)*100,100).toFixed(1)}% of annual target`:`${((V=(I=(L=s.performance)==null?void 0:L.thisYear)==null?void 0:I.achievement)==null?void 0:V.toFixed(1))||0}% of yearly target`})]})]})})]})]}),m&&!x&&s.staffReports&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Performance Reports"}),e.jsx(Je,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:s.staffReports.map(Le=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:Le.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Le.uniqueId," • ",Le.email]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(Le.status)}`,children:Le.status.replace("-"," ").toUpperCase()}),e.jsx("button",{onClick:()=>l(i===Le.id?null:Le.id),className:"text-gray-400 hover:text-gray-600",children:i===Le.id?e.jsx(Bc,{className:"h-4 w-4"}):e.jsx(zn,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"This Month"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Le.performance.thisMonth.pgs," PGs"]}),e.jsxs("p",{className:`text-xs font-medium ${d(Le.performance.thisMonth.achievement)}`,children:[Le.performance.thisMonth.achievement.toFixed(1),"% target"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"This Quarter"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Le.performance.thisQuarter.pgs," PGs"]}),e.jsxs("p",{className:`text-xs font-medium ${d(Le.performance.thisQuarter.achievement)}`,children:[Le.performance.thisQuarter.achievement.toFixed(1),"% target"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"This Year"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Le.performance.thisYear.pgs," PGs"]}),e.jsxs("p",{className:`text-xs font-medium ${d(Le.performance.thisYear.achievement)}`,children:[Le.performance.thisYear.achievement.toFixed(1),"% target"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Earnings"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:c(Le.performance.thisYear.commission)}),e.jsx("p",{className:"text-xs text-gray-500",children:"This year"})]})]}),i===Le.id&&e.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Monthly Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"This Month:"}),e.jsxs("span",{className:"font-medium",children:[Le.performance.thisMonth.pgs,"/",Le.performance.thisMonth.target," PGs"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Last Month:"}),e.jsxs("span",{className:"font-medium",children:[Le.performance.lastMonth.pgs,"/",Le.performance.lastMonth.target," PGs"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Earnings Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Rate:"}),e.jsxs("span",{className:"font-medium",children:[Le.commissionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"This Month:"}),e.jsx("span",{className:"font-medium text-green-600",children:c(Le.performance.thisMonth.commission)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"This Year:"}),e.jsx("span",{className:"font-medium text-green-600",children:c(Le.performance.thisYear.commission)})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Targets & Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Monthly Target:"}),e.jsxs("span",{className:"font-medium",children:[Le.performance.thisMonth.target," PGs"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Yearly Target:"}),e.jsxs("span",{className:"font-medium",children:[Le.performance.thisYear.target," PGs"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:`font-medium px-2 py-1 rounded-full text-xs ${u(Le.status)}`,children:Le.status.replace("-"," ")})]})]})]})]})})]},Le.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Bv,{className:"h-5 w-5 mr-2 text-yellow-600"}),m&&!x?"Top Performers This Month":"Your Achievements This Month"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{children:"Current Month"})]})]}),m&&s.topPerformers&&s.topPerformers.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.topPerformers.slice(0,6).map((Le,cs)=>e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 border border-yellow-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm ${cs===0?"bg-gradient-to-r from-yellow-400 to-orange-500":cs===1?"bg-gradient-to-r from-gray-300 to-gray-500":cs===2?"bg-gradient-to-r from-amber-400 to-amber-600":"bg-gradient-to-r from-blue-400 to-blue-600"}`,children:cs<3?["🥇","🥈","🥉"][cs]:`#${cs+1}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:Le.name}),e.jsx("p",{className:"text-xs text-gray-600",children:Le.uniqueId})]})]}),e.jsx(Fa,{className:"h-5 w-5 text-yellow-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"PGs Added:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:Le.pgsThisMonth||0})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Commission:"}),e.jsx("span",{className:"font-semibold text-green-600",children:c(Le.commission||0)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Performance:"}),e.jsx("span",{className:`font-semibold px-2 py-1 rounded-full text-xs ${(Le.pgsThisMonth||0)>=25?"bg-green-100 text-green-800":(Le.pgsThisMonth||0)>=15?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:(Le.pgsThisMonth||0)>=25?"Excellent":(Le.pgsThisMonth||0)>=15?"Good":"Needs Focus"})]})]})]},Le.id||cs))}):m?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Fa,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No performers data available"}),e.jsx("p",{className:"text-sm",children:"Team members will appear here once they start adding PGs"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"PGs This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Property additions"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((_=s.summary)==null?void 0:_.pgsThisMonth)||0}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Target: ",((U=(G=s.performance)==null?void 0:G.thisMonth)==null?void 0:U.target)||30," PGs"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Ft,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Earnings This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Commission earned"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c(((q=(A=s.performance)==null?void 0:A.thisMonth)==null?void 0:q.commission)||0)}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Rate: ",((Y=s.summary)==null?void 0:Y.commissionRate)||0,"% per PG"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx(ga,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Achievement Rate"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Target completion"})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((z=(W=(O=s.performance)==null?void 0:O.thisMonth)==null?void 0:W.achievement)==null?void 0:z.toFixed(1))||0,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[((Q=(H=s.performance)==null?void 0:H.thisMonth)==null?void 0:Q.pgs)||0," / ",((ie=(J=s.performance)==null?void 0:J.thisMonth)==null?void 0:ie.target)||30," PGs"]})]})]})]}),!m&&s.performance&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"h-5 w-5 mr-2 text-blue-600"}),"Detailed Performance Analytics"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(xi,{className:"h-4 w-4"}),e.jsx("span",{children:"Real-time data"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center justify-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-blue-600"}),"This Month"]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-900 mb-2",children:((K=s.performance.thisMonth)==null?void 0:K.pgs)||0}),e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"PGs Added"}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Target: ",((oe=s.performance.thisMonth)==null?void 0:oe.target)||30," PGs"]}),e.jsxs("p",{className:"text-xs font-medium text-blue-600",children:[((Se=(le=s.performance.thisMonth)==null?void 0:le.achievement)==null?void 0:Se.toFixed(1))||0,"% achieved"]}),e.jsxs("p",{className:"text-xs font-medium text-green-600",children:[c(((Ee=s.performance.thisMonth)==null?void 0:Ee.commission)||0)," earned"]})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center justify-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2 text-green-600"}),"This Quarter"]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-3xl font-bold text-green-900 mb-2",children:((ye=s.performance.thisQuarter)==null?void 0:ye.pgs)||0}),e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"PGs Added"}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Target: ",((We=s.performance.thisQuarter)==null?void 0:We.target)||90," PGs"]}),e.jsxs("p",{className:"text-xs font-medium text-green-600",children:[((Fe=(fe=s.performance.thisQuarter)==null?void 0:fe.achievement)==null?void 0:Fe.toFixed(1))||0,"% achieved"]}),e.jsxs("p",{className:"text-xs font-medium text-green-700",children:[c(((ce=s.performance.thisQuarter)==null?void 0:ce.commission)||0)," earned"]})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center justify-center",children:[e.jsx(_t,{className:"h-4 w-4 mr-2 text-purple-600"}),"This Year"]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-900 mb-2",children:((Ce=s.performance.thisYear)==null?void 0:Ce.pgs)||0}),e.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"PGs Added"}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Target: ",((ze=s.performance.thisYear)==null?void 0:ze.target)||360," PGs"]}),e.jsxs("p",{className:"text-xs font-medium text-purple-600",children:[((st=(De=s.performance.thisYear)==null?void 0:De.achievement)==null?void 0:st.toFixed(1))||0,"% achieved"]}),e.jsxs("p",{className:"text-xs font-medium text-green-600",children:[c(((Xe=s.performance.thisYear)==null?void 0:Xe.commission)||0)," earned"]})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Progress Towards Targets"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Target"}),e.jsxs("span",{className:"text-blue-600 font-medium",children:[((it=s.performance.thisMonth)==null?void 0:it.pgs)||0," / ",((ft=s.performance.thisMonth)==null?void 0:ft.target)||30]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min((((be=s.performance.thisMonth)==null?void 0:be.pgs)||0)/(((Pe=s.performance.thisMonth)==null?void 0:Pe.target)||30)*100,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Quarterly Target"}),e.jsxs("span",{className:"text-green-600 font-medium",children:[((ee=s.performance.thisQuarter)==null?void 0:ee.pgs)||0," / ",((me=s.performance.thisQuarter)==null?void 0:me.target)||90]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min((((Te=s.performance.thisQuarter)==null?void 0:Te.pgs)||0)/(((qe=s.performance.thisQuarter)==null?void 0:qe.target)||90)*100,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Yearly Target"}),e.jsxs("span",{className:"text-purple-600 font-medium",children:[((gt=s.performance.thisYear)==null?void 0:gt.pgs)||0," / ",((Nt=s.performance.thisYear)==null?void 0:Nt.target)||360]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min((((mt=s.performance.thisYear)==null?void 0:mt.pgs)||0)/(((Wt=s.performance.thisYear)==null?void 0:Wt.target)||360)*100,100)}%`}})})]})]})]})]})]})},Iie=()=>{const{user:t}=He(j=>j.auth),s=cr(),[r,a]=h.useState("profile"),[n,i]=h.useState(!1),[l,o]=h.useState({firstName:"",lastName:"",email:"",phone:"",address:{street:"",city:"",state:"",pincode:"",country:"India"}}),[c,u]=h.useState(!1),[d,m]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[x,g]=h.useState({current:!1,new:!1,confirm:!1}),[p,f]=h.useState(null);h.useEffect(()=>{t&&(o({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||"",address:t.address||{street:"",city:"",state:"",pincode:"",country:"India"}}),b(),y())},[t]);const b=async()=>{try{i(!0);const j=await Ea.getProfile();if(j.success&&j.data){const k=j.data;o({firstName:k.firstName||"",lastName:k.lastName||"",email:k.email||"",phone:k.phone||"",address:k.address||{street:"",city:"",state:"",pincode:"",country:"India"}}),setInitialData(k)}}catch(j){console.error("Failed to fetch profile data:",j),rs.error("Failed to load profile information")}finally{i(!1)}},y=async()=>{try{if((t==null?void 0:t.role)==="sales_manager"){const j=await Ea.getDashboardData();f(j.data)}else{const j=await Ea.getMyFinancials();f(j.data)}}catch(j){console.error("Failed to fetch profile stats:",j)}},v=async j=>{var k,E,R;j.preventDefault(),i(!0);try{if(!l.firstName.trim()||!l.lastName.trim()){rs.error("First name and last name are required");return}if(l.phone&&!/^[6-9]\d{9}$/.test(l.phone)){rs.error("Please enter a valid 10-digit mobile number");return}if((k=l.address)!=null&&k.pincode&&!/^\d{6}$/.test(l.address.pincode)){rs.error("Please enter a valid 6-digit pincode");return}const D=await Ea.updateProfile(l);D.success?(rs.success("Profile updated successfully"),u(!1),setInitialData(D.data),o({firstName:D.data.firstName||"",lastName:D.data.lastName||"",email:D.data.email||"",phone:D.data.phone||"",address:D.data.address||{street:"",city:"",state:"",pincode:"",country:"India"}})):rs.error(D.message||"Failed to update profile")}catch(D){console.error("Profile update error:",D),rs.error(((R=(E=D.response)==null?void 0:E.data)==null?void 0:R.message)||"Failed to update profile")}finally{i(!1)}},N=async j=>{var k,E;if(j.preventDefault(),d.newPassword!==d.confirmPassword){rs.error("New passwords do not match");return}if(d.newPassword.length<8){rs.error("Password must be at least 8 characters long");return}i(!0);try{await Ea.changePassword({currentPassword:d.currentPassword,newPassword:d.newPassword}),rs.success("Password changed successfully! You will be logged out."),m({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{s(ci())},2e3)}catch(R){rs.error(((E=(k=R.response)==null?void 0:k.data)==null?void 0:E.message)||"Failed to change password")}finally{i(!1)}},S=j=>{g(k=>({...k,[j]:!k[j]}))},w=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(j),C=[{id:"profile",name:"Profile",icon:jt},{id:"password",name:"Change Password",icon:Er}];return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(jt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex",children:C.map(j=>e.jsxs("button",{onClick:()=>a(j.id),className:`flex items-center space-x-2 px-6 py-4 border-b-2 font-medium text-sm ${r===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j.icon,{className:"h-4 w-4"}),e.jsx("span",{children:j.name})]},j.id))})}),r==="profile"&&e.jsxs("div",{className:"p-6 space-y-6",children:[p&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(t==null?void 0:t.role)==="sales_manager"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team Members"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.totalSubSalesStaff||0})]}),e.jsx(Je,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PGs Added"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p.totalPGsAdded||0})]}),e.jsx(Ie,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Earned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:w(p.totalCommissionEarned||0)})]}),e.jsx(Ft,{className:"h-8 w-8 text-purple-600"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PGs Added"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p.totalPGs||0})]}),e.jsx(Ie,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Earned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:w(p.totalCommission||0)})]}),e.jsx(Ft,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[p.commissionRate||0,"%"]})]}),e.jsx(Fa,{className:"h-8 w-8 text-blue-600"})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),e.jsxs("button",{onClick:()=>u(!c),className:"flex items-center space-x-2 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:[e.jsx(fa,{className:"h-4 w-4"}),e.jsx("span",{children:c?"Cancel":"Edit"})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:l.firstName,onChange:j=>o({...l,firstName:j.target.value}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:j=>o({...l,lastName:j.target.value}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:l.email,onChange:j=>o({...l,email:j.target.value}),disabled:!c,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"}),e.jsx(Tr,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",value:l.phone,onChange:j=>o({...l,phone:j.target.value}),disabled:!c,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"}),e.jsx(Cs,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Street Address",value:l.address.street,onChange:j=>o({...l,address:{...l.address,street:j.target.value}}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"City",value:l.address.city,onChange:j=>o({...l,address:{...l.address,city:j.target.value}}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx("input",{type:"text",placeholder:"State",value:l.address.state,onChange:j=>o({...l,address:{...l.address,state:j.target.value}}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Pincode",value:l.address.pincode,onChange:j=>o({...l,address:{...l.address,pincode:j.target.value}}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Country",value:l.address.country,onChange:j=>o({...l,address:{...l.address,country:j.target.value}}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Role"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:(t==null?void 0:t.role)==="sales_manager"?"Sales Manager":"Sales Staff"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Unique ID"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 font-mono",children:(t==null?void 0:t.salesUniqueId)||(t==null?void 0:t.uniqueSalesId)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t!=null&&t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.isActive?"Active":"Inactive"})]})]})]}),c&&e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),initialData&&o({firstName:initialData.firstName||"",lastName:initialData.lastName||"",email:initialData.email||"",phone:initialData.phone||"",address:initialData.address||{street:"",city:"",state:"",pincode:"",country:"India"}})},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Za,{className:"h-4 w-4"}),e.jsx("span",{children:n?"Saving...":"Save Changes"})]})]})]})]})]}),r==="password"&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Password Change Notice"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("p",{children:"After changing your password, you will be automatically logged out and will need to log in again with your new password."})})]})})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.current?"text":"password",value:d.currentPassword,onChange:j=>m({...d,currentPassword:j.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your current password",required:!0}),e.jsx("button",{type:"button",onClick:()=>S("current"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:x.current?e.jsx(rr,{className:"h-4 w-4 text-gray-400"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.new?"text":"password",value:d.newPassword,onChange:j=>m({...d,newPassword:j.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your new password",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>S("new"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:x.new?e.jsx(rr,{className:"h-4 w-4 text-gray-400"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.confirm?"text":"password",value:d.confirmPassword,onChange:j=>m({...d,confirmPassword:j.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm your new password",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>S("confirm"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:x.confirm?e.jsx(rr,{className:"h-4 w-4 text-gray-400"}):e.jsx(ot,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Er,{className:"h-4 w-4"}),e.jsx("span",{children:n?"Changing Password...":"Change Password"})]})})]})]})})]})]})};class Oie{async createSalesManager(s){try{return(await we.post("/sales-managers",s)).data}catch(r){throw this.handleError(r),r}}async getAllSalesManagers(s={}){try{return(await we.get("/sales-managers",{params:s})).data}catch(r){throw this.handleError(r),r}}async updateSalesManager(s,r){try{return(await we.put(`/sales-managers/${s}`,r)).data}catch(a){throw this.handleError(a),a}}async deleteSalesManager(s){try{return(await we.delete(`/sales-managers/${s}`)).data}catch(r){throw this.handleError(r),r}}async resetPassword(s){try{return(await we.post(`/sales-managers/${s}/reset-password`)).data}catch(r){throw this.handleError(r),r}}async changePassword(s,r){try{return(await we.put(`/sales-managers/${s}/change-password`,r)).data}catch(a){throw this.handleError(a),a}}async needsPasswordChange(s){try{return(await we.get(`/sales-managers/${s}/needs-password-change`)).data}catch(r){throw this.handleError(r),r}}async getSalesManagerPerformance(s){try{return(await we.get(`/sales-managers/${s}/performance`)).data}catch(r){throw this.handleError(r),r}}handleError(s){s.response&&s.response.status===401&&(Qs.dispatch({type:"auth/logout"}),window.location.href="/login"),console.error("API Error:",s.response?s.response.data:s.message)}}const ec=new Oie,Z1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,e2=yS,Mie=(t,s)=>r=>{var a;if((s==null?void 0:s.variants)==null)return e2(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=s,l=Object.keys(n).map(u=>{const d=r==null?void 0:r[u],m=i==null?void 0:i[u];if(d===null)return null;const x=Z1(d)||Z1(m);return n[u][x]}),o=r&&Object.entries(r).reduce((u,d)=>{let[m,x]=d;return x===void 0||(u[m]=x),u},{}),c=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((u,d)=>{let{class:m,className:x,...g}=d;return Object.entries(g).every(p=>{let[f,b]=p;return Array.isArray(b)?b.includes({...i,...o}[f]):{...i,...o}[f]===b})?[...u,m,x]:u},[]);return e2(t,l,c,r==null?void 0:r.class,r==null?void 0:r.className)},Bie=Mie("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-200 bg-white hover:bg-gray-100",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Br=h.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...n},i)=>{const l=a?uI:"button";return e.jsx(l,{className:sa(Bie({variant:s,size:r,className:t})),ref:i,...n})});Br.displayName="Button";const yn=h.forwardRef(({className:t,type:s,...r},a)=>e.jsx("input",{type:s,className:sa("flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r}));yn.displayName="Input";const Lie=()=>{const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(null),[l,o]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState(null),[x,g]=h.useState({status:""}),[p,f]=h.useState(""),[b,y]=h.useState(!1),[v,N]=h.useState(!1),[S,w]=h.useState(!1),[C,j]=h.useState(null),[k,E]=h.useState(!1),[R,D]=h.useState({firstName:"",lastName:"",email:"",phone:""});h.useEffect(()=>{P()},[]);const P=async()=>{var W,z,H,Q;try{a(!0),i(null);const J=await ec.getAllSalesManagers({status:x.status});s(J.data||[])}catch(J){i(((z=(W=J.response)==null?void 0:W.data)==null?void 0:z.message)||"Failed to fetch Sales Managers"),M.error(((Q=(H=J.response)==null?void 0:H.data)==null?void 0:Q.message)||"Failed to fetch Sales Managers")}finally{a(!1)}},T=async W=>{var z,H;W.preventDefault();try{const Q=await ec.createSalesManager(R);M.success("Sales Manager added successfully"),s([...t,Q.data.data]),o(!1),F()}catch(Q){M.error(((H=(z=Q.response)==null?void 0:z.data)==null?void 0:H.message)||"Failed to add Sales Manager")}},B=async W=>{var z,H;W.preventDefault();try{const Q=await ec.updateSalesManager(d._id,R);M.success("Sales Manager updated successfully"),s(t.map(J=>J._id===d._id?Q.data.data:J)),u(!1),F()}catch(Q){M.error(((H=(z=Q.response)==null?void 0:z.data)==null?void 0:H.message)||"Failed to update Sales Manager")}},F=()=>{D({firstName:"",lastName:"",email:"",phone:"",commissionRate:10}),m(null)},L=W=>{m(W),y(!0)},I=W=>{j(W),N(!0)},V=async()=>{var W,z;if(C)try{a(!0),await ec.deleteSalesManager(C._id),M.success("Sales Manager deleted successfully"),N(!1),j(null),P()}catch(H){M.error(((z=(W=H.response)==null?void 0:W.data)==null?void 0:z.message)||"Failed to delete Sales Manager")}finally{a(!1)}},_=W=>{m(W),w(!0)},G=async()=>{var W,z;if(d)try{E(!0),await ec.resetPassword(d._id),M.success("Password reset initiated. New credentials will be sent via email."),w(!1),m(null)}catch(H){M.error(((z=(W=H.response)==null?void 0:W.data)==null?void 0:z.message)||"Failed to reset password")}finally{E(!1)}},U=(W=!1)=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:W?"Edit Sales Manager":"Add Sales Manager"}),e.jsx("button",{onClick:()=>{W?u(!1):o(!1),F()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ct,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:W?B:T,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx(yn,{type:"text",value:R.firstName,onChange:z=>D({...R,firstName:z.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx(yn,{type:"text",value:R.lastName,onChange:z=>D({...R,lastName:z.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx(yn,{type:"email",value:R.email,onChange:z=>D({...R,email:z.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx(yn,{type:"tel",value:R.phone,onChange:z=>D({...R,phone:z.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Rate (%)"}),e.jsx(yn,{type:"number",min:"0",max:"100",value:R.commissionRate,onChange:z=>D({...R,commissionRate:parseFloat(z.target.value)||0}),placeholder:"Enter commission rate (0-100%)",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Commission rate for PGs added by this sales manager and their sub-staff"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(Br,{type:"button",variant:"outline",onClick:()=>{W?u(!1):o(!1),F()},children:"Cancel"}),e.jsxs(Br,{type:"submit",children:[W?"Update":"Add"," Sales Manager"]})]})]})]})}),A=()=>d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(Je,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Sales Manager Details"}),e.jsx("p",{className:"text-blue-100",children:(d==null?void 0:d.salesUniqueId)||"N/A"})]})]}),e.jsx(Br,{variant:"ghost",size:"icon",onClick:()=>y(!1),className:"text-white hover:bg-white hover:bg-opacity-20",children:e.jsx(ct,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[(d==null?void 0:d.firstName)||"N/A"," ",(d==null?void 0:d.lastName)||""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(d==null?void 0:d.email)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(d==null?void 0:d.phone)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Commission Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[(d==null?void 0:d.commissionRate)||10,"%"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Unique ID"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 font-mono",children:(d==null?void 0:d.salesUniqueId)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${(d==null?void 0:d.status)==="active"?"bg-green-100 text-green-800":(d==null?void 0:d.status)==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:(d==null?void 0:d.status)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d!=null&&d.createdAt?new Date(d.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(Br,{onClick:()=>{y(!1),m(d),D({firstName:(d==null?void 0:d.firstName)||"",lastName:(d==null?void 0:d.lastName)||"",email:(d==null?void 0:d.email)||"",phone:(d==null?void 0:d.phone)||"",commissionRate:(d==null?void 0:d.commissionRate)||10}),u(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Edit Manager"]}),e.jsxs(Br,{variant:"outline",onClick:()=>{y(!1),_(d)},className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:[e.jsx(Gh,{className:"h-4 w-4 mr-2"}),"Reset Password"]})]})})]})]})}):null,q=()=>C?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Sales Manager"}),e.jsx("p",{className:"text-red-100",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete the sales manager ",e.jsxs("strong",{children:[(C==null?void 0:C.firstName)||"N/A"," ",(C==null?void 0:C.lastName)||""]}),"?"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Warning:"})," This will permanently remove the sales manager account and all associated data. This action cannot be reversed."]})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(Br,{variant:"outline",onClick:()=>{N(!1),j(null)},className:"flex-1",children:"Cancel"}),e.jsx(Br,{onClick:V,disabled:r,className:"flex-1 bg-red-600 hover:bg-red-700",children:r?"Deleting...":"Delete Manager"})]})]})]})}):null,Y=()=>d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(Gh,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reset Password"}),e.jsx("p",{className:"text-orange-100",children:"Send new credentials via email"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["This will reset the password for ",e.jsxs("strong",{children:[(d==null?void 0:d.firstName)||"N/A"," ",(d==null?void 0:d.lastName)||""]})," and send new login credentials via email."]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Note:"})," The sales manager will receive an email with new temporary password and will be required to change it on next login."]})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(Br,{variant:"outline",onClick:()=>{w(!1),m(null)},className:"flex-1",children:"Cancel"}),e.jsx(Br,{onClick:G,disabled:k,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:k?"Resetting...":"Reset Password"})]})]})]})}):null,O=t.filter(W=>{if(!W||!W.firstName)return!1;const z=W.firstName.toLowerCase().includes(p.toLowerCase())||W.lastName.toLowerCase().includes(p.toLowerCase())||W.email.toLowerCase().includes(p.toLowerCase())||W.salesUniqueId&&W.salesUniqueId.toLowerCase().includes(p.toLowerCase()),H=!x.status||W.status===x.status;return z&&H});return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 text-lg mb-4",children:n}),e.jsxs(Br,{onClick:P,children:[e.jsx(wt,{className:"mr-2 h-4 w-4"})," Retry"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Je,{className:"h-8 w-8 mr-3 text-blue-600"}),"Sales Manager Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and track your sales team leaders"})]}),e.jsxs(Br,{onClick:()=>o(!0),className:"flex items-center space-x-2",children:[e.jsx(Pa,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Sales Manager"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(yn,{type:"text",placeholder:"Search Sales Managers...",value:p,onChange:W=>f(W.target.value),className:"pl-10"}),e.jsx(Os,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"})]}),e.jsxs("select",{value:x.status,onChange:W=>g(z=>({...z,status:W.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})}),r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unique ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:O.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[(W==null?void 0:W.firstName)||"N/A"," ",(W==null?void 0:W.lastName)||""]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:(W==null?void 0:W.email)||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-blue-600 font-mono",children:(W==null?void 0:W.salesUniqueId)||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(W==null?void 0:W.status)==="active"?"bg-green-100 text-green-800":(W==null?void 0:W.status)==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:(W==null?void 0:W.status)||"N/A"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Br,{variant:"ghost",size:"sm",onClick:()=>L(W),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(Br,{variant:"ghost",size:"sm",onClick:()=>{m(W),D({firstName:W.firstName,lastName:W.lastName,email:W.email,phone:W.phone}),u(!0)},className:"text-green-600 hover:text-green-800 hover:bg-green-50",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(Br,{variant:"ghost",size:"sm",onClick:()=>_(W),className:"text-orange-600 hover:text-orange-800 hover:bg-orange-50",children:[e.jsx(Gh,{className:"h-4 w-4 mr-1"}),"Reset"]}),e.jsxs(Br,{variant:"ghost",size:"sm",onClick:()=>I(W),className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:[e.jsx(Pr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},(W==null?void 0:W._id)||Math.random()))})]})}),l&&U(),c&&U(!0),b&&A(),v&&q(),S&&Y()]})},$ie=()=>{const[t,s]=h.useState({identifier:"",password:""}),[r,a]=h.useState(!1),[n,i]=h.useState(!1),l=Ms(),o=cr(),c=async u=>{var d,m;u.preventDefault(),i(!0);try{const x=await o(s0(t)).unwrap();M.success("Login successful!"),x.data.user.forcePasswordChange?(M("Please change your password to continue",{icon:"ℹ️"}),l("/sales/change-password")):l("/sales/dashboard")}catch(x){const g=((m=(d=x.response)==null?void 0:d.data)==null?void 0:m.message)||x.message||x.toString()||"Login failed";M.error(g)}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:e.jsx(jt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sales Manager Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your Sales Manager account"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email or Unique ID"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Tr,{className:"h-5 w-5 text-gray-400"})}),e.jsx(yn,{id:"identifier",name:"identifier",type:"text",required:!0,className:"pl-10",placeholder:"Enter your email or unique ID",value:t.identifier,onChange:u=>s({...t,identifier:u.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-5 w-5 text-gray-400"})}),e.jsx(yn,{id:"password",name:"password",type:r?"text":"password",required:!0,className:"pl-10 pr-10",placeholder:"Enter your password",value:t.password,onChange:u=>s({...t,password:u.target.value})}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!r),children:r?e.jsx(rr,{className:"h-5 w-5 text-gray-400"}):e.jsx(ot,{className:"h-5 w-5 text-gray-400"})})]})]})]}),e.jsx("div",{children:e.jsx(Br,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign in"})}),e.jsx("div",{className:"text-center",children:e.jsx(ms,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-500",children:"Regular User Login"})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"First Time Login?"}),e.jsx("p",{className:"text-sm text-blue-700",children:"If this is your first login, you'll be prompted to change your temporary password for security."})]})]})]})})},t2=()=>{const[t,s]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[r,a]=h.useState({current:!1,new:!1,confirm:!1}),[n,i]=h.useState(!1),[l,o]=h.useState({}),c=Ms(),u=cr(),{user:d}=He(b=>b.auth),m=()=>{const b={};return!t.currentPassword||typeof t.currentPassword!="string"?b.currentPassword="Current password is required":t.currentPassword.trim().length===0&&(b.currentPassword="Current password cannot be empty"),!t.newPassword||typeof t.newPassword!="string"?b.newPassword="New password is required":t.newPassword.length<8?b.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/.test(t.newPassword)||(b.newPassword="Password must contain uppercase, lowercase, number, and special character"),!t.confirmPassword||typeof t.confirmPassword!="string"?b.confirmPassword="Please confirm your new password":t.newPassword!==t.confirmPassword&&(b.confirmPassword="Passwords do not match"),t.currentPassword===t.newPassword&&(b.newPassword="New password must be different from current password"),o(b),Object.keys(b).length===0},x=async b=>{var y,v,N,S;if(b.preventDefault(),!!m()){i(!0);try{const w=(y=t.currentPassword)==null?void 0:y.toString().trim(),C=(v=t.newPassword)==null?void 0:v.toString().trim();if(!w||!C)throw new Error("Password fields are required");if(typeof w!="string"||typeof C!="string")throw new Error("Invalid password format");if(console.log("🔐 Password Change Request:",{userRole:d==null?void 0:d.role,userId:d._id,currentPasswordLength:w.length,newPasswordLength:C.length,currentPasswordType:typeof w,newPasswordType:typeof C}),(d==null?void 0:d.role)==="sales_manager"){const j={currentPassword:w,newPassword:C};console.log("📤 Sending to salesManagerService:",{dataKeys:Object.keys(j),dataTypes:{currentPassword:typeof j.currentPassword,newPassword:typeof j.newPassword}}),await ec.changePassword(d._id,j)}else{const j={currentPassword:w,newPassword:C};console.log("📤 Sending to salesService:",{dataKeys:Object.keys(j),dataTypes:{currentPassword:typeof j.currentPassword,newPassword:typeof j.newPassword}}),await Ea.changePassword(j)}u(H_()),M.success("Password changed successfully!"),c("/sales/dashboard")}catch(w){M.error(((S=(N=w.response)==null?void 0:N.data)==null?void 0:S.message)||"Failed to change password")}finally{i(!1)}}},g=b=>{a(y=>({...y,[b]:!y[b]}))},f=(b=>{if(!b)return{strength:0,label:"",color:""};let y=0;return b.length>=8&&y++,/[a-z]/.test(b)&&y++,/[A-Z]/.test(b)&&y++,/\d/.test(b)&&y++,/[@$!%*?&]/.test(b)&&y++,{strength:y,...{0:{label:"",color:""},1:{label:"Very Weak",color:"bg-red-500"},2:{label:"Weak",color:"bg-orange-500"},3:{label:"Fair",color:"bg-yellow-500"},4:{label:"Good",color:"bg-blue-500"},5:{label:"Strong",color:"bg-green-500"}}[y]}})(t.newPassword);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-green-100",children:e.jsx(is,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Change Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Set a new secure password for your account"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Security Notice:"})," You must change your temporary password before accessing the dashboard."]})]})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-5 w-5 text-gray-400"})}),e.jsx(yn,{id:"currentPassword",name:"currentPassword",type:r.current?"text":"password",required:!0,className:`pl-10 pr-10 ${l.currentPassword?"border-red-500":""}`,placeholder:"Enter your current password",value:t.currentPassword,onChange:b=>{s({...t,currentPassword:b.target.value}),l.currentPassword&&o({...l,currentPassword:""})}}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g("current"),children:r.current?e.jsx(rr,{className:"h-5 w-5 text-gray-400"}):e.jsx(ot,{className:"h-5 w-5 text-gray-400"})})]}),l.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.currentPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-5 w-5 text-gray-400"})}),e.jsx(yn,{id:"newPassword",name:"newPassword",type:r.new?"text":"password",required:!0,className:`pl-10 pr-10 ${l.newPassword?"border-red-500":""}`,placeholder:"Enter your new password",value:t.newPassword,onChange:b=>{s({...t,newPassword:b.target.value}),l.newPassword&&o({...l,newPassword:""})}}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g("new"),children:r.new?e.jsx(rr,{className:"h-5 w-5 text-gray-400"}):e.jsx(ot,{className:"h-5 w-5 text-gray-400"})})]}),t.newPassword&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Password Strength:"}),e.jsx("span",{className:`text-xs font-medium ${f.strength>=4?"text-green-600":f.strength>=3?"text-blue-600":f.strength>=2?"text-yellow-600":"text-red-600"}`,children:f.label})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${f.color}`,style:{width:`${f.strength/5*100}%`}})})]}),l.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Er,{className:"h-5 w-5 text-gray-400"})}),e.jsx(yn,{id:"confirmPassword",name:"confirmPassword",type:r.confirm?"text":"password",required:!0,className:`pl-10 pr-10 ${l.confirmPassword?"border-red-500":""}`,placeholder:"Confirm your new password",value:t.confirmPassword,onChange:b=>{s({...t,confirmPassword:b.target.value}),l.confirmPassword&&o({...l,confirmPassword:""})}}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g("confirm"),children:r.confirm?e.jsx(rr,{className:"h-5 w-5 text-gray-400"}):e.jsx(ot,{className:"h-5 w-5 text-gray-400"})})]}),l.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.confirmPassword})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Password Requirements"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{className:t.newPassword.length>=8?"text-green-600":"",children:"✓ At least 8 characters"}),e.jsx("li",{className:/[a-z]/.test(t.newPassword)?"text-green-600":"",children:"✓ One lowercase letter"}),e.jsx("li",{className:/[A-Z]/.test(t.newPassword)?"text-green-600":"",children:"✓ One uppercase letter"}),e.jsx("li",{className:/\d/.test(t.newPassword)?"text-green-600":"",children:"✓ One number"}),e.jsx("li",{className:/[@$!%*?&]/.test(t.newPassword)?"text-green-600":"",children:"✓ One special character (@$!%*?&)"})]})]}),e.jsx("div",{children:e.jsx(Br,{type:"submit",className:"w-full",disabled:n||f.strength<4,children:n?"Changing Password...":"Change Password & Login"})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"After changing your password, you'll be logged out and can login again with your new credentials."})})]})]})})},Uie=()=>{const t=["Koramangala","Indiranagar","HSR Layout","Whitefield"],s=["Completed","Pending","Overdue","Partial"];return Array.from({length:50},(r,a)=>({id:`PAY-${1e3+a}`,residentName:`Resident ${a+1}`,branch:t[Math.floor(Math.random()*t.length)],amount:Math.floor(Math.random()*1e4)+1e3,date:new Date(2024,Math.floor(Math.random()*12),Math.floor(Math.random()*28)+1),status:s[Math.floor(Math.random()*s.length)],paymentMethod:["UPI","Bank Transfer","Cash","Cheque"][Math.floor(Math.random()*4)]}))},Hie=()=>{const[t,s]=h.useState([]),[r,a]=h.useState([]),[n,i]=h.useState(!0),[l,o]=h.useState(1),[c,u]=h.useState(10),[d,m]=h.useState({branch:"",status:"",minAmount:"",maxAmount:"",startDate:"",endDate:""});h.useEffect(()=>{const w=Uie();s(w),a(w),i(!1)},[]),h.useEffect(()=>{x()},[d,t]);const x=()=>{let w=t;d.branch&&d.branch!=="all"&&(w=w.filter(C=>C.branch===d.branch)),d.status&&d.status!=="all"&&(w=w.filter(C=>C.status===d.status)),d.minAmount&&(w=w.filter(C=>C.amount>=parseFloat(d.minAmount))),d.maxAmount&&(w=w.filter(C=>C.amount<=parseFloat(d.maxAmount))),d.startDate&&(w=w.filter(C=>new Date(C.date)>=new Date(d.startDate))),d.endDate&&(w=w.filter(C=>new Date(C.date)<=new Date(d.endDate))),a(w),o(1)},g=(w,C)=>{m(j=>({...j,[w]:C}))},p=()=>{m({branch:"",status:"",minAmount:"",maxAmount:"",startDate:"",endDate:""})},f=l*c,b=f-c,y=r.slice(b,f),v=Math.ceil(r.length/c),N=()=>{M.success("Export functionality will be implemented")},S=w=>{switch(w){case"Completed":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Overdue":return"bg-red-100 text-red-800";case"Partial":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ft,{className:"mr-3 text-blue-600"}),"Payments Overview"]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Branch"}),e.jsxs(ls,{onValueChange:w=>g("branch",w),value:d.branch||"all",children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Branches"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Branches"}),["Koramangala","Indiranagar","HSR Layout","Whitefield"].map(w=>e.jsx(ke,{value:w,children:w},w))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),e.jsxs(ls,{onValueChange:w=>g("status",w),value:d.status||"all",children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Statuses"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Statuses"}),["Completed","Pending","Overdue","Partial"].map(w=>e.jsx(ke,{value:w,children:w},w))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Min Amount"}),e.jsx("input",{type:"number",value:d.minAmount,onChange:w=>g("minAmount",w.target.value),placeholder:"Min Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Max Amount"}),e.jsx("input",{type:"number",value:d.maxAmount,onChange:w=>g("maxAmount",w.target.value),placeholder:"Max Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Start Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),d.startDate?Zs(new Date(d.startDate),"MMM dd, yyyy"):"Select Start Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:d.startDate?new Date(d.startDate):void 0,onSelect:w=>g("startDate",w?Zs(w,"yyyy-MM-dd"):""),initialFocus:!0})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),d.endDate?Zs(new Date(d.endDate),"MMM dd, yyyy"):"Select End Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:d.endDate?new Date(d.endDate):void 0,onSelect:w=>g("endDate",w?Zs(w,"yyyy-MM-dd"):""),initialFocus:!0})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 space-x-3",children:e.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resident Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.id}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.residentName}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.branch}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:["₹",w.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.date.toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(w.status)}`,children:w.status})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.paymentMethod})]},w.id))})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:b+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(f,r.length)})," ","of"," ",e.jsx("span",{className:"font-medium",children:r.length})," ","results"]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(w=>Math.max(w-1,1)),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded-lg disabled:opacity-50",children:e.jsx(Ua,{className:"h-4 w-4"})}),Array.from({length:v},(w,C)=>C+1).map(w=>e.jsx("button",{onClick:()=>o(w),className:`px-3 py-1 border border-gray-300 rounded-lg ${l===w?"bg-blue-600 text-white":"bg-white text-gray-700"}`,children:w},w)),e.jsx("button",{onClick:()=>o(w=>Math.min(w+1,v)),disabled:l===v,className:"px-3 py-1 border border-gray-300 rounded-lg disabled:opacity-50",children:e.jsx(ra,{className:"h-4 w-4"})})]})]})})]})]})},Wie=()=>{const t=["Resident Summary","Payment Collection","Occupancy","Financial Overview","Branch Performance"],s=["Generated","Pending","In Progress","Error"],r=["PDF","Excel","CSV"];return Array.from({length:50},(a,n)=>({id:`RPT-${1e3+n}`,type:t[Math.floor(Math.random()*t.length)],dateGenerated:new Date(2024,Math.floor(Math.random()*12),Math.floor(Math.random()*28)+1),status:s[Math.floor(Math.random()*s.length)],format:r[Math.floor(Math.random()*r.length)],fileSize:Math.floor(Math.random()*5)+1,generatedBy:`Admin ${Math.floor(Math.random()*10)+1}`}))},Vie=()=>{const[t,s]=h.useState([]),[r,a]=h.useState([]),[n,i]=h.useState(!0),[l,o]=h.useState(1),[c,u]=h.useState(10),[d,m]=h.useState({type:"",status:"",format:"",startDate:"",endDate:""});h.useEffect(()=>{const w=Wie();s(w),a(w),i(!1)},[]),h.useEffect(()=>{x()},[d,t]);const x=()=>{let w=t;d.type&&d.type!=="all"&&(w=w.filter(C=>C.type===d.type)),d.status&&d.status!=="all"&&(w=w.filter(C=>C.status===d.status)),d.format&&d.format!=="all"&&(w=w.filter(C=>C.format===d.format)),d.startDate&&(w=w.filter(C=>new Date(C.dateGenerated)>=new Date(d.startDate))),d.endDate&&(w=w.filter(C=>new Date(C.dateGenerated)<=new Date(d.endDate))),a(w),o(1)},g=(w,C)=>{m(j=>({...j,[w]:C}))},p=()=>{m({type:"",status:"",format:"",startDate:"",endDate:""})},f=l*c,b=f-c,y=r.slice(b,f),v=Math.ceil(r.length/c),N=w=>{M.success(`Downloading ${w.type} report`)},S=w=>{switch(w){case"Generated":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(ns,{className:"mr-3 text-blue-600"}),"Reports Management"]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>M.success("Generate New Report functionality will be implemented"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Generate Report"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Report Type"}),e.jsxs(ls,{onValueChange:w=>g("type",w),value:d.type||"all",children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Report Types"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Report Types"}),["Resident Summary","Payment Collection","Occupancy","Financial Overview","Branch Performance"].map(w=>e.jsx(ke,{value:w,children:w},w))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),e.jsxs(ls,{onValueChange:w=>g("status",w),value:d.status||"all",children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Statuses"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Statuses"}),["Generated","Pending","In Progress","Error"].map(w=>e.jsx(ke,{value:w,children:w},w))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Format"}),e.jsxs(ls,{onValueChange:w=>g("format",w),value:d.format||"all",children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"All Formats"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Formats"}),["PDF","Excel","CSV"].map(w=>e.jsx(ke,{value:w,children:w},w))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Start Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),d.startDate?Zs(new Date(d.startDate),"MMM dd, yyyy"):"Select Start Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:d.startDate?new Date(d.startDate):void 0,onSelect:w=>g("startDate",w?Zs(w,"yyyy-MM-dd"):""),initialFocus:!0})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),d.endDate?Zs(new Date(d.endDate),"MMM dd, yyyy"):"Select End Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:d.endDate?new Date(d.endDate):void 0,onSelect:w=>g("endDate",w?Zs(w,"yyyy-MM-dd"):""),initialFocus:!0})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 space-x-3",children:e.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Generated"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Format"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Size"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.id}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.type}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.dateGenerated.toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(w.status)}`,children:w.status})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.format}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[w.fileSize," MB"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.generatedBy}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.jsx("button",{onClick:()=>N(w),className:"text-blue-600 hover:text-blue-800 transition",children:e.jsx(xr,{className:"h-4 w-4"})})})]},w.id))})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:b+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(f,r.length)})," ","of"," ",e.jsx("span",{className:"font-medium",children:r.length})," ","results"]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(w=>Math.max(w-1,1)),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded-lg disabled:opacity-50",children:e.jsx(Ua,{className:"h-4 w-4"})}),Array.from({length:v},(w,C)=>C+1).map(w=>e.jsx("button",{onClick:()=>o(w),className:`px-3 py-1 border border-gray-300 rounded-lg ${l===w?"bg-blue-600 text-white":"bg-white text-gray-700"}`,children:w},w)),e.jsx("button",{onClick:()=>o(w=>Math.min(w+1,v)),disabled:l===v,className:"px-3 py-1 border border-gray-300 rounded-lg disabled:opacity-50",children:e.jsx(ra,{className:"h-4 w-4"})})]})]})})]})]})},zie=()=>{const[t,s]=h.useState(null),[r,a]=h.useState(!0),[n,i]=h.useState({period:"weekly",startDate:null,endDate:null,subscriptionType:"all",salesManager:"all",branch:"all"}),[l,o]=h.useState(!1);new Date(new Date().setDate(new Date().getDate()-new Date().getDay())),new Date(new Date().setDate(new Date().getDate()+(6-new Date().getDay()))),pa(new Date),su(new Date),AS(new Date),XF(new Date),pa(new Date(new Date().getFullYear(),new Date().getMonth()-1,1)),su(new Date(new Date().getFullYear(),new Date().getMonth()-1,1)),h.useEffect(()=>{c()},[n]);const c=async()=>{try{a(!0);const N=await $g.getSalesAnalytics(n);if(N.success&&N.data.success===!1){M.error(N.data.message||"Failed to fetch sales analytics"),s(null);return}N.success?s(N.data.data||N.data):(M.error(N.message||"Failed to fetch sales analytics"),s(null))}catch(N){console.error("Error fetching sales analytics:",N),M.error("An error occurred while fetching sales analytics"),s(null)}finally{a(!1)}},u=N=>{i(S=>({...S,...N}))},d=()=>{i({period:"weekly",startDate:null,endDate:null,subscriptionType:"all",salesManager:"all",branch:"all"}),o(!1)},m=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(aa,{className:"mr-2 h-5 w-5 text-blue-600"}),"Sales Filters"]}),e.jsxs("button",{onClick:()=>o(!l),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[l?"Hide":"Show"," Advanced Filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Period"}),e.jsxs(ls,{value:n.period,onValueChange:N=>u({period:N}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Period"})}),e.jsxs(Zt,{children:[e.jsxs(mi,{children:[e.jsx(Dn,{children:"Time Periods"}),e.jsx(ke,{value:"weekly",children:"Weekly"}),e.jsx(ke,{value:"monthly",children:"Monthly"}),e.jsx(ke,{value:"yearly",children:"Yearly"})]}),e.jsx(Xb,{}),e.jsxs(mi,{children:[e.jsx(Dn,{children:"Predefined Ranges"}),e.jsx(ke,{value:"this_week",children:"This Week"}),e.jsx(ke,{value:"this_month",children:"This Month"}),e.jsx(ke,{value:"last_month",children:"Last Month"}),e.jsx(ke,{value:"this_year",children:"This Year"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Start Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),n.startDate?Zs(new Date(n.startDate),"MMM dd, yyyy"):"Select Start Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:n.startDate?new Date(n.startDate):void 0,onSelect:N=>u({startDate:N?Zs(N,"yyyy-MM-dd"):null}),initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End Date"}),e.jsxs(Hi,{children:[e.jsx(Wi,{asChild:!0,children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg flex items-center justify-between cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-2 text-gray-500"}),n.endDate?Zs(new Date(n.endDate),"MMM dd, yyyy"):"Select End Date"]})})}),e.jsx(bi,{className:"w-auto p-0",children:e.jsx(yi,{mode:"single",selected:n.endDate?new Date(n.endDate):void 0,onSelect:N=>u({endDate:N?Zs(N,"yyyy-MM-dd"):null}),initialFocus:!0})})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:c,className:"w-full p-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center",children:e.jsx(wt,{className:"h-5 w-5"})})})]}),e.jsx(vt,{children:l&&e.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Subscription Type"}),e.jsxs(ls,{value:n.subscriptionType,onValueChange:N=>u({subscriptionType:N}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Subscription"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Subscriptions"}),e.jsx(ke,{value:"active",children:"Active"}),e.jsx(ke,{value:"trial",children:"Trial"}),e.jsx(ke,{value:"expired",children:"Expired"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sales Manager"}),e.jsxs(ls,{value:n.salesManager,onValueChange:N=>u({salesManager:N}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Manager"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Managers"}),e.jsx(ke,{value:"manager1",children:"John Doe"}),e.jsx(ke,{value:"manager2",children:"Jane Smith"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Branch"}),e.jsxs(ls,{value:n.branch,onValueChange:N=>u({branch:N}),children:[e.jsx(Qt,{className:"w-full",children:e.jsx(os,{placeholder:"Select Branch"})}),e.jsxs(Zt,{children:[e.jsx(ke,{value:"all",children:"All Branches"}),e.jsx(ke,{value:"branch1",children:"Koramangala"}),e.jsx(ke,{value:"branch2",children:"Indiranagar"})]})]})]})]})}),(n.startDate||n.endDate||n.subscriptionType!=="all"||n.salesManager!=="all"||n.branch!=="all")&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:d,className:"inline-flex items-center px-4 py-2 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Clear All Filters"]})})]}),x=N=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(N),g=h.useMemo(()=>{if(console.log("Raw salesData:",t),!(t!=null&&t.salesAnalytics)||t.salesAnalytics.length===0)return console.log("No sales analytics data"),null;const N=t.salesAnalytics.reduce((C,j)=>{if(!j||!j.period||!j.period.year||!j.period.month)return console.log("Invalid item:",j),C;const k=`${j.period.year}-${j.period.month}`;C[k]||(C[k]={period:k,totalPGs:0,totalRevenue:0,completedPGs:0,weeklyBreakdown:{}}),C[k].totalPGs+=j.totalPGs||0,C[k].totalRevenue+=j.totalRevenue||0,C[k].completedPGs+=j.completedPGs||0;const E=j.period.week;return C[k].weeklyBreakdown[E]||(C[k].weeklyBreakdown[E]={pgs:0,revenue:0,completedPGs:0}),C[k].weeklyBreakdown[E].pgs+=j.totalPGs||0,C[k].weeklyBreakdown[E].revenue+=j.totalRevenue||0,C[k].weeklyBreakdown[E].completedPGs+=j.completedPGs||0,C},{}),S=Object.values(N).sort((C,j)=>{const[k,E]=C.period.split("-").map(Number),[R,D]=j.period.split("-").map(Number);return k-R||E-D}),w={labels:[],values:[]};return S.forEach(C=>{Object.entries(C.weeklyBreakdown).forEach(([j,k])=>{w.labels.push(`${C.period}-W${j}`),w.values.push(k.pgs)})}),console.log("Processed salesData:",{monthlyBreakdown:S,weeklyTrendData:w}),{monthlyBreakdown:S,weeklyTrendData:w}},[t]),p=()=>{var N;return(N=g==null?void 0:g.weeklyTrendData)!=null&&N.labels.length?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Weekly PG Acquisition Trend"}),e.jsx(pl,{type:"bar",data:g.weeklyTrendData,height:300,options:{plugins:{title:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of PGs"}}}}})]}):null},f=()=>g!=null&&g.monthlyBreakdown.length?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Detailed Monthly Insights"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g.monthlyBreakdown.map((N,S)=>{const[w,C]=N.period.split("-"),j=new Date(w,C-1).toLocaleString("default",{month:"long"});return e.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.1},className:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-base font-semibold text-gray-800",children:[j," ",w]}),e.jsx(qh,{className:"h-6 w-6 text-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"PGs"}),e.jsx("div",{className:"text-sm font-bold",children:N.totalPGs||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Revenue"}),e.jsx("div",{className:"text-sm font-bold text-green-600",children:x(N.totalRevenue||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Completed"}),e.jsx("div",{className:"text-sm font-bold text-blue-600",children:N.completedPGs||0})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Weekly Breakdown"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(N.weeklyBreakdown).map(([k,E])=>e.jsxs("div",{className:"bg-white rounded-md p-2 text-center shadow-sm",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-600",children:["Week ",k]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[E.pgs," PGs"]})]},k))})]})]},N.period)})})]}):null,b=()=>{const N=(t==null?void 0:t.overallInsights)||{},{totalPGs:S=0,totalRevenue:w=0,completedPGs:C=0}=N;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:e.jsx(qh,{className:"h-6 w-6 text-blue-600"})}),e.jsx("span",{className:"text-sm text-gray-500",children:"Total PGs"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-3",children:e.jsx(Ft,{className:"h-6 w-6 text-green-600"})}),e.jsx("span",{className:"text-sm text-gray-500",children:"Total Revenue"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x(w)})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:e.jsx(_t,{className:"h-6 w-6 text-purple-600"})}),e.jsx("span",{className:"text-sm text-gray-500",children:"Completed PGs"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C})]})]})},y=()=>{const S=((t==null?void 0:t.subscriptionAnalytics)||{}).subscriptionsByPlan||[];if(S.length===0)return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6 text-center text-gray-500",children:"No subscription data available"});const w={labels:S.map(C=>C.planName||"Unknown"),values:S.map(C=>C.count||0)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Subscription Plans Distribution"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(pl,{type:"pie",data:w,height:300,options:{plugins:{title:{display:!1},legend:{position:"right"}}}})}),e.jsx("div",{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map((C,j)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 truncate",children:C.planName||"Unknown Plan"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[C.count||0," Subscriptions"]})]})},j))})})]})]})},v=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)] text-center p-6",children:[e.jsx("div",{className:"bg-red-100 rounded-full p-4 mb-4",children:e.jsx(Rt,{className:"h-12 w-12 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Unable to Load Sales Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We encountered an issue retrieving the sales data. Please try again later."}),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(wt,{className:"inline-block mr-2"})," Retry"]})]});return r?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(qh,{className:"mr-3 text-blue-600"}),"Sales Analytics"]})}),m(),b(),p(),f(),y()]}):v()},Gie=()=>{const{user:t}=Uc();return(t==null?void 0:t.salesRole)==="sub_sales"?e.jsx(DR,{}):e.jsx(IR,{})},qie=()=>{const{user:t,loading:s,hasCheckedAuth:r}=Uc(),[a,n]=h.useState(!1),[i,l]=h.useState(!1);return Hu(),h.useEffect(()=>{console.log("🎬 App render state:",{user:!!t,loading:s,hasCheckedAuth:r});const o=setTimeout(()=>{n(!0)},3e3),c=setTimeout(()=>{s&&(console.log("🚨 Force rendering app due to prolonged loading"),l(!0))},8e3);return()=>{clearTimeout(o),clearTimeout(c)}},[t,s,r]),s&&!i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:a?"Almost ready...":"Loading..."}),a&&e.jsx("button",{onClick:()=>l(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue Anyway"})]})}):(console.log("🚀 App rendering routes..."),e.jsxs(CE,{children:[e.jsx(Ve,{path:"/login",element:e.jsx(OR,{})}),e.jsx(Ve,{path:"/register",element:e.jsx(MR,{})}),e.jsx(Ve,{path:"/forgot-password",element:e.jsx(BR,{})}),e.jsx(Ve,{path:"/reset-password",element:e.jsx(LR,{})}),e.jsx(Ve,{path:"/public/qr/:qrCode",element:e.jsx(bne,{})}),e.jsx(Ve,{path:"/admin/login",element:e.jsx($R,{})}),e.jsx(Ve,{path:"/admin/forgot-password",element:e.jsx(UR,{})}),e.jsx(Ve,{path:"/support-login",element:e.jsx(HR,{})}),e.jsx(Ve,{path:"/token-expiry-test",element:e.jsx(aie,{})}),e.jsx(Ve,{path:"/subscription-test",element:e.jsx(lie,{})}),e.jsx(Ve,{path:"/subscription-debug",element:e.jsx(oie,{})}),e.jsx(Ve,{path:"/subscription-test-page",element:e.jsx(cie,{})}),e.jsx(Ve,{path:"/",element:e.jsx(z1,{})}),e.jsx(Ve,{path:"/dashboard",element:e.jsx(z1,{})}),e.jsxs(Ve,{path:"/superadmin",element:e.jsx(EA,{}),children:[e.jsx(Ve,{path:"dashboard",element:e.jsx(IF,{})}),e.jsx(Ve,{path:"activities",element:e.jsx(Lne,{})}),e.jsx(Ve,{path:"superadmin-activities",element:e.jsx(Wne,{})}),e.jsx(Ve,{path:"ticket-activities",element:e.jsx($ne,{})}),e.jsx(Ve,{path:"pg-management",element:e.jsx(b9,{})}),e.jsx(Ve,{path:"users",element:e.jsx(die,{})}),e.jsx(Ve,{path:"support-staff",element:e.jsx(MF,{})}),e.jsx(Ve,{path:"subscriptions",element:e.jsx(rie,{})}),e.jsx(Ve,{path:"subscriber-management",element:e.jsx(xie,{})}),e.jsx(Ve,{path:"tickets",element:e.jsx(Tne,{})}),e.jsx(Ve,{path:"tickets/:id",element:e.jsx(_ne,{})}),e.jsx(Ve,{path:"payments",element:e.jsx(Hie,{})}),e.jsx(Ve,{path:"analytics",element:e.jsx(Bne,{})}),e.jsx(Ve,{path:"reports",element:e.jsx(Vie,{})}),e.jsx(Ve,{path:"settings",element:e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Settings (Coming Soon)"})}),e.jsx(Ve,{path:"billing",element:e.jsx(pie,{})}),e.jsx(Ve,{path:"sales-managers",element:e.jsx(Lie,{})}),e.jsx(Ve,{path:"sales-analytics",element:e.jsx(zie,{})}),e.jsx(Ve,{path:"security",element:e.jsx(bie,{})}),e.jsx(Ve,{path:"revenue",element:e.jsx(yie,{})})]}),e.jsx(Ve,{path:"/sales/login",element:e.jsx($ie,{})}),e.jsx(Ve,{path:"/sales/change-password",element:e.jsx(t2,{})}),e.jsxs(Ve,{path:"/admin",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(RR,{})}),children:[e.jsx(Ve,{path:"dashboard",element:e.jsx(BF,{})}),e.jsx(Ve,{path:"activities",element:e.jsx(qne,{})}),e.jsx(Ve,{path:"admin-activities",element:e.jsx(Xne,{})}),e.jsx(Ve,{path:"pg-management",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(SK,{})})}),e.jsx(Ve,{path:"settings",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(Sne,{})})}),e.jsx(Ve,{path:"residents",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(TK,{})})}),e.jsx(Ve,{path:"residents/:id",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(lN,{})})}),e.jsx(Ve,{path:"offboarding",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(_K,{})})}),e.jsx(Ve,{path:"room-switching",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(AK,{})})}),e.jsx(Ve,{path:"moved-out",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(RK,{})})}),e.jsx(Ve,{path:"payments",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(kae,{})})}),e.jsx(Ve,{path:"notifications",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(uie,{})})}),e.jsx(Ve,{path:"qr-management",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(hne,{})})}),e.jsx(Ve,{path:"profile",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(lN,{})})}),e.jsx(Ve,{path:"reports",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(V1,{})})}),e.jsx(Ve,{path:"payments-report",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(V1,{})})}),e.jsx(Ve,{path:"room-availability",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(gne,{})})}),e.jsx(Ve,{path:"branch-activities",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(Vne,{})})}),e.jsx(Ve,{path:"tickets",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(Ene,{})})}),e.jsx(Ve,{path:"usage-dashboard",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(vie,{})})}),e.jsx(Ve,{path:"cost-calculator",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(jie,{})})}),e.jsx(Ve,{path:"self-service",element:e.jsx(gr,{requireOnboarding:!1,children:e.jsx(wie,{})})})]}),e.jsxs(Ve,{path:"/support",element:e.jsx(FR,{}),children:[e.jsx(Ve,{path:"dashboard",element:e.jsx(Fne,{})}),e.jsx(Ve,{path:"tickets",element:e.jsx(Rne,{})}),e.jsx(Ve,{path:"tickets/:id",element:e.jsx(Mne,{})}),e.jsx(Ve,{path:"activities",element:e.jsx(Zne,{})}),e.jsx(Ve,{path:"analytics",element:e.jsx(One,{})}),e.jsx(Ve,{path:"profile",element:e.jsx(Dne,{})}),e.jsx(Ve,{path:"settings",element:e.jsx(Ine,{})})]}),e.jsxs(Ve,{path:"/sales",element:e.jsx(Gie,{}),children:[e.jsx(Ve,{index:!0,element:e.jsx(T0,{to:"/sales/dashboard",replace:!0})}),e.jsx(Ve,{path:"dashboard",element:e.jsx(_ie,{})}),e.jsx(Ve,{path:"pg-management",element:e.jsx(Rie,{})}),e.jsx(Ve,{path:"staff",element:e.jsx(Aie,{})}),e.jsx(Ve,{path:"pgs",element:e.jsx(K1,{})}),e.jsx(Ve,{path:"my-pgs",element:e.jsx(K1,{})}),e.jsx(Ve,{path:"performance",element:e.jsx(Fie,{})}),e.jsx(Ve,{path:"reports",element:e.jsx(Die,{})}),e.jsx(Ve,{path:"settings",element:e.jsx(Iie,{})}),e.jsx(Ve,{path:"change-password",element:e.jsx(t2,{})})]}),e.jsx(Ve,{path:"*",element:e.jsx(T0,{to:"/",replace:!0})})]}))};A0.createRoot(document.getElementById("root")).render(e.jsx(Ke.StrictMode,{children:e.jsx(SE,{store:Qs,children:e.jsx(eS,{loading:null,persistor:jA,children:e.jsxs(kE,{children:[e.jsx(qie,{}),e.jsx(sT,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}));export{Bg as _,Ro as a,e as j};
//# sourceMappingURL=index-DLZAx3DA.js.map
